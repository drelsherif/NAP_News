(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function lx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ax={exports:{}},Ac={},cx={exports:{}},Q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var el=Symbol.for("react.element"),ob=Symbol.for("react.portal"),sb=Symbol.for("react.fragment"),lb=Symbol.for("react.strict_mode"),ab=Symbol.for("react.profiler"),cb=Symbol.for("react.provider"),ub=Symbol.for("react.context"),db=Symbol.for("react.forward_ref"),fb=Symbol.for("react.suspense"),pb=Symbol.for("react.memo"),hb=Symbol.for("react.lazy"),tm=Symbol.iterator;function mb(t){return t===null||typeof t!="object"?null:(t=tm&&t[tm]||t["@@iterator"],typeof t=="function"?t:null)}var ux={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dx=Object.assign,fx={};function xo(t,e,n){this.props=t,this.context=e,this.refs=fx,this.updater=n||ux}xo.prototype.isReactComponent={};xo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};xo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function px(){}px.prototype=xo.prototype;function sp(t,e,n){this.props=t,this.context=e,this.refs=fx,this.updater=n||ux}var lp=sp.prototype=new px;lp.constructor=sp;dx(lp,xo.prototype);lp.isPureReactComponent=!0;var nm=Array.isArray,hx=Object.prototype.hasOwnProperty,ap={current:null},mx={key:!0,ref:!0,__self:!0,__source:!0};function gx(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)hx.call(e,r)&&!mx.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:el,type:t,key:o,ref:s,props:i,_owner:ap.current}}function gb(t,e){return{$$typeof:el,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function cp(t){return typeof t=="object"&&t!==null&&t.$$typeof===el}function yb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var rm=/\/+/g;function mu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?yb(""+t.key):e.toString(36)}function Kl(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case el:case ob:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+mu(s,0):r,nm(i)?(n="",t!=null&&(n=t.replace(rm,"$&/")+"/"),Kl(i,e,n,"",function(c){return c})):i!=null&&(cp(i)&&(i=gb(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(rm,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",nm(t))for(var l=0;l<t.length;l++){o=t[l];var a=r+mu(o,l);s+=Kl(o,e,n,a,i)}else if(a=mb(t),typeof a=="function")for(t=a.call(t),l=0;!(o=t.next()).done;)o=o.value,a=r+mu(o,l++),s+=Kl(o,e,n,a,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function hl(t,e,n){if(t==null)return t;var r=[],i=0;return Kl(t,r,"","",function(o){return e.call(n,o,i++)}),r}function xb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ht={current:null},ql={transition:null},vb={ReactCurrentDispatcher:ht,ReactCurrentBatchConfig:ql,ReactCurrentOwner:ap};function yx(){throw Error("act(...) is not supported in production builds of React.")}Q.Children={map:hl,forEach:function(t,e,n){hl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return hl(t,function(){e++}),e},toArray:function(t){return hl(t,function(e){return e})||[]},only:function(t){if(!cp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Q.Component=xo;Q.Fragment=sb;Q.Profiler=ab;Q.PureComponent=sp;Q.StrictMode=lb;Q.Suspense=fb;Q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vb;Q.act=yx;Q.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=dx({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=ap.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)hx.call(e,a)&&!mx.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:el,type:t.type,key:i,ref:o,props:r,_owner:s}};Q.createContext=function(t){return t={$$typeof:ub,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:cb,_context:t},t.Consumer=t};Q.createElement=gx;Q.createFactory=function(t){var e=gx.bind(null,t);return e.type=t,e};Q.createRef=function(){return{current:null}};Q.forwardRef=function(t){return{$$typeof:db,render:t}};Q.isValidElement=cp;Q.lazy=function(t){return{$$typeof:hb,_payload:{_status:-1,_result:t},_init:xb}};Q.memo=function(t,e){return{$$typeof:pb,type:t,compare:e===void 0?null:e}};Q.startTransition=function(t){var e=ql.transition;ql.transition={};try{t()}finally{ql.transition=e}};Q.unstable_act=yx;Q.useCallback=function(t,e){return ht.current.useCallback(t,e)};Q.useContext=function(t){return ht.current.useContext(t)};Q.useDebugValue=function(){};Q.useDeferredValue=function(t){return ht.current.useDeferredValue(t)};Q.useEffect=function(t,e){return ht.current.useEffect(t,e)};Q.useId=function(){return ht.current.useId()};Q.useImperativeHandle=function(t,e,n){return ht.current.useImperativeHandle(t,e,n)};Q.useInsertionEffect=function(t,e){return ht.current.useInsertionEffect(t,e)};Q.useLayoutEffect=function(t,e){return ht.current.useLayoutEffect(t,e)};Q.useMemo=function(t,e){return ht.current.useMemo(t,e)};Q.useReducer=function(t,e,n){return ht.current.useReducer(t,e,n)};Q.useRef=function(t){return ht.current.useRef(t)};Q.useState=function(t){return ht.current.useState(t)};Q.useSyncExternalStore=function(t,e,n){return ht.current.useSyncExternalStore(t,e,n)};Q.useTransition=function(){return ht.current.useTransition()};Q.version="18.3.1";cx.exports=Q;var b=cx.exports;const Z=lx(b);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sb=b,bb=Symbol.for("react.element"),wb=Symbol.for("react.fragment"),kb=Object.prototype.hasOwnProperty,Cb=Sb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Eb={key:!0,ref:!0,__self:!0,__source:!0};function xx(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)kb.call(e,r)&&!Eb.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:bb,type:t,key:o,ref:s,props:i,_owner:Cb.current}}Ac.Fragment=wb;Ac.jsx=xx;Ac.jsxs=xx;ax.exports=Ac;var u=ax.exports,Cd={},vx={exports:{}},zt={},Sx={exports:{}},bx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,H){var V=z.length;z.push(H);e:for(;0<V;){var oe=V-1>>>1,q=z[oe];if(0<i(q,H))z[oe]=H,z[V]=q,V=oe;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var H=z[0],V=z.pop();if(V!==H){z[0]=V;e:for(var oe=0,q=z.length,et=q>>>1;oe<et;){var He=2*(oe+1)-1,en=z[He],xe=He+1,$t=z[xe];if(0>i(en,V))xe<q&&0>i($t,en)?(z[oe]=$t,z[xe]=V,oe=xe):(z[oe]=en,z[He]=V,oe=He);else if(xe<q&&0>i($t,V))z[oe]=$t,z[xe]=V,oe=xe;else break e}}return H}function i(z,H){var V=z.sortIndex-H.sortIndex;return V!==0?V:z.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var a=[],c=[],d=1,f=null,p=3,h=!1,m=!1,g=!1,S=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(z){for(var H=n(c);H!==null;){if(H.callback===null)r(c);else if(H.startTime<=z)r(c),H.sortIndex=H.expirationTime,e(a,H);else break;H=n(c)}}function w(z){if(g=!1,v(z),!m)if(n(a)!==null)m=!0,ke(k);else{var H=n(c);H!==null&&ie(w,H.startTime-z)}}function k(z,H){m=!1,g&&(g=!1,y(E),E=-1),h=!0;var V=p;try{for(v(H),f=n(a);f!==null&&(!(f.expirationTime>H)||z&&!B());){var oe=f.callback;if(typeof oe=="function"){f.callback=null,p=f.priorityLevel;var q=oe(f.expirationTime<=H);H=t.unstable_now(),typeof q=="function"?f.callback=q:f===n(a)&&r(a),v(H)}else r(a);f=n(a)}if(f!==null)var et=!0;else{var He=n(c);He!==null&&ie(w,He.startTime-H),et=!1}return et}finally{f=null,p=V,h=!1}}var T=!1,C=null,E=-1,O=5,N=-1;function B(){return!(t.unstable_now()-N<O)}function X(){if(C!==null){var z=t.unstable_now();N=z;var H=!0;try{H=C(!0,z)}finally{H?ce():(T=!1,C=null)}}else T=!1}var ce;if(typeof x=="function")ce=function(){x(X)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,je=we.port2;we.port1.onmessage=X,ce=function(){je.postMessage(null)}}else ce=function(){S(X,0)};function ke(z){C=z,T||(T=!0,ce())}function ie(z,H){E=S(function(){z(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,ke(k))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(z){switch(p){case 1:case 2:case 3:var H=3;break;default:H=p}var V=p;p=H;try{return z()}finally{p=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,H){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var V=p;p=z;try{return H()}finally{p=V}},t.unstable_scheduleCallback=function(z,H,V){var oe=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?oe+V:oe):V=oe,z){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=V+q,z={id:d++,callback:H,priorityLevel:z,startTime:V,expirationTime:q,sortIndex:-1},V>oe?(z.sortIndex=V,e(c,z),n(a)===null&&z===n(c)&&(g?(y(E),E=-1):g=!0,ie(w,V-oe))):(z.sortIndex=q,e(a,z),m||h||(m=!0,ke(k))),z},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(z){var H=p;return function(){var V=p;p=H;try{return z.apply(this,arguments)}finally{p=V}}}})(bx);Sx.exports=bx;var Tb=Sx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mb=b,Ot=Tb;function I(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wx=new Set,vs={};function bi(t,e){io(t,e),io(t+"Capture",e)}function io(t,e){for(vs[t]=e,t=0;t<e.length;t++)wx.add(e[t])}var Wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ed=Object.prototype.hasOwnProperty,jb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,im={},om={};function Ab(t){return Ed.call(om,t)?!0:Ed.call(im,t)?!1:jb.test(t)?om[t]=!0:(im[t]=!0,!1)}function Db(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Rb(t,e,n,r){if(e===null||typeof e>"u"||Db(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mt(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qe[t]=new mt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qe[e]=new mt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qe[t]=new mt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qe[t]=new mt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qe[t]=new mt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qe[t]=new mt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qe[t]=new mt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qe[t]=new mt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qe[t]=new mt(t,5,!1,t.toLowerCase(),null,!1,!1)});var up=/[\-:]([a-z])/g;function dp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(up,dp);Qe[e]=new mt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(up,dp);Qe[e]=new mt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(up,dp);Qe[e]=new mt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qe[t]=new mt(t,1,!1,t.toLowerCase(),null,!1,!1)});Qe.xlinkHref=new mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qe[t]=new mt(t,1,!1,t.toLowerCase(),null,!0,!0)});function fp(t,e,n,r){var i=Qe.hasOwnProperty(e)?Qe[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Rb(e,n,i,r)&&(n=null),r||i===null?Ab(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Gn=Mb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ml=Symbol.for("react.element"),zi=Symbol.for("react.portal"),Pi=Symbol.for("react.fragment"),pp=Symbol.for("react.strict_mode"),Td=Symbol.for("react.profiler"),kx=Symbol.for("react.provider"),Cx=Symbol.for("react.context"),hp=Symbol.for("react.forward_ref"),Md=Symbol.for("react.suspense"),jd=Symbol.for("react.suspense_list"),mp=Symbol.for("react.memo"),ir=Symbol.for("react.lazy"),Ex=Symbol.for("react.offscreen"),sm=Symbol.iterator;function Do(t){return t===null||typeof t!="object"?null:(t=sm&&t[sm]||t["@@iterator"],typeof t=="function"?t:null)}var ye=Object.assign,gu;function _o(t){if(gu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);gu=e&&e[1]||""}return`
`+gu+t}var yu=!1;function xu(t,e){if(!t||yu)return"";yu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var a=`
`+i[s].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=s&&0<=l);break}}}finally{yu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?_o(t):""}function Ib(t){switch(t.tag){case 5:return _o(t.type);case 16:return _o("Lazy");case 13:return _o("Suspense");case 19:return _o("SuspenseList");case 0:case 2:case 15:return t=xu(t.type,!1),t;case 11:return t=xu(t.type.render,!1),t;case 1:return t=xu(t.type,!0),t;default:return""}}function Ad(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Pi:return"Fragment";case zi:return"Portal";case Td:return"Profiler";case pp:return"StrictMode";case Md:return"Suspense";case jd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Cx:return(t.displayName||"Context")+".Consumer";case kx:return(t._context.displayName||"Context")+".Provider";case hp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case mp:return e=t.displayName||null,e!==null?e:Ad(t.type)||"Memo";case ir:e=t._payload,t=t._init;try{return Ad(t(e))}catch{}}return null}function Ob(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ad(e);case 8:return e===pp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Rr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Tx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Nb(t){var e=Tx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function gl(t){t._valueTracker||(t._valueTracker=Nb(t))}function Mx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Tx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ua(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Dd(t,e){var n=e.checked;return ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function lm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Rr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function jx(t,e){e=e.checked,e!=null&&fp(t,"checked",e,!1)}function Rd(t,e){jx(t,e);var n=Rr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Id(t,e.type,n):e.hasOwnProperty("defaultValue")&&Id(t,e.type,Rr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function am(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Id(t,e,n){(e!=="number"||ua(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ho=Array.isArray;function Gi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Rr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Od(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(I(91));return ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function cm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(I(92));if(Ho(n)){if(1<n.length)throw Error(I(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Rr(n)}}function Ax(t,e){var n=Rr(e.value),r=Rr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function um(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Dx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Dx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var yl,Rx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(yl=yl||document.createElement("div"),yl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=yl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ss(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Go={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zb=["Webkit","ms","Moz","O"];Object.keys(Go).forEach(function(t){zb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Go[e]=Go[t]})});function Ix(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Go.hasOwnProperty(t)&&Go[t]?(""+e).trim():e+"px"}function Ox(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Ix(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Pb=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zd(t,e){if(e){if(Pb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(I(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(I(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(I(61))}if(e.style!=null&&typeof e.style!="object")throw Error(I(62))}}function Pd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ld=null;function gp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $d=null,Yi=null,Qi=null;function dm(t){if(t=rl(t)){if(typeof $d!="function")throw Error(I(280));var e=t.stateNode;e&&(e=Nc(e),$d(t.stateNode,t.type,e))}}function Nx(t){Yi?Qi?Qi.push(t):Qi=[t]:Yi=t}function zx(){if(Yi){var t=Yi,e=Qi;if(Qi=Yi=null,dm(t),e)for(t=0;t<e.length;t++)dm(e[t])}}function Px(t,e){return t(e)}function Lx(){}var vu=!1;function $x(t,e,n){if(vu)return t(e,n);vu=!0;try{return Px(t,e,n)}finally{vu=!1,(Yi!==null||Qi!==null)&&(Lx(),zx())}}function bs(t,e){var n=t.stateNode;if(n===null)return null;var r=Nc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(I(231,e,typeof n));return n}var Fd=!1;if(Wn)try{var Ro={};Object.defineProperty(Ro,"passive",{get:function(){Fd=!0}}),window.addEventListener("test",Ro,Ro),window.removeEventListener("test",Ro,Ro)}catch{Fd=!1}function Lb(t,e,n,r,i,o,s,l,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Yo=!1,da=null,fa=!1,Bd=null,$b={onError:function(t){Yo=!0,da=t}};function Fb(t,e,n,r,i,o,s,l,a){Yo=!1,da=null,Lb.apply($b,arguments)}function Bb(t,e,n,r,i,o,s,l,a){if(Fb.apply(this,arguments),Yo){if(Yo){var c=da;Yo=!1,da=null}else throw Error(I(198));fa||(fa=!0,Bd=c)}}function wi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Fx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function fm(t){if(wi(t)!==t)throw Error(I(188))}function _b(t){var e=t.alternate;if(!e){if(e=wi(t),e===null)throw Error(I(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return fm(i),t;if(o===r)return fm(i),e;o=o.sibling}throw Error(I(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(I(189))}}if(n.alternate!==r)throw Error(I(190))}if(n.tag!==3)throw Error(I(188));return n.stateNode.current===n?t:e}function Bx(t){return t=_b(t),t!==null?_x(t):null}function _x(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=_x(t);if(e!==null)return e;t=t.sibling}return null}var Hx=Ot.unstable_scheduleCallback,pm=Ot.unstable_cancelCallback,Hb=Ot.unstable_shouldYield,Ub=Ot.unstable_requestPaint,Ee=Ot.unstable_now,Vb=Ot.unstable_getCurrentPriorityLevel,yp=Ot.unstable_ImmediatePriority,Ux=Ot.unstable_UserBlockingPriority,pa=Ot.unstable_NormalPriority,Wb=Ot.unstable_LowPriority,Vx=Ot.unstable_IdlePriority,Dc=null,En=null;function Kb(t){if(En&&typeof En.onCommitFiberRoot=="function")try{En.onCommitFiberRoot(Dc,t,void 0,(t.current.flags&128)===128)}catch{}}var cn=Math.clz32?Math.clz32:Gb,qb=Math.log,Jb=Math.LN2;function Gb(t){return t>>>=0,t===0?32:31-(qb(t)/Jb|0)|0}var xl=64,vl=4194304;function Uo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ha(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~i;l!==0?r=Uo(l):(o&=s,o!==0&&(r=Uo(o)))}else s=n&~i,s!==0?r=Uo(s):o!==0&&(r=Uo(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-cn(e),i=1<<n,r|=t[n],e&=~i;return r}function Yb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qb(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-cn(o),l=1<<s,a=i[s];a===-1?(!(l&n)||l&r)&&(i[s]=Yb(l,e)):a<=e&&(t.expiredLanes|=l),o&=~l}}function _d(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Wx(){var t=xl;return xl<<=1,!(xl&4194240)&&(xl=64),t}function Su(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function tl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-cn(e),t[e]=n}function Xb(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-cn(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function xp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-cn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var se=0;function Kx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var qx,vp,Jx,Gx,Yx,Hd=!1,Sl=[],vr=null,Sr=null,br=null,ws=new Map,ks=new Map,ur=[],Zb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hm(t,e){switch(t){case"focusin":case"focusout":vr=null;break;case"dragenter":case"dragleave":Sr=null;break;case"mouseover":case"mouseout":br=null;break;case"pointerover":case"pointerout":ws.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ks.delete(e.pointerId)}}function Io(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=rl(e),e!==null&&vp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function ew(t,e,n,r,i){switch(e){case"focusin":return vr=Io(vr,t,e,n,r,i),!0;case"dragenter":return Sr=Io(Sr,t,e,n,r,i),!0;case"mouseover":return br=Io(br,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return ws.set(o,Io(ws.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ks.set(o,Io(ks.get(o)||null,t,e,n,r,i)),!0}return!1}function Qx(t){var e=Jr(t.target);if(e!==null){var n=wi(e);if(n!==null){if(e=n.tag,e===13){if(e=Fx(n),e!==null){t.blockedOn=e,Yx(t.priority,function(){Jx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Jl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ud(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ld=r,n.target.dispatchEvent(r),Ld=null}else return e=rl(n),e!==null&&vp(e),t.blockedOn=n,!1;e.shift()}return!0}function mm(t,e,n){Jl(t)&&n.delete(e)}function tw(){Hd=!1,vr!==null&&Jl(vr)&&(vr=null),Sr!==null&&Jl(Sr)&&(Sr=null),br!==null&&Jl(br)&&(br=null),ws.forEach(mm),ks.forEach(mm)}function Oo(t,e){t.blockedOn===e&&(t.blockedOn=null,Hd||(Hd=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,tw)))}function Cs(t){function e(i){return Oo(i,t)}if(0<Sl.length){Oo(Sl[0],t);for(var n=1;n<Sl.length;n++){var r=Sl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(vr!==null&&Oo(vr,t),Sr!==null&&Oo(Sr,t),br!==null&&Oo(br,t),ws.forEach(e),ks.forEach(e),n=0;n<ur.length;n++)r=ur[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ur.length&&(n=ur[0],n.blockedOn===null);)Qx(n),n.blockedOn===null&&ur.shift()}var Xi=Gn.ReactCurrentBatchConfig,ma=!0;function nw(t,e,n,r){var i=se,o=Xi.transition;Xi.transition=null;try{se=1,Sp(t,e,n,r)}finally{se=i,Xi.transition=o}}function rw(t,e,n,r){var i=se,o=Xi.transition;Xi.transition=null;try{se=4,Sp(t,e,n,r)}finally{se=i,Xi.transition=o}}function Sp(t,e,n,r){if(ma){var i=Ud(t,e,n,r);if(i===null)Du(t,e,r,ga,n),hm(t,r);else if(ew(i,t,e,n,r))r.stopPropagation();else if(hm(t,r),e&4&&-1<Zb.indexOf(t)){for(;i!==null;){var o=rl(i);if(o!==null&&qx(o),o=Ud(t,e,n,r),o===null&&Du(t,e,r,ga,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Du(t,e,r,null,n)}}var ga=null;function Ud(t,e,n,r){if(ga=null,t=gp(r),t=Jr(t),t!==null)if(e=wi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Fx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ga=t,null}function Xx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vb()){case yp:return 1;case Ux:return 4;case pa:case Wb:return 16;case Vx:return 536870912;default:return 16}default:return 16}}var hr=null,bp=null,Gl=null;function Zx(){if(Gl)return Gl;var t,e=bp,n=e.length,r,i="value"in hr?hr.value:hr.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return Gl=i.slice(t,1<r?1-r:void 0)}function Yl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function bl(){return!0}function gm(){return!1}function Pt(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?bl:gm,this.isPropagationStopped=gm,this}return ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bl)},persist:function(){},isPersistent:bl}),e}var vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wp=Pt(vo),nl=ye({},vo,{view:0,detail:0}),iw=Pt(nl),bu,wu,No,Rc=ye({},nl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==No&&(No&&t.type==="mousemove"?(bu=t.screenX-No.screenX,wu=t.screenY-No.screenY):wu=bu=0,No=t),bu)},movementY:function(t){return"movementY"in t?t.movementY:wu}}),ym=Pt(Rc),ow=ye({},Rc,{dataTransfer:0}),sw=Pt(ow),lw=ye({},nl,{relatedTarget:0}),ku=Pt(lw),aw=ye({},vo,{animationName:0,elapsedTime:0,pseudoElement:0}),cw=Pt(aw),uw=ye({},vo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),dw=Pt(uw),fw=ye({},vo,{data:0}),xm=Pt(fw),pw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=mw[t])?!!e[t]:!1}function kp(){return gw}var yw=ye({},nl,{key:function(t){if(t.key){var e=pw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Yl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kp,charCode:function(t){return t.type==="keypress"?Yl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xw=Pt(yw),vw=ye({},Rc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vm=Pt(vw),Sw=ye({},nl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kp}),bw=Pt(Sw),ww=ye({},vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),kw=Pt(ww),Cw=ye({},Rc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ew=Pt(Cw),Tw=[9,13,27,32],Cp=Wn&&"CompositionEvent"in window,Qo=null;Wn&&"documentMode"in document&&(Qo=document.documentMode);var Mw=Wn&&"TextEvent"in window&&!Qo,e0=Wn&&(!Cp||Qo&&8<Qo&&11>=Qo),Sm=" ",bm=!1;function t0(t,e){switch(t){case"keyup":return Tw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function n0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Li=!1;function jw(t,e){switch(t){case"compositionend":return n0(e);case"keypress":return e.which!==32?null:(bm=!0,Sm);case"textInput":return t=e.data,t===Sm&&bm?null:t;default:return null}}function Aw(t,e){if(Li)return t==="compositionend"||!Cp&&t0(t,e)?(t=Zx(),Gl=bp=hr=null,Li=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return e0&&e.locale!=="ko"?null:e.data;default:return null}}var Dw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Dw[t.type]:e==="textarea"}function r0(t,e,n,r){Nx(r),e=ya(e,"onChange"),0<e.length&&(n=new wp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xo=null,Es=null;function Rw(t){h0(t,0)}function Ic(t){var e=Bi(t);if(Mx(e))return t}function Iw(t,e){if(t==="change")return e}var i0=!1;if(Wn){var Cu;if(Wn){var Eu="oninput"in document;if(!Eu){var km=document.createElement("div");km.setAttribute("oninput","return;"),Eu=typeof km.oninput=="function"}Cu=Eu}else Cu=!1;i0=Cu&&(!document.documentMode||9<document.documentMode)}function Cm(){Xo&&(Xo.detachEvent("onpropertychange",o0),Es=Xo=null)}function o0(t){if(t.propertyName==="value"&&Ic(Es)){var e=[];r0(e,Es,t,gp(t)),$x(Rw,e)}}function Ow(t,e,n){t==="focusin"?(Cm(),Xo=e,Es=n,Xo.attachEvent("onpropertychange",o0)):t==="focusout"&&Cm()}function Nw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ic(Es)}function zw(t,e){if(t==="click")return Ic(e)}function Pw(t,e){if(t==="input"||t==="change")return Ic(e)}function Lw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dn=typeof Object.is=="function"?Object.is:Lw;function Ts(t,e){if(dn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ed.call(e,i)||!dn(t[i],e[i]))return!1}return!0}function Em(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Tm(t,e){var n=Em(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Em(n)}}function s0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?s0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function l0(){for(var t=window,e=ua();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ua(t.document)}return e}function Ep(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function $w(t){var e=l0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&s0(n.ownerDocument.documentElement,n)){if(r!==null&&Ep(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Tm(n,o);var s=Tm(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Fw=Wn&&"documentMode"in document&&11>=document.documentMode,$i=null,Vd=null,Zo=null,Wd=!1;function Mm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Wd||$i==null||$i!==ua(r)||(r=$i,"selectionStart"in r&&Ep(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zo&&Ts(Zo,r)||(Zo=r,r=ya(Vd,"onSelect"),0<r.length&&(e=new wp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=$i)))}function wl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Fi={animationend:wl("Animation","AnimationEnd"),animationiteration:wl("Animation","AnimationIteration"),animationstart:wl("Animation","AnimationStart"),transitionend:wl("Transition","TransitionEnd")},Tu={},a0={};Wn&&(a0=document.createElement("div").style,"AnimationEvent"in window||(delete Fi.animationend.animation,delete Fi.animationiteration.animation,delete Fi.animationstart.animation),"TransitionEvent"in window||delete Fi.transitionend.transition);function Oc(t){if(Tu[t])return Tu[t];if(!Fi[t])return t;var e=Fi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in a0)return Tu[t]=e[n];return t}var c0=Oc("animationend"),u0=Oc("animationiteration"),d0=Oc("animationstart"),f0=Oc("transitionend"),p0=new Map,jm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(t,e){p0.set(t,e),bi(e,[t])}for(var Mu=0;Mu<jm.length;Mu++){var ju=jm[Mu],Bw=ju.toLowerCase(),_w=ju[0].toUpperCase()+ju.slice(1);Nr(Bw,"on"+_w)}Nr(c0,"onAnimationEnd");Nr(u0,"onAnimationIteration");Nr(d0,"onAnimationStart");Nr("dblclick","onDoubleClick");Nr("focusin","onFocus");Nr("focusout","onBlur");Nr(f0,"onTransitionEnd");io("onMouseEnter",["mouseout","mouseover"]);io("onMouseLeave",["mouseout","mouseover"]);io("onPointerEnter",["pointerout","pointerover"]);io("onPointerLeave",["pointerout","pointerover"]);bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bi("onBeforeInput",["compositionend","keypress","textInput","paste"]);bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vo));function Am(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Bb(r,e,void 0,t),t.currentTarget=null}function h0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==o&&i.isPropagationStopped())break e;Am(i,l,c),o=a}else for(s=0;s<r.length;s++){if(l=r[s],a=l.instance,c=l.currentTarget,l=l.listener,a!==o&&i.isPropagationStopped())break e;Am(i,l,c),o=a}}}if(fa)throw t=Bd,fa=!1,Bd=null,t}function ue(t,e){var n=e[Yd];n===void 0&&(n=e[Yd]=new Set);var r=t+"__bubble";n.has(r)||(m0(e,t,2,!1),n.add(r))}function Au(t,e,n){var r=0;e&&(r|=4),m0(n,t,r,e)}var kl="_reactListening"+Math.random().toString(36).slice(2);function Ms(t){if(!t[kl]){t[kl]=!0,wx.forEach(function(n){n!=="selectionchange"&&(Hw.has(n)||Au(n,!1,t),Au(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[kl]||(e[kl]=!0,Au("selectionchange",!1,e))}}function m0(t,e,n,r){switch(Xx(e)){case 1:var i=nw;break;case 4:i=rw;break;default:i=Sp}n=i.bind(null,e,n,t),i=void 0,!Fd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Du(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var a=s.tag;if((a===3||a===4)&&(a=s.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;s=s.return}for(;l!==null;){if(s=Jr(l),s===null)return;if(a=s.tag,a===5||a===6){r=o=s;continue e}l=l.parentNode}}r=r.return}$x(function(){var c=o,d=gp(n),f=[];e:{var p=p0.get(t);if(p!==void 0){var h=wp,m=t;switch(t){case"keypress":if(Yl(n)===0)break e;case"keydown":case"keyup":h=xw;break;case"focusin":m="focus",h=ku;break;case"focusout":m="blur",h=ku;break;case"beforeblur":case"afterblur":h=ku;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=ym;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=sw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=bw;break;case c0:case u0:case d0:h=cw;break;case f0:h=kw;break;case"scroll":h=iw;break;case"wheel":h=Ew;break;case"copy":case"cut":case"paste":h=dw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=vm}var g=(e&4)!==0,S=!g&&t==="scroll",y=g?p!==null?p+"Capture":null:p;g=[];for(var x=c,v;x!==null;){v=x;var w=v.stateNode;if(v.tag===5&&w!==null&&(v=w,y!==null&&(w=bs(x,y),w!=null&&g.push(js(x,w,v)))),S)break;x=x.return}0<g.length&&(p=new h(p,m,null,n,d),f.push({event:p,listeners:g}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",p&&n!==Ld&&(m=n.relatedTarget||n.fromElement)&&(Jr(m)||m[Kn]))break e;if((h||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,h?(m=n.relatedTarget||n.toElement,h=c,m=m?Jr(m):null,m!==null&&(S=wi(m),m!==S||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=c),h!==m)){if(g=ym,w="onMouseLeave",y="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(g=vm,w="onPointerLeave",y="onPointerEnter",x="pointer"),S=h==null?p:Bi(h),v=m==null?p:Bi(m),p=new g(w,x+"leave",h,n,d),p.target=S,p.relatedTarget=v,w=null,Jr(d)===c&&(g=new g(y,x+"enter",m,n,d),g.target=v,g.relatedTarget=S,w=g),S=w,h&&m)t:{for(g=h,y=m,x=0,v=g;v;v=Ai(v))x++;for(v=0,w=y;w;w=Ai(w))v++;for(;0<x-v;)g=Ai(g),x--;for(;0<v-x;)y=Ai(y),v--;for(;x--;){if(g===y||y!==null&&g===y.alternate)break t;g=Ai(g),y=Ai(y)}g=null}else g=null;h!==null&&Dm(f,p,h,g,!1),m!==null&&S!==null&&Dm(f,S,m,g,!0)}}e:{if(p=c?Bi(c):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var k=Iw;else if(wm(p))if(i0)k=Pw;else{k=Nw;var T=Ow}else(h=p.nodeName)&&h.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(k=zw);if(k&&(k=k(t,c))){r0(f,k,n,d);break e}T&&T(t,p,c),t==="focusout"&&(T=p._wrapperState)&&T.controlled&&p.type==="number"&&Id(p,"number",p.value)}switch(T=c?Bi(c):window,t){case"focusin":(wm(T)||T.contentEditable==="true")&&($i=T,Vd=c,Zo=null);break;case"focusout":Zo=Vd=$i=null;break;case"mousedown":Wd=!0;break;case"contextmenu":case"mouseup":case"dragend":Wd=!1,Mm(f,n,d);break;case"selectionchange":if(Fw)break;case"keydown":case"keyup":Mm(f,n,d)}var C;if(Cp)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Li?t0(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(e0&&n.locale!=="ko"&&(Li||E!=="onCompositionStart"?E==="onCompositionEnd"&&Li&&(C=Zx()):(hr=d,bp="value"in hr?hr.value:hr.textContent,Li=!0)),T=ya(c,E),0<T.length&&(E=new xm(E,t,null,n,d),f.push({event:E,listeners:T}),C?E.data=C:(C=n0(n),C!==null&&(E.data=C)))),(C=Mw?jw(t,n):Aw(t,n))&&(c=ya(c,"onBeforeInput"),0<c.length&&(d=new xm("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=C))}h0(f,e)})}function js(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ya(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=bs(t,n),o!=null&&r.unshift(js(t,o,i)),o=bs(t,e),o!=null&&r.push(js(t,o,i))),t=t.return}return r}function Ai(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Dm(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,i?(a=bs(n,o),a!=null&&s.unshift(js(n,a,l))):i||(a=bs(n,o),a!=null&&s.push(js(n,a,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var Uw=/\r\n?/g,Vw=/\u0000|\uFFFD/g;function Rm(t){return(typeof t=="string"?t:""+t).replace(Uw,`
`).replace(Vw,"")}function Cl(t,e,n){if(e=Rm(e),Rm(t)!==e&&n)throw Error(I(425))}function xa(){}var Kd=null,qd=null;function Jd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Gd=typeof setTimeout=="function"?setTimeout:void 0,Ww=typeof clearTimeout=="function"?clearTimeout:void 0,Im=typeof Promise=="function"?Promise:void 0,Kw=typeof queueMicrotask=="function"?queueMicrotask:typeof Im<"u"?function(t){return Im.resolve(null).then(t).catch(qw)}:Gd;function qw(t){setTimeout(function(){throw t})}function Ru(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Cs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Cs(e)}function wr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Om(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var So=Math.random().toString(36).slice(2),kn="__reactFiber$"+So,As="__reactProps$"+So,Kn="__reactContainer$"+So,Yd="__reactEvents$"+So,Jw="__reactListeners$"+So,Gw="__reactHandles$"+So;function Jr(t){var e=t[kn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Kn]||n[kn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Om(t);t!==null;){if(n=t[kn])return n;t=Om(t)}return e}t=n,n=t.parentNode}return null}function rl(t){return t=t[kn]||t[Kn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Bi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(I(33))}function Nc(t){return t[As]||null}var Qd=[],_i=-1;function zr(t){return{current:t}}function fe(t){0>_i||(t.current=Qd[_i],Qd[_i]=null,_i--)}function ae(t,e){_i++,Qd[_i]=t.current,t.current=e}var Ir={},st=zr(Ir),vt=zr(!1),ci=Ir;function oo(t,e){var n=t.type.contextTypes;if(!n)return Ir;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function St(t){return t=t.childContextTypes,t!=null}function va(){fe(vt),fe(st)}function Nm(t,e,n){if(st.current!==Ir)throw Error(I(168));ae(st,e),ae(vt,n)}function g0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(I(108,Ob(t)||"Unknown",i));return ye({},n,r)}function Sa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ir,ci=st.current,ae(st,t),ae(vt,vt.current),!0}function zm(t,e,n){var r=t.stateNode;if(!r)throw Error(I(169));n?(t=g0(t,e,ci),r.__reactInternalMemoizedMergedChildContext=t,fe(vt),fe(st),ae(st,t)):fe(vt),ae(vt,n)}var $n=null,zc=!1,Iu=!1;function y0(t){$n===null?$n=[t]:$n.push(t)}function Yw(t){zc=!0,y0(t)}function Pr(){if(!Iu&&$n!==null){Iu=!0;var t=0,e=se;try{var n=$n;for(se=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}$n=null,zc=!1}catch(i){throw $n!==null&&($n=$n.slice(t+1)),Hx(yp,Pr),i}finally{se=e,Iu=!1}}return null}var Hi=[],Ui=0,ba=null,wa=0,Vt=[],Wt=0,ui=null,Fn=1,Bn="";function Ur(t,e){Hi[Ui++]=wa,Hi[Ui++]=ba,ba=t,wa=e}function x0(t,e,n){Vt[Wt++]=Fn,Vt[Wt++]=Bn,Vt[Wt++]=ui,ui=t;var r=Fn;t=Bn;var i=32-cn(r)-1;r&=~(1<<i),n+=1;var o=32-cn(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Fn=1<<32-cn(e)+i|n<<i|r,Bn=o+t}else Fn=1<<o|n<<i|r,Bn=t}function Tp(t){t.return!==null&&(Ur(t,1),x0(t,1,0))}function Mp(t){for(;t===ba;)ba=Hi[--Ui],Hi[Ui]=null,wa=Hi[--Ui],Hi[Ui]=null;for(;t===ui;)ui=Vt[--Wt],Vt[Wt]=null,Bn=Vt[--Wt],Vt[Wt]=null,Fn=Vt[--Wt],Vt[Wt]=null}var Rt=null,Dt=null,he=!1,sn=null;function v0(t,e){var n=qt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Pm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Rt=t,Dt=wr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Rt=t,Dt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ui!==null?{id:Fn,overflow:Bn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Rt=t,Dt=null,!0):!1;default:return!1}}function Xd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Zd(t){if(he){var e=Dt;if(e){var n=e;if(!Pm(t,e)){if(Xd(t))throw Error(I(418));e=wr(n.nextSibling);var r=Rt;e&&Pm(t,e)?v0(r,n):(t.flags=t.flags&-4097|2,he=!1,Rt=t)}}else{if(Xd(t))throw Error(I(418));t.flags=t.flags&-4097|2,he=!1,Rt=t}}}function Lm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Rt=t}function El(t){if(t!==Rt)return!1;if(!he)return Lm(t),he=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Jd(t.type,t.memoizedProps)),e&&(e=Dt)){if(Xd(t))throw S0(),Error(I(418));for(;e;)v0(t,e),e=wr(e.nextSibling)}if(Lm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(I(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Dt=wr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Dt=null}}else Dt=Rt?wr(t.stateNode.nextSibling):null;return!0}function S0(){for(var t=Dt;t;)t=wr(t.nextSibling)}function so(){Dt=Rt=null,he=!1}function jp(t){sn===null?sn=[t]:sn.push(t)}var Qw=Gn.ReactCurrentBatchConfig;function zo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(I(309));var r=n.stateNode}if(!r)throw Error(I(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=i.refs;s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(I(284));if(!n._owner)throw Error(I(290,t))}return t}function Tl(t,e){throw t=Object.prototype.toString.call(e),Error(I(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function $m(t){var e=t._init;return e(t._payload)}function b0(t){function e(y,x){if(t){var v=y.deletions;v===null?(y.deletions=[x],y.flags|=16):v.push(x)}}function n(y,x){if(!t)return null;for(;x!==null;)e(y,x),x=x.sibling;return null}function r(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function i(y,x){return y=Tr(y,x),y.index=0,y.sibling=null,y}function o(y,x,v){return y.index=v,t?(v=y.alternate,v!==null?(v=v.index,v<x?(y.flags|=2,x):v):(y.flags|=2,x)):(y.flags|=1048576,x)}function s(y){return t&&y.alternate===null&&(y.flags|=2),y}function l(y,x,v,w){return x===null||x.tag!==6?(x=Fu(v,y.mode,w),x.return=y,x):(x=i(x,v),x.return=y,x)}function a(y,x,v,w){var k=v.type;return k===Pi?d(y,x,v.props.children,w,v.key):x!==null&&(x.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ir&&$m(k)===x.type)?(w=i(x,v.props),w.ref=zo(y,x,v),w.return=y,w):(w=ra(v.type,v.key,v.props,null,y.mode,w),w.ref=zo(y,x,v),w.return=y,w)}function c(y,x,v,w){return x===null||x.tag!==4||x.stateNode.containerInfo!==v.containerInfo||x.stateNode.implementation!==v.implementation?(x=Bu(v,y.mode,w),x.return=y,x):(x=i(x,v.children||[]),x.return=y,x)}function d(y,x,v,w,k){return x===null||x.tag!==7?(x=ri(v,y.mode,w,k),x.return=y,x):(x=i(x,v),x.return=y,x)}function f(y,x,v){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Fu(""+x,y.mode,v),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ml:return v=ra(x.type,x.key,x.props,null,y.mode,v),v.ref=zo(y,null,x),v.return=y,v;case zi:return x=Bu(x,y.mode,v),x.return=y,x;case ir:var w=x._init;return f(y,w(x._payload),v)}if(Ho(x)||Do(x))return x=ri(x,y.mode,v,null),x.return=y,x;Tl(y,x)}return null}function p(y,x,v,w){var k=x!==null?x.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return k!==null?null:l(y,x,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ml:return v.key===k?a(y,x,v,w):null;case zi:return v.key===k?c(y,x,v,w):null;case ir:return k=v._init,p(y,x,k(v._payload),w)}if(Ho(v)||Do(v))return k!==null?null:d(y,x,v,w,null);Tl(y,v)}return null}function h(y,x,v,w,k){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(v)||null,l(x,y,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ml:return y=y.get(w.key===null?v:w.key)||null,a(x,y,w,k);case zi:return y=y.get(w.key===null?v:w.key)||null,c(x,y,w,k);case ir:var T=w._init;return h(y,x,v,T(w._payload),k)}if(Ho(w)||Do(w))return y=y.get(v)||null,d(x,y,w,k,null);Tl(x,w)}return null}function m(y,x,v,w){for(var k=null,T=null,C=x,E=x=0,O=null;C!==null&&E<v.length;E++){C.index>E?(O=C,C=null):O=C.sibling;var N=p(y,C,v[E],w);if(N===null){C===null&&(C=O);break}t&&C&&N.alternate===null&&e(y,C),x=o(N,x,E),T===null?k=N:T.sibling=N,T=N,C=O}if(E===v.length)return n(y,C),he&&Ur(y,E),k;if(C===null){for(;E<v.length;E++)C=f(y,v[E],w),C!==null&&(x=o(C,x,E),T===null?k=C:T.sibling=C,T=C);return he&&Ur(y,E),k}for(C=r(y,C);E<v.length;E++)O=h(C,y,E,v[E],w),O!==null&&(t&&O.alternate!==null&&C.delete(O.key===null?E:O.key),x=o(O,x,E),T===null?k=O:T.sibling=O,T=O);return t&&C.forEach(function(B){return e(y,B)}),he&&Ur(y,E),k}function g(y,x,v,w){var k=Do(v);if(typeof k!="function")throw Error(I(150));if(v=k.call(v),v==null)throw Error(I(151));for(var T=k=null,C=x,E=x=0,O=null,N=v.next();C!==null&&!N.done;E++,N=v.next()){C.index>E?(O=C,C=null):O=C.sibling;var B=p(y,C,N.value,w);if(B===null){C===null&&(C=O);break}t&&C&&B.alternate===null&&e(y,C),x=o(B,x,E),T===null?k=B:T.sibling=B,T=B,C=O}if(N.done)return n(y,C),he&&Ur(y,E),k;if(C===null){for(;!N.done;E++,N=v.next())N=f(y,N.value,w),N!==null&&(x=o(N,x,E),T===null?k=N:T.sibling=N,T=N);return he&&Ur(y,E),k}for(C=r(y,C);!N.done;E++,N=v.next())N=h(C,y,E,N.value,w),N!==null&&(t&&N.alternate!==null&&C.delete(N.key===null?E:N.key),x=o(N,x,E),T===null?k=N:T.sibling=N,T=N);return t&&C.forEach(function(X){return e(y,X)}),he&&Ur(y,E),k}function S(y,x,v,w){if(typeof v=="object"&&v!==null&&v.type===Pi&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case ml:e:{for(var k=v.key,T=x;T!==null;){if(T.key===k){if(k=v.type,k===Pi){if(T.tag===7){n(y,T.sibling),x=i(T,v.props.children),x.return=y,y=x;break e}}else if(T.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ir&&$m(k)===T.type){n(y,T.sibling),x=i(T,v.props),x.ref=zo(y,T,v),x.return=y,y=x;break e}n(y,T);break}else e(y,T);T=T.sibling}v.type===Pi?(x=ri(v.props.children,y.mode,w,v.key),x.return=y,y=x):(w=ra(v.type,v.key,v.props,null,y.mode,w),w.ref=zo(y,x,v),w.return=y,y=w)}return s(y);case zi:e:{for(T=v.key;x!==null;){if(x.key===T)if(x.tag===4&&x.stateNode.containerInfo===v.containerInfo&&x.stateNode.implementation===v.implementation){n(y,x.sibling),x=i(x,v.children||[]),x.return=y,y=x;break e}else{n(y,x);break}else e(y,x);x=x.sibling}x=Bu(v,y.mode,w),x.return=y,y=x}return s(y);case ir:return T=v._init,S(y,x,T(v._payload),w)}if(Ho(v))return m(y,x,v,w);if(Do(v))return g(y,x,v,w);Tl(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,x!==null&&x.tag===6?(n(y,x.sibling),x=i(x,v),x.return=y,y=x):(n(y,x),x=Fu(v,y.mode,w),x.return=y,y=x),s(y)):n(y,x)}return S}var lo=b0(!0),w0=b0(!1),ka=zr(null),Ca=null,Vi=null,Ap=null;function Dp(){Ap=Vi=Ca=null}function Rp(t){var e=ka.current;fe(ka),t._currentValue=e}function ef(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Zi(t,e){Ca=t,Ap=Vi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(xt=!0),t.firstContext=null)}function Xt(t){var e=t._currentValue;if(Ap!==t)if(t={context:t,memoizedValue:e,next:null},Vi===null){if(Ca===null)throw Error(I(308));Vi=t,Ca.dependencies={lanes:0,firstContext:t}}else Vi=Vi.next=t;return e}var Gr=null;function Ip(t){Gr===null?Gr=[t]:Gr.push(t)}function k0(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ip(e)):(n.next=i.next,i.next=n),e.interleaved=n,qn(t,r)}function qn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var or=!1;function Op(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function C0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Hn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function kr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ee&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,qn(t,n)}return i=r.interleaved,i===null?(e.next=e,Ip(r)):(e.next=i.next,i.next=e),r.interleaved=e,qn(t,n)}function Ql(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xp(t,n)}}function Fm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ea(t,e,n,r){var i=t.updateQueue;or=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,c=a.next;a.next=null,s===null?o=c:s.next=c,s=a;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==s&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=a))}if(o!==null){var f=i.baseState;s=0,d=c=a=null,l=o;do{var p=l.lane,h=l.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=t,g=l;switch(p=e,h=n,g.tag){case 1:if(m=g.payload,typeof m=="function"){f=m.call(h,f,p);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,p=typeof m=="function"?m.call(h,f,p):m,p==null)break e;f=ye({},f,p);break e;case 2:or=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[l]:p.push(l))}else h={eventTime:h,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=h,a=f):d=d.next=h,s|=p;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;p=l,l=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(a=f),i.baseState=a,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);fi|=s,t.lanes=s,t.memoizedState=f}}function Bm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(I(191,i));i.call(r)}}}var il={},Tn=zr(il),Ds=zr(il),Rs=zr(il);function Yr(t){if(t===il)throw Error(I(174));return t}function Np(t,e){switch(ae(Rs,e),ae(Ds,t),ae(Tn,il),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Nd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Nd(e,t)}fe(Tn),ae(Tn,e)}function ao(){fe(Tn),fe(Ds),fe(Rs)}function E0(t){Yr(Rs.current);var e=Yr(Tn.current),n=Nd(e,t.type);e!==n&&(ae(Ds,t),ae(Tn,n))}function zp(t){Ds.current===t&&(fe(Tn),fe(Ds))}var me=zr(0);function Ta(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ou=[];function Pp(){for(var t=0;t<Ou.length;t++)Ou[t]._workInProgressVersionPrimary=null;Ou.length=0}var Xl=Gn.ReactCurrentDispatcher,Nu=Gn.ReactCurrentBatchConfig,di=0,ge=null,Ae=null,ze=null,Ma=!1,es=!1,Is=0,Xw=0;function nt(){throw Error(I(321))}function Lp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!dn(t[n],e[n]))return!1;return!0}function $p(t,e,n,r,i,o){if(di=o,ge=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xl.current=t===null||t.memoizedState===null?nk:rk,t=n(r,i),es){o=0;do{if(es=!1,Is=0,25<=o)throw Error(I(301));o+=1,ze=Ae=null,e.updateQueue=null,Xl.current=ik,t=n(r,i)}while(es)}if(Xl.current=ja,e=Ae!==null&&Ae.next!==null,di=0,ze=Ae=ge=null,Ma=!1,e)throw Error(I(300));return t}function Fp(){var t=Is!==0;return Is=0,t}function vn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?ge.memoizedState=ze=t:ze=ze.next=t,ze}function Zt(){if(Ae===null){var t=ge.alternate;t=t!==null?t.memoizedState:null}else t=Ae.next;var e=ze===null?ge.memoizedState:ze.next;if(e!==null)ze=e,Ae=t;else{if(t===null)throw Error(I(310));Ae=t,t={memoizedState:Ae.memoizedState,baseState:Ae.baseState,baseQueue:Ae.baseQueue,queue:Ae.queue,next:null},ze===null?ge.memoizedState=ze=t:ze=ze.next=t}return ze}function Os(t,e){return typeof e=="function"?e(t):e}function zu(t){var e=Zt(),n=e.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=t;var r=Ae,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,a=null,c=o;do{var d=c.lane;if((di&d)===d)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=f,s=r):a=a.next=f,ge.lanes|=d,fi|=d}c=c.next}while(c!==null&&c!==o);a===null?s=r:a.next=l,dn(r,e.memoizedState)||(xt=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,ge.lanes|=o,fi|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Pu(t){var e=Zt(),n=e.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);dn(o,e.memoizedState)||(xt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function T0(){}function M0(t,e){var n=ge,r=Zt(),i=e(),o=!dn(r.memoizedState,i);if(o&&(r.memoizedState=i,xt=!0),r=r.queue,Bp(D0.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||ze!==null&&ze.memoizedState.tag&1){if(n.flags|=2048,Ns(9,A0.bind(null,n,r,i,e),void 0,null),$e===null)throw Error(I(349));di&30||j0(n,e,i)}return i}function j0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ge.updateQueue,e===null?(e={lastEffect:null,stores:null},ge.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function A0(t,e,n,r){e.value=n,e.getSnapshot=r,R0(e)&&I0(t)}function D0(t,e,n){return n(function(){R0(e)&&I0(t)})}function R0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!dn(t,n)}catch{return!0}}function I0(t){var e=qn(t,1);e!==null&&un(e,t,1,-1)}function _m(t){var e=vn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Os,lastRenderedState:t},e.queue=t,t=t.dispatch=tk.bind(null,ge,t),[e.memoizedState,t]}function Ns(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ge.updateQueue,e===null?(e={lastEffect:null,stores:null},ge.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function O0(){return Zt().memoizedState}function Zl(t,e,n,r){var i=vn();ge.flags|=t,i.memoizedState=Ns(1|e,n,void 0,r===void 0?null:r)}function Pc(t,e,n,r){var i=Zt();r=r===void 0?null:r;var o=void 0;if(Ae!==null){var s=Ae.memoizedState;if(o=s.destroy,r!==null&&Lp(r,s.deps)){i.memoizedState=Ns(e,n,o,r);return}}ge.flags|=t,i.memoizedState=Ns(1|e,n,o,r)}function Hm(t,e){return Zl(8390656,8,t,e)}function Bp(t,e){return Pc(2048,8,t,e)}function N0(t,e){return Pc(4,2,t,e)}function z0(t,e){return Pc(4,4,t,e)}function P0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function L0(t,e,n){return n=n!=null?n.concat([t]):null,Pc(4,4,P0.bind(null,e,t),n)}function _p(){}function $0(t,e){var n=Zt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Lp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function F0(t,e){var n=Zt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Lp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function B0(t,e,n){return di&21?(dn(n,e)||(n=Wx(),ge.lanes|=n,fi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,xt=!0),t.memoizedState=n)}function Zw(t,e){var n=se;se=n!==0&&4>n?n:4,t(!0);var r=Nu.transition;Nu.transition={};try{t(!1),e()}finally{se=n,Nu.transition=r}}function _0(){return Zt().memoizedState}function ek(t,e,n){var r=Er(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},H0(t))U0(e,n);else if(n=k0(t,e,n,r),n!==null){var i=ut();un(n,t,r,i),V0(n,e,r)}}function tk(t,e,n){var r=Er(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(H0(t))U0(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(i.hasEagerState=!0,i.eagerState=l,dn(l,s)){var a=e.interleaved;a===null?(i.next=i,Ip(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=k0(t,e,i,r),n!==null&&(i=ut(),un(n,t,r,i),V0(n,e,r))}}function H0(t){var e=t.alternate;return t===ge||e!==null&&e===ge}function U0(t,e){es=Ma=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function V0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xp(t,n)}}var ja={readContext:Xt,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},nk={readContext:Xt,useCallback:function(t,e){return vn().memoizedState=[t,e===void 0?null:e],t},useContext:Xt,useEffect:Hm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Zl(4194308,4,P0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Zl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Zl(4,2,t,e)},useMemo:function(t,e){var n=vn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=vn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ek.bind(null,ge,t),[r.memoizedState,t]},useRef:function(t){var e=vn();return t={current:t},e.memoizedState=t},useState:_m,useDebugValue:_p,useDeferredValue:function(t){return vn().memoizedState=t},useTransition:function(){var t=_m(!1),e=t[0];return t=Zw.bind(null,t[1]),vn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ge,i=vn();if(he){if(n===void 0)throw Error(I(407));n=n()}else{if(n=e(),$e===null)throw Error(I(349));di&30||j0(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Hm(D0.bind(null,r,o,t),[t]),r.flags|=2048,Ns(9,A0.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=vn(),e=$e.identifierPrefix;if(he){var n=Bn,r=Fn;n=(r&~(1<<32-cn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Is++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Xw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},rk={readContext:Xt,useCallback:$0,useContext:Xt,useEffect:Bp,useImperativeHandle:L0,useInsertionEffect:N0,useLayoutEffect:z0,useMemo:F0,useReducer:zu,useRef:O0,useState:function(){return zu(Os)},useDebugValue:_p,useDeferredValue:function(t){var e=Zt();return B0(e,Ae.memoizedState,t)},useTransition:function(){var t=zu(Os)[0],e=Zt().memoizedState;return[t,e]},useMutableSource:T0,useSyncExternalStore:M0,useId:_0,unstable_isNewReconciler:!1},ik={readContext:Xt,useCallback:$0,useContext:Xt,useEffect:Bp,useImperativeHandle:L0,useInsertionEffect:N0,useLayoutEffect:z0,useMemo:F0,useReducer:Pu,useRef:O0,useState:function(){return Pu(Os)},useDebugValue:_p,useDeferredValue:function(t){var e=Zt();return Ae===null?e.memoizedState=t:B0(e,Ae.memoizedState,t)},useTransition:function(){var t=Pu(Os)[0],e=Zt().memoizedState;return[t,e]},useMutableSource:T0,useSyncExternalStore:M0,useId:_0,unstable_isNewReconciler:!1};function rn(t,e){if(t&&t.defaultProps){e=ye({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function tf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Lc={isMounted:function(t){return(t=t._reactInternals)?wi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ut(),i=Er(t),o=Hn(r,i);o.payload=e,n!=null&&(o.callback=n),e=kr(t,o,i),e!==null&&(un(e,t,i,r),Ql(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ut(),i=Er(t),o=Hn(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=kr(t,o,i),e!==null&&(un(e,t,i,r),Ql(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ut(),r=Er(t),i=Hn(n,r);i.tag=2,e!=null&&(i.callback=e),e=kr(t,i,r),e!==null&&(un(e,t,r,n),Ql(e,t,r))}};function Um(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Ts(n,r)||!Ts(i,o):!0}function W0(t,e,n){var r=!1,i=Ir,o=e.contextType;return typeof o=="object"&&o!==null?o=Xt(o):(i=St(e)?ci:st.current,r=e.contextTypes,o=(r=r!=null)?oo(t,i):Ir),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Lc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Vm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Lc.enqueueReplaceState(e,e.state,null)}function nf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Op(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Xt(o):(o=St(e)?ci:st.current,i.context=oo(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(tf(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Lc.enqueueReplaceState(i,i.state,null),Ea(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function co(t,e){try{var n="",r=e;do n+=Ib(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Lu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function rf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ok=typeof WeakMap=="function"?WeakMap:Map;function K0(t,e,n){n=Hn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Da||(Da=!0,hf=r),rf(t,e)},n}function q0(t,e,n){n=Hn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){rf(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){rf(t,e),typeof r!="function"&&(Cr===null?Cr=new Set([this]):Cr.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function Wm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ok;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=vk.bind(null,t,e,n),e.then(t,t))}function Km(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function qm(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Hn(-1,1),e.tag=2,kr(n,e,1))),n.lanes|=1),t)}var sk=Gn.ReactCurrentOwner,xt=!1;function ct(t,e,n,r){e.child=t===null?w0(e,null,n,r):lo(e,t.child,n,r)}function Jm(t,e,n,r,i){n=n.render;var o=e.ref;return Zi(e,i),r=$p(t,e,n,r,o,i),n=Fp(),t!==null&&!xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Jn(t,e,i)):(he&&n&&Tp(e),e.flags|=1,ct(t,e,r,i),e.child)}function Gm(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Gp(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,J0(t,e,o,r,i)):(t=ra(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ts,n(s,r)&&t.ref===e.ref)return Jn(t,e,i)}return e.flags|=1,t=Tr(o,r),t.ref=e.ref,t.return=e,e.child=t}function J0(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Ts(o,r)&&t.ref===e.ref)if(xt=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(xt=!0);else return e.lanes=t.lanes,Jn(t,e,i)}return of(t,e,n,r,i)}function G0(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ae(Ki,jt),jt|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ae(Ki,jt),jt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,ae(Ki,jt),jt|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,ae(Ki,jt),jt|=r;return ct(t,e,i,n),e.child}function Y0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function of(t,e,n,r,i){var o=St(n)?ci:st.current;return o=oo(e,o),Zi(e,i),n=$p(t,e,n,r,o,i),r=Fp(),t!==null&&!xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Jn(t,e,i)):(he&&r&&Tp(e),e.flags|=1,ct(t,e,n,i),e.child)}function Ym(t,e,n,r,i){if(St(n)){var o=!0;Sa(e)}else o=!1;if(Zi(e,i),e.stateNode===null)ea(t,e),W0(e,n,r),nf(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var a=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=Xt(c):(c=St(n)?ci:st.current,c=oo(e,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||a!==c)&&Vm(e,s,r,c),or=!1;var p=e.memoizedState;s.state=p,Ea(e,r,s,i),a=e.memoizedState,l!==r||p!==a||vt.current||or?(typeof d=="function"&&(tf(e,n,d,r),a=e.memoizedState),(l=or||Um(e,n,l,r,p,a,c))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),s.props=r,s.state=a,s.context=c,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,C0(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:rn(e.type,l),s.props=c,f=e.pendingProps,p=s.context,a=n.contextType,typeof a=="object"&&a!==null?a=Xt(a):(a=St(n)?ci:st.current,a=oo(e,a));var h=n.getDerivedStateFromProps;(d=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==f||p!==a)&&Vm(e,s,r,a),or=!1,p=e.memoizedState,s.state=p,Ea(e,r,s,i);var m=e.memoizedState;l!==f||p!==m||vt.current||or?(typeof h=="function"&&(tf(e,n,h,r),m=e.memoizedState),(c=or||Um(e,n,c,r,p,m,a)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,m,a),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,m,a)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),s.props=r,s.state=m,s.context=a,r=c):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return sf(t,e,n,r,o,i)}function sf(t,e,n,r,i,o){Y0(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&zm(e,n,!1),Jn(t,e,o);r=e.stateNode,sk.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=lo(e,t.child,null,o),e.child=lo(e,null,l,o)):ct(t,e,l,o),e.memoizedState=r.state,i&&zm(e,n,!0),e.child}function Q0(t){var e=t.stateNode;e.pendingContext?Nm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Nm(t,e.context,!1),Np(t,e.containerInfo)}function Qm(t,e,n,r,i){return so(),jp(i),e.flags|=256,ct(t,e,n,r),e.child}var lf={dehydrated:null,treeContext:null,retryLane:0};function af(t){return{baseLanes:t,cachePool:null,transitions:null}}function X0(t,e,n){var r=e.pendingProps,i=me.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ae(me,i&1),t===null)return Zd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Bc(s,r,0,null),t=ri(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=af(n),e.memoizedState=lf,t):Hp(e,s));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return lk(t,e,s,r,l,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Tr(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=Tr(l,o):(o=ri(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?af(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=lf,r}return o=t.child,t=o.sibling,r=Tr(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Hp(t,e){return e=Bc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ml(t,e,n,r){return r!==null&&jp(r),lo(e,t.child,null,n),t=Hp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function lk(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=Lu(Error(I(422))),Ml(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Bc({mode:"visible",children:r.children},i,0,null),o=ri(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&lo(e,t.child,null,s),e.child.memoizedState=af(s),e.memoizedState=lf,o);if(!(e.mode&1))return Ml(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(I(419)),r=Lu(o,r,void 0),Ml(t,e,s,r)}if(l=(s&t.childLanes)!==0,xt||l){if(r=$e,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,qn(t,i),un(r,t,i,-1))}return Jp(),r=Lu(Error(I(421))),Ml(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Sk.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Dt=wr(i.nextSibling),Rt=e,he=!0,sn=null,t!==null&&(Vt[Wt++]=Fn,Vt[Wt++]=Bn,Vt[Wt++]=ui,Fn=t.id,Bn=t.overflow,ui=e),e=Hp(e,r.children),e.flags|=4096,e)}function Xm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ef(t.return,e,n)}function $u(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Z0(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(ct(t,e,r.children,n),r=me.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Xm(t,n,e);else if(t.tag===19)Xm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ae(me,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ta(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),$u(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ta(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}$u(e,!0,n,null,o);break;case"together":$u(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ea(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Jn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),fi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(I(153));if(e.child!==null){for(t=e.child,n=Tr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Tr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ak(t,e,n){switch(e.tag){case 3:Q0(e),so();break;case 5:E0(e);break;case 1:St(e.type)&&Sa(e);break;case 4:Np(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ae(ka,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ae(me,me.current&1),e.flags|=128,null):n&e.child.childLanes?X0(t,e,n):(ae(me,me.current&1),t=Jn(t,e,n),t!==null?t.sibling:null);ae(me,me.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Z0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ae(me,me.current),r)break;return null;case 22:case 23:return e.lanes=0,G0(t,e,n)}return Jn(t,e,n)}var ev,cf,tv,nv;ev=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};cf=function(){};tv=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Yr(Tn.current);var o=null;switch(n){case"input":i=Dd(t,i),r=Dd(t,r),o=[];break;case"select":i=ye({},i,{value:void 0}),r=ye({},r,{value:void 0}),o=[];break;case"textarea":i=Od(t,i),r=Od(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=xa)}zd(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(vs.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var a=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(s in l)!l.hasOwnProperty(s)||a&&a.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in a)a.hasOwnProperty(s)&&l[s]!==a[s]&&(n||(n={}),n[s]=a[s])}else n||(o||(o=[]),o.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(o=o||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(o=o||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(vs.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&ue("scroll",t),o||l===a||(o=[])):(o=o||[]).push(c,a))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};nv=function(t,e,n,r){n!==r&&(e.flags|=4)};function Po(t,e){if(!he)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function rt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ck(t,e,n){var r=e.pendingProps;switch(Mp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(e),null;case 1:return St(e.type)&&va(),rt(e),null;case 3:return r=e.stateNode,ao(),fe(vt),fe(st),Pp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(El(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,sn!==null&&(yf(sn),sn=null))),cf(t,e),rt(e),null;case 5:zp(e);var i=Yr(Rs.current);if(n=e.type,t!==null&&e.stateNode!=null)tv(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(I(166));return rt(e),null}if(t=Yr(Tn.current),El(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[kn]=e,r[As]=o,t=(e.mode&1)!==0,n){case"dialog":ue("cancel",r),ue("close",r);break;case"iframe":case"object":case"embed":ue("load",r);break;case"video":case"audio":for(i=0;i<Vo.length;i++)ue(Vo[i],r);break;case"source":ue("error",r);break;case"img":case"image":case"link":ue("error",r),ue("load",r);break;case"details":ue("toggle",r);break;case"input":lm(r,o),ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},ue("invalid",r);break;case"textarea":cm(r,o),ue("invalid",r)}zd(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Cl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Cl(r.textContent,l,t),i=["children",""+l]):vs.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&ue("scroll",r)}switch(n){case"input":gl(r),am(r,o,!0);break;case"textarea":gl(r),um(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=xa)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Dx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[kn]=e,t[As]=r,ev(t,e,!1,!1),e.stateNode=t;e:{switch(s=Pd(n,r),n){case"dialog":ue("cancel",t),ue("close",t),i=r;break;case"iframe":case"object":case"embed":ue("load",t),i=r;break;case"video":case"audio":for(i=0;i<Vo.length;i++)ue(Vo[i],t);i=r;break;case"source":ue("error",t),i=r;break;case"img":case"image":case"link":ue("error",t),ue("load",t),i=r;break;case"details":ue("toggle",t),i=r;break;case"input":lm(t,r),i=Dd(t,r),ue("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ye({},r,{value:void 0}),ue("invalid",t);break;case"textarea":cm(t,r),i=Od(t,r),ue("invalid",t);break;default:i=r}zd(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var a=l[o];o==="style"?Ox(t,a):o==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Rx(t,a)):o==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Ss(t,a):typeof a=="number"&&Ss(t,""+a):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(vs.hasOwnProperty(o)?a!=null&&o==="onScroll"&&ue("scroll",t):a!=null&&fp(t,o,a,s))}switch(n){case"input":gl(t),am(t,r,!1);break;case"textarea":gl(t),um(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Rr(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Gi(t,!!r.multiple,o,!1):r.defaultValue!=null&&Gi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=xa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return rt(e),null;case 6:if(t&&e.stateNode!=null)nv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(I(166));if(n=Yr(Rs.current),Yr(Tn.current),El(e)){if(r=e.stateNode,n=e.memoizedProps,r[kn]=e,(o=r.nodeValue!==n)&&(t=Rt,t!==null))switch(t.tag){case 3:Cl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Cl(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[kn]=e,e.stateNode=r}return rt(e),null;case 13:if(fe(me),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(he&&Dt!==null&&e.mode&1&&!(e.flags&128))S0(),so(),e.flags|=98560,o=!1;else if(o=El(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(I(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(I(317));o[kn]=e}else so(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;rt(e),o=!1}else sn!==null&&(yf(sn),sn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||me.current&1?Ie===0&&(Ie=3):Jp())),e.updateQueue!==null&&(e.flags|=4),rt(e),null);case 4:return ao(),cf(t,e),t===null&&Ms(e.stateNode.containerInfo),rt(e),null;case 10:return Rp(e.type._context),rt(e),null;case 17:return St(e.type)&&va(),rt(e),null;case 19:if(fe(me),o=e.memoizedState,o===null)return rt(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Po(o,!1);else{if(Ie!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Ta(t),s!==null){for(e.flags|=128,Po(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ae(me,me.current&1|2),e.child}t=t.sibling}o.tail!==null&&Ee()>uo&&(e.flags|=128,r=!0,Po(o,!1),e.lanes=4194304)}else{if(!r)if(t=Ta(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Po(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!he)return rt(e),null}else 2*Ee()-o.renderingStartTime>uo&&n!==1073741824&&(e.flags|=128,r=!0,Po(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ee(),e.sibling=null,n=me.current,ae(me,r?n&1|2:n&1),e):(rt(e),null);case 22:case 23:return qp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?jt&1073741824&&(rt(e),e.subtreeFlags&6&&(e.flags|=8192)):rt(e),null;case 24:return null;case 25:return null}throw Error(I(156,e.tag))}function uk(t,e){switch(Mp(e),e.tag){case 1:return St(e.type)&&va(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ao(),fe(vt),fe(st),Pp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return zp(e),null;case 13:if(fe(me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(I(340));so()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return fe(me),null;case 4:return ao(),null;case 10:return Rp(e.type._context),null;case 22:case 23:return qp(),null;case 24:return null;default:return null}}var jl=!1,ot=!1,dk=typeof WeakSet=="function"?WeakSet:Set,L=null;function Wi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Se(t,e,r)}else n.current=null}function uf(t,e,n){try{n()}catch(r){Se(t,e,r)}}var Zm=!1;function fk(t,e){if(Kd=ma,t=l0(),Ep(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,a=-1,c=0,d=0,f=t,p=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(l=s+i),f!==o||r!==0&&f.nodeType!==3||(a=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(h=f.firstChild)!==null;)p=f,f=h;for(;;){if(f===t)break t;if(p===n&&++c===i&&(l=s),p===o&&++d===r&&(a=s),(h=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=h}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(qd={focusedElem:t,selectionRange:n},ma=!1,L=e;L!==null;)if(e=L,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,L=t;else for(;L!==null;){e=L;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,S=m.memoizedState,y=e.stateNode,x=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:rn(e.type,g),S);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(w){Se(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,L=t;break}L=e.return}return m=Zm,Zm=!1,m}function ts(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&uf(e,n,o)}i=i.next}while(i!==r)}}function $c(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function df(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function rv(t){var e=t.alternate;e!==null&&(t.alternate=null,rv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[kn],delete e[As],delete e[Yd],delete e[Jw],delete e[Gw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function iv(t){return t.tag===5||t.tag===3||t.tag===4}function eg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||iv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ff(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=xa));else if(r!==4&&(t=t.child,t!==null))for(ff(t,e,n),t=t.sibling;t!==null;)ff(t,e,n),t=t.sibling}function pf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(pf(t,e,n),t=t.sibling;t!==null;)pf(t,e,n),t=t.sibling}var We=null,on=!1;function tr(t,e,n){for(n=n.child;n!==null;)ov(t,e,n),n=n.sibling}function ov(t,e,n){if(En&&typeof En.onCommitFiberUnmount=="function")try{En.onCommitFiberUnmount(Dc,n)}catch{}switch(n.tag){case 5:ot||Wi(n,e);case 6:var r=We,i=on;We=null,tr(t,e,n),We=r,on=i,We!==null&&(on?(t=We,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):We.removeChild(n.stateNode));break;case 18:We!==null&&(on?(t=We,n=n.stateNode,t.nodeType===8?Ru(t.parentNode,n):t.nodeType===1&&Ru(t,n),Cs(t)):Ru(We,n.stateNode));break;case 4:r=We,i=on,We=n.stateNode.containerInfo,on=!0,tr(t,e,n),We=r,on=i;break;case 0:case 11:case 14:case 15:if(!ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&uf(n,e,s),i=i.next}while(i!==r)}tr(t,e,n);break;case 1:if(!ot&&(Wi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Se(n,e,l)}tr(t,e,n);break;case 21:tr(t,e,n);break;case 22:n.mode&1?(ot=(r=ot)||n.memoizedState!==null,tr(t,e,n),ot=r):tr(t,e,n);break;default:tr(t,e,n)}}function tg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new dk),e.forEach(function(r){var i=bk.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function nn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:We=l.stateNode,on=!1;break e;case 3:We=l.stateNode.containerInfo,on=!0;break e;case 4:We=l.stateNode.containerInfo,on=!0;break e}l=l.return}if(We===null)throw Error(I(160));ov(o,s,i),We=null,on=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(c){Se(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sv(e,t),e=e.sibling}function sv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(nn(e,t),yn(t),r&4){try{ts(3,t,t.return),$c(3,t)}catch(g){Se(t,t.return,g)}try{ts(5,t,t.return)}catch(g){Se(t,t.return,g)}}break;case 1:nn(e,t),yn(t),r&512&&n!==null&&Wi(n,n.return);break;case 5:if(nn(e,t),yn(t),r&512&&n!==null&&Wi(n,n.return),t.flags&32){var i=t.stateNode;try{Ss(i,"")}catch(g){Se(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&jx(i,o),Pd(l,s);var c=Pd(l,o);for(s=0;s<a.length;s+=2){var d=a[s],f=a[s+1];d==="style"?Ox(i,f):d==="dangerouslySetInnerHTML"?Rx(i,f):d==="children"?Ss(i,f):fp(i,d,f,c)}switch(l){case"input":Rd(i,o);break;case"textarea":Ax(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?Gi(i,!!o.multiple,h,!1):p!==!!o.multiple&&(o.defaultValue!=null?Gi(i,!!o.multiple,o.defaultValue,!0):Gi(i,!!o.multiple,o.multiple?[]:"",!1))}i[As]=o}catch(g){Se(t,t.return,g)}}break;case 6:if(nn(e,t),yn(t),r&4){if(t.stateNode===null)throw Error(I(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(g){Se(t,t.return,g)}}break;case 3:if(nn(e,t),yn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Cs(e.containerInfo)}catch(g){Se(t,t.return,g)}break;case 4:nn(e,t),yn(t);break;case 13:nn(e,t),yn(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Wp=Ee())),r&4&&tg(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(ot=(c=ot)||d,nn(e,t),ot=c):nn(e,t),yn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(L=t,d=t.child;d!==null;){for(f=L=d;L!==null;){switch(p=L,h=p.child,p.tag){case 0:case 11:case 14:case 15:ts(4,p,p.return);break;case 1:Wi(p,p.return);var m=p.stateNode;if(typeof m.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){Se(r,n,g)}}break;case 5:Wi(p,p.return);break;case 22:if(p.memoizedState!==null){rg(f);continue}}h!==null?(h.return=p,L=h):rg(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=f.stateNode,a=f.memoizedProps.style,s=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Ix("display",s))}catch(g){Se(t,t.return,g)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(g){Se(t,t.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:nn(e,t),yn(t),r&4&&tg(t);break;case 21:break;default:nn(e,t),yn(t)}}function yn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(iv(n)){var r=n;break e}n=n.return}throw Error(I(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ss(i,""),r.flags&=-33);var o=eg(t);pf(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=eg(t);ff(t,l,s);break;default:throw Error(I(161))}}catch(a){Se(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function pk(t,e,n){L=t,lv(t)}function lv(t,e,n){for(var r=(t.mode&1)!==0;L!==null;){var i=L,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||jl;if(!s){var l=i.alternate,a=l!==null&&l.memoizedState!==null||ot;l=jl;var c=ot;if(jl=s,(ot=a)&&!c)for(L=i;L!==null;)s=L,a=s.child,s.tag===22&&s.memoizedState!==null?ig(i):a!==null?(a.return=s,L=a):ig(i);for(;o!==null;)L=o,lv(o),o=o.sibling;L=i,jl=l,ot=c}ng(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,L=o):ng(t)}}function ng(t){for(;L!==null;){var e=L;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ot||$c(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ot)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:rn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Bm(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Bm(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Cs(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}ot||e.flags&512&&df(e)}catch(p){Se(e,e.return,p)}}if(e===t){L=null;break}if(n=e.sibling,n!==null){n.return=e.return,L=n;break}L=e.return}}function rg(t){for(;L!==null;){var e=L;if(e===t){L=null;break}var n=e.sibling;if(n!==null){n.return=e.return,L=n;break}L=e.return}}function ig(t){for(;L!==null;){var e=L;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{$c(4,e)}catch(a){Se(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){Se(e,i,a)}}var o=e.return;try{df(e)}catch(a){Se(e,o,a)}break;case 5:var s=e.return;try{df(e)}catch(a){Se(e,s,a)}}}catch(a){Se(e,e.return,a)}if(e===t){L=null;break}var l=e.sibling;if(l!==null){l.return=e.return,L=l;break}L=e.return}}var hk=Math.ceil,Aa=Gn.ReactCurrentDispatcher,Up=Gn.ReactCurrentOwner,Gt=Gn.ReactCurrentBatchConfig,ee=0,$e=null,Te=null,Ye=0,jt=0,Ki=zr(0),Ie=0,zs=null,fi=0,Fc=0,Vp=0,ns=null,gt=null,Wp=0,uo=1/0,Pn=null,Da=!1,hf=null,Cr=null,Al=!1,mr=null,Ra=0,rs=0,mf=null,ta=-1,na=0;function ut(){return ee&6?Ee():ta!==-1?ta:ta=Ee()}function Er(t){return t.mode&1?ee&2&&Ye!==0?Ye&-Ye:Qw.transition!==null?(na===0&&(na=Wx()),na):(t=se,t!==0||(t=window.event,t=t===void 0?16:Xx(t.type)),t):1}function un(t,e,n,r){if(50<rs)throw rs=0,mf=null,Error(I(185));tl(t,n,r),(!(ee&2)||t!==$e)&&(t===$e&&(!(ee&2)&&(Fc|=n),Ie===4&&dr(t,Ye)),bt(t,r),n===1&&ee===0&&!(e.mode&1)&&(uo=Ee()+500,zc&&Pr()))}function bt(t,e){var n=t.callbackNode;Qb(t,e);var r=ha(t,t===$e?Ye:0);if(r===0)n!==null&&pm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&pm(n),e===1)t.tag===0?Yw(og.bind(null,t)):y0(og.bind(null,t)),Kw(function(){!(ee&6)&&Pr()}),n=null;else{switch(Kx(r)){case 1:n=yp;break;case 4:n=Ux;break;case 16:n=pa;break;case 536870912:n=Vx;break;default:n=pa}n=mv(n,av.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function av(t,e){if(ta=-1,na=0,ee&6)throw Error(I(327));var n=t.callbackNode;if(eo()&&t.callbackNode!==n)return null;var r=ha(t,t===$e?Ye:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ia(t,r);else{e=r;var i=ee;ee|=2;var o=uv();($e!==t||Ye!==e)&&(Pn=null,uo=Ee()+500,ni(t,e));do try{yk();break}catch(l){cv(t,l)}while(!0);Dp(),Aa.current=o,ee=i,Te!==null?e=0:($e=null,Ye=0,e=Ie)}if(e!==0){if(e===2&&(i=_d(t),i!==0&&(r=i,e=gf(t,i))),e===1)throw n=zs,ni(t,0),dr(t,r),bt(t,Ee()),n;if(e===6)dr(t,r);else{if(i=t.current.alternate,!(r&30)&&!mk(i)&&(e=Ia(t,r),e===2&&(o=_d(t),o!==0&&(r=o,e=gf(t,o))),e===1))throw n=zs,ni(t,0),dr(t,r),bt(t,Ee()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(I(345));case 2:Vr(t,gt,Pn);break;case 3:if(dr(t,r),(r&130023424)===r&&(e=Wp+500-Ee(),10<e)){if(ha(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ut(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Gd(Vr.bind(null,t,gt,Pn),e);break}Vr(t,gt,Pn);break;case 4:if(dr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-cn(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Ee()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*hk(r/1960))-r,10<r){t.timeoutHandle=Gd(Vr.bind(null,t,gt,Pn),r);break}Vr(t,gt,Pn);break;case 5:Vr(t,gt,Pn);break;default:throw Error(I(329))}}}return bt(t,Ee()),t.callbackNode===n?av.bind(null,t):null}function gf(t,e){var n=ns;return t.current.memoizedState.isDehydrated&&(ni(t,e).flags|=256),t=Ia(t,e),t!==2&&(e=gt,gt=n,e!==null&&yf(e)),t}function yf(t){gt===null?gt=t:gt.push.apply(gt,t)}function mk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!dn(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function dr(t,e){for(e&=~Vp,e&=~Fc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-cn(e),r=1<<n;t[n]=-1,e&=~r}}function og(t){if(ee&6)throw Error(I(327));eo();var e=ha(t,0);if(!(e&1))return bt(t,Ee()),null;var n=Ia(t,e);if(t.tag!==0&&n===2){var r=_d(t);r!==0&&(e=r,n=gf(t,r))}if(n===1)throw n=zs,ni(t,0),dr(t,e),bt(t,Ee()),n;if(n===6)throw Error(I(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Vr(t,gt,Pn),bt(t,Ee()),null}function Kp(t,e){var n=ee;ee|=1;try{return t(e)}finally{ee=n,ee===0&&(uo=Ee()+500,zc&&Pr())}}function pi(t){mr!==null&&mr.tag===0&&!(ee&6)&&eo();var e=ee;ee|=1;var n=Gt.transition,r=se;try{if(Gt.transition=null,se=1,t)return t()}finally{se=r,Gt.transition=n,ee=e,!(ee&6)&&Pr()}}function qp(){jt=Ki.current,fe(Ki)}function ni(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Ww(n)),Te!==null)for(n=Te.return;n!==null;){var r=n;switch(Mp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&va();break;case 3:ao(),fe(vt),fe(st),Pp();break;case 5:zp(r);break;case 4:ao();break;case 13:fe(me);break;case 19:fe(me);break;case 10:Rp(r.type._context);break;case 22:case 23:qp()}n=n.return}if($e=t,Te=t=Tr(t.current,null),Ye=jt=e,Ie=0,zs=null,Vp=Fc=fi=0,gt=ns=null,Gr!==null){for(e=0;e<Gr.length;e++)if(n=Gr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Gr=null}return t}function cv(t,e){do{var n=Te;try{if(Dp(),Xl.current=ja,Ma){for(var r=ge.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ma=!1}if(di=0,ze=Ae=ge=null,es=!1,Is=0,Up.current=null,n===null||n.return===null){Ie=1,zs=e,Te=null;break}e:{var o=t,s=n.return,l=n,a=e;if(e=Ye,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=Km(s);if(h!==null){h.flags&=-257,qm(h,s,l,o,e),h.mode&1&&Wm(o,c,e),e=h,a=c;var m=e.updateQueue;if(m===null){var g=new Set;g.add(a),e.updateQueue=g}else m.add(a);break e}else{if(!(e&1)){Wm(o,c,e),Jp();break e}a=Error(I(426))}}else if(he&&l.mode&1){var S=Km(s);if(S!==null){!(S.flags&65536)&&(S.flags|=256),qm(S,s,l,o,e),jp(co(a,l));break e}}o=a=co(a,l),Ie!==4&&(Ie=2),ns===null?ns=[o]:ns.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var y=K0(o,a,e);Fm(o,y);break e;case 1:l=a;var x=o.type,v=o.stateNode;if(!(o.flags&128)&&(typeof x.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Cr===null||!Cr.has(v)))){o.flags|=65536,e&=-e,o.lanes|=e;var w=q0(o,l,e);Fm(o,w);break e}}o=o.return}while(o!==null)}fv(n)}catch(k){e=k,Te===n&&n!==null&&(Te=n=n.return);continue}break}while(!0)}function uv(){var t=Aa.current;return Aa.current=ja,t===null?ja:t}function Jp(){(Ie===0||Ie===3||Ie===2)&&(Ie=4),$e===null||!(fi&268435455)&&!(Fc&268435455)||dr($e,Ye)}function Ia(t,e){var n=ee;ee|=2;var r=uv();($e!==t||Ye!==e)&&(Pn=null,ni(t,e));do try{gk();break}catch(i){cv(t,i)}while(!0);if(Dp(),ee=n,Aa.current=r,Te!==null)throw Error(I(261));return $e=null,Ye=0,Ie}function gk(){for(;Te!==null;)dv(Te)}function yk(){for(;Te!==null&&!Hb();)dv(Te)}function dv(t){var e=hv(t.alternate,t,jt);t.memoizedProps=t.pendingProps,e===null?fv(t):Te=e,Up.current=null}function fv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=uk(n,e),n!==null){n.flags&=32767,Te=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ie=6,Te=null;return}}else if(n=ck(n,e,jt),n!==null){Te=n;return}if(e=e.sibling,e!==null){Te=e;return}Te=e=t}while(e!==null);Ie===0&&(Ie=5)}function Vr(t,e,n){var r=se,i=Gt.transition;try{Gt.transition=null,se=1,xk(t,e,n,r)}finally{Gt.transition=i,se=r}return null}function xk(t,e,n,r){do eo();while(mr!==null);if(ee&6)throw Error(I(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(I(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(Xb(t,o),t===$e&&(Te=$e=null,Ye=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Al||(Al=!0,mv(pa,function(){return eo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Gt.transition,Gt.transition=null;var s=se;se=1;var l=ee;ee|=4,Up.current=null,fk(t,n),sv(n,t),$w(qd),ma=!!Kd,qd=Kd=null,t.current=n,pk(n),Ub(),ee=l,se=s,Gt.transition=o}else t.current=n;if(Al&&(Al=!1,mr=t,Ra=i),o=t.pendingLanes,o===0&&(Cr=null),Kb(n.stateNode),bt(t,Ee()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Da)throw Da=!1,t=hf,hf=null,t;return Ra&1&&t.tag!==0&&eo(),o=t.pendingLanes,o&1?t===mf?rs++:(rs=0,mf=t):rs=0,Pr(),null}function eo(){if(mr!==null){var t=Kx(Ra),e=Gt.transition,n=se;try{if(Gt.transition=null,se=16>t?16:t,mr===null)var r=!1;else{if(t=mr,mr=null,Ra=0,ee&6)throw Error(I(331));var i=ee;for(ee|=4,L=t.current;L!==null;){var o=L,s=o.child;if(L.flags&16){var l=o.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(L=c;L!==null;){var d=L;switch(d.tag){case 0:case 11:case 15:ts(8,d,o)}var f=d.child;if(f!==null)f.return=d,L=f;else for(;L!==null;){d=L;var p=d.sibling,h=d.return;if(rv(d),d===c){L=null;break}if(p!==null){p.return=h,L=p;break}L=h}}}var m=o.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var S=g.sibling;g.sibling=null,g=S}while(g!==null)}}L=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,L=s;else e:for(;L!==null;){if(o=L,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ts(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,L=y;break e}L=o.return}}var x=t.current;for(L=x;L!==null;){s=L;var v=s.child;if(s.subtreeFlags&2064&&v!==null)v.return=s,L=v;else e:for(s=x;L!==null;){if(l=L,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:$c(9,l)}}catch(k){Se(l,l.return,k)}if(l===s){L=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,L=w;break e}L=l.return}}if(ee=i,Pr(),En&&typeof En.onPostCommitFiberRoot=="function")try{En.onPostCommitFiberRoot(Dc,t)}catch{}r=!0}return r}finally{se=n,Gt.transition=e}}return!1}function sg(t,e,n){e=co(n,e),e=K0(t,e,1),t=kr(t,e,1),e=ut(),t!==null&&(tl(t,1,e),bt(t,e))}function Se(t,e,n){if(t.tag===3)sg(t,t,n);else for(;e!==null;){if(e.tag===3){sg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Cr===null||!Cr.has(r))){t=co(n,t),t=q0(e,t,1),e=kr(e,t,1),t=ut(),e!==null&&(tl(e,1,t),bt(e,t));break}}e=e.return}}function vk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ut(),t.pingedLanes|=t.suspendedLanes&n,$e===t&&(Ye&n)===n&&(Ie===4||Ie===3&&(Ye&130023424)===Ye&&500>Ee()-Wp?ni(t,0):Vp|=n),bt(t,e)}function pv(t,e){e===0&&(t.mode&1?(e=vl,vl<<=1,!(vl&130023424)&&(vl=4194304)):e=1);var n=ut();t=qn(t,e),t!==null&&(tl(t,e,n),bt(t,n))}function Sk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),pv(t,n)}function bk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(I(314))}r!==null&&r.delete(e),pv(t,n)}var hv;hv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||vt.current)xt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return xt=!1,ak(t,e,n);xt=!!(t.flags&131072)}else xt=!1,he&&e.flags&1048576&&x0(e,wa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ea(t,e),t=e.pendingProps;var i=oo(e,st.current);Zi(e,n),i=$p(null,e,r,t,i,n);var o=Fp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,St(r)?(o=!0,Sa(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Op(e),i.updater=Lc,e.stateNode=i,i._reactInternals=e,nf(e,r,t,n),e=sf(null,e,r,!0,o,n)):(e.tag=0,he&&o&&Tp(e),ct(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ea(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=kk(r),t=rn(r,t),i){case 0:e=of(null,e,r,t,n);break e;case 1:e=Ym(null,e,r,t,n);break e;case 11:e=Jm(null,e,r,t,n);break e;case 14:e=Gm(null,e,r,rn(r.type,t),n);break e}throw Error(I(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),of(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),Ym(t,e,r,i,n);case 3:e:{if(Q0(e),t===null)throw Error(I(387));r=e.pendingProps,o=e.memoizedState,i=o.element,C0(t,e),Ea(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=co(Error(I(423)),e),e=Qm(t,e,r,n,i);break e}else if(r!==i){i=co(Error(I(424)),e),e=Qm(t,e,r,n,i);break e}else for(Dt=wr(e.stateNode.containerInfo.firstChild),Rt=e,he=!0,sn=null,n=w0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(so(),r===i){e=Jn(t,e,n);break e}ct(t,e,r,n)}e=e.child}return e;case 5:return E0(e),t===null&&Zd(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,Jd(r,i)?s=null:o!==null&&Jd(r,o)&&(e.flags|=32),Y0(t,e),ct(t,e,s,n),e.child;case 6:return t===null&&Zd(e),null;case 13:return X0(t,e,n);case 4:return Np(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=lo(e,null,r,n):ct(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),Jm(t,e,r,i,n);case 7:return ct(t,e,e.pendingProps,n),e.child;case 8:return ct(t,e,e.pendingProps.children,n),e.child;case 12:return ct(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,ae(ka,r._currentValue),r._currentValue=s,o!==null)if(dn(o.value,s)){if(o.children===i.children&&!vt.current){e=Jn(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(o.tag===1){a=Hn(-1,n&-n),a.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?a.next=a:(a.next=d.next,d.next=a),c.pending=a}}o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),ef(o.return,n,e),l.lanes|=n;break}a=a.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(I(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),ef(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}ct(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Zi(e,n),i=Xt(i),r=r(i),e.flags|=1,ct(t,e,r,n),e.child;case 14:return r=e.type,i=rn(r,e.pendingProps),i=rn(r.type,i),Gm(t,e,r,i,n);case 15:return J0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),ea(t,e),e.tag=1,St(r)?(t=!0,Sa(e)):t=!1,Zi(e,n),W0(e,r,i),nf(e,r,i,n),sf(null,e,r,!0,t,n);case 19:return Z0(t,e,n);case 22:return G0(t,e,n)}throw Error(I(156,e.tag))};function mv(t,e){return Hx(t,e)}function wk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(t,e,n,r){return new wk(t,e,n,r)}function Gp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function kk(t){if(typeof t=="function")return Gp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===hp)return 11;if(t===mp)return 14}return 2}function Tr(t,e){var n=t.alternate;return n===null?(n=qt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ra(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Gp(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Pi:return ri(n.children,i,o,e);case pp:s=8,i|=8;break;case Td:return t=qt(12,n,e,i|2),t.elementType=Td,t.lanes=o,t;case Md:return t=qt(13,n,e,i),t.elementType=Md,t.lanes=o,t;case jd:return t=qt(19,n,e,i),t.elementType=jd,t.lanes=o,t;case Ex:return Bc(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case kx:s=10;break e;case Cx:s=9;break e;case hp:s=11;break e;case mp:s=14;break e;case ir:s=16,r=null;break e}throw Error(I(130,t==null?t:typeof t,""))}return e=qt(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function ri(t,e,n,r){return t=qt(7,t,r,e),t.lanes=n,t}function Bc(t,e,n,r){return t=qt(22,t,r,e),t.elementType=Ex,t.lanes=n,t.stateNode={isHidden:!1},t}function Fu(t,e,n){return t=qt(6,t,null,e),t.lanes=n,t}function Bu(t,e,n){return e=qt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ck(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Su(0),this.expirationTimes=Su(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Su(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Yp(t,e,n,r,i,o,s,l,a){return t=new Ck(t,e,n,l,a),e===1?(e=1,o===!0&&(e|=8)):e=0,o=qt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Op(o),t}function Ek(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function gv(t){if(!t)return Ir;t=t._reactInternals;e:{if(wi(t)!==t||t.tag!==1)throw Error(I(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(St(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(I(171))}if(t.tag===1){var n=t.type;if(St(n))return g0(t,n,e)}return e}function yv(t,e,n,r,i,o,s,l,a){return t=Yp(n,r,!0,t,i,o,s,l,a),t.context=gv(null),n=t.current,r=ut(),i=Er(n),o=Hn(r,i),o.callback=e??null,kr(n,o,i),t.current.lanes=i,tl(t,i,r),bt(t,r),t}function _c(t,e,n,r){var i=e.current,o=ut(),s=Er(i);return n=gv(n),e.context===null?e.context=n:e.pendingContext=n,e=Hn(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=kr(i,e,s),t!==null&&(un(t,i,s,o),Ql(t,i,s)),s}function Oa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function lg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Qp(t,e){lg(t,e),(t=t.alternate)&&lg(t,e)}function Tk(){return null}var xv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Xp(t){this._internalRoot=t}Hc.prototype.render=Xp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(I(409));_c(t,e,null,null)};Hc.prototype.unmount=Xp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;pi(function(){_c(null,t,null,null)}),e[Kn]=null}};function Hc(t){this._internalRoot=t}Hc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Gx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ur.length&&e!==0&&e<ur[n].priority;n++);ur.splice(n,0,t),n===0&&Qx(t)}};function Zp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Uc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ag(){}function Mk(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=Oa(s);o.call(c)}}var s=yv(e,r,t,0,null,!1,!1,"",ag);return t._reactRootContainer=s,t[Kn]=s.current,Ms(t.nodeType===8?t.parentNode:t),pi(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=Oa(a);l.call(c)}}var a=Yp(t,0,!1,null,null,!1,!1,"",ag);return t._reactRootContainer=a,t[Kn]=a.current,Ms(t.nodeType===8?t.parentNode:t),pi(function(){_c(e,a,n,r)}),a}function Vc(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var a=Oa(s);l.call(a)}}_c(e,s,t,i)}else s=Mk(n,e,t,i,r);return Oa(s)}qx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Uo(e.pendingLanes);n!==0&&(xp(e,n|1),bt(e,Ee()),!(ee&6)&&(uo=Ee()+500,Pr()))}break;case 13:pi(function(){var r=qn(t,1);if(r!==null){var i=ut();un(r,t,1,i)}}),Qp(t,1)}};vp=function(t){if(t.tag===13){var e=qn(t,134217728);if(e!==null){var n=ut();un(e,t,134217728,n)}Qp(t,134217728)}};Jx=function(t){if(t.tag===13){var e=Er(t),n=qn(t,e);if(n!==null){var r=ut();un(n,t,e,r)}Qp(t,e)}};Gx=function(){return se};Yx=function(t,e){var n=se;try{return se=t,e()}finally{se=n}};$d=function(t,e,n){switch(e){case"input":if(Rd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Nc(r);if(!i)throw Error(I(90));Mx(r),Rd(r,i)}}}break;case"textarea":Ax(t,n);break;case"select":e=n.value,e!=null&&Gi(t,!!n.multiple,e,!1)}};Px=Kp;Lx=pi;var jk={usingClientEntryPoint:!1,Events:[rl,Bi,Nc,Nx,zx,Kp]},Lo={findFiberByHostInstance:Jr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ak={bundleType:Lo.bundleType,version:Lo.version,rendererPackageName:Lo.rendererPackageName,rendererConfig:Lo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Bx(t),t===null?null:t.stateNode},findFiberByHostInstance:Lo.findFiberByHostInstance||Tk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dl.isDisabled&&Dl.supportsFiber)try{Dc=Dl.inject(Ak),En=Dl}catch{}}zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jk;zt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zp(e))throw Error(I(200));return Ek(t,e,null,n)};zt.createRoot=function(t,e){if(!Zp(t))throw Error(I(299));var n=!1,r="",i=xv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Yp(t,1,!1,null,null,n,!1,r,i),t[Kn]=e.current,Ms(t.nodeType===8?t.parentNode:t),new Xp(e)};zt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(I(188)):(t=Object.keys(t).join(","),Error(I(268,t)));return t=Bx(e),t=t===null?null:t.stateNode,t};zt.flushSync=function(t){return pi(t)};zt.hydrate=function(t,e,n){if(!Uc(e))throw Error(I(200));return Vc(null,t,e,!0,n)};zt.hydrateRoot=function(t,e,n){if(!Zp(t))throw Error(I(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=xv;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=yv(e,null,t,1,n??null,i,!1,o,s),t[Kn]=e.current,Ms(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Hc(e)};zt.render=function(t,e,n){if(!Uc(e))throw Error(I(200));return Vc(null,t,e,!1,n)};zt.unmountComponentAtNode=function(t){if(!Uc(t))throw Error(I(40));return t._reactRootContainer?(pi(function(){Vc(null,null,t,!1,function(){t._reactRootContainer=null,t[Kn]=null})}),!0):!1};zt.unstable_batchedUpdates=Kp;zt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Uc(n))throw Error(I(200));if(t==null||t._reactInternals===void 0)throw Error(I(38));return Vc(t,e,n,!1,r)};zt.version="18.3.1-next-f1338f8080-20240426";function vv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vv)}catch(t){console.error(t)}}vv(),vx.exports=zt;var Qr=vx.exports;const Dk=lx(Qr);var cg=Qr;Cd.createRoot=cg.createRoot,Cd.hydrateRoot=cg.hydrateRoot;var Sv=Symbol.for("immer-nothing"),ug=Symbol.for("immer-draftable"),Nt=Symbol.for("immer-state");function ln(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Ps=Object.getPrototypeOf;function fo(t){return!!t&&!!t[Nt]}function hi(t){var e;return t?bv(t)||Array.isArray(t)||!!t[ug]||!!((e=t.constructor)!=null&&e[ug])||ol(t)||Kc(t):!1}var Rk=Object.prototype.constructor.toString(),dg=new WeakMap;function bv(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=dg.get(n);return r===void 0&&(r=Function.toString.call(n),dg.set(n,r)),r===Rk}function Na(t,e,n=!0){Wc(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function Wc(t){const e=t[Nt];return e?e.type_:Array.isArray(t)?1:ol(t)?2:Kc(t)?3:0}function xf(t,e){return Wc(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function wv(t,e,n){const r=Wc(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function Ik(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function ol(t){return t instanceof Map}function Kc(t){return t instanceof Set}function Wr(t){return t.copy_||t.base_}function vf(t,e){if(ol(t))return new Map(t);if(Kc(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=bv(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Nt];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],l=r[s];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(r[s]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[s]})}return Object.create(Ps(t),r)}else{const r=Ps(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function eh(t,e=!1){return qc(t)||fo(t)||!hi(t)||(Wc(t)>1&&Object.defineProperties(t,{set:Rl,add:Rl,clear:Rl,delete:Rl}),Object.freeze(t),e&&Object.values(t).forEach(n=>eh(n,!0))),t}function Ok(){ln(2)}var Rl={value:Ok};function qc(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var Nk={};function mi(t){const e=Nk[t];return e||ln(0,t),e}var Ls;function kv(){return Ls}function zk(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function fg(t,e){e&&(mi("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Sf(t){bf(t),t.drafts_.forEach(Pk),t.drafts_=null}function bf(t){t===Ls&&(Ls=t.parent_)}function pg(t){return Ls=zk(Ls,t)}function Pk(t){const e=t[Nt];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function hg(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Nt].modified_&&(Sf(e),ln(4)),hi(t)&&(t=za(e,t),e.parent_||Pa(e,t)),e.patches_&&mi("Patches").generateReplacementPatches_(n[Nt].base_,t,e.patches_,e.inversePatches_)):t=za(e,n,[]),Sf(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Sv?t:void 0}function za(t,e,n){if(qc(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[Nt];if(!i)return Na(e,(o,s)=>mg(t,i,e,o,s,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return Pa(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const o=i.copy_;let s=o,l=!1;i.type_===3&&(s=new Set(o),o.clear(),l=!0),Na(s,(a,c)=>mg(t,i,o,a,c,n,l),r),Pa(t,o,!1),n&&t.patches_&&mi("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function mg(t,e,n,r,i,o,s){if(i==null||typeof i!="object"&&!s)return;const l=qc(i);if(!(l&&!s)){if(fo(i)){const a=o&&e&&e.type_!==3&&!xf(e.assigned_,r)?o.concat(r):void 0,c=za(t,i,a);if(wv(n,r,c),fo(c))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if(hi(i)&&!l){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&l)return;za(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(ol(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&Pa(t,i)}}}function Pa(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&eh(e,n)}function Lk(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:kv(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=th;n&&(i=[r],o=$s);const{revoke:s,proxy:l}=Proxy.revocable(i,o);return r.draft_=l,r.revoke_=s,l}var th={get(t,e){if(e===Nt)return t;const n=Wr(t);if(!xf(n,e))return $k(t,n,e);const r=n[e];return t.finalized_||!hi(r)?r:r===_u(t.base_,e)?(Hu(t),t.copy_[e]=kf(r,t)):r},has(t,e){return e in Wr(t)},ownKeys(t){return Reflect.ownKeys(Wr(t))},set(t,e,n){const r=Cv(Wr(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=_u(Wr(t),e),o=i==null?void 0:i[Nt];if(o&&o.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Ik(n,i)&&(n!==void 0||xf(t.base_,e)))return!0;Hu(t),wf(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return _u(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,Hu(t),wf(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Wr(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){ln(11)},getPrototypeOf(t){return Ps(t.base_)},setPrototypeOf(){ln(12)}},$s={};Na(th,(t,e)=>{$s[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});$s.deleteProperty=function(t,e){return $s.set.call(this,t,e,void 0)};$s.set=function(t,e,n){return th.set.call(this,t[0],e,n,t[0])};function _u(t,e){const n=t[Nt];return(n?Wr(n):t)[e]}function $k(t,e,n){var i;const r=Cv(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function Cv(t,e){if(!(e in t))return;let n=Ps(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Ps(n)}}function wf(t){t.modified_||(t.modified_=!0,t.parent_&&wf(t.parent_))}function Hu(t){t.copy_||(t.copy_=vf(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Fk=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const o=n;n=e;const s=this;return function(a=o,...c){return s.produce(a,d=>n.call(this,d,...c))}}typeof n!="function"&&ln(6),r!==void 0&&typeof r!="function"&&ln(7);let i;if(hi(e)){const o=pg(this),s=kf(e,void 0);let l=!0;try{i=n(s),l=!1}finally{l?Sf(o):bf(o)}return fg(o,r),hg(i,o)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===Sv&&(i=void 0),this.autoFreeze_&&eh(i,!0),r){const o=[],s=[];mi("Patches").generateReplacementPatches_(e,i,o,s),r(o,s)}return i}else ln(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...l)=>this.produceWithPatches(s,a=>e(a,...l));let r,i;return[this.produce(e,n,(s,l)=>{r=s,i=l}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){hi(t)||ln(8),fo(t)&&(t=Bk(t));const e=pg(this),n=kf(t,void 0);return n[Nt].isManual_=!0,bf(e),n}finishDraft(t,e){const n=t&&t[Nt];(!n||!n.isManual_)&&ln(9);const{scope_:r}=n;return fg(r,e),hg(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=mi("Patches").applyPatches_;return fo(t)?r(t,e):this.produce(t,i=>r(i,e))}};function kf(t,e){const n=ol(t)?mi("MapSet").proxyMap_(t,e):Kc(t)?mi("MapSet").proxySet_(t,e):Lk(t,e);return(e?e.scope_:kv()).drafts_.push(n),n}function Bk(t){return fo(t)||ln(10,t),Ev(t)}function Ev(t){if(!hi(t)||qc(t))return t;const e=t[Nt];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=vf(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=vf(t,!0);return Na(n,(i,o)=>{wv(n,i,Ev(o))},r),e&&(e.finalized_=!1),n}var _k=new Fk,Hk=_k.produce;let Il;const Uk=new Uint8Array(16);function Vk(){if(!Il&&(Il=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Il))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Il(Uk)}const Ve=[];for(let t=0;t<256;++t)Ve.push((t+256).toString(16).slice(1));function Wk(t,e=0){return Ve[t[e+0]]+Ve[t[e+1]]+Ve[t[e+2]]+Ve[t[e+3]]+"-"+Ve[t[e+4]]+Ve[t[e+5]]+"-"+Ve[t[e+6]]+Ve[t[e+7]]+"-"+Ve[t[e+8]]+Ve[t[e+9]]+"-"+Ve[t[e+10]]+Ve[t[e+11]]+Ve[t[e+12]]+Ve[t[e+13]]+Ve[t[e+14]]+Ve[t[e+15]]}const Kk=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),gg={randomUUID:Kk};function F(t,e,n){if(gg.randomUUID&&!t)return gg.randomUUID();t=t||{};const r=t.random||(t.rng||Vk)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Wk(r)}const Tv=[{id:"professional",name:"Professional Blue",primary:"#003087",secondary:"#0057A8",accent:"#009CDE",background:"#F0F4FA",surface:"#FFFFFF",border:"#C8D9EE",text:"#1A2B4A",muted:"#5A789A",fontDisplay:'"DM Serif Display", Georgia, serif',fontBody:'"DM Sans", system-ui, sans-serif',fontMono:'"DM Mono", ui-monospace, monospace'},{id:"midnight",name:"Midnight Clinical",primary:"#0A0F1E",secondary:"#1A2744",accent:"#4FFFB0",background:"#080C18",surface:"#0F1628",border:"#1E2E50",text:"#E8F0FF",muted:"#6B82AA",fontDisplay:'"DM Serif Display", Georgia, serif',fontBody:'"DM Sans", system-ui, sans-serif',fontMono:'"DM Mono", ui-monospace, monospace'},{id:"editorial",name:"Editorial Print",primary:"#1A1A1A",secondary:"#333333",accent:"#C0392B",background:"#F5F0E8",surface:"#FEFCF8",border:"#D4CABC",text:"#1A1A1A",muted:"#7A6E62",fontDisplay:'"DM Serif Display", Georgia, serif',fontBody:'"DM Sans", system-ui, sans-serif',fontMono:'"DM Mono", ui-monospace, monospace'},{id:"teal",name:"Teal & Sand",primary:"#005F6B",secondary:"#008891",accent:"#F4A261",background:"#F7F3EE",surface:"#FFFFFF",border:"#D4CFC7",text:"#2C3E3F",muted:"#7A8C8D",fontDisplay:'"DM Serif Display", Georgia, serif',fontBody:'"DM Sans", system-ui, sans-serif',fontMono:'"DM Mono", ui-monospace, monospace'}];function qk(t){const e=document.documentElement;e.style.setProperty("--color-primary",t.primary),e.style.setProperty("--color-secondary",t.secondary),e.style.setProperty("--color-accent",t.accent),e.style.setProperty("--color-bg",t.background),e.style.setProperty("--color-surface",t.surface),e.style.setProperty("--color-border",t.border),e.style.setProperty("--color-text",t.text),e.style.setProperty("--color-muted",t.muted),e.style.setProperty("--font-display",t.fontDisplay),e.style.setProperty("--font-body",t.fontBody),e.style.setProperty("--font-mono",t.fontMono)}function Uu(t={}){return{id:F(),title:"Article Title",source:"Source / Journal",url:"",imageUrl:"",pubDate:"",summary:"Brief summary of the study.",clinicalContext:"Clinical context and implications for practice.",myTake:"Your clinical voice here.",evidenceLevel:"Moderate",tags:[],...t}}const Ce={header:()=>({id:F(),type:"header",title:"Your Newsletter Title",subtitle:"Your Newsletter Subtitle or Focus Area",issueNumber:"Issue 001",issueDate:new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}),tagline:"Edited by Your Name  Your Department  Your Institution",logoUrl:"",logoDataUrl:"",backgroundStyle:"gradient",accentColor:"#009CDE"}),ticker:()=>({id:F(),type:"ticker",sourceMode:"manual",items:["Add your first ticker headline here","Breaking news item two  edit me","Ticker item three  click to customize"],links:[],useLinks:!1,rssUrls:[],rssMaxItems:20,speed:"medium",backgroundColor:"#003087",textColor:"#ffffff"}),"section-divider":()=>({id:F(),type:"section-divider",label:"SECTION TITLE",style:"gradient",number:1,description:""}),"article-grid":()=>({id:F(),type:"article-grid",sectionTitle:"Featured Articles",columns:2,layout:"card",articles:[Uu({title:"Article Title One"}),Uu({title:"Article Title Two"})]}),spotlight:()=>({id:F(),type:"spotlight",article:Uu({title:"Spotlight: Paper of the Month"}),accentColor:"#009CDE",layout:"left-image"}),"ethics-split":()=>({id:F(),type:"ethics-split",heading:"Ethics & Governance Update",subheading:"What it means for practice",leftTitle:"The Concern",leftContent:"Describe the ethical or governance concern here.",rightTitle:"Clinical Perspective",rightContent:"Your perspective and recommended approach.",clinicalPerspective:"",url:"",source:""}),image:()=>({id:F(),type:"image",url:"",dataUrl:"",alt:"",caption:"",linkUrl:"",width:"full",alignment:"center",borderRadius:12}),text:()=>({id:F(),type:"text",html:'<p>Click to edit this text block. You can write <strong>bold</strong>, <em>italic</em>, and include <a href="#">links</a>.</p>',alignment:"left",maxWidth:"reading"}),"html-embed":()=>({id:F(),type:"html-embed",html:'<div style="padding:20px;border:1px dashed #ccc;border-radius:8px;text-align:center;color:#888">Custom HTML content</div>',label:"Custom HTML"}),"prompt-masterclass":()=>({id:F(),type:"prompt-masterclass",heading:"Prompt Like a Rockstar",step:"Step 1  The Baseline",framework:"Context  Task  Constraints",badPrompt:'"Explain MS."',goodPrompt:'Act as a neurology attending. In 120160 words, explain MS pathophysiology focusing on demyelination and immune mechanisms. Exclude treatment and epidemiology. Add 2 "clinical correlates" relevant to bedside localization. If uncertain, say so.',explanation:"Better prompts save time and reduce hallucinations. Persona + task verb + negative constraints + uncertainty disclosure."}),"sbar-prompt":()=>({id:F(),type:"sbar-prompt",heading:"SBAR-P Clinical AI Prompting Framework",steps:[{letter:"S",name:"SITUATION",description:"State the clinical context clearly  the care setting and presenting problem.",example:"58-year-old female admitted with acute decompensated heart failure, EF 25%, currently on IV furosemide."},{letter:"B",name:"BACKGROUND",description:"Provide relevant history, current medications, allergies, and key investigations.",example:"PMH: CKD stage 3 (eGFR 38), type 2 diabetes. Current Cr 2.1 (baseline 1.6). On metformin, lisinopril, carvedilol."},{letter:"A",name:"ASK",description:"Be explicit about exactly what you want. Vague asks produce vague answers.",example:"List the top 5 causes of worsening renal function in this setting and the targeted workup for each."},{letter:"R",name:"ROLE",description:"Assign a clinical persona to anchor the AI's frame of reference and reasoning style.",example:"Respond as a nephrology consultant reviewing this case and preparing a consultation note."},{letter:"P",name:"PARAMETERS",description:"Set safety guardrails: specify the evidence base, require uncertainty disclosure, and define what to do when information is insufficient.",example:"Use current KDIGO 2024 guidelines. Explicitly flag any uncertainty. Do not fabricate lab values or medication doses."}],templatePrompt:`Act as a [SPECIALTY] consultant reviewing this case.

Patient: [AGE] [SEX] presenting with [CHIEF COMPLAINT] for [DURATION].
Key findings: [VITAL SIGNS, EXAM FINDINGS, KEY LABS/IMAGING]
PMH: [RELEVANT COMORBIDITIES]
Current medications: [MED LIST]

Task: Generate a prioritized differential diagnosis (top 5 conditions).
For each diagnosis, provide:
  1. Likelihood assessment (High / Moderate / Low)
  2. Supporting clinical features from this case
  3. Single most informative next investigation

Requirements:
- Base reasoning on current evidence-based guidelines
- Explicitly flag areas of uncertainty
- Do not fabricate laboratory values, imaging findings, or medication doses
- If clinical information is insufficient, state what additional data is needed`,safetyTips:["Always verify AI-generated clinical reasoning against primary sources before acting.","Never submit patient-identifiable information (PHI) to consumer AI tools  use only approved institutional platforms.","AI supports clinical judgment; it does not replace it. Final decisions remain with the treating clinician.","Document AI tool use in the medical record where institutional policy requires it."]}),"prompt-template":()=>({id:F(),type:"prompt-template",heading:"Template Prompt",prompt:`Act as a [SPECIALTY] consultant reviewing this case.

Patient: [AGE] [SEX] presenting with [CHIEF COMPLAINT] for [DURATION].
Key findings: [VITAL SIGNS, EXAM FINDINGS, KEY LABS/IMAGING]
PMH: [RELEVANT COMORBIDITIES]
Current medications: [MED LIST]

Task: Generate a prioritized differential diagnosis (top 5 conditions).
For each diagnosis, provide:
  1. Likelihood assessment (High / Moderate / Low)
  2. Supporting clinical features from this case
  3. Single most informative next investigation

Requirements:
- Base reasoning on current evidence-based guidelines
- Explicitly flag areas of uncertainty
- Do not fabricate laboratory values, imaging findings, or medication doses
- If clinical information is insufficient, state what additional data is needed`}),"safety-reminders":()=>({id:F(),type:"safety-reminders",heading:"Safety Reminders",items:["Always verify AI-generated clinical reasoning against primary sources before acting.","Never submit patient-identifiable information (PHI) to consumer AI tools  use only approved institutional platforms.","AI supports clinical judgment; it does not replace it. Final decisions remain with the treating clinician.","Document AI tool use in the medical record where institutional policy requires it."]}),"clinical-prompt-templates":()=>({id:F(),type:"clinical-prompt-templates",heading:"Clinical Prompt Templates",description:"Click any prompt to copy it. Ready-to-use templates for common clinical AI scenarios.",templates:[{id:F(),category:"Differential Diagnosis",title:"Generate Differential Diagnosis",prompt:"Act as a neurology attending. My patient is a [AGE] [SEX] presenting with [SYMPTOM] for [DURATION]. Key findings: [EXAM/LABS/IMAGING]. Generate a prioritized differential (top 5), with likelihood, supporting features, and one targeted investigation for each. Use evidence-based reasoning. Flag uncertainty. Do not fabricate data.",useCase:"Clinical reasoning support for complex presentations"},{id:F(),category:"Discharge Summary",title:"Discharge Summary Draft",prompt:"Act as a hospitalist writing a discharge summary. Patient: [NAME OMITTED], [AGE] [SEX], admitted [DATE] for [PRIMARY DIAGNOSIS]. Hospital course: [BRIEF SUMMARY]. Discharge condition: [STABLE/IMPROVED]. Write a structured discharge summary including: diagnosis, hospital course, discharge medications, follow-up instructions, and return precautions. Use clear patient-friendly language for the patient section.",useCase:"Streamline discharge documentation"},{id:F(),category:"Literature Review",title:"Evidence Summary",prompt:"Summarize the current evidence base for [INTERVENTION/DRUG/PROCEDURE] in patients with [CONDITION]. Include: level of evidence, key RCTs or meta-analyses, effect size, number needed to treat (if applicable), major contraindications, and areas of ongoing debate. Limit to 200 words. Cite uncertainty where evidence is weak. Do not fabricate citations.",useCase:"Quick evidence review at the point of care"},{id:F(),category:"Patient Education",title:"Patient Education Letter",prompt:'Write a patient education letter for a [AGE]-year-old with [DIAGNOSIS]. Explain: what the condition is, why it matters, the recommended treatment plan, what to expect, and when to seek urgent care. Use a 6th-grade reading level. Avoid medical jargon. End with 3 specific "warning signs" requiring immediate emergency evaluation.',useCase:"Generate patient-readable health information"},{id:F(),category:"EEG / EMG Report",title:"Neurophysiology Interpretation",prompt:"Act as a clinical neurophysiologist. Interpret the following EEG/EMG findings and generate a structured report: [PASTE FINDINGS]. Include: technical quality, relevant findings, clinical correlation, and impression. Note limitations. Flag any findings that warrant urgent clinical attention. Do not infer diagnoses beyond what the data supports.",useCase:"Neurophysiology report drafting and review"},{id:F(),category:"Research",title:"Research Abstract Summary",prompt:"Summarize this research paper for a clinical audience. Provide: (1) Study question in one sentence, (2) Study design and population, (3) Primary outcome and result, (4) Key limitations, (5) Clinical bottom line in one sentence. Keep total to 150 words. Do not overstate conclusions beyond what the study supports.",useCase:"Rapid journal club and literature scanning"}]}),"term-of-month":()=>({id:F(),type:"term-of-month",term:"Foundation Model",definition:"A large-scale AI model trained on broad, diverse data that serves as a reusable base adaptable to many downstream tasks  including text, medical imaging, and multimodal applications.",relevance:"Foundation models shift AI from narrow, single-disease algorithms to robust systems that can generalize across conditions  enabling faster iteration and broader utility, while introducing new governance and validation challenges.",clinicalApplication:"A vision foundation model trained on large imaging datasets can screen for multiple conditions from a single inference, rather than requiring separate validated detectors for each pathology.",relatedTerms:["Transfer Learning","Fine-tuning","Large Language Model","GPT","Multimodal AI","BERT"]}),"ai-case-file":()=>({id:F(),type:"ai-case-file",year:"1950",title:"The Turing Test",content:'In 1950, Alan Turing published "Computing Machinery and Intelligence," proposing the Imitation Game as a practical test for machine intelligence. Rather than asking "Can machines think?"  philosophically unanswerable  Turing asked whether a machine could behave indistinguishably from a human in text conversation. This reframing from metaphysics to measurement shaped the next 70 years of AI development.',significance:"The Turing Test established the behavioral benchmark for AI that still drives philosophical debate about machine consciousness, language, and cognition today.",imageUrl:"",imageDataUrl:"",sourceUrl:"https://doi.org/10.1093/mind/LIX.236.433",sourceLabel:"Turing, 1950  Mind Journal"}),"quick-hits":()=>({id:F(),type:"quick-hits",heading:"Quick Hits",hits:[{id:F(),title:"Add article title here",url:"",source:"Journal",summary:"12 line summary."},{id:F(),title:"Add article title here",url:"",source:"Journal",summary:"12 line summary."}]}),humor:()=>({id:F(),type:"humor",heading:" Humor Break",content:"Add your humor, anecdote, or lighthearted content here. Something your readers will smile at.",attribution:" Submitted anonymously",emojiDecor:"",imageUrl:"",imageDataUrl:"",sourceUrl:"",imageHeight:void 0,imageFit:"contain"}),spacer:()=>({id:F(),type:"spacer",height:32,showLine:!1,lineStyle:"solid"}),footer:()=>({id:F(),type:"footer",institution:"Your Institution",department:"Your Department",editors:"Editor Name(s)",unsubscribeUrl:"",subscribeUrl:"",websiteUrl:"",contactEmail:"",copyrightYear:String(new Date().getFullYear()),disclaimer:"This newsletter is for educational purposes only and does not constitute professional advice. Content represents the views of the authors and not the institution.",socials:[],showSocials:!1,nextIssueDate:"",nextIssueTeaser:""}),"ai-safety":()=>({id:F(),type:"ai-safety",heading:"AI Safety Monitor",subheading:"Regulatory updates, incidents, and clinical safety alerts",showLastUpdated:!0,updates:[{id:F(),date:new Date().toISOString().split("T")[0],category:"FDA",title:"FDA Issues Guidance on AI-Enabled Medical Devices",summary:"New guidance emphasizes post-market surveillance requirements for adaptive AI algorithms used in clinical decision support.",url:"https://www.fda.gov/medical-devices/software-medical-device-samd/artificial-intelligence-and-machine-learning-aiml-enabled-medical-devices",severity:"high"},{id:F(),date:new Date().toISOString().split("T")[0],category:"Guideline",title:"AAN Position Statement: Clinical Use of Large Language Models",summary:"The American Academy of Neurology recommends structured validation and institutional oversight before deploying LLMs in patient-facing clinical workflows.",url:"https://www.aan.com",severity:"medium"},{id:F(),date:new Date().toISOString().split("T")[0],category:"Alert",title:"Hallucination Risk: AI Drug Dosing Tools",summary:"Multiple case reports have identified incorrect medication dosing recommendations from consumer AI chatbots used without clinical validation. Institutional guardrails are strongly recommended.",url:"",severity:"critical"}]}),"institutional-spotlight":()=>({id:F(),type:"institutional-spotlight",heading:"Institutional Spotlight",subheading:"Latest news and innovation from your organization",institutionLabel:"Your Institution",autoFetch:!1,lastFetched:"",maxItems:6,items:[{id:F(),category:"Innovation",title:"Add a news item",url:"",pubDate:new Date().toISOString(),summary:"Summary of this initiative or news item.",imageUrl:""}]}),"rss-sidebar":()=>({id:F(),type:"rss-sidebar",heading:"In the Feed This Week",feedUrls:["https://pubmed.ncbi.nlm.nih.gov/rss/search/1/?term=neurology+artificial+intelligence&sort=date","https://jamanetwork.com/rss/site_16/onlineFirst_72.xml","https://pn.bmj.com/rss/current.xml"],items:[],maxItems:15,lastFetched:"",position:"inline",refreshOnView:!1,enableScroll:!1})},Cf={header:"  Header / Masthead",ticker:"  Scrolling News Ticker","section-divider":"  Section Divider","article-grid":"  Article Grid",spotlight:"  Spotlight Article","ethics-split":"   Ethics & Governance",image:"  Image Block",text:"  Rich Text Block","html-embed":"  HTML Embed","prompt-masterclass":"  Prompt Masterclass","sbar-prompt":"  SBAR-P Framework","prompt-template":"  Template Prompt","safety-reminders":"  Safety Reminders","clinical-prompt-templates":"  Clinical Prompt Templates","term-of-month":"  AI Term of the Month","ai-case-file":"  AI Case File / History","quick-hits":"  Quick Hits",humor:"  Humor Break",spacer:"  Spacer",footer:"  Footer","ai-safety":"  AI Safety Monitor","institutional-spotlight":"  Institutional Spotlight","rss-sidebar":"  RSS Feed Panel"};function Jk(){const t=F(),e=F(),n=F(),r=F(),i=F(),o=F(),s=F(),l=F(),a=F(),c=F(),d=F(),f=F(),p=F(),h=F(),m=F(),g=F(),S=F(),y=F(),x=F(),v=F();return{meta:{id:F(),title:"My Newsletter  Issue 001",issueNumber:"001",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},theme:Tv[0],blockOrder:[t,e,n,r,i,o,s,l,a,c,d,f,p,h,m,g,S,y,x,v],blocks:{[t]:{...Ce.header(),id:t},[e]:{...Ce.ticker(),id:e},[n]:{...Ce["section-divider"](),id:n,label:"TOP NEUROLOGY AI NEWS",number:1},[r]:{...Ce["article-grid"](),id:r},[i]:{...Ce.spotlight(),id:i},[o]:{...Ce["section-divider"](),id:o,label:"AI SAFETY & ETHICS",number:2},[s]:{...Ce["ethics-split"](),id:s},[l]:{...Ce["ai-safety"](),id:l},[a]:{...Ce["section-divider"](),id:a,label:"CLINICAL AI SKILLS",number:3},[c]:{...Ce["sbar-prompt"](),id:c},[d]:{...Ce["prompt-template"](),id:d},[f]:{...Ce["safety-reminders"](),id:f},[p]:{...Ce["clinical-prompt-templates"](),id:p},[h]:{...Ce["term-of-month"](),id:h},[m]:{...Ce["section-divider"](),id:m,label:"NORTHWELL & COMMUNITY",number:4},[g]:{...Ce["institutional-spotlight"](),id:g},[S]:{...Ce["rss-sidebar"](),id:S},[y]:{...Ce.humor(),id:y},[x]:{...Ce.spacer(),id:x},[v]:{...Ce.footer(),id:v}}}}function Gk(t,e){return Hk(t,n=>{switch(e.type){case"LOAD":return e.payload;case"ADD_BLOCK":{const r={...Ce[e.payload.blockType](),id:F()};if(n.blocks[r.id]=r,e.payload.afterId){const i=n.blockOrder.indexOf(e.payload.afterId);n.blockOrder.splice(i+1,0,r.id)}else n.blockOrder.push(r.id);break}case"DELETE_BLOCK":{const r=n.blockOrder.indexOf(e.payload.id);r>-1&&n.blockOrder.splice(r,1),delete n.blocks[e.payload.id];break}case"UPDATE_BLOCK":{const r=n.blocks[e.payload.id];r&&Object.assign(r,e.payload.changes);break}case"MOVE_BLOCK":{const{from:r,to:i}=e.payload,[o]=n.blockOrder.splice(r,1);n.blockOrder.splice(i,0,o);break}case"DUPLICATE_BLOCK":{const r=n.blocks[e.payload.id];if(!r)break;const i=JSON.parse(JSON.stringify(r));i.id=F(),n.blocks[i.id]=i;const o=n.blockOrder.indexOf(e.payload.id);n.blockOrder.splice(o+1,0,i.id);break}case"UPDATE_THEME":n.theme=e.payload;break;case"UPDATE_META":Object.assign(n.meta,e.payload);break;case"ADD_ARTICLE":{const r=n.blocks[e.payload.blockId];r!=null&&r.articles&&r.articles.push({id:F(),title:"New Article",source:"",url:"",imageUrl:"",pubDate:"",summary:"",clinicalContext:"",myTake:"",evidenceLevel:"",tags:[]}),(r==null?void 0:r.article)===void 0&&(r==null||r.type);break}case"UPDATE_ARTICLE":{const r=n.blocks[e.payload.blockId];if(r!=null&&r.articles){const i=r.articles.find(o=>o.id===e.payload.articleId);i&&Object.assign(i,e.payload.changes)}else r!=null&&r.article&&e.payload.articleId===r.article.id&&Object.assign(r.article,e.payload.changes);break}case"DELETE_ARTICLE":{const r=n.blocks[e.payload.blockId];r!=null&&r.articles&&(r.articles=r.articles.filter(i=>i.id!==e.payload.articleId));break}case"MOVE_ARTICLE":{const r=n.blocks[e.payload.blockId];if(r!=null&&r.articles){const[i]=r.articles.splice(e.payload.from,1);r.articles.splice(e.payload.to,0,i)}break}case"ADD_QUICK_HIT":{const r=n.blocks[e.payload.blockId];r!=null&&r.hits&&r.hits.push({id:F(),title:"New hit",url:"",source:"",summary:""});break}case"UPDATE_QUICK_HIT":{const r=n.blocks[e.payload.blockId];if(r!=null&&r.hits){const i=r.hits.find(o=>o.id===e.payload.hitId);i&&Object.assign(i,e.payload.changes)}break}case"DELETE_QUICK_HIT":{const r=n.blocks[e.payload.blockId];r!=null&&r.hits&&(r.hits=r.hits.filter(i=>i.id!==e.payload.hitId));break}}n.meta.updatedAt=new Date().toISOString()})}function Yk(t){const[e,n]=b.useReducer(Gk,Jk()),r=b.useCallback(x=>n({type:"LOAD",payload:x}),[]),i=b.useCallback((x,v)=>n({type:"ADD_BLOCK",payload:{blockType:x,afterId:v}}),[]),o=b.useCallback(x=>n({type:"DELETE_BLOCK",payload:{id:x}}),[]),s=b.useCallback((x,v)=>n({type:"UPDATE_BLOCK",payload:{id:x,changes:v}}),[]),l=b.useCallback((x,v)=>n({type:"MOVE_BLOCK",payload:{from:x,to:v}}),[]),a=b.useCallback(x=>n({type:"DUPLICATE_BLOCK",payload:{id:x}}),[]),c=b.useCallback(x=>n({type:"UPDATE_THEME",payload:x}),[]),d=b.useCallback(x=>n({type:"UPDATE_META",payload:x}),[]),f=b.useCallback(x=>n({type:"ADD_ARTICLE",payload:{blockId:x}}),[]),p=b.useCallback((x,v,w)=>n({type:"UPDATE_ARTICLE",payload:{blockId:x,articleId:v,changes:w}}),[]),h=b.useCallback((x,v)=>n({type:"DELETE_ARTICLE",payload:{blockId:x,articleId:v}}),[]),m=b.useCallback((x,v,w)=>n({type:"MOVE_ARTICLE",payload:{blockId:x,from:v,to:w}}),[]),g=b.useCallback(x=>n({type:"ADD_QUICK_HIT",payload:{blockId:x}}),[]),S=b.useCallback((x,v,w)=>n({type:"UPDATE_QUICK_HIT",payload:{blockId:x,hitId:v,changes:w}}),[]),y=b.useCallback((x,v)=>n({type:"DELETE_QUICK_HIT",payload:{blockId:x,hitId:v}}),[]);return{newsletter:e,load:r,addBlock:i,deleteBlock:o,updateBlock:s,moveBlock:l,duplicateBlock:a,updateTheme:c,updateMeta:d,addArticle:f,updateArticle:p,deleteArticle:h,moveArticle:m,addQuickHit:g,updateQuickHit:S,deleteQuickHit:y}}const yg="nap:autosave",Vu="nap:versions";function Qk(){const[t,e]=b.useState(()=>{try{return JSON.parse(localStorage.getItem(Vu)||"[]")}catch{return[]}}),n=b.useCallback(a=>{try{localStorage.setItem(yg,JSON.stringify(a))}catch{console.warn("Autosave failed")}},[]),r=b.useCallback(()=>{try{const a=localStorage.getItem(yg);return a?JSON.parse(a):null}catch{return null}},[]),i=b.useCallback((a,c)=>{const d={id:F(),label:c||`Version ${new Date().toLocaleString()}`,createdAt:new Date().toISOString(),newsletter:a};e(f=>{const p=[d,...f].slice(0,20);return localStorage.setItem(Vu,JSON.stringify(p)),p})},[]),o=b.useCallback(a=>{e(c=>{const d=c.filter(f=>f.id!==a);return localStorage.setItem(Vu,JSON.stringify(d)),d})},[]),s=b.useCallback(a=>{const c=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),d=URL.createObjectURL(c),f=document.createElement("a");f.href=d,f.download=`nap-issue-${a.meta.issueNumber||"draft"}.json`,f.click(),URL.revokeObjectURL(d)},[]),l=b.useCallback(a=>new Promise((c,d)=>{const f=new FileReader;f.onload=p=>{var h;try{c(JSON.parse((h=p.target)==null?void 0:h.result))}catch{d(new Error("Invalid JSON file"))}},f.onerror=()=>d(new Error("File read failed")),f.readAsText(a)}),[]);return{versions:t,autosave:n,loadAutosave:r,saveVersion:i,deleteVersion:o,exportJSON:s,importJSON:l}}function Xk(t,e,n=3e4){b.useEffect(()=>{const r=setInterval(()=>e(t),n);return()=>clearInterval(r)},[t,e,n])}const Zk=[{url:"https://www.frontiersin.org/journals/neuroscience/rss",label:"Frontiers in Neuroscience  RSS",enabled:!0},{url:"https://www.frontiersin.org/journals/neurology/rss",label:"Frontiers in Neurology  RSS",enabled:!0},{url:"https://news.mit.edu/rss/topic/artificial-intelligence2",label:"MIT News  Artificial Intelligence",enabled:!0},{url:"https://www.sciencedaily.com/rss/computers_math/artificial_intelligence.xml",label:"ScienceDaily  Artificial Intelligence",enabled:!0},{url:"https://www.marktechpost.com/feed/",label:"MarkTechPost  AI News",enabled:!0},{url:"https://www.thelancet.com/rssfeed/laneur_current.xml",label:"The Lancet Neurology  Current",enabled:!0},{url:"https://jamanetwork.com/rss/site_16/0.xml",label:"JAMA Neurology  RSS",enabled:!0},{url:"https://www.nature.com/npjdigitalmed.rss",label:"npj Digital Medicine  RSS",enabled:!0},{url:"https://pubmed.ncbi.nlm.nih.gov/rss/search/1x9bY_ZPGMIgWOrGWvQbkjt2X1J5zCH66gaj5UHwPTuOP_TklI/?limit=15&utm_campaign=pubmed-2&fc=20260222062849",label:"PubMed RSS  Neurology AI Search",enabled:!0}],eC="https://api.allorigins.win/get?url=";function tC(t,e){try{const r=new DOMParser().parseFromString(t,"text/xml");if(r.querySelector("parsererror"))return[];const i=Array.from(r.querySelectorAll("item"));return i.length?i.map(s=>{var l,a,c,d,f,p,h,m,g,S,y;return{title:((a=(l=s.querySelector("title"))==null?void 0:l.textContent)==null?void 0:a.trim())||"",link:((d=(c=s.querySelector("link"))==null?void 0:c.textContent)==null?void 0:d.trim())||"",pubDate:((p=(f=s.querySelector("pubDate"))==null?void 0:f.textContent)==null?void 0:p.trim())||"",source:((m=(h=s.querySelector("source"))==null?void 0:h.textContent)==null?void 0:m.trim())||e,description:((S=(g=s.querySelector("description"))==null?void 0:g.textContent)==null?void 0:S.trim())||"",imageUrl:((y=s.querySelector('enclosure[type^="image"]'))==null?void 0:y.getAttribute("url"))||""}}):Array.from(r.querySelectorAll("entry")).map(s=>{var l,a,c,d,f,p,h,m,g,S,y,x,v,w,k;return{title:((a=(l=s.querySelector("title"))==null?void 0:l.textContent)==null?void 0:a.trim())||"",link:((c=s.querySelector("link"))==null?void 0:c.getAttribute("href"))||((f=(d=s.querySelector("link"))==null?void 0:d.textContent)==null?void 0:f.trim())||"",pubDate:((h=(p=s.querySelector("updated"))==null?void 0:p.textContent)==null?void 0:h.trim())||((g=(m=s.querySelector("published"))==null?void 0:m.textContent)==null?void 0:g.trim())||"",source:((y=(S=r.querySelector("feed > title"))==null?void 0:S.textContent)==null?void 0:y.trim())||e,description:((v=(x=s.querySelector("summary"))==null?void 0:x.textContent)==null?void 0:v.trim())||((k=(w=s.querySelector("content"))==null?void 0:w.textContent)==null?void 0:k.trim())||"",imageUrl:""}})}catch{return[]}}function nC(){const[t,e]=b.useState(Zk),[n,r]=b.useState([]),[i,o]=b.useState(!1),[s,l]=b.useState([]),[a,c]=b.useState(""),d=b.useCallback(async()=>{o(!0),l([]);const g=[],S=[];for(const v of t.filter(w=>w.enabled))try{const w=await fetch(eC+encodeURIComponent(v.url),{cache:"no-store"});if(!w.ok)throw new Error(`HTTP ${w.status}`);const k=await w.json(),T=k&&typeof k.contents=="string"?k.contents:"";g.push(...tC(T,v.label))}catch(w){S.push(`${v.label}: ${w.message}`)}const y=new Set,x=g.filter(v=>!v.link||y.has(v.link)?!1:(y.add(v.link),!0));x.sort((v,w)=>(Date.parse(w.pubDate)||0)-(Date.parse(v.pubDate)||0)),r(x),l(S),o(!1)},[t]),f=a?n.filter(g=>(g.title+" "+g.description).toLowerCase().includes(a.toLowerCase())):n,p=b.useCallback((g,S)=>{e(y=>[...y,{url:g,label:S,enabled:!0}])},[]),h=b.useCallback(g=>{e(S=>S.filter(y=>y.url!==g))},[]),m=b.useCallback(g=>{e(S=>S.map(y=>y.url===g?{...y,enabled:!y.enabled}:y))},[]);return{feeds:t,items:f,loading:i,errors:s,filter:a,refresh:d,setFilter:c,addFeed:p,removeFeed:h,toggleFeed:m}}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),pe=(t,e)=>{const n=b.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:l="",children:a,...c},d)=>b.createElement("svg",{ref:d,...rC,width:i,height:i,stroke:r,strokeWidth:s?Number(o)*24/Number(i):o,className:["lucide",`lucide-${iC(t)}`,l].join(" "),...c},[...e.map(([f,p])=>b.createElement(f,p)),...Array.isArray(a)?a:[a]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=pe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=pe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=pe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=pe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=pe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=pe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=pe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xg=pe("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vg=pe("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=pe("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=pe("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=pe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=pe("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=pe("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=pe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=pe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=pe("Rss",[["path",{d:"M4 11a9 9 0 0 1 9 9",key:"pv89mb"}],["path",{d:"M4 4a16 16 0 0 1 16 16",key:"k0647b"}],["circle",{cx:"5",cy:"19",r:"1",key:"bfqh0e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sg=pe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=pe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=pe("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=pe("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function M(t){return(t??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function bC(t){if(!t)return[];if(Array.isArray(t))return t.filter(Boolean).map(String);if(typeof t=="string"){const e=t.split(/\s*,\s*|\n+/g).map(n=>n.trim()).filter(Boolean);return e.length?e:[t.trim()]}return[String(t)]}function wC(t,e){const n=Number.isFinite(e)?`html{font-size:${e}px}`:"";return`
:root {
  --c-primary: ${t.primary};
  --c-secondary: ${t.secondary};
  --c-accent: ${t.accent};
  --c-bg: ${t.background};
  --c-surface: ${t.surface};
  --c-border: ${t.border};
  --c-text: ${t.text};
  --c-muted: ${t.muted};
  --f-display: ${t.fontDisplay};
  --f-body: ${t.fontBody};
  --f-mono: ${t.fontMono};
}
*,*::before,*::after { box-sizing: border-box; }
${n}
html, body { margin: 0; height: auto !important; overflow: auto !important; }
body {
  font-family: var(--f-body);
  color: var(--c-text);
  background: var(--c-bg);
  padding: 22px 0;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
/* Match builder: links default to accent; white sections inherit; ticker stays white */
a { color: var(--c-accent); text-decoration: none; }
a:hover { text-decoration: underline; }
/* Ticker links always white */
.nap-ticker a { color: inherit !important; text-decoration: none !important; }
.nap-ticker span { color: inherit; }
/* White section links */
.nap-white-section a { color: inherit; }
img { max-width: 100%; display: block; }
/* Export fidelity: DO NOT scale. Keep 1:1 typography and layout. */
.nap-export-wrap { width: 100%; display: flex; justify-content: center; }
.nap-shell {
  max-width: 900px;
  width: 100%;
  margin: 0 auto;
  background: var(--c-surface);
  border: 1px solid var(--c-border);
  border-radius: 18px;
  overflow: hidden;
  box-shadow: 0 14px 40px rgba(0,0,0,0.10);
}
[contenteditable] { outline: none !important; }
[data-editor-ui], [data-dnd-dragging] { display: none !important; }

@keyframes nap_ticker { from { transform: translateX(0); } to { transform: translateX(-50%); } }
@keyframes nap_pulse { 0%,100% { opacity:1; } 50% { opacity:0.3; } }
.nap-ticker-track { display: flex; white-space: nowrap; will-change: transform; }

@media (max-width: 680px) {
  .nap-2col, .nap-3col, .nap-5col { display: block !important; }
  .nap-2col > *, .nap-3col > *, .nap-5col > * { margin-bottom: 14px; }
}

.nap-tpl-prompt { display: none; padding: 10px 14px; }
.nap-tpl-prompt.open { display: block; }
.nap-copy-btn { cursor: pointer; color: #fff !important; }
.nap-expand-btn { cursor: pointer; }
/* Export should NOT truncate RSS: show all items without an internal scroll box. */
.nap-rss-scroll { max-height: none !important; overflow: visible !important; }
/* Safety: enforce SBAR letter styling even if something external tries to override. */
.nap-sbar-letter { font-size:56px !important; font-weight:400 !important; line-height:1 !important; margin-bottom:6px !important; font-style:italic !important; text-transform:uppercase !important; }

/* Export-only: ensure "Related" chips render as clear pills even if imported CSS has aggressive !important rules. */
.ai-related-label { font-weight: 700 !important; }
.ai-related-pill {
  display: inline-block !important;
  background: #F3F6FF !important;
  border: 1px solid var(--c-border) !important;
  color: var(--c-text) !important;
  padding: 4px 10px !important;
  border-radius: 999px !important;
  font-family: var(--f-mono) !important;
  font-size: 11px !important;
  line-height: 16px !important;
  margin: 0 6px 0 0 !important;
}
`}function kC(t,e){return`
<div class="nap-white-section" style="background:${t.backgroundStyle==="solid"?e.primary:`linear-gradient(135deg, ${e.primary} 0%, ${e.secondary} 60%, ${e.accent}44 100%)`};padding:48px 40px;text-align:center;position:relative;overflow:hidden;color:#fff">
  <svg style="position:absolute;bottom:0;left:0;right:0;opacity:0.08" viewBox="0 0 800 60" fill="none" preserveAspectRatio="none" height="60">
    <path d="M0 40 Q200 0 400 30 Q600 60 800 20 L800 60 L0 60Z" fill="white"/>
  </svg>
  ${t.logoDataUrl||t.logoUrl?`<div style="margin-bottom:20px"><img src="${M(t.logoDataUrl||t.logoUrl)}" alt="Logo" style="max-height:60px;max-width:240px;border-radius:8px;display:inline-block;margin:0 auto"></div>`:""}
  <div style="font-family:${e.fontMono};font-size:11px;letter-spacing:0.22em;text-transform:uppercase;color:rgba(255,255,255,0.8);margin-bottom:12px">${M(t.issueNumber)}  ${M(t.issueDate)}</div>
  <h1 style="font-family:${e.fontDisplay};font-size:46px;font-weight:400;color:#fff;margin:0 0 10px;letter-spacing:-0.02em;line-height:1.1">${M(t.title)}</h1>
  <p style="font-family:${e.fontDisplay};font-size:20px;font-style:italic;color:rgba(255,255,255,0.92);margin:0 0 18px;line-height:1.3">${M(t.subtitle)}</p>
  <div style="height:1px;background:rgba(255,255,255,0.3);max-width:280px;margin:0 auto 18px"></div>
  <p style="font-family:${e.fontBody};font-size:13px;color:rgba(255,255,255,0.85);margin:0;letter-spacing:0.02em">${M(t.tagline)}</p>
</div>`}function CC(t,e){const n={slow:60,medium:36,fast:20}[t.speed]??36,r=t.textColor||"#ffffff",i=t.backgroundColor||e.primary,o=`<span style="width:5px;height:5px;border-radius:50%;background:${e.accent};display:inline-block;flex-shrink:0"></span>`,s=`font-family:${e.fontMono};font-size:12px;color:${r};padding:0 32px;letter-spacing:0.04em;display:inline-flex;align-items:center;gap:10px;text-decoration:none`;let l="";t.sourceMode==="rss"||t.useLinks?l=(t.links||[]).filter(d=>d==null?void 0:d.text).map(d=>`<a class="nap-ticker-item" href="${M(d.url||"#")}" target="_blank" rel="noopener noreferrer" style="${s}">${o}${M(d.text)}<span style="font-size:10px;opacity:0.6;color:${r}"></span></a>`).join(""):l=(t.items||[]).map(d=>`<span class="nap-ticker-item" style="${s}">${o}${M(d)}</span>`).join("");const a=M(JSON.stringify((t.rssUrls||[]).filter(Boolean))),c=t.sourceMode==="rss"?`
  <details class="nap-rss-config" data-rss-kind="ticker" style="position:relative;z-index:2;margin-left:auto;margin-right:14px">
    <summary style="list-style:none;cursor:pointer;font-family:${e.fontMono};font-size:10px;letter-spacing:0.14em;text-transform:uppercase;color:rgba(255,255,255,0.85);padding:6px 10px;border:1px solid rgba(255,255,255,0.25);border-radius:999px;user-select:none">RSS </summary>
    <div style="margin-top:10px;background:rgba(0,0,0,0.35);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.2);border-radius:12px;padding:12px;min-width:280px">
      <div style="font-family:${e.fontBody};font-size:12px;color:#fff;margin-bottom:10px;line-height:1.4">Snapshot is shown by default. Enable <b>Live</b> to refresh from selected feeds.</div>
      <label style="display:flex;align-items:center;gap:8px;font-family:${e.fontBody};font-size:12px;color:#fff;margin-bottom:10px">
        <input type="checkbox" class="nap-rss-live" style="transform:translateY(1px)" /> Live RSS
      </label>
      <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px">
        <div style="font-family:${e.fontBody};font-size:12px;color:#fff">Feeds</div>
        <select class="nap-rss-maxfeeds" style="margin-left:auto;padding:6px 10px;border-radius:10px;border:1px solid rgba(255,255,255,0.25);background:rgba(255,255,255,0.08);color:#fff;font-family:${e.fontBody};font-size:12px">
          <option value="5">5</option>
          <option value="8">8</option>
          <option value="10">10</option>
          <option value="12">12</option>
          <option value="15">15</option>
          <option value="20">20</option>
        </select>
      </div>
      <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px">
        <div style="font-family:${e.fontBody};font-size:12px;color:#fff">Items total</div>
        <select class="nap-rss-max" style="margin-left:auto;padding:6px 10px;border-radius:10px;border:1px solid rgba(255,255,255,0.25);background:rgba(255,255,255,0.08);color:#fff;font-family:${e.fontBody};font-size:12px">
          <option value="5">5</option>
          <option value="10">10</option>
          <option value="15">15</option>
          <option value="20">20</option>
          <option value="30">30</option>
          <option value="50">50</option>
        </select>
      </div>
      <div class="nap-rss-preset-list" style="display:grid;gap:6px"></div>
      <div style="display:flex;gap:8px;margin-top:10px">
        <input class="nap-rss-add" placeholder="Add RSS URL" style="flex:1;padding:8px 10px;border-radius:10px;border:1px solid rgba(255,255,255,0.25);background:rgba(255,255,255,0.08);color:#fff;font-family:${e.fontBody};font-size:12px" />
        <button class="nap-rss-add-btn" type="button" style="padding:8px 10px;border-radius:10px;border:1px solid rgba(255,255,255,0.25);background:rgba(255,255,255,0.12);color:#fff;font-family:${e.fontBody};font-size:12px;cursor:pointer">Add</button>
      </div>
      <div class="nap-rss-status" style="margin-top:10px;font-family:${e.fontBody};font-size:12px;color:rgba(255,255,255,0.85)"></div>
    </div>
  </details>`:"";return`
<div class="nap-ticker"
  data-source="${M(t.sourceMode||"manual")}"
  data-rss='${a}'
  data-rss-max="${M(String(t.rssMaxItems||20))}"
  data-live="0"
  data-key="${M(t.id||"ticker")}"
  style="background:${i};overflow:hidden;height:40px;display:flex;align-items:center;color:${r}">
  ${c}
  <div class="nap-ticker-track" style="animation:nap_ticker ${n}s linear infinite">
    ${l}${l}
  </div>
</div>`}function EC(t,e){return t.style==="bold"?`
<div class="nap-white-section" style="background:${e.primary};padding:18px 40px;display:flex;align-items:center;gap:16px;color:#fff">
  ${t.number>0?`<span style="font-family:${e.fontMono};font-size:32px;font-weight:300;color:rgba(255,255,255,0.25);line-height:1">${M(String(t.number).padStart(2,"0"))}</span>`:""}
  <div>
    <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.22em;text-transform:uppercase;color:rgba(255,255,255,0.5);margin-bottom:2px">Section</div>
    <div style="font-family:${e.fontDisplay};font-size:22px;color:#fff;line-height:1.15">${M(t.label)}</div>
  </div>
</div>`:`
<div style="padding:32px 40px 16px">
  <div style="display:flex;align-items:center;gap:14px;margin-bottom:${t.description?10:0}px">
    <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.22em;text-transform:uppercase;color:${e.muted};white-space:nowrap">
      <span>${t.number>0?`0${t.number}  `:" "}</span>${M(t.label)}<span> </span>
    </div>
    <div style="flex:1;height:1px;background:linear-gradient(90deg, ${e.border}, transparent)"></div>
  </div>
  ${t.description?`<p style="font-family:${e.fontBody};font-size:14px;color:${e.muted};margin:0;line-height:1.6">${M(t.description)}</p>`:""}
</div>`}function TC(t,e){const n=t.columns||2,r=t.layout||"default",i={High:"#00A651",Moderate:"#F47920",Low:"#C0392B","Expert Opinion":"#7B2D8B"},o=(t.articles||[]).map(s=>{const l=s.evidenceLevel?i[s.evidenceLevel]:null,a=s.url?`<a href="${M(s.url)}" target="_blank" rel="noopener noreferrer" style="color:${e.text};text-decoration:none">${M(s.title)}</a>`:M(s.title);return`
<div style="border:1px solid ${e.border};border-radius:12px;overflow:hidden;background:${e.surface};display:flex;flex-direction:column">
  ${s.imageUrl?`<div style="height:160px;overflow:hidden;flex-shrink:0"><img src="${M(s.imageUrl)}" alt="${M(s.title)}" style="width:100%;height:100%;object-fit:cover"></div>`:""}
  <div style="padding:${r==="compact"?"10px 14px":"16px"};flex:1;display:flex;flex-direction:column">
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;flex-wrap:wrap;gap:6px">
      <span style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.14em;text-transform:uppercase;color:${e.muted}">${M(s.source||"")}</span>
      ${l?`<span style="background:${l}22;color:${l};border:1px solid ${l}44;border-radius:999px;padding:2px 8px;font-family:${e.fontMono};font-size:10px;font-weight:600">${M(s.evidenceLevel)}</span>`:""}
    </div>
    <h3 style="font-family:${e.fontDisplay};font-size:${r==="compact"?16:20}px;color:${e.text};margin:0 0 10px;line-height:1.25;font-weight:400">${a}</h3>
    ${!r.includes("compact")&&s.summary?`<p style="font-family:${e.fontBody};font-size:13px;color:${e.muted};margin:0 0 12px;line-height:1.6;flex:1">${M(s.summary)}</p>`:""}
    ${s.clinicalContext?`
    <div style="background:${e.background};border-radius:8px;padding:10px 12px;margin-bottom:10px">
      <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.12em;text-transform:uppercase;color:${e.muted};margin-bottom:4px">Clinical Context</div>
      <p style="font-family:${e.fontBody};font-size:13px;color:${e.text};margin:0;line-height:1.55">${M(s.clinicalContext)}</p>
    </div>`:""}
    ${s.myTake?`<p style="font-family:${e.fontBody};font-size:13px;color:${e.secondary};font-style:italic;margin:0 0 12px;border-left:3px solid ${e.accent};padding-left:10px;line-height:1.5">${M(s.myTake)}</p>`:""}
    ${s.url?`<a href="${M(s.url)}" target="_blank" rel="noopener noreferrer" style="margin-top:auto;display:inline-flex;align-items:center;gap:5px;font-family:${e.fontBody};font-size:12px;color:${e.accent};font-weight:600;text-decoration:none">Read full paper <span style="font-size:14px"></span></a>`:""}
  </div>
</div>`}).join("");return`
<div style="padding:24px 40px">
  ${t.sectionTitle?`<h2 style="font-family:${e.fontDisplay};font-size:26px;color:${e.text};margin:0 0 20px;font-weight:400">${M(t.sectionTitle)}</h2>`:""}
  <div class="nap-${n}col" style="display:grid;grid-template-columns:repeat(${n},1fr);gap:20px">${o}</div>
</div>`}function MC(t,e){const n=t.article||{},r=t.accentColor||e.accent,i=t.layout==="top-image",o=t.layout==="left-image",s=!!n.imageUrl,l=n.url?`<a href="${M(n.url)}" target="_blank" rel="noopener noreferrer" style="color:${e.text};text-decoration:none">${M(n.title)}</a>`:M(n.title),a=n.url?`<a href="${M(n.url)}" target="_blank" rel="noopener noreferrer" style="display:inline-flex;align-items:center;gap:8px;padding:9px 18px;background:${r};color:#fff;border-radius:8px;font-family:${e.fontBody};font-size:13px;font-weight:600;text-decoration:none">Read the paper </a>`:"",c=`
    <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.18em;text-transform:uppercase;color:${e.muted};margin-bottom:12px"> Spotlight  ${M(n.source||"")}</div>
    <h2 style="font-family:${e.fontDisplay};font-size:28px;color:${e.text};margin:0 0 12px;font-weight:400;line-height:1.2">${l}</h2>
    ${n.summary?`<p style="font-family:${e.fontBody};font-size:15px;color:${e.muted};margin:0 0 16px;line-height:1.65">${M(n.summary)}</p>`:""}
    ${n.clinicalContext?`
    <div style="background:${e.background};border-radius:10px;padding:14px 16px;margin-bottom:14px">
      <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.12em;text-transform:uppercase;color:${e.muted};margin-bottom:6px">Clinical Context</div>
      <p style="font-family:${e.fontBody};font-size:14px;color:${e.text};margin:0;line-height:1.6">${M(n.clinicalContext)}</p>
    </div>`:""}
    ${n.myTake?`<p style="font-family:${e.fontBody};font-size:14px;font-style:italic;color:${e.secondary};margin:0 0 16px;border-left:3px solid ${r};padding-left:12px;line-height:1.6">${M(n.myTake)}</p>`:""}
    ${a}`;if(i&&s)return`
<div style="padding:24px 40px">
  <div style="border:1px solid ${e.border};border-radius:14px;overflow:hidden;background:${e.surface}">
    <img src="${M(n.imageUrl)}" alt="${M(n.title||"")}" style="width:100%;height:280px;object-fit:cover">
    <div style="padding:24px">${c}</div>
  </div>
</div>`;const d=s?`<div style="width:40%;flex-shrink:0"><img src="${M(n.imageUrl)}" alt="${M(n.title||"")}" style="width:100%;height:100%;object-fit:cover;display:block"></div>`:"",f=s?o?"row":"row-reverse":"column",p=s&&o?`border-left:4px solid ${r};`:"";return`
<div style="padding:24px 40px">
  <div style="border:1px solid ${e.border};border-radius:14px;overflow:hidden;background:${e.surface};display:flex;flex-direction:${f}">
    ${d}
    <div style="flex:1;padding:28px;${p}">${c}</div>
  </div>
</div>`}function jC(t,e){const n=t.source?t.url?`<a href="${M(t.url)}" target="_blank" rel="noopener noreferrer" style="color:${e.accent}">${M(t.source)}</a>`:M(t.source):"";return`
<div style="padding:28px 40px">
  <div style="margin-bottom:20px">
    <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.18em;text-transform:uppercase;color:${e.accent};margin-bottom:6px"> AI Ethics &amp; Governance</div>
    <h2 style="font-family:${e.fontDisplay};font-size:26px;color:${e.text};margin:0 0 6px;font-weight:400">${M(t.heading||"")}</h2>
    <p style="font-family:${e.fontBody};font-size:14px;color:${e.muted};margin:0">${M(t.subheading||"")}</p>
    ${t.source!==void 0?`<div style="font-family:${e.fontMono};font-size:11px;color:${e.muted};margin-top:6px">Source: ${n}</div>`:""}
  </div>
  <div class="nap-2col" style="display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:16px">
    <div style="border:1px solid ${e.border};border-radius:12px;padding:20px;background:${e.background}">
      <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.14em;text-transform:uppercase;color:#C0392B;font-weight:700;margin-bottom:10px">${M(t.leftTitle||"")}</div>
      <p style="font-family:${e.fontBody};font-size:14px;color:${e.text};margin:0;line-height:1.65">${M(t.leftContent||"")}</p>
    </div>
    <div style="border:1px solid ${e.accent}44;border-radius:12px;padding:20px;background:${e.accent}0A">
      <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.14em;text-transform:uppercase;color:${e.accent};font-weight:700;margin-bottom:10px">${M(t.rightTitle||"")}</div>
      <p style="font-family:${e.fontBody};font-size:14px;color:${e.text};margin:0;line-height:1.65">${M(t.rightContent||"")}</p>
    </div>
  </div>
  <div style="padding:14px 18px;border:1px solid ${e.border};border-radius:12px;border-left:4px solid ${e.accent}">
    <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.14em;text-transform:uppercase;color:${e.muted};margin-bottom:6px">Clinical Perspective</div>
    <p style="font-family:${e.fontBody};font-size:14px;color:${e.text};margin:0;line-height:1.65">${M(t.clinicalPerspective||"")}</p>
  </div>
</div>`}function AC(t,e){const n=t.dataUrl||t.url;if(!n)return"";const i={full:"100%",wide:"80%",medium:"60%",small:"40%"}[t.width]||"100%",o=`<img src="${M(n)}" alt="${M(t.alt||"")}" style="max-width:${i};border-radius:${Number(t.borderRadius??12)}px;display:inline-block">`;return`
<div style="padding:16px 40px;text-align:${M(t.alignment||"center")}">
  ${t.linkUrl?`<a href="${M(t.linkUrl)}" target="_blank" rel="noopener noreferrer" style="display:inline-block;max-width:${i}">${o}</a>`:o}
  ${t.caption?`<p style="font-family:${e.fontBody};font-size:12px;color:${e.muted};margin:8px 0 0;text-align:center">${M(t.caption)}</p>`:""}
</div>`}function DC(t,e){const n={full:"100%",reading:"720px",narrow:"560px"};return`
<div style="padding:16px 40px">
  <div style="font-family:${e.fontBody};color:${e.text};line-height:1.7;max-width:${n[t.maxWidth]||"100%"};margin:0 auto;text-align:${M(t.alignment||"left")};font-size:15px">
    ${t.html||""}
  </div>
</div>`}function RC(t,e){return`
<div style="padding:16px 40px">
  ${t.label?`<div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.12em;text-transform:uppercase;color:${e.muted};margin-bottom:8px"> ${M(t.label)}</div>`:""}
  <div>${t.html||""}</div>
</div>`}function IC(t,e){return`
<div style="padding:28px 40px">
  <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.18em;text-transform:uppercase;color:${e.accent};margin-bottom:8px"> Prompt Like a Rockstar</div>
  <h2 style="font-family:${e.fontDisplay};font-size:26px;color:${e.text};margin:0 0 6px;font-weight:400">${M(t.heading||"")}</h2>
  <div style="font-family:${e.fontBody};font-size:14px;color:${e.muted};margin-bottom:20px">${M(t.step||"")}  Framework: <strong>${M(t.framework||"")}</strong></div>
  <div class="nap-2col" style="display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:14px">
    <div style="border:1px solid #f5c6c0;border-radius:12px;padding:16px;background:#FEF0EE">
      <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.14em;text-transform:uppercase;color:#C0392B;margin-bottom:8px"> Bad Prompt</div>
      <p style="font-family:${e.fontBody};font-size:14px;font-style:italic;color:#7A1E12;margin:0;line-height:1.55">${M(t.badPrompt||"")}</p>
    </div>
    <div style="border:1px solid ${e.accent}44;border-radius:12px;padding:16px;background:${e.accent}0D">
      <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.14em;text-transform:uppercase;color:${e.accent};margin-bottom:8px"> Good Prompt</div>
      <p style="font-family:${e.fontBody};font-size:14px;color:${e.text};margin:0;line-height:1.55">${M(t.goodPrompt||"")}</p>
    </div>
  </div>
  <div style="padding:12px 16px;background:${e.background};border-radius:10px;border-left:3px solid ${e.accent}">
    <p style="font-family:${e.fontBody};font-size:13px;color:${e.muted};margin:0;line-height:1.6"><strong>Why this matters:</strong> ${M(t.explanation||"")}</p>
  </div>
</div>`}function OC(t,e){const n=[e.primary,e.secondary,e.accent,"#7B2D8B","#00A651"],r=(t.steps||[]).map((i,o)=>{const s=n[o]||e.primary;return`
<div style="border:1px solid ${e.border};border-radius:10px;padding:14px;background:${e.surface}">
  <div class="nap-sbar-letter" style="font-family:${e.fontDisplay};color:${s};">${M((i.letter||"").toUpperCase())}</div>
  <div style="font-family:${e.fontMono};font-size:9px;letter-spacing:0.14em;text-transform:uppercase;color:${e.muted};margin-bottom:8px;padding-bottom:8px;border-bottom:2px solid ${s}">${M(i.name||"")}</div>
  <p style="font-family:${e.fontBody};font-size:12px;color:${e.text};margin:0 0 10px;line-height:1.5">${M(i.description||"")}</p>
  <div style="background:${e.background};border-radius:6px;padding:8px 10px;border-left:3px solid ${s}">
    <p style="font-family:${e.fontBody};font-size:11px;color:${e.muted};margin:0;font-style:italic;line-height:1.45">${M(i.example||"")}</p>
  </div>
</div>`}).join("");return`
<div style="padding:28px 40px">
  <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.18em;text-transform:uppercase;color:${e.accent};margin-bottom:8px"> Clinical AI Prompting</div>
  <h2 style="font-family:${e.fontDisplay};font-size:26px;color:${e.text};margin:0 0 20px;font-weight:400">${M(t.heading||"")}</h2>
  <div class="nap-5col" style="display:grid;grid-template-columns:repeat(5,1fr);gap:12px;margin-bottom:20px">${r}</div>
</div>`}function NC(t,e){const n=String(t.prompt||""),r=String(t.heading||"Template Prompt");return`
<div style="padding:18px 40px">
  <details style="border:1px solid ${e.border};border-radius:12px;overflow:hidden;background:${e.surface}">
    <summary style="list-style:none;cursor:pointer;display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px 14px;user-select:none">
      <div style="display:flex;flex-direction:column;gap:2px">
        <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.18em;text-transform:uppercase;color:${e.accent}"> Template Prompt</div>
        <div style="font-family:${e.fontDisplay};font-size:18px;color:${e.text};font-weight:500">${M(r)}</div>
      </div>
      <button class="nap-copy-btn" data-copy="${M(n)}" style="padding:7px 12px;background:${e.primary};border:none;border-radius:8px;font-family:${e.fontBody};font-size:12px;color:#fff;cursor:pointer;white-space:nowrap"> Copy</button>
    </summary>
    <div style="padding:12px 14px;background:${e.background};border-top:1px solid ${e.border}">
      <pre style="font-family:${e.fontMono};font-size:12px;color:${e.text};margin:0;white-space:pre-wrap;line-height:1.6">${M(n)}</pre>
    </div>
  </details>
</div>`}function zC(t,e){const n=(t.items||[]).filter(Boolean);if(!n.length)return"";const r=n.length<=2?"1fr":"1fr 1fr";return`
<div style="padding:10px 40px 18px">
  <div style="background:#FFF7E6;border:1px solid #F4D38B;border-radius:12px;padding:14px">
    <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.12em;text-transform:uppercase;color:#8A5A00;margin-bottom:10px"> ${M(t.heading||"Safety Reminders")}</div>
    <div style="display:grid;grid-template-columns:${r};gap:10px">
      ${n.map(i=>`
        <div style="background:rgba(255,255,255,0.65);border:1px solid ${e.border};border-radius:10px;padding:12px;display:flex;gap:10px">
          <div style="font-family:${e.fontMono};font-size:11px;color:#8A5A00;margin-top:1px"></div>
          <div style="font-family:${e.fontBody};font-size:13px;color:${e.text};line-height:1.6">${M(i)}</div>
        </div>`).join("")}
    </div>
  </div>
</div>`}function PC(t,e){const n={"Differential Diagnosis":e.primary,"Discharge Summary":e.secondary,"Literature Review":e.accent,"Patient Education":"#00A651","EEG / EMG Report":"#7B2D8B",Research:"#F47920"},r=(t.templates||[]).map(i=>{const o=n[i.category]||e.primary,s=`tpl-${M(String(i.id||Math.random().toString(36).slice(2)))}`;return`
<div style="border:1px solid ${e.border};border-radius:10px;overflow:hidden;background:${e.surface}">
  <div style="padding:12px 14px">
    <div style="display:flex;align-items:flex-start;justify-content:space-between;gap:8px">
      <div style="flex:1">
        <div style="display:flex;align-items:center;gap:6px;margin-bottom:4px">
          <span style="font-family:${e.fontMono};font-size:9px;letter-spacing:0.12em;text-transform:uppercase;color:#fff;padding:2px 7px;background:${o};border-radius:999px">${M(i.category)}</span>
        </div>
        <div style="font-family:${e.fontBody};font-size:13px;font-weight:600;color:${e.text};margin-bottom:3px">${M(i.title)}</div>
        <div style="font-family:${e.fontBody};font-size:11px;color:${e.muted}">${M(i.useCase)}</div>
      </div>
      <div style="display:flex;gap:4px;flex-shrink:0">
        <button class="nap-expand-btn" data-target="${s}" style="padding:5px 8px;background:none;border:1px solid ${e.border};border-radius:6px;font-family:${e.fontBody};font-size:11px;color:${e.muted}">Preview</button>
        <button class="nap-copy-btn" data-copy="${M(i.prompt)}" style="padding:5px 10px;background:${e.primary};border:none;border-radius:6px;font-family:${e.fontBody};font-size:11px;color:#fff"> Copy</button>
      </div>
    </div>
  </div>
  <div id="${s}" class="nap-tpl-prompt" style="background:${e.background}">
    <pre style="font-family:${e.fontMono};font-size:11px;color:${e.text};margin:0;white-space:pre-wrap;line-height:1.6">${M(i.prompt)}</pre>
  </div>
</div>`}).join("");return`
<div style="padding:28px 40px">
  <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.18em;text-transform:uppercase;color:${e.accent};margin-bottom:8px"> Ready-to-Use Prompts</div>
  <h2 style="font-family:${e.fontDisplay};font-size:26px;color:${e.text};margin:0 0 6px;font-weight:400">${M(t.heading||"")}</h2>
  <p style="font-family:${e.fontBody};font-size:14px;color:${e.muted};margin:0 0 20px">${M(t.description||"")}</p>
  <div class="nap-2col" style="display:grid;grid-template-columns:repeat(2,1fr);gap:12px">${r}</div>
</div>`}function LC(t,e){const n=[{title:"Definition",content:t.definition},{title:"Relevance to Medicine",content:t.relevance},{title:"Clinical Application",content:t.clinicalApplication}];return`
<div style="padding:28px 40px">
  <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.18em;text-transform:uppercase;color:${e.accent};margin-bottom:8px"> AI Term of the Month</div>
  <h2 style="font-family:${e.fontDisplay};font-size:34px;color:${e.text};margin:0 0 20px;font-weight:400">${M(t.term||"")}</h2>
  <div class="nap-3col" style="display:grid;grid-template-columns:repeat(3,1fr);gap:16px">
    ${n.map(r=>`
    <div style="border:1px solid ${e.border};border-radius:10px;padding:16px;background:${e.surface}">
      <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.12em;text-transform:uppercase;color:${e.muted};margin-bottom:8px">${M(r.title)}</div>
      <p style="font-family:${e.fontBody};font-size:13px;color:${e.text};margin:0;line-height:1.6">${M(r.content||"")}</p>
    </div>`).join("")}
  </div>
  ${(t.relatedTerms||[]).length?`
  <div style="margin-top:14px;display:flex;flex-wrap:wrap;gap:8px;align-items:center">
    <strong class="ai-related-label" style="font-family:${e.fontBody};font-size:13px;color:${e.text};font-weight:700">Related:</strong>
    ${bC(t.relatedTerms).map(r=>`<span class="ai-related-pill" style="display:inline-block !important;font-family:${e.fontMono} !important;font-size:11px !important;padding:4px 10px !important;background:#F3F6FF !important;border:1px solid ${e.border} !important;border-radius:999px !important;color:${e.text} !important;line-height:16px !important">${M(r)}</span>`).join("")}
  </div>`:""}
</div>`}function $C(t,e){const n=t.imageDataUrl||t.imageUrl;return`
<div style="padding:28px 40px">
  <div style="display:flex;gap:24px;align-items:flex-start">
    <div style="display:flex;flex-direction:column;align-items:center;gap:10px;flex-shrink:0">
      <div style="background:${e.primary};border-radius:10px;padding:14px 18px;text-align:center;color:#fff !important">
        <div style="font-family:${e.fontDisplay};font-size:28px;color:#fff !important;line-height:1;text-shadow:0 1px 0 rgba(0,0,0,0.18)">${M(t.year||"")}</div>
        <div style="font-family:${e.fontMono};font-size:10px;color:rgba(255,255,255,0.92) !important;letter-spacing:0.12em;text-transform:uppercase;margin-top:4px;text-shadow:0 1px 0 rgba(0,0,0,0.12)">AI Case File</div>
      </div>
      ${n?`<div style="width:100px;height:80px;border-radius:8px;overflow:hidden;border:1px solid ${e.border}"><img src="${M(n)}" alt="${M(t.title||"")}" style="width:100%;height:100%;object-fit:cover"></div>`:""}
    </div>
    <div style="flex:1">
      <h3 style="font-family:${e.fontDisplay};font-size:22px;color:${e.text};margin:0 0 10px;font-weight:400">${M(t.title||"")}</h3>
      <p style="font-family:${e.fontBody};font-size:14px;color:${e.muted};margin:0 0 12px;line-height:1.65">${M(t.content||"")}</p>
      ${t.significance?`<div style="background:${e.background};border-radius:8px;padding:10px 14px;border-left:3px solid ${e.accent};margin-bottom:12px"><p style="font-family:${e.fontBody};font-size:13px;color:${e.muted};margin:0;line-height:1.55"><strong>Significance:</strong> ${M(t.significance)}</p></div>`:""}
      ${t.sourceUrl||t.sourceLabel?`<div style="font-family:${e.fontMono};font-size:11px;color:${e.muted}">Source: ${t.sourceUrl?`<a href="${M(t.sourceUrl)}" target="_blank" rel="noopener noreferrer" style="color:${e.accent}">${M(t.sourceLabel||t.sourceUrl)}</a>`:M(t.sourceLabel)}</div>`:""}
    </div>
  </div>
</div>`}function FC(t,e){const n=(t.hits||[]).map((r,i)=>{const o=r.url?`<a href="${M(r.url)}" target="_blank" rel="noopener noreferrer" style="color:${e.text};text-decoration:none">${M(r.title||"")}</a>`:M(r.title||"");return`
<div style="display:flex;gap:14px;align-items:flex-start;padding:12px 14px;border:1px solid ${e.border};border-radius:10px;background:${e.surface}">
  <span style="font-family:${e.fontMono};font-size:18px;color:${e.accent};line-height:1;flex-shrink:0;min-width:28px">${String(i+1).padStart(2,"0")}</span>
  <div style="flex:1">
    <div style="font-family:${e.fontBody};font-size:14px;font-weight:600;color:${e.text};margin-bottom:4px;line-height:1.3">${o}</div>
    <div style="font-family:${e.fontMono};font-size:10px;color:${e.muted};letter-spacing:0.1em;text-transform:uppercase;margin-bottom:4px">${M(r.source||"")}</div>
    ${r.summary?`<p style="font-family:${e.fontBody};font-size:13px;color:${e.muted};margin:0;line-height:1.5">${M(r.summary)}</p>`:""}
  </div>
  ${r.url?`<a href="${M(r.url)}" target="_blank" rel="noopener noreferrer" style="flex-shrink:0;font-family:${e.fontBody};font-size:11px;color:${e.accent};font-weight:600;text-decoration:none">Read </a>`:""}
</div>`}).join("");return`
<div style="padding:24px 40px">
  <h2 style="font-family:${e.fontDisplay};font-size:26px;color:${e.text};margin:0 0 16px;font-weight:400"> ${M(t.heading||"")}</h2>
  <div style="display:flex;flex-direction:column;gap:10px">${n}</div>
</div>`}function BC(t,e){const n=t.imageDataUrl||t.imageUrl,r=t.imageFit||"contain",i=t.imageHeight,o=i?`width:100%;height:${i}px;object-fit:${r};display:block`:"width:100%;height:auto;display:block";return`
<div style="padding:28px 40px">
  <div style="background:linear-gradient(135deg,${e.background},${e.surface});border:1px solid ${e.border};border-radius:16px;overflow:hidden">
    <div style="padding:16px 18px;border-bottom:1px solid ${e.border};display:flex;align-items:center;gap:10px">
      <span style="font-size:18px"></span>
      <div style="font-family:${e.fontDisplay};font-size:20px;color:${e.text};font-weight:400">${M(t.heading||"Humor")}</div>
    </div>
    ${n?`<img src="${M(n)}" alt="" style="${o}">`:""}
    <div style="padding:18px 22px;text-align:center">
      ${n?"":`<div style="font-size:44px;margin-bottom:10px">${M(t.emojiDecor||"")}</div>`}
      ${t.attribution?`<div style="font-family:${e.fontBody};font-size:14px;color:${e.muted};margin-bottom:10px">${M(t.attribution)}</div>`:""}
      <div style="font-family:${e.fontBody};font-size:16px;color:${e.text};font-style:italic;line-height:1.65;max-width:760px;margin:0 auto">${M(t.content||"")}</div>
      ${t.sourceUrl?`<div style="margin-top:10px"><a href="${M(t.sourceUrl)}" target="_blank" rel="noopener noreferrer" style="font-family:${e.fontBody};font-size:12px;color:${e.accent};text-decoration:none">Source </a></div>`:""}
    </div>
  </div>
</div>`}function _C(t,e){return`<div style="height:${Number(t.height||24)}px;${t.showLine?`border-top:1px ${M(t.lineStyle||"solid")} ${e.border};margin:0 40px`:""}"></div>`}function HC(t,e){const n={critical:{color:"#C0392B",bg:"#FEF0EE",border:"#f5c6c0",label:"CRITICAL",icon:""},high:{color:"#C06500",bg:"#FFF4E6",border:"#F6D860",label:"HIGH",icon:""},medium:{color:"#0057A8",bg:"#EEF4FF",border:"#C8D9EE",label:"MEDIUM",icon:""},informational:{color:"#005F6B",bg:"#F0FAFA",border:"#B2E0E4",label:"INFO",icon:""}},r=(t.updates||[]).map(i=>{const o=n[i.severity]||n.informational,s=i.url?`<a href="${M(i.url)}" target="_blank" rel="noopener noreferrer" style="color:${e.text};text-decoration:none">${M(i.title||"")}</a>`:M(i.title||"");return`
<div style="border:1px solid ${o.border};border-radius:10px;background:${o.bg}">
  <div style="display:flex;align-items:flex-start;gap:12px;padding:14px 16px">
    <div style="flex-shrink:0;display:flex;flex-direction:column;align-items:center;gap:4px;padding-top:2px">
      <span style="font-size:14px">${o.icon}</span>
      <span style="font-family:${e.fontMono};font-size:8px;letter-spacing:0.1em;text-transform:uppercase;color:${o.color};font-weight:700">${o.label}</span>
    </div>
    <div style="flex:1">
      <div style="display:flex;align-items:center;gap:8px;margin-bottom:4px;flex-wrap:wrap">
        <span style="font-family:${e.fontMono};font-size:9px;letter-spacing:0.1em;text-transform:uppercase;color:${o.color};padding:2px 7px;background:${o.color}18;border-radius:999px">${M(i.category||"")}</span>
        <span style="font-family:${e.fontMono};font-size:10px;color:${e.muted}">${M(i.date||"")}</span>
      </div>
      <div style="font-family:${e.fontBody};font-size:14px;font-weight:600;color:${e.text};margin-bottom:4px">${s}</div>
      <p style="font-family:${e.fontBody};font-size:13px;color:${e.muted};margin:0;line-height:1.55">${M(i.summary||"")}</p>
      ${i.url?`<a href="${M(i.url)}" target="_blank" rel="noopener noreferrer" style="display:inline-block;margin-top:8px;font-family:${e.fontBody};font-size:11px;color:${o.color};font-weight:600">View full guidance </a>`:""}
    </div>
  </div>
</div>`}).join("");return`
<div style="padding:28px 40px">
  <div style="display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:20px;flex-wrap:wrap;gap:10px">
    <div>
      <div style="display:flex;align-items:center;gap:8px;margin-bottom:6px">
        <span style="font-size:18px"></span>
        <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.18em;text-transform:uppercase;color:#C0392B">AI Safety Monitor</div>
      </div>
      <h2 style="font-family:${e.fontDisplay};font-size:26px;color:${e.text};margin:0 0 4px;font-weight:400">${M(t.heading||"")}</h2>
      <p style="font-family:${e.fontBody};font-size:14px;color:${e.muted};margin:0">${M(t.subheading||"")}</p>
    </div>
    ${t.showLastUpdated?`<div style="font-family:${e.fontMono};font-size:10px;color:${e.muted};text-align:right;line-height:1.4">Last updated<br>${new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}</div>`:""}
  </div>
  <div style="display:flex;flex-direction:column;gap:12px">${r}</div>
</div>`}function UC(t,e){const n=(t.items||[]).slice(0,t.maxItems||6).map(r=>`
<div style="border:1px solid ${e.border};border-radius:10px;overflow:hidden;background:${e.surface};display:flex;flex-direction:column">
  ${r.imageUrl?`<div style="height:120px;overflow:hidden"><img src="${M(r.imageUrl)}" alt="${M(r.title)}" style="width:100%;height:100%;object-fit:cover"></div>`:""}
  <div style="padding:14px;flex:1;display:flex;flex-direction:column">
    ${r.category?`<span style="font-family:${e.fontMono};font-size:9px;letter-spacing:0.12em;text-transform:uppercase;color:${e.accent};margin-bottom:6px;display:block">${M(r.category)}</span>`:""}
    <div style="font-family:${e.fontBody};font-size:13px;font-weight:600;color:${e.text};margin-bottom:6px;line-height:1.35;flex:1">
      ${r.url?`<a href="${M(r.url)}" target="_blank" rel="noopener noreferrer" style="color:${e.text};text-decoration:none">${M(r.title)}</a>`:M(r.title)}
    </div>
    ${r.summary?`<p style="font-family:${e.fontBody};font-size:12px;color:${e.muted};margin:0 0 8px;line-height:1.5">${M(r.summary)}</p>`:""}
    ${r.pubDate?`<div style="font-family:${e.fontMono};font-size:10px;color:${e.muted}">${new Date(r.pubDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})}</div>`:""}
    ${r.url?`<a href="${M(r.url)}" target="_blank" rel="noopener noreferrer" style="margin-top:8px;font-family:${e.fontBody};font-size:11px;color:${e.accent};font-weight:600;text-decoration:none">Read more </a>`:""}
  </div>
</div>`).join("");return`
<div style="padding:28px 40px">
  <div style="display:flex;align-items:center;gap:10px;margin-bottom:6px">
    <div style="width:28px;height:28px;background:${e.primary};border-radius:6px;display:flex;align-items:center;justify-content:center;flex-shrink:0"><span style="font-size:14px"></span></div>
    <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.18em;text-transform:uppercase;color:${e.primary}">${M(t.institutionLabel||"Your Institution")}</div>
  </div>
  <h2 style="font-family:${e.fontDisplay};font-size:26px;color:${e.text};margin:0 0 4px;font-weight:400">${M(t.heading||"")}</h2>
  ${t.subheading?`<p style="font-family:${e.fontBody};font-size:14px;color:${e.muted};margin:0 0 20px">${M(t.subheading)}</p>`:""}
  <div class="nap-3col" style="display:grid;grid-template-columns:repeat(3,1fr);gap:14px">${n}</div>
</div>`}function VC(t,e){const n=(t.feedUrls||[]).filter(Boolean),r=M(JSON.stringify(n)),i=typeof t.maxItems=="number"?t.maxItems:10,o=Math.min(50,Math.max(1,i)),s=(t.items||[]).slice(0,o).map((a,c)=>`
<div style="padding:11px 18px;border-bottom:1px solid ${e.border};display:flex;gap:10px;align-items:flex-start">
  <span style="font-family:${e.fontMono};font-size:12px;color:${e.accent};flex-shrink:0;min-width:20px;margin-top:1px">${String(c+1).padStart(2,"0")}</span>
  <div style="flex:1">
    <div style="font-family:${e.fontBody};font-size:13px;font-weight:600;color:${e.text};line-height:1.3;margin-bottom:3px">
      ${a.url?`<a href="${M(a.url)}" target="_blank" rel="noopener noreferrer" style="color:${e.text};text-decoration:none">${M(a.title||"")}</a>`:M(a.title||"")}
    </div>
    <div style="display:flex;gap:8px;align-items:center">
      ${a.source?`<span style="font-family:${e.fontMono};font-size:9px;color:${e.muted};text-transform:uppercase;letter-spacing:0.08em">${M(a.source)}</span>`:""}
      ${a.pubDate?`<span style="font-family:${e.fontMono};font-size:9px;color:${e.muted}">${new Date(a.pubDate).toLocaleDateString()}</span>`:""}
    </div>
  </div>
  ${a.url?`<a href="${M(a.url)}" target="_blank" rel="noopener noreferrer" style="flex-shrink:0;font-family:${e.fontBody};font-size:11px;color:${e.accent};font-weight:600;text-decoration:none;padding-top:1px"></a>`:""}
</div>`).join(""),l=`
    <details class="nap-rss-config" data-rss-kind="sidebar" style="padding:10px 18px;border-bottom:1px solid ${e.border};background:${e.background}">
      <summary style="list-style:none;cursor:pointer;font-family:${e.fontMono};font-size:10px;letter-spacing:0.14em;text-transform:uppercase;color:${e.muted};user-select:none">RSS sources </summary>
      <div style="margin-top:10px;display:grid;gap:10px">
        <div style="font-family:${e.fontBody};font-size:12px;color:${e.text};line-height:1.45">Snapshot is shown by default. Enable <b>Live</b> to refresh from selected feeds.</div>
        <label style="display:flex;align-items:center;gap:8px;font-family:${e.fontBody};font-size:12px;color:${e.text}">
          <input type="checkbox" class="nap-rss-live" style="transform:translateY(1px)" /> Live RSS
        </label>
        <div style="display:flex;align-items:center;gap:10px">
          <div style="font-family:${e.fontBody};font-size:12px;color:${e.text}">Feeds</div>
          <select class="nap-rss-maxfeeds" style="margin-left:auto;padding:6px 10px;border-radius:10px;border:1px solid ${e.border};background:${e.surface};color:${e.text};font-family:${e.fontBody};font-size:12px">
            <option value="5">5</option>
            <option value="8">8</option>
            <option value="10">10</option>
            <option value="12">12</option>
            <option value="15">15</option>
            <option value="20">20</option>
          </select>
        </div>
        <div style="display:flex;align-items:center;gap:10px">
          <div style="font-family:${e.fontBody};font-size:12px;color:${e.text}">Items per feed</div>
          <select class="nap-rss-max" style="margin-left:auto;padding:6px 10px;border-radius:10px;border:1px solid ${e.border};background:${e.surface};color:${e.text};font-family:${e.fontBody};font-size:12px">
            <option value="3">3</option>
            <option value="5">5</option>
            <option value="8">8</option>
            <option value="10">10</option>
            <option value="15">15</option>
            <option value="20">20</option>
          </select>
        </div>
        <div class="nap-rss-preset-list" style="display:grid;gap:6px"></div>
        <div style="display:flex;gap:8px">
          <input class="nap-rss-add" placeholder="Add RSS URL" style="flex:1;padding:8px 10px;border-radius:10px;border:1px solid ${e.border};background:${e.surface};color:${e.text};font-family:${e.fontBody};font-size:12px" />
          <button class="nap-rss-add-btn" type="button" style="padding:8px 10px;border-radius:10px;border:1px solid ${e.border};background:${e.background};color:${e.text};font-family:${e.fontBody};font-size:12px;cursor:pointer">Add</button>
        </div>
        <div class="nap-rss-status" style="font-family:${e.fontBody};font-size:12px;color:${e.muted}"></div>
      </div>
    </details>`;return`
<div style="padding:24px 40px">
  <div class="nap-rss-sidebar" data-feeds='${r}' data-max="${o}" data-live="0" data-key="${M(t.id||t.heading||"rss")}" style="border:1px solid ${e.border};border-radius:12px;overflow:hidden;background:${e.surface}">
    <div style="background:${e.primary};padding:12px 18px;display:flex;align-items:center;gap:8px;color:#fff">
      <span style="font-size:14px"></span>
      <span style="font-family:${e.fontMono};font-size:11px;letter-spacing:0.14em;text-transform:uppercase;color:#fff;font-weight:600">${M(t.heading||"News")}</span>
      <span style="margin-left:auto;font-family:${e.fontMono};font-size:9px;color:rgba(255,255,255,0.7)" class="nap-rss-timestamp">${t.lastFetched?`Updated ${new Date(t.lastFetched).toLocaleDateString()}`:"Snapshot"}</span>
    </div>
    ${l}
    <div class="nap-rss-scroll">
      <div class="nap-rss-items">
        ${s||(n.length?`<div style="padding:24px 18px;text-align:center;color:${e.muted};font-family:${e.fontBody};font-size:13px">Snapshot not available yet. Enable Live to fetch.</div>`:`<div style="padding:24px 18px;text-align:center;color:${e.muted};font-family:${e.fontBody};font-size:13px">No feeds configured.</div>`)}
      </div>
    </div>
  </div>
</div>`}function WC(t,e){const n=t.contactEmail||"",r=n?`mailto:${M(n)}?subject=${encodeURIComponent("Newsletter Feedback")}`:"#";return`
<div class="nap-white-section" style="background:${e.primary};padding:44px 40px 36px;text-align:center;color:#fff">
  ${t.nextIssueDate||t.nextIssueTeaser?`
  <div style="background:rgba(255,255,255,0.12);border-radius:10px;padding:14px 20px;margin-bottom:28px;display:inline-block">
    <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.14em;text-transform:uppercase;color:rgba(255,255,255,0.75);margin-bottom:4px">Next Issue</div>
    <div style="font-family:${e.fontBody};font-size:14px;color:#fff">${M(t.nextIssueDate||"")}${t.nextIssueTeaser?`  ${M(t.nextIssueTeaser)}`:""}</div>
  </div>`:""}

  <div style="font-family:${e.fontDisplay};font-size:22px;color:#fff;margin-bottom:4px;font-weight:400">${M(t.institution||"")}</div>
  <div style="font-family:${e.fontBody};font-size:14px;color:rgba(255,255,255,0.85);margin-bottom:4px">${M(t.department||"")}</div>
  ${t.editors?`<div style="font-family:${e.fontBody};font-size:13px;color:rgba(255,255,255,0.75);margin-bottom:22px">${M(t.editors)}</div>`:""}

  <div style="display:flex;justify-content:center;margin-bottom:22px">
    <a href="${M(r)}" style="display:inline-flex;align-items:center;gap:10px;font-family:${e.fontBody};font-size:13px;font-weight:700;color:#fff;text-decoration:none;padding:10px 16px;border-radius:12px;border:1px solid rgba(255,255,255,0.35);background:rgba(255,255,255,0.10)">
      Contact Us <span style="opacity:0.8"></span>
    </a>
  </div>

  <div style="height:1px;background:rgba(255,255,255,0.18);max-width:240px;margin:0 auto 18px"></div>

  <p style="font-family:${e.fontBody};font-size:11px;color:rgba(255,255,255,0.75);margin:0 0 8px;max-width:580px;margin-left:auto;margin-right:auto;line-height:1.6">${M(t.disclaimer||"")}</p>
  <p style="font-family:${e.fontMono};font-size:10px;color:rgba(255,255,255,0.65);margin:0;letter-spacing:0.1em"> ${M(t.copyrightYear||"")} ${M(t.institution||"")}</p>
</div>`}function KC(){return`<script>
(function(){
  'use strict';
  const PROXY = 'https://api.allorigins.win/get?url=';

  // Preset RSS feeds (starter set). Users can add custom URLs.
  const PRESETS = [
    { label: 'Frontiers in Neuroscience  RSS', url: 'https://www.frontiersin.org/journals/neuroscience/rss' },
    { label: 'Frontiers in Neurology  RSS', url: 'https://www.frontiersin.org/journals/neurology/rss' },
    { label: 'MIT News  Artificial Intelligence', url: 'https://news.mit.edu/rss/topic/artificial-intelligence2' },
    { label: 'ScienceDaily  Artificial Intelligence', url: 'https://www.sciencedaily.com/rss/computers_math/artificial_intelligence.xml' },
    { label: 'MarkTechPost  AI News', url: 'https://www.marktechpost.com/feed/' },
    { label: 'The Lancet Neurology  Current', url: 'https://www.thelancet.com/rssfeed/laneur_current.xml' },
    { label: 'JAMA Neurology  RSS', url: 'https://jamanetwork.com/rss/site_16/0.xml' },
    { label: 'npj Digital Medicine  RSS', url: 'https://www.nature.com/npjdigitalmed.rss' },
    { label: 'PubMed RSS  Neurology AI Search', url: 'https://pubmed.ncbi.nlm.nih.gov/rss/search/1x9bY_ZPGMIgWOrGWvQbkjt2X1J5zCH66gaj5UHwPTuOP_TklI/?limit=15&utm_campaign=pubmed-2&fc=20260222062849' }
  ];

  function esc(s){ return (s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;'); }

  function parseXml(xml){
    try {
      const doc = new DOMParser().parseFromString(xml,'text/xml');
      if(doc.querySelector('parsererror')) return [];
      const items = Array.from(doc.querySelectorAll('item'));
      if(items.length) return items.map(el=>({
        title:(el.querySelector('title')?.textContent||'').trim(),
        url:(el.querySelector('link')?.textContent||'').trim(),
        date:(el.querySelector('pubDate')?.textContent||'').trim(),
        source:''
      })).filter(x=>x.title);
      return Array.from(doc.querySelectorAll('entry')).map(el=>({
        title:(el.querySelector('title')?.textContent||'').trim(),
        url:(el.querySelector('link')?.getAttribute('href')||el.querySelector('link')?.textContent||'').trim(),
        date:(el.querySelector('updated')?.textContent||'').trim(),
        source:''
      })).filter(x=>x.title);
    } catch(e){ return []; }
  }

  async function fetchFeed(url){
    try {
      const res = await fetch(PROXY+encodeURIComponent(url),{cache:'no-store'});
      if(!res.ok) return [];
      const data = await res.json();
      const xml = (data && typeof data.contents === 'string') ? data.contents : '';
      return parseXml(xml);
    } catch(e){ return []; }
  }

  function dedupe(arr,max){
    const seen=new Set();
    return arr.filter(x=>{const k=x.url||x.title;if(!k||seen.has(k))return false;seen.add(k);return true;}).slice(0,Math.max(1,max));
  }

  function getCssVar(v){ return getComputedStyle(document.documentElement).getPropertyValue(v).trim(); }

  function storageKey(kind,key){ return 'nap_rss_'+kind+'_'+(key||'default'); }
  function safeJsonParse(raw, fallback){ try{ const v=JSON.parse(raw); return v ?? fallback; }catch(e){ return fallback; } }

  function getSelectedFeeds(kind, el){
    const key = el.getAttribute('data-key') || 'default';
    const k = storageKey(kind, key);
    const saved = safeJsonParse(localStorage.getItem(k) || 'null', null);
    if(Array.isArray(saved) && saved.length) return saved;
    const raw = (kind==='sidebar') ? (el.getAttribute('data-feeds')||'[]') : (el.getAttribute('data-rss')||'[]');
    const arr = safeJsonParse(raw, []);
    return Array.isArray(arr) ? arr : [];
  }

  function setSelectedFeeds(kind, el, feeds){
    const key = el.getAttribute('data-key') || 'default';
    const k = storageKey(kind, key);
    localStorage.setItem(k, JSON.stringify(feeds));
    if(kind==='sidebar') el.setAttribute('data-feeds', JSON.stringify(feeds));
    else el.setAttribute('data-rss', JSON.stringify(feeds));
  }

  function getLiveEnabled(kind, el){
    const key = el.getAttribute('data-key') || 'default';
    const k = storageKey(kind, key) + '_live';
    const v = localStorage.getItem(k);
    if(v==='1') return true;
    return (el.getAttribute('data-live')||'0') === '1';
  }

  function setLiveEnabled(kind, el, on){
    el.setAttribute('data-live', on ? '1' : '0');
    const key = el.getAttribute('data-key') || 'default';
    const k = storageKey(kind, key) + '_live';
    localStorage.setItem(k, on ? '1' : '0');
  }

  function getMaxItems(kind, el){
    const key = el.getAttribute('data-key') || 'default';
    const k = storageKey(kind, key) + '_max';
    const v = localStorage.getItem(k);
    if(v && /^d+$/.test(v)) return parseInt(v,10);
    if(kind==='ticker') return parseInt(el.getAttribute('data-rss-max')||'20',10);
    return parseInt(el.getAttribute('data-max')||'10',10);
  }

  function getMaxFeeds(kind, el){
    const key = el.getAttribute('data-key') || 'default';
    const k = storageKey(kind, key) + '_maxfeeds';
    const v = localStorage.getItem(k);
    if(v && /^d+$/.test(v)) return parseInt(v,10);
    const attr = el.getAttribute('data-max-feeds');
    if(attr && /^d+$/.test(attr)) return parseInt(attr,10);
    return 10; // default
  }

  function setMaxFeeds(kind, el, n){
    const key = el.getAttribute('data-key') || 'default';
    const k = storageKey(kind, key) + '_maxfeeds';
    const val = String(Math.min(20, Math.max(5, parseInt(n,10)||10)));
    localStorage.setItem(k, val);
    el.setAttribute('data-max-feeds', val);
  }

function setMaxItems(kind, el, n){
    const key = el.getAttribute('data-key') || 'default';
    const k = storageKey(kind, key) + '_max';
    const val = String(Math.min(50, Math.max(1, parseInt(n,10)||10)));
    localStorage.setItem(k, val);
    if(kind==='ticker') el.setAttribute('data-rss-max', val);
    else el.setAttribute('data-max', val);
  }

  function applySidebarMax(el){
    try{
      const container = el.querySelector('.nap-rss-items');
      if(!container) return;
      const max = getMaxItems('sidebar', el);
      const kids = Array.from(container.children);
      kids.forEach((node, idx)=>{ node.style.display = (idx < max) ? '' : 'none'; });
    } catch(e){}
  }


  const CUSTOM_PRESETS_KEY = 'nap_rss_custom_presets_v1';
  function loadCustomPresets(){
    const raw = localStorage.getItem(CUSTOM_PRESETS_KEY);
    const arr = safeJsonParse(raw || '[]', []);
    return Array.isArray(arr) ? arr.filter(x=>x && x.url) : [];
  }
  function saveCustomPresets(arr){
    try{ localStorage.setItem(CUSTOM_PRESETS_KEY, JSON.stringify(arr||[])); }catch(e){}
  }
  function deriveLabel(url){
    try{ const u=new URL(url); return u.hostname.replace(/^www./,''); }catch(e){ return 'Custom RSS'; }
  }

  function renderPresetList(el, kind){
    const list = el.querySelector('.nap-rss-preset-list');
    if(!list) return;
    const selected = new Set(getSelectedFeeds(kind, el));
    const text = kind==='ticker' ? 'rgba(255,255,255,0.92)' : (getCssVar('--c-text')||'#1A2B4A');
    const muted = kind==='ticker' ? 'rgba(255,255,255,0.75)' : (getCssVar('--c-muted')||'#5A789A');
    const fb=getCssVar('--f-body')||'system-ui';
    const customs = loadCustomPresets();
    const allPresets = PRESETS.concat(customs);
    list.innerHTML = allPresets.map(p => {
      const checked = selected.has(p.url) ? 'checked' : '';
      const isCustom = !PRESETS.some(x=>x.url===p.url);
      const removeBtn = isCustom ? '<button type="button" data-remove="'+esc(p.url)+'" style="margin-left:auto;border:none;background:transparent;color:'+muted+';cursor:pointer;font-size:14px;line-height:1"></button>' : '';
      return '<label style="display:flex;gap:8px;align-items:flex-start;font-family:'+fb+';font-size:12px;color:'+text+';line-height:1.3">'
        + '<input type="checkbox" data-url="'+esc(p.url)+'" '+checked+' style="transform:translateY(2px)" />'
        + '<span style="flex:1"><span style="font-weight:600">'+esc(p.label||deriveLabel(p.url))+'</span><br/><span style="color:'+muted+';font-size:11px">'+esc(p.url)+'</span></span>'
        + removeBtn
        + '</label>';
    }).join('');

    list.querySelectorAll('button[data-remove]').forEach(btn => {
      btn.addEventListener('click', (e)=>{
        e.preventDefault(); e.stopPropagation();
        const url = btn.getAttribute('data-remove');
        const customs = loadCustomPresets().filter(x=>x.url!==url);
        saveCustomPresets(customs);
        const next = new Set(getSelectedFeeds(kind, el));
        next.delete(url);
        setSelectedFeeds(kind, el, Array.from(next));
        renderPresetList(el, kind);
        const st = el.querySelector('.nap-rss-status');
        if(st) st.textContent = 'Removed custom feed.';
      });
    });

    list.querySelectorAll('input[type=checkbox]').forEach(cb => {
      cb.addEventListener('change', () => {
        const url = cb.getAttribute('data-url');
        const next = new Set(getSelectedFeeds(kind, el));
        if(cb.checked) next.add(url); else next.delete(url);
        setSelectedFeeds(kind, el, Array.from(next));
        const st = el.querySelector('.nap-rss-status');
        if(st) st.textContent = 'Selected '+next.size+' feed(s).';
      });
    });
  }

  function wireRssConfig(el, kind){
    const details = el.querySelector('.nap-rss-config');
    if(!details) return;
    const live = details.querySelector('.nap-rss-live');
    if(live){
      live.checked = getLiveEnabled(kind, el);
      live.addEventListener('change', () => {
        setLiveEnabled(kind, el, live.checked);
        const st = el.querySelector('.nap-rss-status');
        if(st) st.textContent = live.checked ? 'Live enabled. Refreshing' : 'Live disabled (snapshot).';
        if(live.checked){
          if(kind==='sidebar') hydrateRssSidebar(el);
          else hydrateTicker(el);
        }
      });
    }
    renderPresetList(el, kind);
    const maxFeedsSel = details.querySelector('.nap-rss-maxfeeds');
    if(maxFeedsSel){
      maxFeedsSel.value = String(getMaxFeeds(kind, el));
      maxFeedsSel.addEventListener('change', () => {
        setMaxFeeds(kind, el, maxFeedsSel.value);
        const st = el.querySelector('.nap-rss-status');
        if(st) st.textContent = 'Max feeds: ' + getMaxFeeds(kind, el) + '.';
        if(getLiveEnabled(kind, el)){
          if(kind==='sidebar') hydrateRssSidebar(el);
          else hydrateTicker(el);
        }
      });
    }
    const maxSel = details.querySelector('.nap-rss-max');
    if(maxSel){
      // Set initial value from persisted settings
      maxSel.value = String(getMaxItems(kind, el));
      maxSel.addEventListener('change', () => {
        setMaxItems(kind, el, maxSel.value);
        const st = el.querySelector('.nap-rss-status');
        if(st) st.textContent = 'Items per feed: ' + getMaxItems(kind, el) + '.';
        if(kind==='sidebar'){
          if(getLiveEnabled('sidebar', el)) hydrateRssSidebar(el);
          else applySidebarMax(el);
        } else {
          if(getLiveEnabled('ticker', el)) hydrateTicker(el);
        }
      });
    }
    const input = details.querySelector('.nap-rss-add');
    const btn = details.querySelector('.nap-rss-add-btn');
    function addUrl(){
      const v = (input && input.value || '').trim();
      if(!v) return;
      try{ new URL(v); } catch(e){ const st=el.querySelector('.nap-rss-status'); if(st) st.textContent='Invalid URL.'; return; }
      const next = new Set(getSelectedFeeds(kind, el));
      next.add(v);
      setSelectedFeeds(kind, el, Array.from(next));
      // Persist custom preset so it appears in the dropdown later
      if(!PRESETS.some(p=>p.url===v)){
        const customs = loadCustomPresets();
        if(!customs.some(p=>p.url===v)){
          customs.unshift({ label: deriveLabel(v), url: v });
          saveCustomPresets(customs.slice(0, 100));
        }
      }
      if(input) input.value='';
      renderPresetList(el, kind);
      const st = el.querySelector('.nap-rss-status');
      if(st) st.textContent='Added feed. Selected '+next.size+' feed(s).';
    }
    if(btn) btn.addEventListener('click', addUrl);
    if(input) input.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ e.preventDefault(); addUrl(); } });
    const st = el.querySelector('.nap-rss-status');
    if(st) st.textContent = 'Selected '+getSelectedFeeds(kind, el).length+' feed(s).';
  }

  /*  Ticker  */
  async function hydrateTicker(el){
    if(!el||el.getAttribute('data-source')!=='rss') return;
    if(!getLiveEnabled('ticker', el)) return;
    const urlsAll = getSelectedFeeds('ticker', el);
    const maxFeeds = getMaxFeeds('ticker', el);
    const urls = urlsAll.slice(0, maxFeeds);
    if(!urls.length) return;
    const max=parseInt(el.getAttribute('data-rss-max')||'20',10);
    const all=[];
    for(const u of urls){const items=await fetchFeed(u);all.push(...items);}
    const items=dedupe(all,max);
    if(!items.length) return;
    const textColor=el.style.color||'#fff';
    const accent=getCssVar('--c-accent')||'#009CDE';
    const fm=getCssVar('--f-mono')||'ui-monospace';
    const html=items.map(it=>
      '<a href="'+esc(it.url||'#')+'" target="_blank" rel="noopener noreferrer" '+
      'style="font-family:'+fm+';font-size:12px;color:'+textColor+';padding:0 32px;letter-spacing:0.04em;display:inline-flex;align-items:center;gap:10px;text-decoration:none">'+
      '<span style="width:5px;height:5px;border-radius:50%;background:'+accent+';display:inline-block;flex-shrink:0"></span>'+
      esc(it.title)+'<span style="font-size:10px;opacity:0.6"></span></a>'
    ).join('');
    const track=el.querySelector('.nap-ticker-track');
    if(track) track.innerHTML=html+html;
  }

  /*  RSS Sidebar  */
  async function hydrateRssSidebar(el){
    if(!el) return;
    if(!getLiveEnabled('sidebar', el)) return;
    const feedsAll = getSelectedFeeds('sidebar', el);
    const maxFeeds = getMaxFeeds('sidebar', el);
    const feeds = feedsAll.slice(0, maxFeeds);
    if(!feeds.length) return;
    const max=getMaxItems('sidebar', el);
    const all=[];
    for(const u of feeds){
      const items=await fetchFeed(u);
      try{const host=new URL(u).hostname.replace(/^www./,'');items.forEach(it=>it.source=host);}catch(e){}
      all.push(...items);
    }
    const items=dedupe(all,max);
    if(!items.length) return;
    const text=getCssVar('--c-text')||'#1A2B4A';
    const accent=getCssVar('--c-accent')||'#009CDE';
    const muted=getCssVar('--c-muted')||'#5A789A';
    const border=getCssVar('--c-border')||'#C8D9EE';
    const fb=getCssVar('--f-body')||'system-ui';
    const fm=getCssVar('--f-mono')||'ui-monospace';
    function fmtDate(d){try{return new Date(d).toLocaleDateString();}catch(e){return '';}}
    const container=el.querySelector('.nap-rss-items');
    if(!container) return;
    container.innerHTML=items.map((it,i)=>{
      const n=String(i+1).padStart(2,'0');
      const dt=it.date?fmtDate(it.date):'';
      return '<div style="padding:11px 18px;border-bottom:1px solid '+border+';display:flex;gap:10px;align-items:flex-start">'+
        '<span style="font-family:'+fm+';font-size:12px;color:'+accent+';flex-shrink:0;min-width:20px;margin-top:1px">'+n+'</span>'+
        '<div style="flex:1">'+
          '<div style="font-family:'+fb+';font-size:13px;font-weight:600;color:'+text+';line-height:1.3;margin-bottom:3px">'+
            (it.url?'<a href="'+esc(it.url)+'" target="_blank" rel="noopener" style="color:'+text+';text-decoration:none">'+esc(it.title)+'</a>':esc(it.title))+
          '</div>'+
          '<div style="display:flex;gap:8px;align-items:center">'+
            (it.source?'<span style="font-family:'+fm+';font-size:9px;color:'+muted+';text-transform:uppercase;letter-spacing:0.08em">'+esc(it.source)+'</span>':'')+
            (dt?'<span style="font-family:'+fm+';font-size:9px;color:'+muted+'">'+dt+'</span>':'')+
          '</div>'+
        '</div>'+
        (it.url?'<a href="'+esc(it.url)+'" target="_blank" rel="noopener" style="flex-shrink:0;font-family:'+fb+';font-size:11px;color:'+accent+';font-weight:600;text-decoration:none;padding-top:1px"></a>':'')+
      '</div>';
    }).join('');
    /* Update timestamp */
    const ts=el.querySelector('.nap-rss-timestamp');
    applySidebarMax(el);
    if(ts) ts.textContent='Updated '+new Date().toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});
  }

  /*  Copy buttons  */
  function initCopyButtons(){
    document.querySelectorAll('.nap-copy-btn').forEach(function(btn){
      btn.addEventListener('click',function(){
        const text=this.getAttribute('data-copy')||'';
        const orig=this.innerHTML;
        const accent=getCssVar('--c-accent')||'#009CDE';
        const done=()=>{
          this.innerHTML=' Copied!';
          this.style.background=accent;
          this.style.color='#fff';
          this.style.border='none';
          setTimeout(()=>{this.innerHTML=orig;this.style.background='';this.style.color='';this.style.border='';},2000);
        };
        if(navigator.clipboard){
          navigator.clipboard.writeText(text).then(done).catch(()=>done());
        } else {
          const ta=document.createElement('textarea');
          ta.value=text;ta.style.position='fixed';ta.style.opacity='0';
          document.body.appendChild(ta);ta.select();document.execCommand('copy');
          document.body.removeChild(ta);done();
        }
      });
    });
  }

  /*  Template expand  */
  function initExpandButtons(){
    document.querySelectorAll('.nap-expand-btn').forEach(function(btn){
      btn.addEventListener('click',function(){
        const target=document.getElementById(this.getAttribute('data-target'));
        if(!target) return;
        const isOpen=target.classList.toggle('open');
        this.textContent=isOpen?'Collapse':'Preview';
      });
    });
  }

  // Wire RSS config UIs (snapshot-first; live optional)
  document.querySelectorAll('.nap-ticker[data-source="rss"]').forEach(el=>wireRssConfig(el,'ticker'));
  document.querySelectorAll('.nap-rss-sidebar').forEach(el=>wireRssConfig(el,'sidebar'));
  document.querySelectorAll('.nap-rss-sidebar').forEach(el=>applySidebarMax(el));

  // Only hydrate if live is enabled (persisted)
  document.querySelectorAll('.nap-ticker[data-source="rss"]').forEach(el=>{ if(getLiveEnabled('ticker', el)) hydrateTicker(el); });
  document.querySelectorAll('.nap-rss-sidebar').forEach(el=>{ if(getLiveEnabled('sidebar', el)) hydrateRssSidebar(el); });
  initCopyButtons();
  initExpandButtons();

  /*  Hourly live refresh  */
  const REFRESH_MS = 60 * 60 * 1000; // 1 hour
  setInterval(function() {
    document.querySelectorAll('.nap-ticker[data-source="rss"]').forEach(el=>{ if(getLiveEnabled('ticker', el)) hydrateTicker(el); });
    document.querySelectorAll('.nap-rss-sidebar').forEach(el=>{ if(getLiveEnabled('sidebar', el)) hydrateRssSidebar(el); });
  }, REFRESH_MS);

  /* Show a subtle "Live" indicator on the RSS sidebar header */
  document.querySelectorAll('.nap-rss-sidebar').forEach(function(rssEl){
    const header = rssEl.querySelector('div');
    if (!header) return;
    const dot = document.createElement('span');
    dot.title = 'Updates every hour (when Live is enabled)';
    dot.style.cssText = 'width:6px;height:6px;border-radius:50%;background:#00A651;display:inline-block;margin-left:auto;animation:nap_pulse 2s ease-in-out infinite;opacity:0.85';
    header.appendChild(dot);
  });
})();
<\/script>`}function qC(t,e){const n=t;switch(t.type){case"header":return kC(n,e);case"ticker":return CC(n,e);case"section-divider":return EC(n,e);case"article-grid":return TC(n,e);case"spotlight":return MC(n,e);case"ethics-split":return jC(n,e);case"image":return AC(n,e);case"text":return DC(n,e);case"html-embed":return RC(n,e);case"prompt-masterclass":return IC(n,e);case"sbar-prompt":return OC(n,e);case"prompt-template":return NC(n,e);case"safety-reminders":return zC(n,e);case"clinical-prompt-templates":return PC(n,e);case"term-of-month":return LC(n,e);case"ai-case-file":return $C(n,e);case"quick-hits":return FC(n,e);case"humor":return BC(n,e);case"spacer":return _C(n,e);case"ai-safety":return HC(n,e);case"institutional-spotlight":return UC(n,e);case"rss-sidebar":return VC(n,e);case"footer":return WC(n,e);default:return`<!-- unsupported block: ${t.type} -->`}}function JC(t,e){var a;const{theme:n,blocks:r,blockOrder:i}=t,o=i.map(c=>r[c]?qC(r[c],n):"").join(`
`),s=e==null?void 0:e.baseFontPx,l=(e==null?void 0:e.extraCss)||"";return`<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>${M(((a=t.meta)==null?void 0:a.title)||"Newsletter")}</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;0,9..40,800;1,9..40,300;1,9..40,400&family=DM+Mono:ital,wght@0,300;0,400;0,500;1,300&display=swap" rel="stylesheet">
<style>
${wC(n,s)}
${l}
</style>
</head>
<body>
<div class="nap-export-wrap">
  <div class="nap-shell">
  ${o}
  </div>
</div>
${KC()}
</body>
</html>`}function GC(t){var l;let e="";try{const a=Array.from(document.styleSheets||[]),c=[];for(const d of a)try{const f=d.cssRules;if(!f)continue;for(const p of Array.from(f))c.push(p.cssText)}catch{}e=c.join(`
`)}catch{e=""}const n=(()=>{try{const a=parseFloat(getComputedStyle(document.documentElement).fontSize);return Number.isFinite(a)?Math.max(12,a*.92):void 0}catch{return}})(),r=JC(t,{baseFontPx:n,extraCss:e}),i=new Blob([r],{type:"text/html"}),o=URL.createObjectURL(i),s=document.createElement("a");s.href=o,s.download=`nap-issue-${((l=t.meta)==null?void 0:l.issueNumber)||"draft"}.html`,s.click(),URL.revokeObjectURL(o)}function YC({newsletter:t,editorState:e,lastSaved:n,isMobile:r,isTablet:i,drawerOpen:o,onToggleDrawer:s,onSave:l,onSaveVersion:a,onExportJson:c,onImport:d,onTogglePreview:f,onZoomChange:p}){const h=b.useRef(null),[m,g]=b.useState(!1),S=[75,90,100,110,125],y=S.indexOf(e.zoom),x=r||i;return u.jsxs("div",{style:{height:56,background:"var(--color-primary)",borderBottom:"1px solid rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 12px",gap:8,flexShrink:0,fontFamily:"var(--font-body)",position:"relative",zIndex:400},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,minWidth:0,flex:1},children:[x&&u.jsx(xn,{icon:o?u.jsx(Jc,{size:16}):u.jsx(pC,{size:16}),onClick:s,title:"Toggle panels"}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",minWidth:0},children:[u.jsx("span",{style:{color:"#fff",fontFamily:"var(--font-display)",fontSize:r?13:15,fontWeight:400,lineHeight:1.1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:r?140:220},children:t.meta.title||"Newsletter Builder"}),!r&&u.jsxs("span",{style:{color:"rgba(255,255,255,0.5)",fontFamily:"var(--font-mono)",fontSize:10,letterSpacing:"0.14em",textTransform:"uppercase"},children:["Issue ",t.meta.issueNumber," Builder"]})]})]}),!r&&u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[u.jsx(xn,{icon:u.jsx(SC,{size:14}),title:"Zoom out",onClick:()=>p(S[Math.max(0,y-1)]),disabled:y<=0}),u.jsxs("span",{style:{color:"rgba(255,255,255,0.7)",fontFamily:"var(--font-mono)",fontSize:12,minWidth:36,textAlign:"center"},children:[e.zoom,"%"]}),u.jsx(xn,{icon:u.jsx(vC,{size:14}),title:"Zoom in",onClick:()=>p(S[Math.min(S.length-1,y+1)]),disabled:y>=S.length-1})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,flexShrink:0},children:[n&&!x&&u.jsxs("span",{style:{color:"rgba(255,255,255,0.45)",fontFamily:"var(--font-mono)",fontSize:11,marginRight:4},children:["Saved ",n]}),u.jsx(xn,{icon:e.previewMode?u.jsx(cC,{size:14}):u.jsx(uC,{size:14}),label:r?void 0:e.previewMode?"Edit":"Preview",onClick:f,active:e.previewMode,title:"Toggle preview"}),u.jsx(xn,{icon:u.jsx(Mv,{size:14}),label:r?void 0:"Export HTML",onClick:()=>GC(t),highlight:!0,title:"Export HTML"}),!x&&u.jsxs(u.Fragment,{children:[u.jsx(xn,{icon:u.jsx(Sg,{size:14}),label:"Save",onClick:l}),u.jsx(xn,{icon:u.jsx(vg,{size:14}),label:"Version",onClick:a}),u.jsx("div",{style:{width:1,height:24,background:"rgba(255,255,255,0.15)",margin:"0 2px"}}),u.jsx(xn,{icon:u.jsx(xg,{size:14}),label:"Export JSON",onClick:c}),u.jsx(xn,{icon:u.jsx(bg,{size:14}),label:"Import",onClick:()=>{var v;return(v=h.current)==null?void 0:v.click()}})]}),x&&u.jsxs("div",{style:{position:"relative"},children:[u.jsx(xn,{icon:u.jsx(hC,{size:16}),onClick:()=>g(v=>!v),active:m,title:"More actions"}),m&&u.jsx("div",{style:{position:"absolute",top:"100%",right:0,marginTop:6,background:"var(--color-surface)",border:"1px solid var(--color-border)",borderRadius:10,boxShadow:"0 8px 32px rgba(0,0,0,0.2)",zIndex:500,padding:6,minWidth:160,animation:"fadeInUp 0.15s ease"},onClick:()=>g(!1),children:[{icon:u.jsx(Sg,{size:14}),label:"Save",action:l},{icon:u.jsx(vg,{size:14}),label:"Save Version",action:a},{icon:u.jsx(xg,{size:14}),label:"Export JSON",action:c},{icon:u.jsx(bg,{size:14}),label:"Import JSON",action:()=>{var v;return(v=h.current)==null?void 0:v.click()}}].map(({icon:v,label:w,action:k})=>u.jsxs("button",{onClick:k,style:{display:"flex",alignItems:"center",gap:10,width:"100%",padding:"9px 12px",background:"none",border:"none",borderRadius:7,fontFamily:"var(--font-body)",fontSize:13,color:"var(--color-text)",cursor:"pointer",textAlign:"left"},onMouseEnter:T=>{T.currentTarget.style.background="var(--color-bg)"},onMouseLeave:T=>{T.currentTarget.style.background="none"},children:[u.jsx("span",{style:{color:"var(--color-muted)"},children:v}),w]},w))})]})]}),u.jsx("input",{ref:h,type:"file",accept:".json",style:{display:"none"},onChange:v=>{var k;const w=(k=v.target.files)==null?void 0:k[0];w&&d(w),v.target.value=""}})]})}function xn({icon:t,label:e,onClick:n,title:r,active:i,highlight:o,disabled:s}){return u.jsxs("button",{onClick:n,disabled:s,title:r,style:{display:"inline-flex",alignItems:"center",gap:6,padding:e?"6px 12px":"6px 8px",background:o?"rgba(255,255,255,0.22)":i?"rgba(255,255,255,0.16)":"rgba(255,255,255,0.08)",border:"1px solid",borderColor:o?"rgba(255,255,255,0.4)":"rgba(255,255,255,0.15)",borderRadius:8,color:"#fff",fontSize:12,fontFamily:"var(--font-body)",cursor:s?"not-allowed":"pointer",opacity:s?.4:1,transition:"all 0.15s",whiteSpace:"nowrap"},onMouseEnter:l=>{s||(l.currentTarget.style.background="rgba(255,255,255,0.22)")},onMouseLeave:l=>{l.currentTarget.style.background=o?"rgba(255,255,255,0.22)":i?"rgba(255,255,255,0.16)":"rgba(255,255,255,0.08)"},children:[t,e&&u.jsx("span",{children:e})]})}const La=[{id:"frontiers-in-neuroscience-rss",label:"Frontiers in Neuroscience  RSS",url:"https://www.frontiersin.org/journals/neuroscience/rss",tags:["neuroscience","journal"]},{id:"frontiers-in-neurology-rss",label:"Frontiers in Neurology  RSS",url:"https://www.frontiersin.org/journals/neurology/rss",tags:["neurology","journal"]},{id:"mit-news-artificial-intelligence",label:"MIT News  Artificial Intelligence",url:"https://news.mit.edu/rss/topic/artificial-intelligence2",tags:["ai","news"]},{id:"sciencedaily-artificial-intelligence",label:"ScienceDaily  Artificial Intelligence",url:"https://www.sciencedaily.com/rss/computers_math/artificial_intelligence.xml",tags:["ai","news"]},{id:"marktechpost-ai-news",label:"MarkTechPost  AI News",url:"https://www.marktechpost.com/feed/",tags:["ai","news"]},{id:"the-lancet-neurology-current",label:"The Lancet Neurology  Current",url:"https://www.thelancet.com/rssfeed/laneur_current.xml",tags:["neurology","journal"]},{id:"jama-neurology-rss",label:"JAMA Neurology  RSS",url:"https://jamanetwork.com/rss/site_16/0.xml",tags:["neurology","journal"]},{id:"npj-digital-medicine-rss",label:"npj Digital Medicine  RSS",url:"https://www.nature.com/npjdigitalmed.rss",tags:["digital-medicine","journal"]},{id:"pubmed-rss-neurology-ai-search",label:"PubMed RSS  Neurology AI Search",url:"https://pubmed.ncbi.nlm.nih.gov/rss/search/1x9bY_ZPGMIgWOrGWvQbkjt2X1J5zCH66gaj5UHwPTuOP_TklI/?limit=15&utm_campaign=pubmed-2&fc=20260222062849",tags:["pubmed","ai","neurology"]},{id:"jama-neuro-onlinefirst",label:"JAMA Neurology  Online First",url:"https://jamanetwork.com/rss/site_16/onlineFirst_72.xml",tags:["neurology","journal"]},{id:"jama-neuro-current",label:"JAMA Neurology  Current Issue",url:"https://jamanetwork.com/rss/site_16/72.xml",tags:["neurology","journal"]},{id:"practical-neurology-current",label:"Practical Neurology (BMJ)  Current Issue",url:"https://pn.bmj.com/rss/current.xml",tags:["neurology","journal"]},{id:"fierce-healthcare-healthtech",label:"Fierce Healthcare  Health Tech",url:"https://www.fiercehealthcare.com/rss/health%20%26%20tech/xml",tags:["ai","health-it","news"]},{id:"fierce-healthcare-all",label:"Fierce Healthcare  All Stories",url:"https://www.fiercehealthcare.com/rss/xml",tags:["health-it","news"]},{id:"nejm-ai-podcast",label:"NEJM AI Grand Rounds (Podcast RSS)",url:"https://ai-podcast.nejm.org/feed.xml",tags:["ai","medicine","podcast"]}];function QC({block:t,onClose:e,onUpdateBlock:n,onAddArticle:r,onUpdateArticle:i,onDeleteArticle:o,onAddQuickHit:s,onUpdateQuickHit:l,onDeleteQuickHit:a}){const c=d=>n(t.id,d);return u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:16},children:[u.jsx("span",{style:{fontFamily:"var(--font-mono)",fontSize:11,letterSpacing:"0.1em",textTransform:"uppercase",color:"var(--color-muted)"},children:"Block Settings"}),u.jsx("button",{onClick:e,style:{background:"none",border:"none",cursor:"pointer",color:"var(--color-muted)",padding:4,borderRadius:4},children:u.jsx(Jc,{size:16})})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:0},children:[t.type==="header"&&u.jsx(XC,{block:t,upd:c}),t.type==="ticker"&&u.jsx(y2,{block:t,upd:c}),t.type==="section-divider"&&u.jsx(ZC,{block:t,upd:c}),t.type==="article-grid"&&u.jsx(e2,{block:t,upd:c,onAddArticle:()=>r(t.id),onUpdateArticle:(d,f)=>i(t.id,d,f),onDeleteArticle:d=>o(t.id,d)}),t.type==="spotlight"&&u.jsx(t2,{block:t,upd:c,onUpdateArticle:(d,f)=>i(t.id,d,f)}),t.type==="ethics-split"&&u.jsx(n2,{block:t,upd:c}),t.type==="image"&&u.jsx(i2,{block:t,upd:c}),t.type==="text"&&u.jsx(o2,{block:t,upd:c}),t.type==="html-embed"&&u.jsx(s2,{block:t,upd:c}),t.type==="prompt-masterclass"&&u.jsx(l2,{block:t,upd:c}),t.type==="sbar-prompt"&&u.jsx(a2,{block:t,upd:c}),t.type==="prompt-template"&&u.jsx(c2,{block:t,upd:c}),t.type==="safety-reminders"&&u.jsx(u2,{block:t,upd:c}),t.type==="term-of-month"&&u.jsx(d2,{block:t,upd:c}),t.type==="ai-case-file"&&u.jsx(g2,{block:t,upd:c}),t.type==="quick-hits"&&u.jsx(f2,{block:t,upd:c,onAddHit:()=>s(t.id),onUpdateHit:(d,f)=>l(t.id,d,f),onDeleteHit:d=>a(t.id,d)}),t.type==="humor"&&u.jsx(m2,{block:t,upd:c}),t.type==="spacer"&&u.jsx(p2,{block:t,upd:c}),t.type==="footer"&&u.jsx(h2,{block:t,upd:c}),t.type==="ai-safety"&&u.jsx(r2,{block:t,upd:c}),t.type==="institutional-spotlight"&&u.jsx(x2,{block:t,upd:c}),t.type==="rss-sidebar"&&u.jsx(v2,{block:t,upd:c}),t.type==="clinical-prompt-templates"&&u.jsx(S2,{block:t,upd:c})]})]})}function XC({block:t,upd:e}){const n=b.useRef(null);return u.jsxs(u.Fragment,{children:[u.jsx(j,{label:"Title",children:u.jsx("input",{style:A,value:t.title,onChange:r=>e({title:r.target.value})})}),u.jsx(j,{label:"Subtitle",children:u.jsx("input",{style:A,value:t.subtitle,onChange:r=>e({subtitle:r.target.value})})}),u.jsx(j,{label:"Issue Number",children:u.jsx("input",{style:A,value:t.issueNumber,onChange:r=>e({issueNumber:r.target.value})})}),u.jsx(j,{label:"Issue Date",children:u.jsx("input",{style:A,value:t.issueDate,onChange:r=>e({issueDate:r.target.value})})}),u.jsx(j,{label:"Tagline",children:u.jsx("textarea",{style:te,value:t.tagline,onChange:r=>e({tagline:r.target.value})})}),u.jsx(j,{label:"Background Style",children:u.jsxs("select",{style:A,value:t.backgroundStyle,onChange:r=>e({backgroundStyle:r.target.value}),children:[u.jsx("option",{value:"gradient",children:"Gradient"}),u.jsx("option",{value:"solid",children:"Solid"}),u.jsx("option",{value:"mesh",children:"Mesh"}),u.jsx("option",{value:"wave",children:"Wave"})]})}),u.jsx(j,{label:"Logo URL",children:u.jsx("input",{style:A,value:t.logoUrl,onChange:r=>e({logoUrl:r.target.value}),placeholder:"https://"})}),u.jsxs(j,{label:"Logo Upload",children:[u.jsx("button",{onClick:()=>{var r;return(r=n.current)==null?void 0:r.click()},style:{...A,cursor:"pointer",textAlign:"center",color:"var(--color-muted)"},children:"Click to upload image"}),u.jsx("input",{ref:n,type:"file",accept:"image/*",style:{display:"none"},onChange:r=>{var s;const i=(s=r.target.files)==null?void 0:s[0];if(!i)return;const o=new FileReader;o.onload=l=>{var a;return e({logoDataUrl:(a=l.target)==null?void 0:a.result})},o.readAsDataURL(i)}}),t.logoDataUrl&&u.jsx("div",{style:{marginTop:8,padding:8,background:"var(--color-bg)",borderRadius:8,textAlign:"center"},children:u.jsx("img",{src:t.logoDataUrl,alt:"Logo",style:{maxHeight:48,maxWidth:"100%"}})})]})]})}function ZC({block:t,upd:e}){return u.jsxs(u.Fragment,{children:[u.jsx(j,{label:"Label",children:u.jsx("input",{style:A,value:t.label,onChange:n=>e({label:n.target.value})})}),u.jsx(j,{label:"Number",children:u.jsx("input",{style:A,type:"number",value:t.number,onChange:n=>e({number:Number(n.target.value)})})}),u.jsx(j,{label:"Description",children:u.jsx("textarea",{style:te,value:t.description,onChange:n=>e({description:n.target.value})})}),u.jsx(j,{label:"Style",children:u.jsxs("select",{style:A,value:t.style,onChange:n=>e({style:n.target.value}),children:[u.jsx("option",{value:"gradient",children:"Gradient"}),u.jsx("option",{value:"line",children:"Line"}),u.jsx("option",{value:"bold",children:"Bold"}),u.jsx("option",{value:"numbered",children:"Numbered"})]})})]})}function Av({article:t,onUpdate:e,onDelete:n}){const r=b.useRef(null);return u.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:8,padding:12,marginBottom:12},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10},children:[u.jsx("span",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",letterSpacing:"0.1em",textTransform:"uppercase"},children:"Article"}),u.jsx("button",{onClick:n,style:{background:"#FEF0EE",border:"1px solid #f5c6c0",borderRadius:6,color:"#7A1E12",cursor:"pointer",padding:"3px 8px",fontSize:11,fontFamily:"var(--font-body)"},children:"Delete"})]}),u.jsx(j,{label:"Title",children:u.jsx("input",{style:A,value:t.title,onChange:i=>e({title:i.target.value})})}),u.jsx(j,{label:"URL",children:u.jsx("input",{style:A,value:t.url,onChange:i=>e({url:i.target.value}),placeholder:"https://"})}),u.jsx(j,{label:"Source / Journal",children:u.jsx("input",{style:A,value:t.source,onChange:i=>e({source:i.target.value})})}),u.jsx(j,{label:"Date",children:u.jsx("input",{style:A,type:"date",value:t.pubDate,onChange:i=>e({pubDate:i.target.value})})}),u.jsx(j,{label:"Image URL",children:u.jsx("input",{style:A,value:t.imageUrl,onChange:i=>e({imageUrl:i.target.value}),placeholder:"https:// (optional)"})}),u.jsxs(j,{label:"Upload Image",children:[u.jsx("button",{onClick:()=>{var i;return(i=r.current)==null?void 0:i.click()},style:{...A,cursor:"pointer",textAlign:"center",color:"var(--color-muted)"},children:"Upload image"}),u.jsx("input",{ref:r,type:"file",accept:"image/*",style:{display:"none"},onChange:i=>{var l;const o=(l=i.target.files)==null?void 0:l[0];if(!o)return;const s=new FileReader;s.onload=a=>{var c;return e({imageUrl:(c=a.target)==null?void 0:c.result})},s.readAsDataURL(o)}})]}),u.jsx(j,{label:"Summary",children:u.jsx("textarea",{style:te,value:t.summary,onChange:i=>e({summary:i.target.value})})}),u.jsx(j,{label:"Clinical Context",children:u.jsx("textarea",{style:te,value:t.clinicalContext,onChange:i=>e({clinicalContext:i.target.value})})}),u.jsx(j,{label:"My Take",children:u.jsx("textarea",{style:{...te,minHeight:60},value:t.myTake,onChange:i=>e({myTake:i.target.value})})}),u.jsx(j,{label:"Evidence Level",children:u.jsxs("select",{style:A,value:t.evidenceLevel,onChange:i=>e({evidenceLevel:i.target.value}),children:[u.jsx("option",{value:"",children:""}),u.jsx("option",{children:"High"}),u.jsx("option",{children:"Moderate"}),u.jsx("option",{children:"Low"}),u.jsx("option",{children:"Expert Opinion"})]})})]})}function e2({block:t,upd:e,onAddArticle:n,onUpdateArticle:r,onDeleteArticle:i}){var o;return u.jsxs(u.Fragment,{children:[u.jsx(j,{label:"Section Title",children:u.jsx("input",{style:A,value:t.sectionTitle,onChange:s=>e({sectionTitle:s.target.value})})}),u.jsx(j,{label:"Columns",children:u.jsxs("select",{style:A,value:t.columns,onChange:s=>e({columns:Number(s.target.value)}),children:[u.jsx("option",{value:1,children:"1 column"}),u.jsx("option",{value:2,children:"2 columns"}),u.jsx("option",{value:3,children:"3 columns"})]})}),u.jsx(j,{label:"Layout",children:u.jsxs("select",{style:A,value:t.layout,onChange:s=>e({layout:s.target.value}),children:[u.jsx("option",{value:"card",children:"Card"}),u.jsx("option",{value:"editorial",children:"Editorial"}),u.jsx("option",{value:"compact",children:"Compact"})]})}),u.jsxs("div",{style:{marginTop:16},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10},children:[u.jsxs("span",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",letterSpacing:"0.12em",textTransform:"uppercase"},children:[((o=t.articles)==null?void 0:o.length)||0," Articles"]}),u.jsxs("button",{onClick:n,style:{display:"flex",alignItems:"center",gap:4,padding:"5px 10px",background:"var(--color-accent)",border:"none",borderRadius:6,color:"#fff",fontSize:12,fontFamily:"var(--font-body)",cursor:"pointer"},children:[u.jsx(Lr,{size:11})," Add Article"]})]}),(t.articles||[]).map(s=>u.jsx(Av,{article:s,onUpdate:l=>r(s.id,l),onDelete:()=>i(s.id)},s.id))]})]})}function t2({block:t,upd:e,onUpdateArticle:n}){return u.jsxs(u.Fragment,{children:[u.jsx(j,{label:"Layout",children:u.jsxs("select",{style:A,value:t.layout,onChange:r=>e({layout:r.target.value}),children:[u.jsx("option",{value:"left-image",children:"Image Left"}),u.jsx("option",{value:"right-image",children:"Image Right"}),u.jsx("option",{value:"top-image",children:"Image Top"}),u.jsx("option",{value:"no-image",children:"No Image"})]})}),u.jsx(j,{label:"Accent Color",children:u.jsx("input",{type:"color",value:t.accentColor,onChange:r=>e({accentColor:r.target.value})})}),u.jsxs("div",{style:{marginTop:8},children:[u.jsx("div",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",letterSpacing:"0.12em",textTransform:"uppercase",marginBottom:8},children:"Article"}),u.jsx(Av,{article:t.article,onUpdate:r=>n(t.article.id,r),onDelete:()=>{}})]})]})}function n2({block:t,upd:e}){return u.jsxs(u.Fragment,{children:[u.jsx(j,{label:"Heading",children:u.jsx("input",{style:A,value:t.heading,onChange:n=>e({heading:n.target.value})})}),u.jsx(j,{label:"Subheading",children:u.jsx("input",{style:A,value:t.subheading,onChange:n=>e({subheading:n.target.value})})}),u.jsx(j,{label:"Source / Publication",children:u.jsx("input",{style:A,value:t.source,onChange:n=>e({source:n.target.value})})}),u.jsx(j,{label:"URL",children:u.jsx("input",{style:A,value:t.url,onChange:n=>e({url:n.target.value}),placeholder:"https://"})}),u.jsx(j,{label:"Left Title",children:u.jsx("input",{style:A,value:t.leftTitle,onChange:n=>e({leftTitle:n.target.value})})}),u.jsx(j,{label:"Left Content",children:u.jsx("textarea",{style:te,value:t.leftContent,onChange:n=>e({leftContent:n.target.value})})}),u.jsx(j,{label:"Right Title",children:u.jsx("input",{style:A,value:t.rightTitle,onChange:n=>e({rightTitle:n.target.value})})}),u.jsx(j,{label:"Right Content",children:u.jsx("textarea",{style:te,value:t.rightContent,onChange:n=>e({rightContent:n.target.value})})}),u.jsx(j,{label:"Clinical Perspective",children:u.jsx("textarea",{style:te,value:t.clinicalPerspective,onChange:n=>e({clinicalPerspective:n.target.value})})})]})}function r2({block:t,upd:e}){const n=t.updates||[],r=(s,l)=>{const a=n.map(c=>c.id===s?{...c,...l}:c);e({updates:a})},i=()=>{const s=`su_${Math.random().toString(36).slice(2,10)}`,l=new Date,a=l.getFullYear(),c=String(l.getMonth()+1).padStart(2,"0"),d=String(l.getDate()).padStart(2,"0"),f={id:s,date:`${a}-${c}-${d}`,category:"Guideline",title:"New safety update",summary:"Edit this safety recommendation and add a link (optional).",url:"",severity:"informational"};e({updates:[...n,f]})},o=s=>{e({updates:n.filter(l=>l.id!==s)})};return u.jsxs(u.Fragment,{children:[u.jsx(j,{label:"Heading",children:u.jsx("input",{style:A,value:t.heading,onChange:s=>e({heading:s.target.value})})}),u.jsx(j,{label:"Subheading",children:u.jsx("textarea",{style:te,value:t.subheading,onChange:s=>e({subheading:s.target.value})})}),u.jsx(j,{label:"Show last updated",children:u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:10,fontFamily:"var(--font-body)",fontSize:12,color:"var(--color-text)"},children:[u.jsx("input",{type:"checkbox",checked:!!t.showLastUpdated,onChange:s=>e({showLastUpdated:s.target.checked})}),'Display "last updated" date']})}),u.jsxs("div",{style:{marginTop:14},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10},children:[u.jsxs("span",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",letterSpacing:"0.12em",textTransform:"uppercase"},children:[n.length," Updates"]}),u.jsxs("button",{onClick:i,style:{display:"flex",alignItems:"center",gap:6,padding:"6px 10px",background:"var(--color-accent)",border:"none",borderRadius:8,color:"#fff",fontSize:12,fontFamily:"var(--font-body)",cursor:"pointer"},children:[u.jsx(Lr,{size:12})," Add Update"]})]}),n.map(s=>u.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:10,padding:12,marginBottom:12,background:"var(--color-surface)"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10},children:[u.jsx("span",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",letterSpacing:"0.1em",textTransform:"uppercase"},children:"Safety update"}),u.jsx("button",{onClick:()=>o(s.id),style:{background:"#FEF0EE",border:"1px solid #f5c6c0",borderRadius:8,color:"#7A1E12",cursor:"pointer",padding:"4px 10px",fontSize:11,fontFamily:"var(--font-body)"},children:"Remove"})]}),u.jsx(j,{label:"Date",children:u.jsx("input",{style:A,type:"date",value:s.date,onChange:l=>r(s.id,{date:l.target.value})})}),u.jsx(j,{label:"Category",children:u.jsxs("select",{style:A,value:s.category,onChange:l=>r(s.id,{category:l.target.value}),children:[u.jsx("option",{value:"FDA",children:"FDA"}),u.jsx("option",{value:"Policy",children:"Policy"}),u.jsx("option",{value:"Guideline",children:"Guideline"}),u.jsx("option",{value:"Incident",children:"Incident"}),u.jsx("option",{value:"Alert",children:"Alert"}),u.jsx("option",{value:"Research",children:"Research"})]})}),u.jsx(j,{label:"Severity",children:u.jsxs("select",{style:A,value:s.severity,onChange:l=>r(s.id,{severity:l.target.value}),children:[u.jsx("option",{value:"critical",children:"critical"}),u.jsx("option",{value:"high",children:"high"}),u.jsx("option",{value:"medium",children:"medium"}),u.jsx("option",{value:"informational",children:"informational"})]})}),u.jsx(j,{label:"Title",children:u.jsx("input",{style:A,value:s.title,onChange:l=>r(s.id,{title:l.target.value})})}),u.jsx(j,{label:"URL",children:u.jsx("input",{style:A,value:s.url,onChange:l=>r(s.id,{url:l.target.value}),placeholder:"https:// (optional)"})}),u.jsx(j,{label:"Safety recommendation / summary",children:u.jsx("textarea",{style:{...te,minHeight:90},value:s.summary,onChange:l=>r(s.id,{summary:l.target.value})})})]},s.id))]})]})}function i2({block:t,upd:e}){const n=b.useRef(null);return u.jsxs(u.Fragment,{children:[u.jsx(j,{label:"Image URL",children:u.jsx("input",{style:A,value:t.url,onChange:r=>e({url:r.target.value}),placeholder:"https://"})}),u.jsxs(j,{label:"Upload Image",children:[u.jsx("button",{onClick:()=>{var r;return(r=n.current)==null?void 0:r.click()},style:{...A,cursor:"pointer",textAlign:"center",color:"var(--color-muted)"},children:t.dataUrl?" Image uploaded  click to replace":"Click to upload image"}),u.jsx("input",{ref:n,type:"file",accept:"image/*",style:{display:"none"},onChange:r=>{var s;const i=(s=r.target.files)==null?void 0:s[0];if(!i)return;const o=new FileReader;o.onload=l=>{var a;return e({dataUrl:(a=l.target)==null?void 0:a.result})},o.readAsDataURL(i)}})]}),(t.dataUrl||t.url)&&u.jsx("div",{style:{marginBottom:14,padding:8,background:"var(--color-bg)",borderRadius:8,textAlign:"center"},children:u.jsx("img",{src:t.dataUrl||t.url,alt:"Preview",style:{maxHeight:120,maxWidth:"100%",borderRadius:6}})}),u.jsx(j,{label:"Alt Text",children:u.jsx("input",{style:A,value:t.alt,onChange:r=>e({alt:r.target.value})})}),u.jsx(j,{label:"Caption",children:u.jsx("input",{style:A,value:t.caption,onChange:r=>e({caption:r.target.value})})}),u.jsxs("details",{style:{marginTop:6},children:[u.jsx("summary",{style:{cursor:"pointer",fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",letterSpacing:"0.12em",textTransform:"uppercase"},children:"Links / URLs"}),u.jsx("div",{style:{marginTop:10},children:u.jsx(j,{label:"Link URL",children:u.jsx("input",{style:A,value:t.linkUrl,onChange:r=>e({linkUrl:r.target.value}),placeholder:"https://"})})})]}),u.jsx(j,{label:"Width",children:u.jsxs("select",{style:A,value:t.width,onChange:r=>e({width:r.target.value}),children:[u.jsx("option",{value:"full",children:"Full width"}),u.jsx("option",{value:"wide",children:"Wide (80%)"}),u.jsx("option",{value:"medium",children:"Medium (60%)"}),u.jsx("option",{value:"small",children:"Small (40%)"})]})}),u.jsx(j,{label:"Alignment",children:u.jsxs("select",{style:A,value:t.alignment,onChange:r=>e({alignment:r.target.value}),children:[u.jsx("option",{value:"left",children:"Left"}),u.jsx("option",{value:"center",children:"Center"}),u.jsx("option",{value:"right",children:"Right"})]})}),u.jsxs(j,{label:"Border Radius",children:[u.jsx("input",{type:"range",min:0,max:32,value:t.borderRadius,onChange:r=>e({borderRadius:Number(r.target.value)}),style:{width:"100%",accentColor:"var(--color-accent)"}}),u.jsxs("span",{style:{fontFamily:"var(--font-mono)",fontSize:11,color:"var(--color-muted)"},children:[t.borderRadius,"px"]})]})]})}function o2({block:t,upd:e}){return u.jsxs(u.Fragment,{children:[u.jsx(j,{label:"Content (HTML)",hint:"Supports <strong>, <em>, <a>, <ul>, <ol>, <h3>, etc.",children:u.jsx("textarea",{style:{...te,minHeight:200,fontFamily:"var(--font-mono)",fontSize:12},value:t.html,onChange:n=>e({html:n.target.value})})}),u.jsx(j,{label:"Alignment",children:u.jsxs("select",{style:A,value:t.alignment,onChange:n=>e({alignment:n.target.value}),children:[u.jsx("option",{value:"left",children:"Left"}),u.jsx("option",{value:"center",children:"Center"}),u.jsx("option",{value:"right",children:"Right"})]})}),u.jsx(j,{label:"Max Width",children:u.jsxs("select",{style:A,value:t.maxWidth,onChange:n=>e({maxWidth:n.target.value}),children:[u.jsx("option",{value:"full",children:"Full"}),u.jsx("option",{value:"reading",children:"Reading (720px)"}),u.jsx("option",{value:"narrow",children:"Narrow (560px)"})]})})]})}function s2({block:t,upd:e}){return u.jsxs(u.Fragment,{children:[u.jsx(j,{label:"Label",children:u.jsx("input",{style:A,value:t.label,onChange:n=>e({label:n.target.value})})}),u.jsx(j,{label:"HTML Source",hint:"Inline styles are safe. Scripts are not supported.",children:u.jsx("textarea",{style:{...te,minHeight:240,fontFamily:"var(--font-mono)",fontSize:12},value:t.html,onChange:n=>e({html:n.target.value})})})]})}function l2({block:t,upd:e}){return u.jsxs(u.Fragment,{children:[u.jsx(j,{label:"Heading",children:u.jsx("input",{style:A,value:t.heading,onChange:n=>e({heading:n.target.value})})}),u.jsx(j,{label:"Step Label",children:u.jsx("input",{style:A,value:t.step,onChange:n=>e({step:n.target.value})})}),u.jsx(j,{label:"Framework",children:u.jsx("input",{style:A,value:t.framework,onChange:n=>e({framework:n.target.value})})}),u.jsx(j,{label:"Bad Prompt",children:u.jsx("textarea",{style:{...te,minHeight:60},value:t.badPrompt,onChange:n=>e({badPrompt:n.target.value})})}),u.jsx(j,{label:"Good Prompt",children:u.jsx("textarea",{style:{...te,minHeight:120},value:t.goodPrompt,onChange:n=>e({goodPrompt:n.target.value})})}),u.jsx(j,{label:"Explanation",children:u.jsx("textarea",{style:te,value:t.explanation,onChange:n=>e({explanation:n.target.value})})})]})}function a2({block:t,upd:e}){return u.jsxs(u.Fragment,{children:[u.jsx(j,{label:"Heading",children:u.jsx("input",{style:A,value:t.heading,onChange:n=>e({heading:n.target.value})})}),(t.steps||[]).map((n,r)=>u.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:8,padding:10,marginBottom:10},children:[u.jsxs("div",{style:{fontFamily:"var(--font-mono)",fontSize:11,color:"var(--color-muted)",marginBottom:8},children:[n.letter,"  ",n.name]}),u.jsx(j,{label:"Description",children:u.jsx("textarea",{style:{...te,minHeight:60},value:n.description,onChange:i=>{const o=[...t.steps];o[r]={...n,description:i.target.value},e({steps:o})}})}),u.jsx(j,{label:"Example",children:u.jsx("textarea",{style:{...te,minHeight:60},value:n.example,onChange:i=>{const o=[...t.steps];o[r]={...n,example:i.target.value},e({steps:o})}})})]},n.letter))]})}function c2({block:t,upd:e}){return u.jsxs(u.Fragment,{children:[u.jsx(j,{label:"Heading",children:u.jsx("input",{style:A,value:t.heading,onChange:n=>e({heading:n.target.value})})}),u.jsx(j,{label:"Prompt",hint:"Plain text. Rendered as a collapsible, copyable <pre> in the newsletter.",children:u.jsx("textarea",{style:{...te,minHeight:220,fontFamily:"var(--font-mono)",fontSize:12},value:t.prompt,onChange:n=>e({prompt:n.target.value})})})]})}const Wu=["Always verify AI-generated clinical reasoning against primary sources before acting.","Never submit patient-identifiable information (PHI) to consumer AI tools  use only approved institutional platforms.","AI supports clinical judgment; it does not replace it. Final decisions remain with the treating clinician.","Document AI tool use in the medical record where institutional policy requires it."];function u2({block:t,upd:e}){const n=Array.isArray(t.items)?t.items:[],r=(s,l)=>{const a=l?Array.from(new Set([...n,s])):n.filter(c=>c!==s);e({items:a})},i=s=>{const l=s.split(`
`).map(c=>c.trim()).filter(Boolean),a=Wu.filter(c=>n.includes(c));e({items:[...a,...l]})},o=n.filter(s=>!Wu.includes(s));return u.jsxs(u.Fragment,{children:[u.jsx(j,{label:"Heading",children:u.jsx("input",{style:A,value:t.heading,onChange:s=>e({heading:s.target.value})})}),u.jsx(j,{label:"Standard reminders",hint:"Choose 14 defaults, then optionally add custom lines below.",children:u.jsx("div",{style:{display:"grid",gap:8},children:Wu.map(s=>u.jsxs("label",{style:{display:"flex",gap:10,alignItems:"flex-start",fontFamily:"var(--font-body)",fontSize:13,cursor:"pointer"},children:[u.jsx("input",{type:"checkbox",checked:n.includes(s),onChange:l=>r(s,l.target.checked),style:{accentColor:"var(--color-accent)",marginTop:2}}),u.jsx("span",{style:{color:"var(--color-text)",lineHeight:1.45},children:s})]},s))})}),u.jsx(j,{label:"Custom reminders",hint:"One per line. These are added in addition to checked defaults.",children:u.jsx("textarea",{style:{...te,minHeight:140,fontFamily:"var(--font-body)",fontSize:13},value:o.join(`
`),onChange:s=>i(s.target.value),placeholder:"Add your own reminder lines"})})]})}function d2({block:t,upd:e}){return u.jsxs(u.Fragment,{children:[u.jsx(j,{label:"Term",children:u.jsx("input",{style:A,value:t.term,onChange:n=>e({term:n.target.value})})}),u.jsx(j,{label:"Definition",children:u.jsx("textarea",{style:te,value:t.definition,onChange:n=>e({definition:n.target.value})})}),u.jsx(j,{label:"Relevance to Medicine",children:u.jsx("textarea",{style:te,value:t.relevance,onChange:n=>e({relevance:n.target.value})})}),u.jsx(j,{label:"Clinical Application",children:u.jsx("textarea",{style:te,value:t.clinicalApplication,onChange:n=>e({clinicalApplication:n.target.value})})}),u.jsx(j,{label:"Related Terms",hint:"Comma-separated",children:u.jsx("input",{style:A,value:(t.relatedTerms||[]).join(", "),onChange:n=>e({relatedTerms:n.target.value.split(",").map(r=>r.trim()).filter(Boolean)})})})]})}function f2({block:t,upd:e,onAddHit:n,onUpdateHit:r,onDeleteHit:i}){var o;return u.jsxs(u.Fragment,{children:[u.jsx(j,{label:"Heading",children:u.jsx("input",{style:A,value:t.heading,onChange:s=>e({heading:s.target.value})})}),u.jsxs("div",{style:{marginTop:12},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10},children:[u.jsxs("span",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",letterSpacing:"0.12em",textTransform:"uppercase"},children:[((o=t.hits)==null?void 0:o.length)||0," Hits"]}),u.jsxs("button",{onClick:n,style:{display:"flex",alignItems:"center",gap:4,padding:"5px 10px",background:"var(--color-accent)",border:"none",borderRadius:6,color:"#fff",fontSize:12,fontFamily:"var(--font-body)",cursor:"pointer"},children:[u.jsx(Lr,{size:11})," Add Hit"]})]}),(t.hits||[]).map(s=>u.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:8,padding:10,marginBottom:10},children:[u.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:8},children:u.jsx("button",{onClick:()=>i(s.id),style:{background:"none",border:"none",cursor:"pointer",color:"#C0392B"},children:u.jsx(bo,{size:13})})}),u.jsx(j,{label:"Title",children:u.jsx("input",{style:A,value:s.title,onChange:l=>r(s.id,{title:l.target.value})})}),u.jsx(j,{label:"URL",children:u.jsx("input",{style:A,value:s.url,onChange:l=>r(s.id,{url:l.target.value}),placeholder:"https://"})}),u.jsx(j,{label:"Source",children:u.jsx("input",{style:A,value:s.source,onChange:l=>r(s.id,{source:l.target.value})})}),u.jsx(j,{label:"Summary",children:u.jsx("textarea",{style:{...te,minHeight:60},value:s.summary,onChange:l=>r(s.id,{summary:l.target.value})})})]},s.id))]})]})}function p2({block:t,upd:e}){return u.jsxs(u.Fragment,{children:[u.jsx(j,{label:`Height: ${t.height}px`,children:u.jsx("input",{type:"range",min:8,max:200,value:t.height,onChange:n=>e({height:Number(n.target.value)}),style:{width:"100%"}})}),u.jsx(j,{label:"Show Divider Line",children:u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,fontFamily:"var(--font-body)",fontSize:13,cursor:"pointer"},children:[u.jsx("input",{type:"checkbox",checked:!!t.showLine,onChange:n=>e({showLine:n.target.checked}),style:{accentColor:"var(--color-accent)"}}),"Show divider line"]})}),t.showLine&&u.jsx(j,{label:"Line Style",children:u.jsxs("select",{style:A,value:t.lineStyle,onChange:n=>e({lineStyle:n.target.value}),children:[u.jsx("option",{value:"solid",children:"Solid"}),u.jsx("option",{value:"dashed",children:"Dashed"}),u.jsx("option",{value:"dotted",children:"Dotted"})]})})]})}function h2({block:t,upd:e}){return u.jsxs(u.Fragment,{children:[u.jsx(j,{label:"Institution",children:u.jsx("input",{style:A,value:t.institution,onChange:n=>e({institution:n.target.value})})}),u.jsx(j,{label:"Department",children:u.jsx("input",{style:A,value:t.department,onChange:n=>e({department:n.target.value})})}),u.jsx(j,{label:"Editors",children:u.jsx("input",{style:A,value:t.editors,onChange:n=>e({editors:n.target.value})})}),u.jsx(j,{label:"Contact Email",children:u.jsx("input",{style:A,type:"email",value:t.contactEmail,onChange:n=>e({contactEmail:n.target.value})})}),u.jsx(j,{label:"Website URL",children:u.jsx("input",{style:A,value:t.websiteUrl,onChange:n=>e({websiteUrl:n.target.value}),placeholder:"https://"})}),u.jsx(j,{label:"Subscribe URL",children:u.jsx("input",{style:A,value:t.subscribeUrl,onChange:n=>e({subscribeUrl:n.target.value}),placeholder:"https://"})}),u.jsx(j,{label:"Unsubscribe URL",children:u.jsx("input",{style:A,value:t.unsubscribeUrl,onChange:n=>e({unsubscribeUrl:n.target.value}),placeholder:"https://"})}),u.jsx(j,{label:"Copyright Year",children:u.jsx("input",{style:A,value:t.copyrightYear,onChange:n=>e({copyrightYear:n.target.value})})}),u.jsx(j,{label:"Disclaimer",children:u.jsx("textarea",{style:te,value:t.disclaimer,onChange:n=>e({disclaimer:n.target.value})})}),u.jsx(j,{label:"Next Issue Date",children:u.jsx("input",{style:A,value:t.nextIssueDate,onChange:n=>e({nextIssueDate:n.target.value})})}),u.jsx(j,{label:"Next Issue Teaser",children:u.jsx("input",{style:A,value:t.nextIssueTeaser,onChange:n=>e({nextIssueTeaser:n.target.value})})})]})}function m2({block:t,upd:e}){const n=b.useRef(null);return u.jsxs(u.Fragment,{children:[u.jsx(j,{label:"Heading",children:u.jsx("input",{style:A,value:t.heading,onChange:r=>e({heading:r.target.value})})}),u.jsx(j,{label:"Emoji Decoration",children:u.jsx("input",{style:A,value:t.emojiDecor,onChange:r=>e({emojiDecor:r.target.value}),placeholder:"  "})}),u.jsx(j,{label:"Content",children:u.jsx("textarea",{style:{...te,minHeight:120},value:t.content,onChange:r=>e({content:r.target.value})})}),u.jsx(j,{label:"Attribution",children:u.jsx("input",{style:A,value:t.attribution,onChange:r=>e({attribution:r.target.value})})}),u.jsx(j,{label:"Source URL (optional)",children:u.jsx("input",{style:A,value:t.sourceUrl||"",onChange:r=>e({sourceUrl:r.target.value}),placeholder:"https://"})}),u.jsx(j,{label:"Image URL (optional)",children:u.jsx("input",{style:A,value:t.imageUrl||"",onChange:r=>e({imageUrl:r.target.value}),placeholder:"https://"})}),u.jsxs(j,{label:"Upload Image",children:[u.jsx("button",{onClick:()=>{var r;return(r=n.current)==null?void 0:r.click()},style:{...A,cursor:"pointer",textAlign:"center",color:"var(--color-muted)"},children:t.imageDataUrl?" Uploaded  click to replace":"Click to upload image"}),u.jsx("input",{ref:n,type:"file",accept:"image/*",style:{display:"none"},onChange:r=>{var s;const i=(s=r.target.files)==null?void 0:s[0];if(!i)return;const o=new FileReader;o.onload=l=>{var a;return e({imageDataUrl:(a=l.target)==null?void 0:a.result})},o.readAsDataURL(i)}}),(t.imageDataUrl||t.imageUrl)&&u.jsx("div",{style:{marginTop:8},children:u.jsx("img",{src:t.imageDataUrl||t.imageUrl,alt:"Preview",style:{maxHeight:100,maxWidth:"100%",borderRadius:8}})})]}),(t.imageDataUrl||t.imageUrl)&&u.jsxs(u.Fragment,{children:[u.jsxs(j,{label:"Image Height",children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[u.jsx("input",{type:"range",min:80,max:600,step:20,value:t.imageHeight||300,onChange:r=>e({imageHeight:Number(r.target.value)}),style:{flex:1,accentColor:"var(--color-accent)"}}),u.jsx("span",{style:{fontFamily:"var(--font-mono)",fontSize:11,color:"var(--color-muted)",minWidth:44},children:t.imageHeight?`${t.imageHeight}px`:"Auto"})]}),u.jsx("button",{onClick:()=>e({imageHeight:void 0}),style:{...A,marginTop:4,cursor:"pointer",textAlign:"center",fontSize:11,color:"var(--color-muted)"},children:"Reset to Auto (show full image)"})]}),u.jsx(j,{label:"Image Fit",children:u.jsxs("select",{style:A,value:t.imageFit||"contain",onChange:r=>e({imageFit:r.target.value}),children:[u.jsx("option",{value:"contain",children:"Fit  show entire image"}),u.jsx("option",{value:"cover",children:"Fill  crop to fit height"}),u.jsx("option",{value:"fill",children:"Stretch  fill exactly"})]})})]})]})}function g2({block:t,upd:e}){const n=b.useRef(null);return u.jsxs(u.Fragment,{children:[u.jsx(j,{label:"Year",children:u.jsx("input",{style:A,value:t.year,onChange:r=>e({year:r.target.value})})}),u.jsx(j,{label:"Title",children:u.jsx("input",{style:A,value:t.title,onChange:r=>e({title:r.target.value})})}),u.jsx(j,{label:"Content",children:u.jsx("textarea",{style:{...te,minHeight:140},value:t.content,onChange:r=>e({content:r.target.value})})}),u.jsx(j,{label:"Significance",children:u.jsx("textarea",{style:te,value:t.significance,onChange:r=>e({significance:r.target.value})})}),u.jsx(j,{label:"Source URL",children:u.jsx("input",{style:A,value:t.sourceUrl||"",onChange:r=>e({sourceUrl:r.target.value}),placeholder:"https://doi.org/"})}),u.jsx(j,{label:"Source Label",children:u.jsx("input",{style:A,value:t.sourceLabel||"",onChange:r=>e({sourceLabel:r.target.value}),placeholder:"Author, Year  Journal"})}),u.jsx(j,{label:"Image URL (optional)",children:u.jsx("input",{style:A,value:t.imageUrl||"",onChange:r=>e({imageUrl:r.target.value}),placeholder:"https://"})}),u.jsxs(j,{label:"Upload Image",children:[u.jsx("button",{onClick:()=>{var r;return(r=n.current)==null?void 0:r.click()},style:{...A,cursor:"pointer",textAlign:"center",color:"var(--color-muted)"},children:t.imageDataUrl?" Uploaded  click to replace":"Click to upload image"}),u.jsx("input",{ref:n,type:"file",accept:"image/*",style:{display:"none"},onChange:r=>{var s;const i=(s=r.target.files)==null?void 0:s[0];if(!i)return;const o=new FileReader;o.onload=l=>{var a;return e({imageDataUrl:(a=l.target)==null?void 0:a.result})},o.readAsDataURL(i)}}),(t.imageDataUrl||t.imageUrl)&&u.jsx("div",{style:{marginTop:8},children:u.jsx("img",{src:t.imageDataUrl||t.imageUrl,alt:"Preview",style:{maxHeight:100,maxWidth:"100%",borderRadius:8}})})]})]})}function y2({block:t,upd:e}){const n=t.links||[],r=t.items||[],[i,o]=b.useState((t.rssUrls||[]).join(`
`));return u.jsxs(u.Fragment,{children:[u.jsx(j,{label:"Source",children:u.jsxs("select",{style:A,value:t.sourceMode||"manual",onChange:s=>e({sourceMode:s.target.value}),children:[u.jsx("option",{value:"manual",children:"Manual"}),u.jsx("option",{value:"rss",children:"RSS feeds"})]})}),t.sourceMode==="rss"&&u.jsxs("details",{style:{marginTop:6},children:[u.jsx("summary",{style:{cursor:"pointer",fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",textTransform:"uppercase",letterSpacing:"0.12em"},children:"RSS settings"}),u.jsxs("div",{style:{marginTop:10},children:[u.jsx(j,{label:"Quick add from presets",hint:"Select a preset to append it to your RSS list. You can still edit/remove URLs below.",children:u.jsxs("select",{style:A,defaultValue:"",onChange:s=>{const l=s.target.value;if(!l)return;const a=La.find(d=>d.id===l);if(!a)return;const c=(t.rssUrls||[]).map(d=>d.trim()).filter(Boolean);if(!c.includes(a.url)){const d=[...c,a.url];o(d.join(`
`)),e({rssUrls:d})}s.currentTarget.value=""},children:[u.jsx("option",{value:"",children:" Choose a feed "}),La.map(s=>u.jsx("option",{value:s.id,children:s.label},s.id))]})}),u.jsx(j,{label:"RSS URLs (one per line)",children:u.jsx("textarea",{style:{...te,minHeight:110},value:i,onChange:s=>o(s.target.value),onBlur:()=>{const s=i.split(/\r?\n/).map(l=>l.trim()).filter(Boolean);e({rssUrls:s})},placeholder:"https:///rss.xml\\nhttps:///feed"})}),u.jsx(j,{label:"Max RSS items",children:u.jsx("input",{style:A,type:"number",min:5,max:100,value:t.rssMaxItems??20,onChange:s=>e({rssMaxItems:Number(s.target.value)||20})})}),u.jsx("div",{style:{fontFamily:"var(--font-body)",fontSize:12,color:"var(--color-muted)"},children:"The ticker will aggregate titles across feeds and render them as clickable links."})]})]}),u.jsx(j,{label:"Speed",children:u.jsxs("select",{style:A,value:t.speed,onChange:s=>e({speed:s.target.value}),children:[u.jsx("option",{value:"slow",children:"Slow"}),u.jsx("option",{value:"medium",children:"Medium"}),u.jsx("option",{value:"fast",children:"Fast"})]})}),u.jsx(j,{label:"Background Color",children:u.jsx("input",{type:"color",value:t.backgroundColor||"#003087",onChange:s=>e({backgroundColor:s.target.value})})}),u.jsx(j,{label:"Text Color",children:u.jsx("input",{type:"color",value:t.textColor||"#ffffff",onChange:s=>e({textColor:s.target.value})})}),t.sourceMode!=="rss"&&u.jsxs(u.Fragment,{children:[u.jsx(j,{label:"Mode",children:u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,fontFamily:"var(--font-body)",fontSize:13,cursor:"pointer",marginBottom:8},children:[u.jsx("input",{type:"checkbox",checked:!!t.useLinks,onChange:s=>e({useLinks:s.target.checked}),style:{accentColor:"var(--color-accent)"}}),"Use clickable linked headlines"]})}),t.useLinks?u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[u.jsxs("span",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",textTransform:"uppercase",letterSpacing:"0.12em"},children:[n.length," Linked Items"]}),u.jsxs("button",{onClick:()=>e({links:[...n,{text:"New headline",url:""}]}),style:{display:"flex",alignItems:"center",gap:4,padding:"4px 10px",background:"var(--color-accent)",border:"none",borderRadius:6,color:"#fff",fontSize:11,fontFamily:"var(--font-body)",cursor:"pointer"},children:[u.jsx(Lr,{size:10})," Add"]})]}),n.map((s,l)=>u.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:8,padding:10,marginBottom:8},children:[u.jsx(j,{label:"Headline",children:u.jsx("input",{style:A,value:s.text,onChange:a=>{const c=[...n];c[l]={...s,text:a.target.value},e({links:c})}})}),u.jsxs("details",{children:[u.jsx("summary",{style:{cursor:"pointer",fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",textTransform:"uppercase",letterSpacing:"0.12em"},children:"URL"}),u.jsx("div",{style:{marginTop:10},children:u.jsx(j,{label:"URL",children:u.jsx("input",{style:A,value:s.url,onChange:a=>{const c=[...n];c[l]={...s,url:a.target.value},e({links:c})},placeholder:"https://"})})})]}),u.jsxs("button",{onClick:()=>e({links:n.filter((a,c)=>c!==l)}),style:{background:"none",border:"none",color:"#C0392B",fontSize:12,cursor:"pointer",fontFamily:"var(--font-body)",padding:0,display:"flex",alignItems:"center",gap:4},children:[u.jsx(bo,{size:11})," Remove"]})]},l))]}):u.jsx(j,{label:`Plain Text Items (${r.length})`,hint:"One headline per line",children:u.jsx("textarea",{style:{...te,minHeight:120},value:r.join(`
`),onChange:s=>e({items:s.target.value.split(`
`).filter(l=>l.trim())})})})]})]})}function x2({block:t,upd:e}){const n=b.useRef({}),r=t.items||[];return u.jsxs(u.Fragment,{children:[u.jsx(j,{label:"Heading",children:u.jsx("input",{style:A,value:t.heading,onChange:i=>e({heading:i.target.value})})}),u.jsx(j,{label:"Subheading",children:u.jsx("input",{style:A,value:t.subheading,onChange:i=>e({subheading:i.target.value})})}),u.jsx(j,{label:"Institution Label",children:u.jsx("input",{style:A,value:t.institutionLabel||"",onChange:i=>e({institutionLabel:i.target.value}),placeholder:"e.g. Northwell Health, Mayo Clinic"})}),u.jsx(j,{label:"Max Items (16)",children:u.jsx("input",{style:A,type:"number",min:1,max:6,value:t.maxItems||6,onChange:i=>e({maxItems:Number(i.target.value)})})}),u.jsxs("div",{style:{marginTop:16},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10},children:[u.jsxs("span",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",textTransform:"uppercase",letterSpacing:"0.12em"},children:[r.length," Items"]}),u.jsxs("button",{onClick:()=>e({items:[...r,{id:String(Date.now()),title:"New Item",url:"",pubDate:new Date().toISOString(),summary:"",imageUrl:"",category:"Innovation"}]}),style:{display:"flex",alignItems:"center",gap:4,padding:"5px 10px",background:"var(--color-accent)",border:"none",borderRadius:6,color:"#fff",fontSize:12,fontFamily:"var(--font-body)",cursor:"pointer"},children:[u.jsx(Lr,{size:11})," Add Item"]})]}),r.map((i,o)=>{var s;return u.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:8,padding:12,marginBottom:12},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[u.jsxs("span",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",textTransform:"uppercase"},children:["Item ",o+1]}),u.jsxs("button",{onClick:()=>e({items:r.filter((l,a)=>a!==o)}),style:{background:"#FEF0EE",border:"1px solid #f5c6c0",borderRadius:5,color:"#7A1E12",cursor:"pointer",padding:"3px 8px",fontSize:11,display:"flex",alignItems:"center",gap:4},children:[u.jsx(bo,{size:11})," Delete"]})]}),u.jsx(j,{label:"Category",children:u.jsx("input",{style:A,value:i.category,onChange:l=>{const a=[...r];a[o]={...i,category:l.target.value},e({items:a})}})}),u.jsx(j,{label:"Title",children:u.jsx("input",{style:A,value:i.title,onChange:l=>{const a=[...r];a[o]={...i,title:l.target.value},e({items:a})}})}),u.jsx(j,{label:"URL",children:u.jsx("input",{style:A,value:i.url,onChange:l=>{const a=[...r];a[o]={...i,url:l.target.value},e({items:a})},placeholder:"https://"})}),u.jsx(j,{label:"Summary",children:u.jsx("textarea",{style:{...te,minHeight:60},value:i.summary,onChange:l=>{const a=[...r];a[o]={...i,summary:l.target.value},e({items:a})}})}),u.jsx(j,{label:"Image URL",children:u.jsx("input",{style:A,value:i.imageUrl,onChange:l=>{const a=[...r];a[o]={...i,imageUrl:l.target.value},e({items:a})},placeholder:"https://"})}),u.jsxs(j,{label:"Upload Image",children:[u.jsx("button",{onClick:()=>{var l;return(l=n.current[o])==null?void 0:l.click()},style:{...A,cursor:"pointer",textAlign:"center",color:"var(--color-muted)"},children:"Upload image"}),u.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},ref:l=>{n.current[o]=l},onChange:l=>{var d;const a=(d=l.target.files)==null?void 0:d[0];if(!a)return;const c=new FileReader;c.onload=f=>{var h;const p=[...r];p[o]={...i,imageUrl:(h=f.target)==null?void 0:h.result},e({items:p})},c.readAsDataURL(a)}})]}),u.jsx(j,{label:"Pub Date",children:u.jsx("input",{style:A,type:"date",value:((s=i.pubDate)==null?void 0:s.split("T")[0])||"",onChange:l=>{const a=[...r];a[o]={...i,pubDate:l.target.value},e({items:a})}})})]},i.id)})]})]})}function v2({block:t,upd:e}){const[n,r]=Z.useState(!1),[i,o]=Z.useState(""),s="https://api.allorigins.win/get?url=",l=async()=>{var f,p,h,m,g,S,y,x;r(!0),o("");const a=[];for(const v of t.feedUrls||[])try{const k=await(await fetch(s+encodeURIComponent(v))).json(),T=k&&typeof k.contents=="string"?k.contents:"",E=new DOMParser().parseFromString(T,"text/xml"),O=((p=(f=E.querySelector("channel > title"))==null?void 0:f.textContent)==null?void 0:p.trim())||v;for(const N of Array.from(E.querySelectorAll("item")).slice(0,10))a.push({title:((m=(h=N.querySelector("title"))==null?void 0:h.textContent)==null?void 0:m.trim())||"",url:((S=(g=N.querySelector("link"))==null?void 0:g.textContent)==null?void 0:S.trim())||"",source:O,pubDate:((x=(y=N.querySelector("pubDate"))==null?void 0:y.textContent)==null?void 0:x.trim())||""})}catch{o(`Failed to fetch: ${v}`)}const c=new Set,d=a.filter(v=>!v.url||c.has(v.url)?!1:(c.add(v.url),!0));d.sort((v,w)=>(Date.parse(w.pubDate)||0)-(Date.parse(v.pubDate)||0)),e({items:d.slice(0,t.maxItems||15),lastFetched:new Date().toISOString()}),r(!1)};return u.jsxs(u.Fragment,{children:[u.jsx(j,{label:"Heading",children:u.jsx("input",{style:A,value:t.heading,onChange:a=>e({heading:a.target.value})})}),u.jsx(j,{label:"Max Items (320)",children:u.jsx("input",{style:A,type:"number",min:3,max:20,value:t.maxItems||8,onChange:a=>e({maxItems:Number(a.target.value)})})}),u.jsx(j,{label:"Scrolling",hint:"If off, the RSS box will expand to show all items (recommended for export).",children:u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,fontFamily:"var(--font-body)",fontSize:13,cursor:"pointer"},children:[u.jsx("input",{type:"checkbox",checked:!!t.enableScroll,onChange:a=>e({enableScroll:a.target.checked}),style:{accentColor:"var(--color-accent)"}}),"Enable internal scroll (fixed height)"]})}),u.jsx(j,{label:"Quick add from presets",hint:"Append a known-working feed URL.",children:u.jsxs("select",{style:A,defaultValue:"",onChange:a=>{const c=a.target.value;if(!c)return;const d=La.find(p=>p.id===c);if(!d)return;const f=(t.feedUrls||[]).map(p=>p.trim()).filter(Boolean);f.includes(d.url)||e({feedUrls:[...f,d.url]}),a.currentTarget.value=""},children:[u.jsx("option",{value:"",children:" Choose a feed "}),La.map(a=>u.jsx("option",{value:a.id,children:a.label},a.id))]})}),u.jsx(j,{label:`RSS Feed URLs (${(t.feedUrls||[]).length})`,hint:"One URL per line",children:u.jsx("textarea",{style:{...te,minHeight:120,fontFamily:"var(--font-mono)",fontSize:11},value:(t.feedUrls||[]).join(`
`),onChange:a=>e({feedUrls:a.target.value.split(`
`).map(c=>c.trim()).filter(Boolean)})})}),u.jsx("button",{onClick:l,disabled:n,style:{width:"100%",padding:"9px 0",background:n?"var(--color-muted)":"var(--color-accent)",border:"none",borderRadius:8,color:"#fff",fontSize:13,fontFamily:"var(--font-body)",cursor:n?"not-allowed":"pointer",marginBottom:8},children:n?" Fetching":` Refresh Feed (${(t.items||[]).length} items loaded)`}),i&&u.jsx("div",{style:{fontFamily:"var(--font-body)",fontSize:11,color:"#C0392B",marginBottom:8},children:i}),t.lastFetched&&u.jsxs("div",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",textAlign:"center"},children:["Last fetched: ",new Date(t.lastFetched).toLocaleString()]})]})}function S2({block:t,upd:e}){const n=t.templates||[];return u.jsxs(u.Fragment,{children:[u.jsx(j,{label:"Heading",children:u.jsx("input",{style:A,value:t.heading,onChange:r=>e({heading:r.target.value})})}),u.jsx(j,{label:"Description",children:u.jsx("textarea",{style:{...te,minHeight:60},value:t.description,onChange:r=>e({description:r.target.value})})}),u.jsxs("div",{style:{marginTop:12},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10},children:[u.jsxs("span",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",textTransform:"uppercase",letterSpacing:"0.12em"},children:[n.length," Templates"]}),u.jsxs("button",{onClick:()=>e({templates:[...n,{id:String(Date.now()),category:"General",title:"New Template",prompt:"Act as a [ROLE]. [TASK]. [CONSTRAINTS].",useCase:"Use case"}]}),style:{display:"flex",alignItems:"center",gap:4,padding:"5px 10px",background:"var(--color-accent)",border:"none",borderRadius:6,color:"#fff",fontSize:12,fontFamily:"var(--font-body)",cursor:"pointer"},children:[u.jsx(Lr,{size:11})," Add Template"]})]}),n.map((r,i)=>u.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:8,padding:12,marginBottom:12,background:"var(--color-background)"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[u.jsxs("span",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",textTransform:"uppercase"},children:["Template ",i+1]}),u.jsxs("button",{onClick:()=>e({templates:n.filter((o,s)=>s!==i)}),style:{background:"#FEF0EE",border:"1px solid #f5c6c0",borderRadius:5,color:"#7A1E12",cursor:"pointer",padding:"3px 8px",fontSize:11,display:"flex",alignItems:"center",gap:4},children:[u.jsx(bo,{size:11})," Delete"]})]}),u.jsx(j,{label:"Category",children:u.jsx("input",{style:A,value:r.category,onChange:o=>{const s=[...n];s[i]={...r,category:o.target.value},e({templates:s})}})}),u.jsx(j,{label:"Title",children:u.jsx("input",{style:A,value:r.title,onChange:o=>{const s=[...n];s[i]={...r,title:o.target.value},e({templates:s})}})}),u.jsx(j,{label:"Use Case",children:u.jsx("input",{style:A,value:r.useCase,onChange:o=>{const s=[...n];s[i]={...r,useCase:o.target.value},e({templates:s})}})}),u.jsx(j,{label:"Prompt",hint:"Use [BRACKETS] for fill-in variables",children:u.jsx("textarea",{style:{...te,minHeight:180,fontFamily:"var(--font-mono)",fontSize:11},value:r.prompt,onChange:o=>{const s=[...n];s[i]={...r,prompt:o.target.value},e({templates:s})}})})]},r.id))]})]})}const b2=[{id:"blocks",icon:u.jsx(fC,{size:16}),label:"Blocks"},{id:"settings",icon:u.jsx(jv,{size:16}),label:"Settings"},{id:"rss",icon:u.jsx(xC,{size:16}),label:"RSS"},{id:"theme",icon:u.jsx(mC,{size:16}),label:"Theme"},{id:"export",icon:u.jsx(Mv,{size:16}),label:"Versions"}],w2=[{label:"Structure",types:["header","ticker","section-divider","spacer","footer"]},{label:"Content",types:["article-grid","spotlight","ethics-split","quick-hits","text","image","html-embed"]},{label:"Clinical AI Skills",types:["prompt-masterclass","sbar-prompt","prompt-template","safety-reminders","clinical-prompt-templates","term-of-month","ai-case-file"]},{label:"Safety & Institutional",types:["ai-safety","institutional-spotlight","rss-sidebar","humor"]}];function k2(t){const{newsletter:e,editorState:n,isMobile:r,isTablet:i,drawerOpen:o,onCloseDrawer:s,rss:l,versions:a,onSetPanel:c}=t,{activePanel:d,selectedBlockId:f}=n,p=f?e.blocks[f]:null,h=r||i,m=u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{display:"flex",borderBottom:"1px solid var(--color-border)",background:"var(--color-bg)",flexShrink:0},children:[b2.map(g=>u.jsxs("button",{onClick:()=>c(g.id),title:g.label,style:{flex:1,padding:"10px 4px",display:"flex",flexDirection:"column",alignItems:"center",gap:3,background:"none",border:"none",cursor:"pointer",color:d===g.id?"var(--color-accent)":"var(--color-muted)",borderBottom:d===g.id?"2px solid var(--color-accent)":"2px solid transparent",fontSize:10,fontFamily:"var(--font-body)",fontWeight:600,letterSpacing:"0.06em",textTransform:"uppercase",transition:"all 0.15s"},children:[g.icon,u.jsx("span",{children:g.label})]},g.id)),h&&u.jsx("button",{onClick:s,style:{padding:"10px 12px",background:"none",border:"none",cursor:"pointer",color:"var(--color-muted)",display:"flex",alignItems:"center"},children:u.jsx(Jc,{size:16})})]}),u.jsxs("div",{style:{flex:1,overflowY:"auto"},children:[d==="blocks"&&(p?u.jsx(QC,{block:p,newsletter:e,onClose:()=>{t.onSelectBlock(null),h&&s()},onUpdateBlock:t.onUpdateBlock,onAddArticle:t.onAddArticle,onUpdateArticle:t.onUpdateArticle,onDeleteArticle:t.onDeleteArticle,onAddQuickHit:t.onAddQuickHit,onUpdateQuickHit:t.onUpdateQuickHit,onDeleteQuickHit:t.onDeleteQuickHit}):u.jsx(C2,{onAddBlock:g=>{t.onAddBlock(g),h&&s()}})),d==="settings"&&u.jsx(E2,{newsletter:e,onUpdateMeta:()=>{}}),d==="rss"&&u.jsx(T2,{rss:l,onAddToNewsletter:g=>{const S=e.blockOrder.find(y=>{var x;return((x=e.blocks[y])==null?void 0:x.type)==="article-grid"});S&&t.onAddArticle(S)}}),d==="theme"&&u.jsx(M2,{current:e.theme,onUpdateTheme:t.onUpdateTheme}),d==="export"&&u.jsx(j2,{versions:a,onRestore:t.onRestoreVersion,onDelete:t.onDeleteVersion})]})]});return h?r?o?u.jsx("div",{className:"nap-bottom-sheet",children:m}):null:u.jsx("div",{className:`nap-sidebar-drawer ${o?"open":""}`,style:{display:"flex",flexDirection:"column",background:"var(--color-surface)",borderRight:"1px solid var(--color-border)",overflow:"hidden",width:320},children:m}):u.jsx("div",{style:{width:320,flexShrink:0,display:"flex",flexDirection:"column",background:"var(--color-surface)",borderRight:"1px solid var(--color-border)",overflow:"hidden"},children:m})}function C2({onAddBlock:t}){return u.jsxs("div",{style:{padding:16},children:[u.jsxs("div",{style:{marginBottom:12},children:[u.jsx("h3",{style:{fontFamily:"var(--font-display)",fontSize:18,color:"var(--color-text)",margin:"0 0 4px"},children:"Add Block"}),u.jsx("p",{style:{fontFamily:"var(--font-body)",fontSize:12,color:"var(--color-muted)",margin:0},children:"Click to add at the end. Select a block in the canvas to insert after it."})]}),w2.map(e=>u.jsxs("div",{style:{marginBottom:20},children:[u.jsx("div",{style:{fontFamily:"var(--font-mono)",fontSize:10,letterSpacing:"0.18em",textTransform:"uppercase",color:"var(--color-muted)",marginBottom:8,paddingBottom:6,borderBottom:"1px solid var(--color-border)"},children:e.label}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4},children:e.types.map(n=>u.jsxs("button",{onClick:()=>t(n),style:{display:"flex",alignItems:"center",gap:10,padding:"9px 12px",background:"none",border:"1px solid var(--color-border)",borderRadius:8,cursor:"pointer",textAlign:"left",fontFamily:"var(--font-body)",fontSize:13,color:"var(--color-text)",transition:"all 0.12s"},onMouseEnter:r=>{r.currentTarget.style.background="var(--color-bg)",r.currentTarget.style.borderColor="var(--color-accent)"},onMouseLeave:r=>{r.currentTarget.style.background="none",r.currentTarget.style.borderColor="var(--color-border)"},children:[u.jsx("span",{style:{fontSize:16},children:Cf[n].split("  ")[0]}),u.jsx("span",{children:Cf[n].split("  ").slice(1).join("").trim()}),u.jsx(Lr,{size:12,style:{marginLeft:"auto",color:"var(--color-muted)",flexShrink:0}})]},n))})]},e.label))]})}function E2({newsletter:t,onUpdateMeta:e}){return u.jsxs("div",{style:{padding:16},children:[u.jsx("h3",{style:{fontFamily:"var(--font-display)",fontSize:18,color:"var(--color-text)",margin:"0 0 16px"},children:"Issue Settings"}),u.jsx(j,{label:"Issue Title",children:u.jsx("input",{style:A,defaultValue:t.meta.title,onBlur:n=>e({title:n.target.value})})}),u.jsx(j,{label:"Issue Number",children:u.jsx("input",{style:A,defaultValue:t.meta.issueNumber,onBlur:n=>e({issueNumber:n.target.value})})})]})}function T2({rss:t,onAddToNewsletter:e}){const[n,r]=b.useState(""),[i,o]=b.useState("");return u.jsxs("div",{style:{padding:16},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12},children:[u.jsx("h3",{style:{fontFamily:"var(--font-display)",fontSize:18,color:"var(--color-text)",margin:0},children:"RSS Feeds"}),u.jsxs("button",{onClick:t.refresh,disabled:t.loading,style:{display:"flex",alignItems:"center",gap:6,padding:"6px 12px",background:"var(--color-accent)",border:"none",borderRadius:8,color:"#fff",fontSize:12,fontFamily:"var(--font-body)",cursor:"pointer",opacity:t.loading?.6:1},children:[u.jsx(gC,{size:12,style:{animation:t.loading?"spin 1s linear infinite":"none"}}),t.loading?"Refreshing":"Refresh"]})]}),u.jsx("div",{style:{marginBottom:16},children:t.feeds.map(s=>u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"6px 0",borderBottom:"1px solid var(--color-border)"},children:[u.jsx("input",{type:"checkbox",checked:s.enabled,onChange:()=>t.toggleFeed(s.url),style:{accentColor:"var(--color-accent)",flexShrink:0}}),u.jsx("span",{style:{flex:1,fontFamily:"var(--font-body)",fontSize:12,color:"var(--color-text)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:s.url,children:s.label}),u.jsx("button",{onClick:()=>t.removeFeed(s.url),style:{background:"none",border:"none",cursor:"pointer",color:"var(--color-muted)",padding:2,display:"flex",alignItems:"center"},children:u.jsx(Jc,{size:12})})]},s.url))}),u.jsxs("div",{style:{background:"var(--color-bg)",borderRadius:8,padding:12,marginBottom:16},children:[u.jsx("div",{style:{fontFamily:"var(--font-mono)",fontSize:10,letterSpacing:"0.14em",textTransform:"uppercase",color:"var(--color-muted)",marginBottom:8},children:"Add Feed"}),u.jsx("input",{placeholder:"RSS URL",value:n,onChange:s=>r(s.target.value),style:{...A,marginBottom:6}}),u.jsx("input",{placeholder:"Label",value:i,onChange:s=>o(s.target.value),style:{...A,marginBottom:8}}),u.jsx("button",{onClick:()=>{n&&(t.addFeed(n,i||n),r(""),o(""))},style:{width:"100%",padding:"7px 0",background:"var(--color-primary)",border:"none",borderRadius:8,color:"#fff",fontSize:12,fontFamily:"var(--font-body)",cursor:"pointer"},children:"+ Add Feed"})]}),t.items.length>0&&u.jsxs(u.Fragment,{children:[u.jsx("input",{placeholder:"Filter articles",value:t.filter,onChange:s=>t.setFilter(s.target.value),style:{...A,marginBottom:12}}),t.errors.map((s,l)=>u.jsxs("div",{style:{background:"#FEF0EE",border:"1px solid #f5c6c0",borderRadius:8,padding:"8px 12px",marginBottom:8,fontFamily:"var(--font-body)",fontSize:12,color:"#7A1E12"},children:[" ",s]},l)),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:t.items.slice(0,30).map((s,l)=>u.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:8,padding:10,background:"var(--color-surface)"},children:[u.jsx("div",{style:{fontFamily:"var(--font-body)",fontSize:12,fontWeight:600,color:"var(--color-text)",marginBottom:4,lineHeight:1.35},children:s.title}),u.jsxs("div",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",marginBottom:6},children:[s.source,"  ",s.pubDate?new Date(s.pubDate).toLocaleDateString():""]}),u.jsxs("div",{style:{display:"flex",gap:6},children:[u.jsx("button",{onClick:()=>e(s),style:{flex:1,padding:"5px 0",background:"var(--color-accent)",border:"none",borderRadius:6,color:"#fff",fontSize:11,fontFamily:"var(--font-body)",cursor:"pointer"},children:"+ Add to Issue"}),s.link&&u.jsx("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",padding:"5px 8px",border:"1px solid var(--color-border)",borderRadius:6,color:"var(--color-muted)",fontSize:11},children:u.jsx(aC,{size:11})})]})]},l))})]}),t.items.length===0&&!t.loading&&u.jsx("div",{style:{textAlign:"center",padding:"32px 16px",color:"var(--color-muted)",fontFamily:"var(--font-body)",fontSize:13},children:"Press Refresh to load articles"})]})}function M2({current:t,onUpdateTheme:e}){return u.jsxs("div",{style:{padding:16},children:[u.jsx("h3",{style:{fontFamily:"var(--font-display)",fontSize:18,color:"var(--color-text)",margin:"0 0 16px"},children:"Theme"}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:Tv.map(n=>u.jsxs("button",{onClick:()=>e(n),style:{display:"flex",alignItems:"center",gap:12,padding:12,background:t.id===n.id?"var(--color-bg)":"var(--color-surface)",border:`2px solid ${t.id===n.id?"var(--color-accent)":"var(--color-border)"}`,borderRadius:10,cursor:"pointer",textAlign:"left"},children:[u.jsx("div",{style:{display:"flex",gap:3,flexShrink:0},children:[n.primary,n.accent,n.background,n.surface].map((r,i)=>u.jsx("div",{style:{width:14,height:14,background:r,borderRadius:3,border:"1px solid rgba(0,0,0,0.1)"}},i))}),u.jsxs("div",{children:[u.jsx("div",{style:{fontFamily:"var(--font-body)",fontSize:13,fontWeight:600,color:"var(--color-text)",marginBottom:2},children:n.name}),u.jsxs("div",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",letterSpacing:"0.08em"},children:[n.primary,"  ",n.accent]})]}),t.id===n.id&&u.jsx("div",{style:{marginLeft:"auto",width:8,height:8,background:"var(--color-accent)",borderRadius:"50%"}})]},n.id))}),u.jsxs("div",{style:{marginTop:20},children:[u.jsx("div",{style:{fontFamily:"var(--font-mono)",fontSize:10,letterSpacing:"0.14em",textTransform:"uppercase",color:"var(--color-muted)",marginBottom:12},children:"Customize"}),[["Primary","primary"],["Accent","accent"],["Background","background"],["Surface","surface"]].map(([n,r])=>u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:10},children:[u.jsx("input",{type:"color",value:String(t[r]),onChange:i=>e({...t,[r]:i.target.value}),style:{width:32,height:32,borderRadius:6,border:"1px solid var(--color-border)",padding:2,cursor:"pointer"}}),u.jsx("span",{style:{flex:1,fontFamily:"var(--font-body)",fontSize:13,color:"var(--color-text)"},children:n}),u.jsx("span",{style:{fontFamily:"var(--font-mono)",fontSize:11,color:"var(--color-muted)"},children:String(t[r])})]},String(r)))]})]})}function j2({versions:t,onRestore:e,onDelete:n}){return u.jsxs("div",{style:{padding:16},children:[u.jsx("h3",{style:{fontFamily:"var(--font-display)",fontSize:18,color:"var(--color-text)",margin:"0 0 4px"},children:"Saved Versions"}),u.jsx("p",{style:{fontFamily:"var(--font-body)",fontSize:12,color:"var(--color-muted)",margin:"0 0 16px"},children:"Up to 20 versions stored in browser."}),t.length===0?u.jsx("div",{style:{textAlign:"center",padding:"32px 16px",color:"var(--color-muted)",fontFamily:"var(--font-body)",fontSize:13},children:"No saved versions yet. Use Save Version in the toolbar."}):u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:t.map(r=>u.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:8,padding:12},children:[u.jsx("div",{style:{fontFamily:"var(--font-body)",fontSize:13,fontWeight:600,color:"var(--color-text)",marginBottom:4},children:r.label}),u.jsx("div",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",marginBottom:10},children:new Date(r.createdAt).toLocaleString()}),u.jsxs("div",{style:{display:"flex",gap:6},children:[u.jsxs("button",{onClick:()=>e(r),style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:6,padding:"6px 0",background:"var(--color-primary)",border:"none",borderRadius:6,color:"#fff",fontSize:12,fontFamily:"var(--font-body)",cursor:"pointer"},children:[u.jsx(yC,{size:11})," Restore"]}),u.jsx("button",{onClick:()=>{confirm("Delete this version?")&&n(r.id)},style:{padding:"6px 10px",background:"none",border:"1px solid var(--color-border)",borderRadius:6,color:"var(--color-muted)",cursor:"pointer",display:"flex",alignItems:"center"},children:u.jsx(bo,{size:12})})]})]},r.id))})]})}function j({label:t,children:e,hint:n}){return u.jsxs("div",{style:{marginBottom:14},children:[u.jsx("label",{style:{display:"block",fontFamily:"var(--font-mono)",fontSize:10,letterSpacing:"0.14em",textTransform:"uppercase",color:"var(--color-muted)",marginBottom:6,fontWeight:500},children:t}),e,n&&u.jsx("div",{style:{fontFamily:"var(--font-body)",fontSize:11,color:"var(--color-muted)",marginTop:4},children:n})]})}const A={width:"100%",padding:"8px 10px",background:"var(--color-bg)",border:"1px solid var(--color-border)",borderRadius:8,fontFamily:"var(--font-body)",fontSize:13,color:"var(--color-text)",outline:"none",boxSizing:"border-box"},te={...A,minHeight:80,resize:"vertical",fontFamily:"var(--font-body)",lineHeight:1.5};function A2(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return b.useMemo(()=>r=>{e.forEach(i=>i(r))},e)}const Gc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function wo(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function nh(t){return"nodeType"in t}function Ct(t){var e,n;return t?wo(t)?t:nh(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function rh(t){const{Document:e}=Ct(t);return t instanceof e}function sl(t){return wo(t)?!1:t instanceof Ct(t).HTMLElement}function Dv(t){return t instanceof Ct(t).SVGElement}function ko(t){return t?wo(t)?t.document:nh(t)?rh(t)?t:sl(t)||Dv(t)?t.ownerDocument:document:document:document}const Mn=Gc?b.useLayoutEffect:b.useEffect;function ih(t){const e=b.useRef(t);return Mn(()=>{e.current=t}),b.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function D2(){const t=b.useRef(null),e=b.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=b.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Fs(t,e){e===void 0&&(e=[t]);const n=b.useRef(t);return Mn(()=>{n.current!==t&&(n.current=t)},e),n}function ll(t,e){const n=b.useRef();return b.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function $a(t){const e=ih(t),n=b.useRef(null),r=b.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,r]}function Ef(t){const e=b.useRef();return b.useEffect(()=>{e.current=t},[t]),e.current}let Ku={};function al(t,e){return b.useMemo(()=>{if(e)return e;const n=Ku[t]==null?0:Ku[t]+1;return Ku[t]=n,t+"-"+n},[t,e])}function Rv(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((o,s)=>{const l=Object.entries(s);for(const[a,c]of l){const d=o[a];d!=null&&(o[a]=d+t*c)}return o},{...e})}}const to=Rv(1),Fa=Rv(-1);function R2(t){return"clientX"in t&&"clientY"in t}function oh(t){if(!t)return!1;const{KeyboardEvent:e}=Ct(t.target);return e&&t instanceof e}function I2(t){if(!t)return!1;const{TouchEvent:e}=Ct(t.target);return e&&t instanceof e}function Tf(t){if(I2(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return R2(t)?{x:t.clientX,y:t.clientY}:null}const Bs=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Bs.Translate.toString(t),Bs.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),wg="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function O2(t){return t.matches(wg)?t:t.querySelector(wg)}const N2={display:"none"};function z2(t){let{id:e,value:n}=t;return Z.createElement("div",{id:e,style:N2},n)}function P2(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Z.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function L2(){const[t,e]=b.useState("");return{announce:b.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const Iv=b.createContext(null);function $2(t){const e=b.useContext(Iv);b.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function F2(){const[t]=b.useState(()=>new Set),e=b.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[b.useCallback(r=>{let{type:i,event:o}=r;t.forEach(s=>{var l;return(l=s[i])==null?void 0:l.call(s,o)})},[t]),e]}const B2={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},_2={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function H2(t){let{announcements:e=_2,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=B2}=t;const{announce:o,announcement:s}=L2(),l=al("DndLiveRegion"),[a,c]=b.useState(!1);if(b.useEffect(()=>{c(!0)},[]),$2(b.useMemo(()=>({onDragStart(f){let{active:p}=f;o(e.onDragStart({active:p}))},onDragMove(f){let{active:p,over:h}=f;e.onDragMove&&o(e.onDragMove({active:p,over:h}))},onDragOver(f){let{active:p,over:h}=f;o(e.onDragOver({active:p,over:h}))},onDragEnd(f){let{active:p,over:h}=f;o(e.onDragEnd({active:p,over:h}))},onDragCancel(f){let{active:p,over:h}=f;o(e.onDragCancel({active:p,over:h}))}}),[o,e])),!a)return null;const d=Z.createElement(Z.Fragment,null,Z.createElement(z2,{id:r,value:i.draggable}),Z.createElement(P2,{id:l,announcement:s}));return n?Qr.createPortal(d,n):d}var De;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(De||(De={}));function Ba(){}function kg(t,e){return b.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function U2(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return b.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const fn=Object.freeze({x:0,y:0});function V2(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function W2(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function K2(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function q2(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function Cg(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const J2=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=Cg(e,e.left,e.top),o=[];for(const s of r){const{id:l}=s,a=n.get(l);if(a){const c=V2(Cg(a),i);o.push({id:l,data:{droppableContainer:s,value:c}})}}return o.sort(W2)};function G2(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),o=Math.min(e.top+e.height,t.top+t.height),s=i-r,l=o-n;if(r<i&&n<o){const a=e.width*e.height,c=t.width*t.height,d=s*l,f=d/(a+c-d);return Number(f.toFixed(4))}return 0}const Y2=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const o of r){const{id:s}=o,l=n.get(s);if(l){const a=G2(l,e);a>0&&i.push({id:s,data:{droppableContainer:o,value:a}})}}return i.sort(K2)};function Q2(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function Ov(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:fn}function X2(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.reduce((s,l)=>({...s,top:s.top+t*l.y,bottom:s.bottom+t*l.y,left:s.left+t*l.x,right:s.right+t*l.x}),{...n})}}const Z2=X2(1);function eE(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function tE(t,e,n){const r=eE(e);if(!r)return t;const{scaleX:i,scaleY:o,x:s,y:l}=r,a=t.left-s-(1-i)*parseFloat(n),c=t.top-l-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),d=i?t.width/i:t.width,f=o?t.height/o:t.height;return{width:d,height:f,top:c,right:a+d,bottom:c+f,left:a}}const nE={ignoreTransform:!1};function Co(t,e){e===void 0&&(e=nE);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:c,transformOrigin:d}=Ct(t).getComputedStyle(t);c&&(n=tE(n,c,d))}const{top:r,left:i,width:o,height:s,bottom:l,right:a}=n;return{top:r,left:i,width:o,height:s,bottom:l,right:a}}function Eg(t){return Co(t,{ignoreTransform:!0})}function rE(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function iE(t,e){return e===void 0&&(e=Ct(t).getComputedStyle(t)),e.position==="fixed"}function oE(t,e){e===void 0&&(e=Ct(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const o=e[i];return typeof o=="string"?n.test(o):!1})}function sh(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(rh(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!sl(i)||Dv(i)||n.includes(i))return n;const o=Ct(t).getComputedStyle(i);return i!==t&&oE(i,o)&&n.push(i),iE(i,o)?n:r(i.parentNode)}return t?r(t):n}function Nv(t){const[e]=sh(t,1);return e??null}function qu(t){return!Gc||!t?null:wo(t)?t:nh(t)?rh(t)||t===ko(t).scrollingElement?window:sl(t)?t:null:null}function zv(t){return wo(t)?t.scrollX:t.scrollLeft}function Pv(t){return wo(t)?t.scrollY:t.scrollTop}function Mf(t){return{x:zv(t),y:Pv(t)}}var Pe;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Pe||(Pe={}));function Lv(t){return!Gc||!t?!1:t===document.scrollingElement}function $v(t){const e={x:0,y:0},n=Lv(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,o=t.scrollLeft<=e.x,s=t.scrollTop>=r.y,l=t.scrollLeft>=r.x;return{isTop:i,isLeft:o,isBottom:s,isRight:l,maxScroll:r,minScroll:e}}const sE={x:.2,y:.2};function lE(t,e,n,r,i){let{top:o,left:s,right:l,bottom:a}=n;r===void 0&&(r=10),i===void 0&&(i=sE);const{isTop:c,isBottom:d,isLeft:f,isRight:p}=$v(t),h={x:0,y:0},m={x:0,y:0},g={height:e.height*i.y,width:e.width*i.x};return!c&&o<=e.top+g.height?(h.y=Pe.Backward,m.y=r*Math.abs((e.top+g.height-o)/g.height)):!d&&a>=e.bottom-g.height&&(h.y=Pe.Forward,m.y=r*Math.abs((e.bottom-g.height-a)/g.height)),!p&&l>=e.right-g.width?(h.x=Pe.Forward,m.x=r*Math.abs((e.right-g.width-l)/g.width)):!f&&s<=e.left+g.width&&(h.x=Pe.Backward,m.x=r*Math.abs((e.left+g.width-s)/g.width)),{direction:h,speed:m}}function aE(t){if(t===document.scrollingElement){const{innerWidth:o,innerHeight:s}=window;return{top:0,left:0,right:o,bottom:s,width:o,height:s}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function Fv(t){return t.reduce((e,n)=>to(e,Mf(n)),fn)}function cE(t){return t.reduce((e,n)=>e+zv(n),0)}function uE(t){return t.reduce((e,n)=>e+Pv(n),0)}function dE(t,e){if(e===void 0&&(e=Co),!t)return;const{top:n,left:r,bottom:i,right:o}=e(t);Nv(t)&&(i<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const fE=[["x",["left","right"],cE],["y",["top","bottom"],uE]];class lh{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=sh(n),i=Fv(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,s,l]of fE)for(const a of s)Object.defineProperty(this,a,{get:()=>{const c=l(r),d=i[o]-c;return this.rect[a]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class is{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function pE(t){const{EventTarget:e}=Ct(t);return t instanceof e?t:ko(t)}function Ju(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Ht;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Ht||(Ht={}));function Tg(t){t.preventDefault()}function hE(t){t.stopPropagation()}var re;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(re||(re={}));const Bv={start:[re.Space,re.Enter],cancel:[re.Esc],end:[re.Space,re.Enter,re.Tab]},mE=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case re.Right:return{...n,x:n.x+25};case re.Left:return{...n,x:n.x-25};case re.Down:return{...n,y:n.y+25};case re.Up:return{...n,y:n.y-25}}};class ah{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new is(ko(n)),this.windowListeners=new is(Ct(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ht.Resize,this.handleCancel),this.windowListeners.add(Ht.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ht.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&dE(r),n(fn)}handleKeyDown(e){if(oh(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:o=Bv,coordinateGetter:s=mE,scrollBehavior:l="smooth"}=i,{code:a}=e;if(o.end.includes(a)){this.handleEnd(e);return}if(o.cancel.includes(a)){this.handleCancel(e);return}const{collisionRect:c}=r.current,d=c?{x:c.left,y:c.top}:fn;this.referenceCoordinates||(this.referenceCoordinates=d);const f=s(e,{active:n,context:r.current,currentCoordinates:d});if(f){const p=Fa(f,d),h={x:0,y:0},{scrollableAncestors:m}=r.current;for(const g of m){const S=e.code,{isTop:y,isRight:x,isLeft:v,isBottom:w,maxScroll:k,minScroll:T}=$v(g),C=aE(g),E={x:Math.min(S===re.Right?C.right-C.width/2:C.right,Math.max(S===re.Right?C.left:C.left+C.width/2,f.x)),y:Math.min(S===re.Down?C.bottom-C.height/2:C.bottom,Math.max(S===re.Down?C.top:C.top+C.height/2,f.y))},O=S===re.Right&&!x||S===re.Left&&!v,N=S===re.Down&&!w||S===re.Up&&!y;if(O&&E.x!==f.x){const B=g.scrollLeft+p.x,X=S===re.Right&&B<=k.x||S===re.Left&&B>=T.x;if(X&&!p.y){g.scrollTo({left:B,behavior:l});return}X?h.x=g.scrollLeft-B:h.x=S===re.Right?g.scrollLeft-k.x:g.scrollLeft-T.x,h.x&&g.scrollBy({left:-h.x,behavior:l});break}else if(N&&E.y!==f.y){const B=g.scrollTop+p.y,X=S===re.Down&&B<=k.y||S===re.Up&&B>=T.y;if(X&&!p.x){g.scrollTo({top:B,behavior:l});return}X?h.y=g.scrollTop-B:h.y=S===re.Down?g.scrollTop-k.y:g.scrollTop-T.y,h.y&&g.scrollBy({top:-h.y,behavior:l});break}}this.handleMove(e,to(Fa(f,this.referenceCoordinates),h))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ah.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=Bv,onActivation:i}=e,{active:o}=n;const{code:s}=t.nativeEvent;if(r.start.includes(s)){const l=o.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function Mg(t){return!!(t&&"distance"in t)}function jg(t){return!!(t&&"delay"in t)}class ch{constructor(e,n,r){var i;r===void 0&&(r=pE(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:o}=e,{target:s}=o;this.props=e,this.events=n,this.document=ko(s),this.documentListeners=new is(this.document),this.listeners=new is(r),this.windowListeners=new is(Ct(s)),this.initialCoordinates=(i=Tf(o))!=null?i:fn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Ht.Resize,this.handleCancel),this.windowListeners.add(Ht.DragStart,Tg),this.windowListeners.add(Ht.VisibilityChange,this.handleCancel),this.windowListeners.add(Ht.ContextMenu,Tg),this.documentListeners.add(Ht.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(jg(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Mg(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ht.Click,hE,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ht.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:o}=this,{onMove:s,options:{activationConstraint:l}}=o;if(!i)return;const a=(n=Tf(e))!=null?n:fn,c=Fa(i,a);if(!r&&l){if(Mg(l)){if(l.tolerance!=null&&Ju(c,l.tolerance))return this.handleCancel();if(Ju(c,l.distance))return this.handleStart()}if(jg(l)&&Ju(c,l.tolerance))return this.handleCancel();this.handlePending(l,c);return}e.cancelable&&e.preventDefault(),s(a)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===re.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const gE={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class uh extends ch{constructor(e){const{event:n}=e,r=ko(n.target);super(e,gE,r)}}uh.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const yE={move:{name:"mousemove"},end:{name:"mouseup"}};var jf;(function(t){t[t.RightClick=2]="RightClick"})(jf||(jf={}));class xE extends ch{constructor(e){super(e,yE,ko(e.event.target))}}xE.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===jf.RightClick?!1:(r==null||r({event:n}),!0)}}];const Gu={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class vE extends ch{constructor(e){super(e,Gu)}static setup(){return window.addEventListener(Gu.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Gu.move.name,e)};function e(){}}}vE.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var ss;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(ss||(ss={}));var _a;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(_a||(_a={}));function SE(t){let{acceleration:e,activator:n=ss.Pointer,canScroll:r,draggingRect:i,enabled:o,interval:s=5,order:l=_a.TreeOrder,pointerCoordinates:a,scrollableAncestors:c,scrollableAncestorRects:d,delta:f,threshold:p}=t;const h=wE({delta:f,disabled:!o}),[m,g]=D2(),S=b.useRef({x:0,y:0}),y=b.useRef({x:0,y:0}),x=b.useMemo(()=>{switch(n){case ss.Pointer:return a?{top:a.y,bottom:a.y,left:a.x,right:a.x}:null;case ss.DraggableRect:return i}},[n,i,a]),v=b.useRef(null),w=b.useCallback(()=>{const T=v.current;if(!T)return;const C=S.current.x*y.current.x,E=S.current.y*y.current.y;T.scrollBy(C,E)},[]),k=b.useMemo(()=>l===_a.TreeOrder?[...c].reverse():c,[l,c]);b.useEffect(()=>{if(!o||!c.length||!x){g();return}for(const T of k){if((r==null?void 0:r(T))===!1)continue;const C=c.indexOf(T),E=d[C];if(!E)continue;const{direction:O,speed:N}=lE(T,E,x,e,p);for(const B of["x","y"])h[B][O[B]]||(N[B]=0,O[B]=0);if(N.x>0||N.y>0){g(),v.current=T,m(w,s),S.current=N,y.current=O;return}}S.current={x:0,y:0},y.current={x:0,y:0},g()},[e,w,r,g,o,s,JSON.stringify(x),JSON.stringify(h),m,c,k,d,JSON.stringify(p)])}const bE={x:{[Pe.Backward]:!1,[Pe.Forward]:!1},y:{[Pe.Backward]:!1,[Pe.Forward]:!1}};function wE(t){let{delta:e,disabled:n}=t;const r=Ef(e);return ll(i=>{if(n||!r||!i)return bE;const o={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Pe.Backward]:i.x[Pe.Backward]||o.x===-1,[Pe.Forward]:i.x[Pe.Forward]||o.x===1},y:{[Pe.Backward]:i.y[Pe.Backward]||o.y===-1,[Pe.Forward]:i.y[Pe.Forward]||o.y===1}}},[n,e,r])}function kE(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return ll(i=>{var o;return e==null?null:(o=r??i)!=null?o:null},[r,e])}function CE(t,e){return b.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,o=i.activators.map(s=>({eventName:s.eventName,handler:e(s.handler,r)}));return[...n,...o]},[]),[t,e])}var _s;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(_s||(_s={}));var Af;(function(t){t.Optimized="optimized"})(Af||(Af={}));const Ag=new Map;function EE(t,e){let{dragging:n,dependencies:r,config:i}=e;const[o,s]=b.useState(null),{frequency:l,measure:a,strategy:c}=i,d=b.useRef(t),f=S(),p=Fs(f),h=b.useCallback(function(y){y===void 0&&(y=[]),!p.current&&s(x=>x===null?y:x.concat(y.filter(v=>!x.includes(v))))},[p]),m=b.useRef(null),g=ll(y=>{if(f&&!n)return Ag;if(!y||y===Ag||d.current!==t||o!=null){const x=new Map;for(let v of t){if(!v)continue;if(o&&o.length>0&&!o.includes(v.id)&&v.rect.current){x.set(v.id,v.rect.current);continue}const w=v.node.current,k=w?new lh(a(w),w):null;v.rect.current=k,k&&x.set(v.id,k)}return x}return y},[t,o,n,f,a]);return b.useEffect(()=>{d.current=t},[t]),b.useEffect(()=>{f||h()},[n,f]),b.useEffect(()=>{o&&o.length>0&&s(null)},[JSON.stringify(o)]),b.useEffect(()=>{f||typeof l!="number"||m.current!==null||(m.current=setTimeout(()=>{h(),m.current=null},l))},[l,f,h,...r]),{droppableRects:g,measureDroppableContainers:h,measuringScheduled:o!=null};function S(){switch(c){case _s.Always:return!1;case _s.BeforeDragging:return n;default:return!n}}}function _v(t,e){return ll(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function TE(t,e){return _v(t,e)}function ME(t){let{callback:e,disabled:n}=t;const r=ih(e),i=b.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return b.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Yc(t){let{callback:e,disabled:n}=t;const r=ih(e),i=b.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return b.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function jE(t){return new lh(Co(t),t)}function Dg(t,e,n){e===void 0&&(e=jE);const[r,i]=b.useState(null);function o(){i(a=>{if(!t)return null;if(t.isConnected===!1){var c;return(c=a??n)!=null?c:null}const d=e(t);return JSON.stringify(a)===JSON.stringify(d)?a:d})}const s=ME({callback(a){if(t)for(const c of a){const{type:d,target:f}=c;if(d==="childList"&&f instanceof HTMLElement&&f.contains(t)){o();break}}}}),l=Yc({callback:o});return Mn(()=>{o(),t?(l==null||l.observe(t),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),s==null||s.disconnect())},[t]),r}function AE(t){const e=_v(t);return Ov(t,e)}const Rg=[];function DE(t){const e=b.useRef(t),n=ll(r=>t?r&&r!==Rg&&t&&e.current&&t.parentNode===e.current.parentNode?r:sh(t):Rg,[t]);return b.useEffect(()=>{e.current=t},[t]),n}function RE(t){const[e,n]=b.useState(null),r=b.useRef(t),i=b.useCallback(o=>{const s=qu(o.target);s&&n(l=>l?(l.set(s,Mf(s)),new Map(l)):null)},[]);return b.useEffect(()=>{const o=r.current;if(t!==o){s(o);const l=t.map(a=>{const c=qu(a);return c?(c.addEventListener("scroll",i,{passive:!0}),[c,Mf(c)]):null}).filter(a=>a!=null);n(l.length?new Map(l):null),r.current=t}return()=>{s(t),s(o)};function s(l){l.forEach(a=>{const c=qu(a);c==null||c.removeEventListener("scroll",i)})}},[i,t]),b.useMemo(()=>t.length?e?Array.from(e.values()).reduce((o,s)=>to(o,s),fn):Fv(t):fn,[t,e])}function Ig(t,e){e===void 0&&(e=[]);const n=b.useRef(null);return b.useEffect(()=>{n.current=null},e),b.useEffect(()=>{const r=t!==fn;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Fa(t,n.current):fn}function IE(t){b.useEffect(()=>{if(!Gc)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function OE(t,e){return b.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:o}=r;return n[i]=s=>{o(s,e)},n},{}),[t,e])}function Hv(t){return b.useMemo(()=>t?rE(t):null,[t])}const Og=[];function NE(t,e){e===void 0&&(e=Co);const[n]=t,r=Hv(n?Ct(n):null),[i,o]=b.useState(Og);function s(){o(()=>t.length?t.map(a=>Lv(a)?r:new lh(e(a),a)):Og)}const l=Yc({callback:s});return Mn(()=>{l==null||l.disconnect(),s(),t.forEach(a=>l==null?void 0:l.observe(a))},[t]),i}function zE(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return sl(e)?e:t}function PE(t){let{measure:e}=t;const[n,r]=b.useState(null),i=b.useCallback(c=>{for(const{target:d}of c)if(sl(d)){r(f=>{const p=e(d);return f?{...f,width:p.width,height:p.height}:p});break}},[e]),o=Yc({callback:i}),s=b.useCallback(c=>{const d=zE(c);o==null||o.disconnect(),d&&(o==null||o.observe(d)),r(d?e(d):null)},[e,o]),[l,a]=$a(s);return b.useMemo(()=>({nodeRef:l,rect:n,setRef:a}),[n,l,a])}const LE=[{sensor:uh,options:{}},{sensor:ah,options:{}}],$E={current:{}},ia={draggable:{measure:Eg},droppable:{measure:Eg,strategy:_s.WhileDragging,frequency:Af.Optimized},dragOverlay:{measure:Co}};class ls extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const FE={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ls,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Ba},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:ia,measureDroppableContainers:Ba,windowRect:null,measuringScheduled:!1},BE={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Ba,draggableNodes:new Map,over:null,measureDroppableContainers:Ba},Qc=b.createContext(BE),Uv=b.createContext(FE);function _E(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ls}}}function HE(t,e){switch(e.type){case De.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case De.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case De.DragEnd:case De.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case De.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new ls(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case De.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,o=t.droppable.containers.get(n);if(!o||r!==o.key)return t;const s=new ls(t.droppable.containers);return s.set(n,{...o,disabled:i}),{...t,droppable:{...t.droppable,containers:s}}}case De.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new ls(t.droppable.containers);return o.delete(n),{...t,droppable:{...t.droppable,containers:o}}}default:return t}}function UE(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=b.useContext(Qc),o=Ef(r),s=Ef(n==null?void 0:n.id);return b.useEffect(()=>{if(!e&&!r&&o&&s!=null){if(!oh(o)||document.activeElement===o.target)return;const l=i.get(s);if(!l)return;const{activatorNode:a,node:c}=l;if(!a.current&&!c.current)return;requestAnimationFrame(()=>{for(const d of[a.current,c.current]){if(!d)continue;const f=O2(d);if(f){f.focus();break}}})}},[r,e,i,s,o]),null}function VE(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,o)=>o({transform:i,...r}),n):n}function WE(t){return b.useMemo(()=>({draggable:{...ia.draggable,...t==null?void 0:t.draggable},droppable:{...ia.droppable,...t==null?void 0:t.droppable},dragOverlay:{...ia.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function KE(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const o=b.useRef(!1),{x:s,y:l}=typeof i=="boolean"?{x:i,y:i}:i;Mn(()=>{if(!s&&!l||!e){o.current=!1;return}if(o.current||!r)return;const c=e==null?void 0:e.node.current;if(!c||c.isConnected===!1)return;const d=n(c),f=Ov(d,r);if(s||(f.x=0),l||(f.y=0),o.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=Nv(c);p&&p.scrollBy({top:f.y,left:f.x})}},[e,s,l,r,n])}const Vv=b.createContext({...fn,scaleX:1,scaleY:1});var sr;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(sr||(sr={}));const qE=b.memo(function(e){var n,r,i,o;let{id:s,accessibility:l,autoScroll:a=!0,children:c,sensors:d=LE,collisionDetection:f=Y2,measuring:p,modifiers:h,...m}=e;const g=b.useReducer(HE,void 0,_E),[S,y]=g,[x,v]=F2(),[w,k]=b.useState(sr.Uninitialized),T=w===sr.Initialized,{draggable:{active:C,nodes:E,translate:O},droppable:{containers:N}}=S,B=C!=null?E.get(C):null,X=b.useRef({initial:null,translated:null}),ce=b.useMemo(()=>{var tt;return C!=null?{id:C,data:(tt=B==null?void 0:B.data)!=null?tt:$E,rect:X}:null},[C,B]),we=b.useRef(null),[je,ke]=b.useState(null),[ie,z]=b.useState(null),H=Fs(m,Object.values(m)),V=al("DndDescribedBy",s),oe=b.useMemo(()=>N.getEnabled(),[N]),q=WE(p),{droppableRects:et,measureDroppableContainers:He,measuringScheduled:en}=EE(oe,{dragging:T,dependencies:[O.x,O.y],config:q.droppable}),xe=kE(E,C),$t=b.useMemo(()=>ie?Tf(ie):null,[ie]),hn=ib(),tn=TE(xe,q.draggable.measure);KE({activeNode:C!=null?E.get(C):null,config:hn.layoutShiftCompensation,initialRect:tn,measure:q.draggable.measure});const ne=Dg(xe,q.draggable.measure,tn),_r=Dg(xe?xe.parentElement:null),W=b.useRef({activatorEvent:null,active:null,activeNode:xe,collisionRect:null,collisions:null,droppableRects:et,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:N,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ne=N.getNodeFor((n=W.current.over)==null?void 0:n.id),Dn=PE({measure:q.dragOverlay.measure}),Ci=(r=Dn.nodeRef.current)!=null?r:xe,Ei=T?(i=Dn.rect)!=null?i:ne:null,qh=!!(Dn.nodeRef.current&&Dn.rect),Jh=AE(qh?null:ne),fu=Hv(Ci?Ct(Ci):null),Yn=DE(T?Ne??xe:null),fl=NE(Yn),pl=VE(h,{transform:{x:O.x-Jh.x,y:O.y-Jh.y,scaleX:1,scaleY:1},activatorEvent:ie,active:ce,activeNodeRect:ne,containerNodeRect:_r,draggingNodeRect:Ei,over:W.current.over,overlayNodeRect:Dn.rect,scrollableAncestors:Yn,scrollableAncestorRects:fl,windowRect:fu}),Gh=$t?to($t,O):null,Yh=RE(Yn),QS=Ig(Yh),XS=Ig(Yh,[ne]),Ti=to(pl,QS),Mi=Ei?Z2(Ei,pl):null,To=ce&&Mi?f({active:ce,collisionRect:Mi,droppableRects:et,droppableContainers:oe,pointerCoordinates:Gh}):null,Qh=q2(To,"id"),[Qn,Xh]=b.useState(null),ZS=qh?pl:to(pl,XS),eb=Q2(ZS,(o=Qn==null?void 0:Qn.rect)!=null?o:null,ne),pu=b.useRef(null),Zh=b.useCallback((tt,Et)=>{let{sensor:Tt,options:Xn}=Et;if(we.current==null)return;const Ft=E.get(we.current);if(!Ft)return;const Mt=tt.nativeEvent,mn=new Tt({active:we.current,activeNode:Ft,event:Mt,options:Xn,context:W,onAbort(Ue){if(!E.get(Ue))return;const{onDragAbort:gn}=H.current,Rn={id:Ue};gn==null||gn(Rn),x({type:"onDragAbort",event:Rn})},onPending(Ue,Zn,gn,Rn){if(!E.get(Ue))return;const{onDragPending:jo}=H.current,er={id:Ue,constraint:Zn,initialCoordinates:gn,offset:Rn};jo==null||jo(er),x({type:"onDragPending",event:er})},onStart(Ue){const Zn=we.current;if(Zn==null)return;const gn=E.get(Zn);if(!gn)return;const{onDragStart:Rn}=H.current,Mo={activatorEvent:Mt,active:{id:Zn,data:gn.data,rect:X}};Qr.unstable_batchedUpdates(()=>{Rn==null||Rn(Mo),k(sr.Initializing),y({type:De.DragStart,initialCoordinates:Ue,active:Zn}),x({type:"onDragStart",event:Mo}),ke(pu.current),z(Mt)})},onMove(Ue){y({type:De.DragMove,coordinates:Ue})},onEnd:ji(De.DragEnd),onCancel:ji(De.DragCancel)});pu.current=mn;function ji(Ue){return async function(){const{active:gn,collisions:Rn,over:Mo,scrollAdjustedTranslate:jo}=W.current;let er=null;if(gn&&jo){const{cancelDrop:Ao}=H.current;er={activatorEvent:Mt,active:gn,collisions:Rn,delta:jo,over:Mo},Ue===De.DragEnd&&typeof Ao=="function"&&await Promise.resolve(Ao(er))&&(Ue=De.DragCancel)}we.current=null,Qr.unstable_batchedUpdates(()=>{y({type:Ue}),k(sr.Uninitialized),Xh(null),ke(null),z(null),pu.current=null;const Ao=Ue===De.DragEnd?"onDragEnd":"onDragCancel";if(er){const hu=H.current[Ao];hu==null||hu(er),x({type:Ao,event:er})}})}}},[E]),tb=b.useCallback((tt,Et)=>(Tt,Xn)=>{const Ft=Tt.nativeEvent,Mt=E.get(Xn);if(we.current!==null||!Mt||Ft.dndKit||Ft.defaultPrevented)return;const mn={active:Mt};tt(Tt,Et.options,mn)===!0&&(Ft.dndKit={capturedBy:Et.sensor},we.current=Xn,Zh(Tt,Et))},[E,Zh]),em=CE(d,tb);IE(d),Mn(()=>{ne&&w===sr.Initializing&&k(sr.Initialized)},[ne,w]),b.useEffect(()=>{const{onDragMove:tt}=H.current,{active:Et,activatorEvent:Tt,collisions:Xn,over:Ft}=W.current;if(!Et||!Tt)return;const Mt={active:Et,activatorEvent:Tt,collisions:Xn,delta:{x:Ti.x,y:Ti.y},over:Ft};Qr.unstable_batchedUpdates(()=>{tt==null||tt(Mt),x({type:"onDragMove",event:Mt})})},[Ti.x,Ti.y]),b.useEffect(()=>{const{active:tt,activatorEvent:Et,collisions:Tt,droppableContainers:Xn,scrollAdjustedTranslate:Ft}=W.current;if(!tt||we.current==null||!Et||!Ft)return;const{onDragOver:Mt}=H.current,mn=Xn.get(Qh),ji=mn&&mn.rect.current?{id:mn.id,rect:mn.rect.current,data:mn.data,disabled:mn.disabled}:null,Ue={active:tt,activatorEvent:Et,collisions:Tt,delta:{x:Ft.x,y:Ft.y},over:ji};Qr.unstable_batchedUpdates(()=>{Xh(ji),Mt==null||Mt(Ue),x({type:"onDragOver",event:Ue})})},[Qh]),Mn(()=>{W.current={activatorEvent:ie,active:ce,activeNode:xe,collisionRect:Mi,collisions:To,droppableRects:et,draggableNodes:E,draggingNode:Ci,draggingNodeRect:Ei,droppableContainers:N,over:Qn,scrollableAncestors:Yn,scrollAdjustedTranslate:Ti},X.current={initial:Ei,translated:Mi}},[ce,xe,To,Mi,E,Ci,Ei,et,N,Qn,Yn,Ti]),SE({...hn,delta:O,draggingRect:Mi,pointerCoordinates:Gh,scrollableAncestors:Yn,scrollableAncestorRects:fl});const nb=b.useMemo(()=>({active:ce,activeNode:xe,activeNodeRect:ne,activatorEvent:ie,collisions:To,containerNodeRect:_r,dragOverlay:Dn,draggableNodes:E,droppableContainers:N,droppableRects:et,over:Qn,measureDroppableContainers:He,scrollableAncestors:Yn,scrollableAncestorRects:fl,measuringConfiguration:q,measuringScheduled:en,windowRect:fu}),[ce,xe,ne,ie,To,_r,Dn,E,N,et,Qn,He,Yn,fl,q,en,fu]),rb=b.useMemo(()=>({activatorEvent:ie,activators:em,active:ce,activeNodeRect:ne,ariaDescribedById:{draggable:V},dispatch:y,draggableNodes:E,over:Qn,measureDroppableContainers:He}),[ie,em,ce,ne,y,V,E,Qn,He]);return Z.createElement(Iv.Provider,{value:v},Z.createElement(Qc.Provider,{value:rb},Z.createElement(Uv.Provider,{value:nb},Z.createElement(Vv.Provider,{value:eb},c)),Z.createElement(UE,{disabled:(l==null?void 0:l.restoreFocus)===!1})),Z.createElement(H2,{...l,hiddenTextDescribedById:V}));function ib(){const tt=(je==null?void 0:je.autoScrollEnabled)===!1,Et=typeof a=="object"?a.enabled===!1:a===!1,Tt=T&&!tt&&!Et;return typeof a=="object"?{...a,enabled:Tt}:{enabled:Tt}}}),JE=b.createContext(null),Ng="button",GE="Draggable";function YE(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const o=al(GE),{activators:s,activatorEvent:l,active:a,activeNodeRect:c,ariaDescribedById:d,draggableNodes:f,over:p}=b.useContext(Qc),{role:h=Ng,roleDescription:m="draggable",tabIndex:g=0}=i??{},S=(a==null?void 0:a.id)===e,y=b.useContext(S?Vv:JE),[x,v]=$a(),[w,k]=$a(),T=OE(s,e),C=Fs(n);Mn(()=>(f.set(e,{id:e,key:o,node:x,activatorNode:w,data:C}),()=>{const O=f.get(e);O&&O.key===o&&f.delete(e)}),[f,e]);const E=b.useMemo(()=>({role:h,tabIndex:g,"aria-disabled":r,"aria-pressed":S&&h===Ng?!0:void 0,"aria-roledescription":m,"aria-describedby":d.draggable}),[r,h,g,S,m,d.draggable]);return{active:a,activatorEvent:l,activeNodeRect:c,attributes:E,isDragging:S,listeners:r?void 0:T,node:x,over:p,setNodeRef:v,setActivatorNodeRef:k,transform:y}}function QE(){return b.useContext(Uv)}const XE="Droppable",ZE={timeout:25};function eT(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const o=al(XE),{active:s,dispatch:l,over:a,measureDroppableContainers:c}=b.useContext(Qc),d=b.useRef({disabled:n}),f=b.useRef(!1),p=b.useRef(null),h=b.useRef(null),{disabled:m,updateMeasurementsFor:g,timeout:S}={...ZE,...i},y=Fs(g??r),x=b.useCallback(()=>{if(!f.current){f.current=!0;return}h.current!=null&&clearTimeout(h.current),h.current=setTimeout(()=>{c(Array.isArray(y.current)?y.current:[y.current]),h.current=null},S)},[S]),v=Yc({callback:x,disabled:m||!s}),w=b.useCallback((E,O)=>{v&&(O&&(v.unobserve(O),f.current=!1),E&&v.observe(E))},[v]),[k,T]=$a(w),C=Fs(e);return b.useEffect(()=>{!v||!k.current||(v.disconnect(),f.current=!1,v.observe(k.current))},[k,v]),b.useEffect(()=>(l({type:De.RegisterDroppable,element:{id:r,key:o,disabled:n,node:k,rect:p,data:C}}),()=>l({type:De.UnregisterDroppable,key:o,id:r})),[r]),b.useEffect(()=>{n!==d.current.disabled&&(l({type:De.SetDroppableDisabled,id:r,key:o,disabled:n}),d.current.disabled=n)},[r,o,n,l]),{active:s,rect:p,isOver:(a==null?void 0:a.id)===r,node:k,over:a,setNodeRef:T}}function Wv(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function tT(t,e){return t.reduce((n,r,i)=>{const o=e.get(r);return o&&(n[i]=o),n},Array(t.length))}function Ol(t){return t!==null&&t>=0}function nT(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function rT(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const Kv=t=>{let{rects:e,activeIndex:n,overIndex:r,index:i}=t;const o=Wv(e,r,n),s=e[i],l=o[i];return!l||!s?null:{x:l.left-s.left,y:l.top-s.top,scaleX:l.width/s.width,scaleY:l.height/s.height}},Nl={scaleX:1,scaleY:1},iT=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:i,rects:o,overIndex:s}=t;const l=(e=o[n])!=null?e:r;if(!l)return null;if(i===n){const c=o[s];return c?{x:0,y:n<s?c.top+c.height-(l.top+l.height):c.top-l.top,...Nl}:null}const a=oT(o,i,n);return i>n&&i<=s?{x:0,y:-l.height-a,...Nl}:i<n&&i>=s?{x:0,y:l.height+a,...Nl}:{x:0,y:0,...Nl}};function oT(t,e,n){const r=t[e],i=t[e-1],o=t[e+1];return r?n<e?i?r.top-(i.top+i.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const qv="Sortable",Jv=Z.createContext({activeIndex:-1,containerId:qv,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Kv,disabled:{draggable:!1,droppable:!1}});function sT(t){let{children:e,id:n,items:r,strategy:i=Kv,disabled:o=!1}=t;const{active:s,dragOverlay:l,droppableRects:a,over:c,measureDroppableContainers:d}=QE(),f=al(qv,n),p=l.rect!==null,h=b.useMemo(()=>r.map(T=>typeof T=="object"&&"id"in T?T.id:T),[r]),m=s!=null,g=s?h.indexOf(s.id):-1,S=c?h.indexOf(c.id):-1,y=b.useRef(h),x=!nT(h,y.current),v=S!==-1&&g===-1||x,w=rT(o);Mn(()=>{x&&m&&d(h)},[x,h,m,d]),b.useEffect(()=>{y.current=h},[h]);const k=b.useMemo(()=>({activeIndex:g,containerId:f,disabled:w,disableTransforms:v,items:h,overIndex:S,useDragOverlay:p,sortedRects:tT(h,a),strategy:i}),[g,f,w.draggable,w.droppable,v,h,S,a,p,i]);return Z.createElement(Jv.Provider,{value:k},e)}const lT=t=>{let{id:e,items:n,activeIndex:r,overIndex:i}=t;return Wv(n,r,i).indexOf(e)},aT=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:i,items:o,newIndex:s,previousItems:l,previousContainerId:a,transition:c}=t;return!c||!r||l!==o&&i===s?!1:n?!0:s!==i&&e===a},cT={duration:200,easing:"ease"},Gv="transform",uT=Bs.Transition.toString({property:Gv,duration:0,easing:"linear"}),dT={roleDescription:"sortable"};function fT(t){let{disabled:e,index:n,node:r,rect:i}=t;const[o,s]=b.useState(null),l=b.useRef(n);return Mn(()=>{if(!e&&n!==l.current&&r.current){const a=i.current;if(a){const c=Co(r.current,{ignoreTransform:!0}),d={x:a.left-c.left,y:a.top-c.top,scaleX:a.width/c.width,scaleY:a.height/c.height};(d.x||d.y)&&s(d)}}n!==l.current&&(l.current=n)},[e,n,r,i]),b.useEffect(()=>{o&&s(null)},[o]),o}function pT(t){let{animateLayoutChanges:e=aT,attributes:n,disabled:r,data:i,getNewIndex:o=lT,id:s,strategy:l,resizeObserverConfig:a,transition:c=cT}=t;const{items:d,containerId:f,activeIndex:p,disabled:h,disableTransforms:m,sortedRects:g,overIndex:S,useDragOverlay:y,strategy:x}=b.useContext(Jv),v=hT(r,h),w=d.indexOf(s),k=b.useMemo(()=>({sortable:{containerId:f,index:w,items:d},...i}),[f,i,w,d]),T=b.useMemo(()=>d.slice(d.indexOf(s)),[d,s]),{rect:C,node:E,isOver:O,setNodeRef:N}=eT({id:s,data:k,disabled:v.droppable,resizeObserverConfig:{updateMeasurementsFor:T,...a}}),{active:B,activatorEvent:X,activeNodeRect:ce,attributes:we,setNodeRef:je,listeners:ke,isDragging:ie,over:z,setActivatorNodeRef:H,transform:V}=YE({id:s,data:k,attributes:{...dT,...n},disabled:v.draggable}),oe=A2(N,je),q=!!B,et=q&&!m&&Ol(p)&&Ol(S),He=!y&&ie,en=He&&et?V:null,$t=et?en??(l??x)({rects:g,activeNodeRect:ce,activeIndex:p,overIndex:S,index:w}):null,hn=Ol(p)&&Ol(S)?o({id:s,items:d,activeIndex:p,overIndex:S}):w,tn=B==null?void 0:B.id,ne=b.useRef({activeId:tn,items:d,newIndex:hn,containerId:f}),_r=d!==ne.current.items,W=e({active:B,containerId:f,isDragging:ie,isSorting:q,id:s,index:w,items:d,newIndex:ne.current.newIndex,previousItems:ne.current.items,previousContainerId:ne.current.containerId,transition:c,wasDragging:ne.current.activeId!=null}),Ne=fT({disabled:!W,index:w,node:E,rect:C});return b.useEffect(()=>{q&&ne.current.newIndex!==hn&&(ne.current.newIndex=hn),f!==ne.current.containerId&&(ne.current.containerId=f),d!==ne.current.items&&(ne.current.items=d)},[q,hn,f,d]),b.useEffect(()=>{if(tn===ne.current.activeId)return;if(tn&&!ne.current.activeId){ne.current.activeId=tn;return}const Ci=setTimeout(()=>{ne.current.activeId=tn},50);return()=>clearTimeout(Ci)},[tn]),{active:B,activeIndex:p,attributes:we,data:k,rect:C,index:w,newIndex:hn,items:d,isOver:O,isSorting:q,isDragging:ie,listeners:ke,node:E,overIndex:S,over:z,setNodeRef:oe,setActivatorNodeRef:H,setDroppableNodeRef:N,setDraggableNodeRef:je,transform:Ne??$t,transition:Dn()};function Dn(){if(Ne||_r&&ne.current.newIndex===w)return uT;if(!(He&&!oh(X)||!c)&&(q||W))return Bs.Transition.toString({...c,property:Gv})}}function hT(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}re.Down,re.Right,re.Up,re.Left;function _({value:t,placeholder:e,multiline:n=!1,style:r,className:i,onCommit:o}){const s=b.useRef(null),l=b.useRef(t??""),[a,c]=b.useState(t??"");b.useEffect(()=>{l.current=t??"",c(t??""),s.current&&s.current.innerText!==(t??"")&&(s.current.innerText=t??"")},[t]);const d=()=>{const p=s.current?s.current.innerText:a;l.current=p,o(p)},f=()=>{const p=l.current??"";c(p),s.current&&(s.current.innerText=p)};return u.jsx("div",{ref:s,className:i,style:{outline:"none",cursor:"text",whiteSpace:n?"pre-wrap":"normal",wordBreak:"break-word",overflowWrap:"break-word",minWidth:0,...r||{}},contentEditable:!0,suppressContentEditableWarning:!0,"data-inline-editor":"true",onInput:p=>c(p.currentTarget.innerText),onBlur:d,onKeyDown:p=>{p.key==="Escape"&&(p.preventDefault(),f(),p.currentTarget.blur()),!n&&p.key==="Enter"&&(p.preventDefault(),d(),p.currentTarget.blur())},"data-placeholder":e||"",children:a})}function mT({html:t,placeholder:e,className:n,style:r,onCommit:i}){const o=b.useRef(null),s=b.useRef(t??""),[l,a]=b.useState(t??"");b.useEffect(()=>{s.current=t??"",a(t??""),o.current&&o.current.innerHTML!==(t??"")&&(o.current.innerHTML=t??"")},[t]);const c=()=>{const f=o.current?o.current.innerHTML:l;s.current=f,i(f)},d=()=>{const f=s.current??"";a(f),o.current&&(o.current.innerHTML=f)};return u.jsx("div",{ref:o,className:n,style:{outline:"none",cursor:"text",...r||{}},contentEditable:!0,suppressContentEditableWarning:!0,"data-inline-editor":"true","data-placeholder":e||"",onInput:f=>a(f.currentTarget.innerHTML),onBlur:c,onKeyDown:f=>{f.key==="Escape"&&(f.preventDefault(),d(),f.currentTarget.blur())},dangerouslySetInnerHTML:{__html:l||""}})}function Ke(t){this.content=t}Ke.prototype={constructor:Ke,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),o=r.content.slice();return i==-1?o.push(n||t,e):(o[i+1]=e,n&&(o[i]=n)),new Ke(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Ke(n)},addToStart:function(t,e){return new Ke([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Ke(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),o=r.find(t);return i.splice(o==-1?i.length:o,0,e,n),new Ke(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Ke.from(t),t.size?new Ke(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Ke.from(t),t.size?new Ke(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Ke.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Ke.from=function(t){if(t instanceof Ke)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Ke(e)};function Yv(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){let s=Yv(i.content,o.content,n+1);if(s!=null)return s}n+=i.nodeSize}}function Qv(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let s=t.child(--i),l=e.child(--o),a=s.nodeSize;if(s==l){n-=a,r-=a;continue}if(!s.sameMarkup(l))return{a:n,b:r};if(s.isText&&s.text!=l.text){let c=0,d=Math.min(s.text.length,l.text.length);for(;c<d&&s.text[s.text.length-c-1]==l.text[l.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(s.content.size||l.content.size){let c=Qv(s.content,l.content,n-1,r-1);if(c)return c}n-=a,r-=a}}class D{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let s=0,l=0;l<n;s++){let a=this.content[s],c=l+a.nodeSize;if(c>e&&r(a,i+l,o||null,s)!==!1&&a.content.size){let d=l+1;a.nodesBetween(Math.max(0,e-d),Math.min(a.content.size,n-d),r,i+d)}l=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",s=!0;return this.nodesBetween(e,n,(l,a)=>{let c=l.isText?l.text.slice(Math.max(e,a)-a,n-a):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&c||l.isTextblock)&&r&&(s?s=!1:o+=r),o+=c},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new D(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,s=0;s<n;o++){let l=this.content[o],a=s+l.nodeSize;a>e&&((s<e||a>n)&&(l.isText?l=l.cut(Math.max(0,e-s),Math.min(l.text.length,n-s)):l=l.cut(Math.max(0,e-s-1),Math.min(l.content.size,n-s-1))),r.push(l),i+=l.nodeSize),s=a}return new D(r,i)}cutByIndex(e,n){return e==n?D.empty:e==0&&n==this.content.length?this:new D(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new D(i,o)}addToStart(e){return new D([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new D(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return Yv(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return Qv(this,e,n,r)}findIndex(e){if(e==0)return zl(0,e);if(e==this.size)return zl(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),o=r+i.nodeSize;if(o>=e)return o==e?zl(n+1,o):zl(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return D.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new D(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return D.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new D(n||e,r)}static from(e){if(!e)return D.empty;if(e instanceof D)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new D([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}D.empty=new D([],0);const Yu={index:0,offset:0};function zl(t,e){return Yu.index=t,Yu.offset=e,Yu}function Ha(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Ha(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Ha(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let le=class Df{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Ha(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Df.none;if(e instanceof Df)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};le.none=[];class Ua extends Error{}class P{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=Zv(this.content,e+this.openStart,n);return r&&new P(r,this.openStart,this.openEnd)}removeBetween(e,n){return new P(Xv(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return P.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new P(D.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new P(e,r,i)}}P.empty=new P(D.empty,0,0);function Xv(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:s,offset:l}=t.findIndex(n);if(i==e||o.isText){if(l!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(Xv(o.content,e-i-1,n-i-1)))}function Zv(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),s=t.maybeChild(i);if(o==e||s.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let l=Zv(s.content,e-o-1,n,s);return l&&t.replaceChild(i,s.copy(l))}function gT(t,e,n){if(n.openStart>t.depth)throw new Ua("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Ua("Inconsistent open depths");return e1(t,e,n,0)}function e1(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=e1(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,l=s.content;return oi(s,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:s,end:l}=yT(n,t);return oi(o,n1(t,s,l,e,r))}else return oi(o,Va(t,e,r))}function t1(t,e){if(!e.type.compatibleContent(t.type))throw new Ua("Cannot join "+e.type.name+" onto "+t.type.name)}function Rf(t,e,n){let r=t.node(n);return t1(r,e.node(n)),r}function ii(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function as(t,e,n,r){let i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(ii(t.nodeAfter,r),o++));for(let l=o;l<s;l++)ii(i.child(l),r);e&&e.depth==n&&e.textOffset&&ii(e.nodeBefore,r)}function oi(t,e){return t.type.checkContent(e),t.copy(e)}function n1(t,e,n,r,i){let o=t.depth>i&&Rf(t,e,i+1),s=r.depth>i&&Rf(n,r,i+1),l=[];return as(null,t,i,l),o&&s&&e.index(i)==n.index(i)?(t1(o,s),ii(oi(o,n1(t,e,n,r,i+1)),l)):(o&&ii(oi(o,Va(t,e,i+1)),l),as(e,n,i,l),s&&ii(oi(s,Va(n,r,i+1)),l)),as(r,null,i,l),new D(l)}function Va(t,e,n){let r=[];if(as(null,t,n,r),t.depth>n){let i=Rf(t,e,n+1);ii(oi(i,Va(t,e,n+1)),r)}return as(e,null,n,r),new D(r)}function yT(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(D.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Hs{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return le.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let l=r;r=i,i=l}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Wa(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let s=e;;){let{index:l,offset:a}=s.content.findIndex(o),c=o-a;if(r.push(s,l,i+a),!c||(s=s.child(l),s.isText))break;o=c-1,i+=a+1}return new Hs(n,r,o)}static resolveCached(e,n){let r=zg.get(e);if(r)for(let o=0;o<r.elts.length;o++){let s=r.elts[o];if(s.pos==n)return s}else zg.set(e,r=new xT);let i=r.elts[r.i]=Hs.resolve(e,n);return r.i=(r.i+1)%vT,i}}class xT{constructor(){this.elts=[],this.i=0}}const vT=12,zg=new WeakMap;class Wa{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const ST=Object.create(null);let Mr=class If{constructor(e,n,r,i=le.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||D.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Ha(this.attrs,n||e.defaultAttrs||ST)&&le.sameSet(this.marks,r||le.none)}copy(e=null){return e==this.content?this:new If(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new If(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return P.empty;let i=this.resolve(e),o=this.resolve(n),s=r?0:i.sharedDepth(n),l=i.start(s),c=i.node(s).content.cut(i.pos-l,o.pos-l);return new P(c,i.depth-s,o.depth-s)}replace(e,n,r){return gT(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Hs.resolveCached(this,e)}resolveNoCache(e){return Hs.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),r1(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=D.empty,i=0,o=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,o),l=s&&s.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let a=i;a<o;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),s=o&&o.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=le.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!le.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=D.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};Mr.prototype.text=void 0;class Ka extends Mr{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):r1(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Ka(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Ka(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function r1(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class gi{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new bT(e,n);if(r.next==null)return gi.empty;let i=i1(r);r.next&&r.err("Unexpected trailing text");let o=jT(MT(i));return AT(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(s,l){let a=s.matchFragment(e,r);if(a&&(!n||a.validEnd))return D.from(l.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:d,next:f}=s.next[c];if(!(d.isText||d.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let p=o(f,l.concat(d));if(p)return p}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let s=[];for(let l=i;l.type;l=l.via)s.push(l.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:l,next:a}=o.next[s];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return o}).join(`
`)}}gi.empty=new gi(!0);class bT{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function i1(t){let e=[];do e.push(wT(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function wT(t){let e=[];do e.push(kT(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function kT(t){let e=TT(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=CT(t,e);else break;return e}function Pg(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function CT(t,e){let n=Pg(t),r=n;return t.eat(",")&&(t.next!="}"?r=Pg(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function ET(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let s=n[o];s.isInGroup(e)&&i.push(s)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function TT(t){if(t.eat("(")){let e=i1(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=ET(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function MT(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(s,l,a){let c={term:a,to:l};return e[s].push(c),c}function i(s,l){s.forEach(a=>a.to=l)}function o(s,l){if(s.type=="choice")return s.exprs.reduce((a,c)=>a.concat(o(c,l)),[]);if(s.type=="seq")for(let a=0;;a++){let c=o(s.exprs[a],l);if(a==s.exprs.length-1)return c;i(c,l=n())}else if(s.type=="star"){let a=n();return r(l,a),i(o(s.expr,a),a),[r(a)]}else if(s.type=="plus"){let a=n();return i(o(s.expr,l),a),i(o(s.expr,a),a),[r(a)]}else{if(s.type=="opt")return[r(l)].concat(o(s.expr,l));if(s.type=="range"){let a=l;for(let c=0;c<s.min;c++){let d=n();i(o(s.expr,a),d),a=d}if(s.max==-1)i(o(s.expr,a),a);else for(let c=s.min;c<s.max;c++){let d=n();r(a,d),i(o(s.expr,a),d),a=d}return[r(a)]}else{if(s.type=="name")return[r(l,void 0,s.value)];throw new Error("Unknown expr type")}}}}function o1(t,e){return e-t}function Lg(t,e){let n=[];return r(e),n.sort(o1);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let s=0;s<o.length;s++){let{term:l,to:a}=o[s];!l&&n.indexOf(a)==-1&&r(a)}}}function jT(t){let e=Object.create(null);return n(Lg(t,0));function n(r){let i=[];r.forEach(s=>{t[s].forEach(({term:l,to:a})=>{if(!l)return;let c;for(let d=0;d<i.length;d++)i[d][0]==l&&(c=i[d][1]);Lg(t,a).forEach(d=>{c||i.push([l,c=[]]),c.indexOf(d)==-1&&c.push(d)})})});let o=e[r.join(",")]=new gi(r.indexOf(t.length-1)>-1);for(let s=0;s<i.length;s++){let l=i[s][1].sort(o1);o.next.push({type:i[s][0],next:e[l.join(",")]||n(l)})}return o}}function AT(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,s=[];for(let l=0;l<i.next.length;l++){let{type:a,next:c}=i.next[l];s.push(a.name),o&&!(a.isText||a.hasRequiredAttrs())&&(o=!1),r.indexOf(c)==-1&&r.push(c)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function s1(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function l1(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let o=t[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function a1(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let o=t[i];o.validate&&o.validate(e[i])}}function c1(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new RT(t,r,e[r]);return n}let $g=class u1{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=c1(e,r.attrs),this.defaultAttrs=s1(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==gi.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:l1(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Mr(this,this.computeAttrs(e),D.from(n),le.setFrom(r))}createChecked(e=null,n,r){return n=D.from(n),this.checkContent(n),new Mr(this,this.computeAttrs(e),n,le.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=D.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(D.empty,!0);return o?new Mr(this,e,n.append(o),le.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){a1(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:le.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,s)=>r[o]=new u1(o,n,s));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function DT(t,e,n){let r=n.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${o}`)}}class RT{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?DT(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Xc{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=c1(e,i.attrs),this.excluded=null;let o=s1(this.attrs);this.instance=o?new le(this,o):null}create(e=null){return!e&&this.instance?this.instance:new le(this,l1(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((o,s)=>r[o]=new Xc(o,i++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){a1(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class d1{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Ke.from(e.nodes),n.marks=Ke.from(e.marks||{}),this.nodes=$g.compile(this.spec.nodes,this),this.marks=Xc.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],s=o.spec.content||"",l=o.spec.marks;if(o.contentMatch=r[s]||(r[s]=gi.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=l=="_"?null:l?Fg(this,l.split(" ")):l==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:Fg(this,s.split(" "))}this.nodeFromJSON=i=>Mr.fromJSON(this,i),this.markFromJSON=i=>le.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof $g){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new Ka(r,r.defaultAttrs,e,le.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function Fg(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(let l in t.marks){let a=t.marks[l];(i=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=a)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function IT(t){return t.tag!=null}function OT(t){return t.style!=null}let cs=class Of{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(IT(i))this.tags.push(i);else if(OT(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new _g(this,n,!1);return r.addAll(e,le.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new _g(this,n,!0);return r.addAll(e,le.none,n.from,n.to),P.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(PT(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],l=s.style;if(!(l.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(s.getAttrs){let a=s.getAttrs(n);if(a===!1)continue;s.attrs=a||void 0}return s}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<n.length;s++){let l=n[s];if((l.priority==null?50:l.priority)<o)break}n.splice(s,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=Hg(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=Hg(s)),s.node||s.ignore||s.mark||(s.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Of(e,Of.schemaRules(e)))}};const f1={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},NT={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},p1={ol:!0,ul:!0},Us=1,Nf=2,us=4;function Bg(t,e,n){return e!=null?(e?Us:0)|(e==="full"?Nf:0):t&&t.whitespace=="pre"?Us|Nf:n&~us}class Pl{constructor(e,n,r,i,o,s){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=le.none,this.match=o||(s&us?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(D.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Us)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=D.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(D.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!f1.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class _g{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,o,s=Bg(null,n.preserveWhitespace,0)|(r?us:0);i?o=new Pl(i.type,i.attrs,le.none,!0,n.topMatch||i.type.contentMatch,s):r?o=new Pl(null,null,le.none,!0,null,s):o=new Pl(e.schema.topNodeType,null,le.none,!0,null,s),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,o=i.options&Nf?"full":this.localPreserveWS||(i.options&Us)>0,{schema:s}=this.parser;if(o==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)if(o==="full")r=r.replace(/\r\n?/g,`
`);else if(s.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(s.linebreakReplacement.create())){let l=r.split(/\r?\n|\r/);for(let a=0;a<l.length;a++)a&&this.insertNode(s.linebreakReplacement.create(),n,!0),l[a]&&this.insertNode(s.text(l[a]),n,!/\S/.test(l[a]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let l=i.content[i.content.length-1],a=e.previousSibling;(!l||a&&a.nodeName=="BR"||l.isText&&/[ \t\r\n\u000c]$/.test(l.text))&&(r=r.slice(1))}r&&this.insertNode(s.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),l;p1.hasOwnProperty(s)&&this.parser.normalizeLists&&zT(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,r));e:if(a?a.ignore:NT.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,n);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let c,d=this.needsBlock;if(f1.hasOwnProperty(s))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),c=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let f=a&&a.skip?n:this.readStyles(e,n);f&&this.addAll(e,f),c&&this.sync(o),this.needsBlock=d}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,a,c,a.consuming===!1?l:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],s=r.getPropertyValue(o);if(s)for(let l=void 0;;){let a=this.parser.matchStyle(o,s,this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?n=n.filter(c=>!a.clearMark(c)):n=n.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)l=a;else break}}return n}addElementByRule(e,n,r,i){let o,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let a=this.enter(s,n.attrs||null,r,n.preserveWhitespace);a&&(o=!0,r=a)}else{let a=this.parser.schema.marks[n.mark];r=r.concat(a.create(n.attrs))}let l=this.top;if(s&&s.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,r,!1));else{let a=e;typeof n.contentElement=="string"?a=e.querySelector(n.contentElement):typeof n.contentElement=="function"?a=n.contentElement(e):n.contentElement&&(a=n.contentElement),this.findAround(e,a,!0),this.addAll(a,r),this.findAround(e,a,!1)}o&&this.sync(l)&&this.open--}addAll(e,n,r,i){let o=r||0;for(let s=r?e.childNodes[r]:e.firstChild,l=i==null?null:e.childNodes[i];s!=l;s=s.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(s,n);this.findAtPoint(e,o)}findPlace(e,n,r){let i,o;for(let s=this.open,l=0;s>=0;s--){let a=this.nodes[s],c=a.findWrapping(e);if(c&&(!i||i.length>c.length+l)&&(i=c,o=a,!c.length))break;if(a.solid){if(r)break;l+=2}}if(!i)return null;this.sync(o);for(let s=0;s<i.length;s++)n=this.enterInner(i[s],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let s=le.none;for(let l of i.concat(e.marks))(o.type?o.type.allowsMarkType(l.type):Ug(l.type,e.type))&&(s=l.addToSet(s));return o.content.push(e.mark(s)),!0}return!1}enter(e,n,r,i){let o=this.findPlace(e.create(n),r,!1);return o&&(o=this.enterInner(e,n,r,!0,i)),o}enterInner(e,n,r,i=!1,o){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let l=Bg(e,o,s.options);s.options&us&&s.content.length==0&&(l|=us);let a=le.none;return r=r.filter(c=>(s.type?s.type.allowsMarkType(c.type):Ug(c.type,e))?(a=c.addToSet(a),!1):!0),this.nodes.push(new Pl(e,n,a,i,null,l)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Us)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(l,a)=>{for(;l>=0;l--){let c=n[l];if(c==""){if(l==n.length-1||l==0)continue;for(;a>=o;a--)if(s(l-1,a))return!0;return!1}else{let d=a>0||a==0&&i?this.nodes[a].type:r&&a>=o?r.node(a-o).type:null;if(!d||d.name!=c&&!d.isInGroup(c))return!1;a--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function zT(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&p1.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function PT(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Hg(t){let e={};for(let n in t)e[n]=t[n];return e}function Ug(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],s=l=>{o.push(l);for(let a=0;a<l.edgeCount;a++){let{type:c,next:d}=l.edge(a);if(c==e||o.indexOf(d)<0&&s(d))return!0}};if(s(i.contentMatch))return!0}}class ki{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Qu(n).createDocumentFragment());let i=r,o=[];return e.forEach(s=>{if(o.length||s.marks.length){let l=0,a=0;for(;l<o.length&&a<s.marks.length;){let c=s.marks[a];if(!this.marks[c.type.name]){a++;continue}if(!c.eq(o[l][0])||c.type.spec.spanning===!1)break;l++,a++}for(;l<o.length;)i=o.pop()[1];for(;a<s.marks.length;){let c=s.marks[a++],d=this.serializeMark(c,s.isInline,n);d&&(o.push([c,i]),i.appendChild(d.dom),i=d.contentDOM||d.dom)}}i.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=oa(Qu(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&oa(Qu(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return oa(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new ki(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Vg(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Vg(e.marks)}}function Vg(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Qu(t){return t.document||window.document}const Wg=new WeakMap;function LT(t){let e=Wg.get(t);return e===void 0&&Wg.set(t,e=$T(t)),e}function $T(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function oa(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=LT(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=i.indexOf(" ");s>0&&(n=i.slice(0,s),i=i.slice(s+1));let l,a=n?t.createElementNS(n,i):t.createElement(i),c=e[1],d=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){d=2;for(let f in c)if(c[f]!=null){let p=f.indexOf(" ");p>0?a.setAttributeNS(f.slice(0,p),f.slice(p+1),c[f]):f=="style"&&a.style?a.style.cssText=c[f]:a.setAttribute(f,c[f])}}for(let f=d;f<e.length;f++){let p=e[f];if(p===0){if(f<e.length-1||f>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:h,contentDOM:m}=oa(t,p,n,r);if(a.appendChild(h),m){if(l)throw new RangeError("Multiple content holes");l=m}}}return{dom:a,contentDOM:l}}const h1=65535,m1=Math.pow(2,16);function FT(t,e){return t+e*m1}function Kg(t){return t&h1}function BT(t){return(t-(t&h1))/m1}const g1=1,y1=2,sa=4,x1=8;class zf{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&x1)>0}get deletedBefore(){return(this.delInfo&(g1|sa))>0}get deletedAfter(){return(this.delInfo&(y1|sa))>0}get deletedAcross(){return(this.delInfo&sa)>0}}class At{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&At.empty)return At.empty}recover(e){let n=0,r=Kg(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+BT(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let c=this.ranges[l+o],d=this.ranges[l+s],f=a+c;if(e<=f){let p=c?e==a?-1:e==f?1:n:n,h=a+i+(p<0?0:d);if(r)return h;let m=e==(n<0?a:f)?null:FT(l/3,e-a),g=e==a?y1:e==f?g1:sa;return(n<0?e!=a:e!=f)&&(g|=x1),new zf(h,g,m)}i+=d-c}return r?e+i:new zf(e+i,0,null)}touches(e,n){let r=0,i=Kg(n),o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let c=this.ranges[l+o],d=a+c;if(e<=d&&l==i*3)return!0;r+=this.ranges[l+s]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],l=s-(this.inverted?o:0),a=s+(this.inverted?0:o),c=this.ranges[i+n],d=this.ranges[i+r];e(l,l+c,a,a+d),o+=d-c}}invert(){return new At(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?At.empty:new At(e<0?[0,-e,0]:[0,0,e])}}At.empty=new At([]);class Vs{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Vs(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Vs;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this._maps[o],l=s.mapResult(e,n);if(l.recover!=null){let a=this.getMirror(o);if(a!=null&&a>o&&a<this.to){o=a,e=this._maps[a].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new zf(e,i,null)}}const Xu=Object.create(null);class at{getMap(){return At.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Xu[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Xu)throw new RangeError("Duplicate use of step JSON ID "+e);return Xu[e]=n,n.prototype.jsonID=e,n}}class Me{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Me(e,null)}static fail(e){return new Me(null,e)}static fromReplace(e,n,r,i){try{return Me.ok(e.replace(n,r,i))}catch(o){if(o instanceof Ua)return Me.fail(o.message);throw o}}}function dh(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(dh(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return D.fromArray(r)}class gr extends at{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new P(dh(n.content,(s,l)=>!s.isAtom||!l.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),n.openStart,n.openEnd);return Me.fromReplace(e,this.from,this.to,o)}invert(){return new Cn(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new gr(n.pos,r.pos,this.mark)}merge(e){return e instanceof gr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new gr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new gr(n.from,n.to,e.markFromJSON(n.mark))}}at.jsonID("addMark",gr);class Cn extends at{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new P(dh(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Me.fromReplace(e,this.from,this.to,r)}invert(){return new gr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Cn(n.pos,r.pos,this.mark)}merge(e){return e instanceof Cn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Cn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Cn(n.from,n.to,e.markFromJSON(n.mark))}}at.jsonID("removeMark",Cn);class yr extends at{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Me.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Me.fromReplace(e,this.pos,this.pos+1,new P(D.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new yr(this.pos,n.marks[i]);return new yr(this.pos,this.mark)}}return new yi(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new yr(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new yr(n.pos,e.markFromJSON(n.mark))}}at.jsonID("addNodeMark",yr);class yi extends at{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Me.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Me.fromReplace(e,this.pos,this.pos+1,new P(D.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new yr(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new yi(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new yi(n.pos,e.markFromJSON(n.mark))}}at.jsonID("removeNodeMark",yi);class Le extends at{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&Pf(e,this.from,this.to)?Me.fail("Structure replace would overwrite content"):Me.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new At([this.from,this.to-this.from,this.slice.size])}invert(e){return new Le(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Le(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Le)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?P.empty:new P(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Le(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?P.empty:new P(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Le(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Le(n.from,n.to,P.fromJSON(e,n.slice),!!n.structure)}}at.jsonID("replace",Le);class Fe extends at{constructor(e,n,r,i,o,s,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=l}apply(e){if(this.structure&&(Pf(e,this.from,this.gapFrom)||Pf(e,this.gapTo,this.to)))return Me.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Me.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Me.fromReplace(e,this.from,this.to,r):Me.fail("Content does not fit in gap")}getMap(){return new At([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Fe(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new Fe(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Fe(n.from,n.to,n.gapFrom,n.gapTo,P.fromJSON(e,n.slice),n.insert,!!n.structure)}}at.jsonID("replaceAround",Fe);function Pf(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function _T(t,e,n,r){let i=[],o=[],s,l;t.doc.nodesBetween(e,n,(a,c,d)=>{if(!a.isInline)return;let f=a.marks;if(!r.isInSet(f)&&d.type.allowsMarkType(r.type)){let p=Math.max(c,e),h=Math.min(c+a.nodeSize,n),m=r.addToSet(f);for(let g=0;g<f.length;g++)f[g].isInSet(m)||(s&&s.to==p&&s.mark.eq(f[g])?s.to=h:i.push(s=new Cn(p,h,f[g])));l&&l.to==p?l.to=h:o.push(l=new gr(p,h,r))}}),i.forEach(a=>t.step(a)),o.forEach(a=>t.step(a))}function HT(t,e,n,r){let i=[],o=0;t.doc.nodesBetween(e,n,(s,l)=>{if(!s.isInline)return;o++;let a=null;if(r instanceof Xc){let c=s.marks,d;for(;d=r.isInSet(c);)(a||(a=[])).push(d),c=d.removeFromSet(c)}else r?r.isInSet(s.marks)&&(a=[r]):a=s.marks;if(a&&a.length){let c=Math.min(l+s.nodeSize,n);for(let d=0;d<a.length;d++){let f=a[d],p;for(let h=0;h<i.length;h++){let m=i[h];m.step==o-1&&f.eq(i[h].style)&&(p=m)}p?(p.to=c,p.step=o):i.push({style:f,from:Math.max(l,e),to:c,step:o})}}}),i.forEach(s=>t.step(new Cn(s.from,s.to,s.style)))}function fh(t,e,n,r=n.contentMatch,i=!0){let o=t.doc.nodeAt(e),s=[],l=e+1;for(let a=0;a<o.childCount;a++){let c=o.child(a),d=l+c.nodeSize,f=r.matchType(c.type);if(!f)s.push(new Le(l,d,P.empty));else{r=f;for(let p=0;p<c.marks.length;p++)n.allowsMarkType(c.marks[p].type)||t.step(new Cn(l,d,c.marks[p]));if(i&&c.isText&&n.whitespace!="pre"){let p,h=/\r?\n|\r/g,m;for(;p=h.exec(c.text);)m||(m=new P(D.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),s.push(new Le(l+p.index,l+p.index+p[0].length,m))}}l=d}if(!r.validEnd){let a=r.fillBefore(D.empty,!0);t.replace(l,l,new P(a,0,0))}for(let a=s.length-1;a>=0;a--)t.step(s[a])}function UT(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Eo(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,i=0,o=0;;--r){let s=t.$from.node(r),l=t.$from.index(r)+i,a=t.$to.indexAfter(r)-o;if(r<t.depth&&s.canReplace(l,a,n))return r;if(r==0||s.type.spec.isolating||!UT(s,l,a))break;l&&(i=1),a<s.childCount&&(o=1)}return null}function VT(t,e,n){let{$from:r,$to:i,depth:o}=e,s=r.before(o+1),l=i.after(o+1),a=s,c=l,d=D.empty,f=0;for(let m=o,g=!1;m>n;m--)g||r.index(m)>0?(g=!0,d=D.from(r.node(m).copy(d)),f++):a--;let p=D.empty,h=0;for(let m=o,g=!1;m>n;m--)g||i.after(m+1)<i.end(m)?(g=!0,p=D.from(i.node(m).copy(p)),h++):c++;t.step(new Fe(a,c,s,l,new P(d.append(p),f,h),d.size-f,!0))}function ph(t,e,n=null,r=t){let i=WT(t,e),o=i&&KT(r,e);return o?i.map(qg).concat({type:e,attrs:n}).concat(o.map(qg)):null}function qg(t){return{type:t,attrs:null}}function WT(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}function KT(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let a=(s.length?s[s.length-1]:e).contentMatch;for(let c=r;a&&c<i;c++)a=a.matchType(n.child(c).type);return!a||!a.validEnd?null:s}function qT(t,e,n){let r=D.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let l=n[s].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=D.from(n[s].type.create(n[s].attrs,r))}let i=e.start,o=e.end;t.step(new Fe(i,o,i,o,new P(r,0,0),n.length,!0))}function JT(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(s,l)=>{let a=typeof i=="function"?i(s):i;if(s.isTextblock&&!s.hasMarkup(r,a)&&GT(t.doc,t.mapping.slice(o).map(l),r)){let c=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",m=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!m?c=!1:!h&&m&&(c=!0)}c===!1&&S1(t,s,l,o),fh(t,t.mapping.slice(o).map(l,1),r,void 0,c===null);let d=t.mapping.slice(o),f=d.map(l,1),p=d.map(l+s.nodeSize,1);return t.step(new Fe(f,p,f+1,p-1,new P(D.from(r.create(a,null,s.marks)),0,0),1,!0)),c===!0&&v1(t,s,l,o),!1}})}function v1(t,e,n,r){e.forEach((i,o)=>{if(i.isText){let s,l=/\r?\n|\r/g;for(;s=l.exec(i.text);){let a=t.mapping.slice(r).map(n+1+o+s.index);t.replaceWith(a,a+1,e.type.schema.linebreakReplacement.create())}}})}function S1(t,e,n,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let s=t.mapping.slice(r).map(n+1+o);t.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function GT(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function YT(t,e,n,r,i){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let s=n.create(r,null,i||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,s);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Fe(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new P(D.from(s),0,0),1,!0))}function Un(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,d=n-2;c>o;c--,d--){let f=i.node(c),p=i.index(c);if(f.type.spec.isolating)return!1;let h=f.content.cutByIndex(p,f.childCount),m=r&&r[d+1];m&&(h=h.replaceChild(0,m.type.create(m.attrs)));let g=r&&r[d]||f;if(!f.canReplace(p+1,f.childCount)||!g.type.validContent(h))return!1}let l=i.indexAfter(o),a=r&&r[0];return i.node(o).canReplaceWith(l,l,a?a.type:i.node(o+1).type)}function QT(t,e,n=1,r){let i=t.doc.resolve(e),o=D.empty,s=D.empty;for(let l=i.depth,a=i.depth-n,c=n-1;l>a;l--,c--){o=D.from(i.node(l).copy(o));let d=r&&r[c];s=D.from(d?d.type.create(d.attrs,s):i.node(l).copy(s))}t.step(new Le(e,e,new P(o.append(s),n,n),!0))}function $r(t,e){let n=t.resolve(e),r=n.index();return b1(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function XT(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let o=e.child(i),s=o.type==r?t.type.schema.nodes.text:o.type;if(n=n.matchType(s),!n||!t.type.allowsMarks(o.marks))return!1}return n.validEnd}function b1(t,e){return!!(t&&e&&!t.isLeaf&&XT(t,e))}function Zc(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let o,s,l=r.index(i);if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):n>0?(o=r.node(i+1),l++,s=r.node(i).maybeChild(l)):(o=r.node(i).maybeChild(l-1),s=r.node(i+1)),o&&!o.isTextblock&&b1(o,s)&&r.node(i).canReplace(l,l+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function ZT(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,o=t.doc.resolve(e-n),s=o.node().type;if(i&&s.inlineContent){let d=s.whitespace=="pre",f=!!s.contentMatch.matchType(i);d&&!f?r=!1:!d&&f&&(r=!0)}let l=t.steps.length;if(r===!1){let d=t.doc.resolve(e+n);S1(t,d.node(),d.before(),l)}s.inlineContent&&fh(t,e+n-1,s,o.node().contentMatchAt(o.index()),r==null);let a=t.mapping.slice(l),c=a.map(e-n);if(t.step(new Le(c,a.map(e+n,-1),P.empty,!0)),r===!0){let d=t.doc.resolve(c);v1(t,d.node(),d.before(),t.steps.length)}return t}function eM(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function w1(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let s=r.depth;s>=0;s--){let l=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,a=r.index(s)+(l>0?1:0),c=r.node(s),d=!1;if(o==1)d=c.canReplace(a,a,i);else{let f=c.contentMatchAt(a).findWrapping(i.firstChild.type);d=f&&c.canReplaceWith(a,a,f[0])}if(d)return l==0?r.pos:l<0?r.before(s+1):r.after(s+1)}return null}function eu(t,e,n=e,r=P.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return k1(i,o,r)?new Le(e,n,r):new tM(i,o,r).fit()}function k1(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class tM{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=D.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=D.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,l=i.depth;for(;s&&l&&o.childCount==1;)o=o.firstChild.content,s--,l--;let a=new P(o,s,l);return e>-1?new Fe(r.pos,e,this.$to.pos,this.$to.end(),a,n):a.size||r.pos!=this.$to.pos?new Le(r.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=Zu(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:c}=this.frontier[l],d,f=null;if(n==1&&(s?c.matchType(s.type)||(f=c.fillBefore(D.from(s),!1)):o&&a.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:l,parent:o,inject:f};if(n==2&&s&&(d=c.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:l,parent:o,wrap:d};if(o&&c.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Zu(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new P(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Zu(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new P(Wo(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new P(Wo(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let g=0;g<o.length;g++)this.openFrontierNode(o[g]);let s=this.unplaced,l=r?r.content:s.content,a=s.openStart-e,c=0,d=[],{match:f,type:p}=this.frontier[n];if(i){for(let g=0;g<i.childCount;g++)d.push(i.child(g));f=f.matchFragment(i)}let h=l.size+e-(s.content.size-s.openEnd);for(;c<l.childCount;){let g=l.child(c),S=f.matchType(g.type);if(!S)break;c++,(c>1||a==0||g.content.size)&&(f=S,d.push(C1(g.mark(p.allowedMarks(g.marks)),c==1?a:0,c==l.childCount?h:-1)))}let m=c==l.childCount;m||(h=-1),this.placed=Ko(this.placed,n,D.from(d)),this.frontier[n].match=f,m&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,S=l;g<h;g++){let y=S.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),S=y.content}this.unplaced=m?e==0?P.empty:new P(Wo(s.content,e-1,1),e-1,h<0?s.openEnd:e-1):new P(Wo(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!ed(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=ed(e,n,i,r,o);if(s){for(let l=n-1;l>=0;l--){let{match:a,type:c}=this.frontier[l],d=ed(e,l,c,a,!0);if(!d||d.childCount)continue e}return{depth:n,fit:s,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Ko(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Ko(this.placed,this.depth,D.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(D.empty,!0);n.childCount&&(this.placed=Ko(this.placed,this.frontier.length,n))}}function Wo(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Wo(t.firstChild.content,e-1,n)))}function Ko(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Ko(t.lastChild.content,e-1,n)))}function Zu(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function C1(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,C1(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(D.empty,!0)))),t.copy(r)}function ed(t,e,n,r,i){let o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let l=r.fillBefore(o.content,!0,s);return l&&!nM(n,o.content,s)?l:null}function nM(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function rM(t){return t.spec.defining||t.spec.definingForContent}function iM(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),o=t.doc.resolve(n);if(k1(i,o,r))return t.step(new Le(e,n,r));let s=T1(i,o);s[s.length-1]==0&&s.pop();let l=-(i.depth+1);s.unshift(l);for(let p=i.depth,h=i.pos-1;p>0;p--,h--){let m=i.node(p).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;s.indexOf(p)>-1?l=p:i.before(p)==h&&s.splice(1,0,-p)}let a=s.indexOf(l),c=[],d=r.openStart;for(let p=r.content,h=0;;h++){let m=p.firstChild;if(c.push(m),h==r.openStart)break;p=m.content}for(let p=d-1;p>=0;p--){let h=c[p],m=rM(h.type);if(m&&!h.sameMarkup(i.node(Math.abs(l)-1)))d=p;else if(m||!h.type.isTextblock)break}for(let p=r.openStart;p>=0;p--){let h=(p+d+1)%(r.openStart+1),m=c[h];if(m)for(let g=0;g<s.length;g++){let S=s[(g+a)%s.length],y=!0;S<0&&(y=!1,S=-S);let x=i.node(S-1),v=i.index(S-1);if(x.canReplaceWith(v,v,m.type,m.marks))return t.replace(i.before(S),y?o.after(S):n,new P(E1(r.content,0,r.openStart,h),h,r.openEnd))}}let f=t.steps.length;for(let p=s.length-1;p>=0&&(t.replace(e,n,r),!(t.steps.length>f));p--){let h=s[p];h<0||(e=i.before(h),n=o.after(h))}}function E1(t,e,n,r,i){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(E1(o.content,e+1,n,r,o)))}if(e>r){let o=i.contentMatchAt(0),s=o.fillBefore(t).append(t);t=s.append(o.matchFragment(s).fillBefore(D.empty,!0))}return t}function oM(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=eM(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new P(D.from(r),0,0))}function sM(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=T1(r,i);for(let s=0;s<o.length;s++){let l=o[s],a=s==o.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),i.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return t.delete(r.before(l),i.after(l))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s&&r.start(s-1)==i.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),i.index(s-1)))return t.delete(r.before(s),n);t.delete(e,n)}function T1(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}class no extends at{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Me.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Me.fromReplace(e,this.pos,this.pos+1,new P(D.from(i),0,n.isLeaf?0:1))}getMap(){return At.empty}invert(e){return new no(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new no(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new no(n.pos,n.attr,n.value)}}at.jsonID("attr",no);class Ws extends at{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Me.ok(r)}getMap(){return At.empty}invert(e){return new Ws(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Ws(n.attr,n.value)}}at.jsonID("docAttr",Ws);let po=class extends Error{};po=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};po.prototype=Object.create(Error.prototype);po.prototype.constructor=po;po.prototype.name="TransformError";class M1{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Vs}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new po(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}changedRange(){let e=1e9,n=-1e9;for(let r=0;r<this.mapping.maps.length;r++){let i=this.mapping.maps[r];r&&(e=i.map(e,1),n=i.map(n,-1)),i.forEach((o,s,l,a)=>{e=Math.min(e,l),n=Math.max(n,a)})}return e==1e9?null:{from:e,to:n}}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=P.empty){let i=eu(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new P(D.from(r),0,0))}delete(e,n){return this.replace(e,n,P.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return iM(this,e,n,r),this}replaceRangeWith(e,n,r){return oM(this,e,n,r),this}deleteRange(e,n){return sM(this,e,n),this}lift(e,n){return VT(this,e,n),this}join(e,n=1){return ZT(this,e,n),this}wrap(e,n){return qT(this,e,n),this}setBlockType(e,n=e,r,i=null){return JT(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return YT(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new no(e,n,r)),this}setDocAttribute(e,n){return this.step(new Ws(e,n)),this}addNodeMark(e,n){return this.step(new yr(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof le)n.isInSet(r.marks)&&this.step(new yi(e,n));else{let i=r.marks,o,s=[];for(;o=n.isInSet(i);)s.push(new yi(e,o)),i=o.removeFromSet(i);for(let l=s.length-1;l>=0;l--)this.step(s[l])}return this}split(e,n=1,r){return QT(this,e,n,r),this}addMark(e,n,r){return _T(this,e,n,r),this}removeMark(e,n,r){return HT(this,e,n,r),this}clearIncompatible(e,n,r){return fh(this,e,n,r),this}}const td=Object.create(null);class G{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new lM(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=P.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let o=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){let{$from:a,$to:c}=s[l],d=e.mapping.slice(o);e.replaceRange(d.map(a.pos),d.map(c.pos),l?P.empty:n),l==0&&Yg(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:l}=i[o],a=e.mapping.slice(r),c=a.map(s.pos),d=a.map(l.pos);o?e.deleteRange(c,d):(e.replaceRangeWith(c,d,n),Yg(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new K(e):Ii(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let s=n<0?Ii(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):Ii(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new It(e.node(0))}static atStart(e){return Ii(e,e,0,0,1)||new It(e)}static atEnd(e){return Ii(e,e,e.content.size,e.childCount,-1)||new It(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=td[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in td)throw new RangeError("Duplicate use of selection JSON ID "+e);return td[e]=n,n.prototype.jsonID=e,n}getBookmark(){return K.between(this.$anchor,this.$head).getBookmark()}}G.prototype.visible=!0;class lM{constructor(e,n){this.$from=e,this.$to=n}}let Jg=!1;function Gg(t){!Jg&&!t.parent.inlineContent&&(Jg=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class K extends G{constructor(e,n=e){Gg(e),Gg(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return G.near(r);let i=e.resolve(n.map(this.anchor));return new K(i.parent.inlineContent?i:r,r)}replace(e,n=P.empty){if(super.replace(e,n),n==P.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof K&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new tu(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new K(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=G.findFrom(n,r,!0)||G.findFrom(n,-r,!0);if(o)n=o.$head;else return G.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(G.findFrom(e,-r,!0)||G.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new K(e,n)}}G.jsonID("text",K);class tu{constructor(e,n){this.anchor=e,this.head=n}map(e){return new tu(e.map(this.anchor),e.map(this.head))}resolve(e){return K.between(e.resolve(this.anchor),e.resolve(this.head))}}class U extends G{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?G.near(o):new U(o)}content(){return new P(D.from(this.node),0,0)}eq(e){return e instanceof U&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new hh(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new U(e.resolve(n.anchor))}static create(e,n){return new U(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}U.prototype.visible=!1;G.jsonID("node",U);class hh{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new tu(r,r):new hh(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&U.isSelectable(r)?new U(n):G.near(n)}}class It extends G{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=P.empty){if(n==P.empty){e.delete(0,e.doc.content.size);let r=G.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new It(e)}map(e){return new It(e)}eq(e){return e instanceof It}getBookmark(){return aM}}G.jsonID("all",It);const aM={map(){return this},resolve(t){return new It(t)}};function Ii(t,e,n,r,i,o=!1){if(e.inlineContent)return K.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let l=e.child(s);if(l.isAtom){if(!o&&U.isSelectable(l))return U.create(t,n-(i<0?l.nodeSize:0))}else{let a=Ii(t,l,n+i,i<0?l.childCount:0,i,o);if(a)return a}n+=l.nodeSize*i}return null}function Yg(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Le||i instanceof Fe))return;let o=t.mapping.maps[r],s;o.forEach((l,a,c,d)=>{s==null&&(s=d)}),t.setSelection(G.near(t.doc.resolve(s),n))}const Qg=1,Ll=2,Xg=4;class cM extends M1{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Qg)&~Ll,this.storedMarks=null,this}get selectionSet(){return(this.updated&Qg)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Ll,this}ensureMarks(e){return le.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Ll)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Ll,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||le.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let s=this.doc.resolve(n);o=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,o)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(G.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Xg,this}get scrolledIntoView(){return(this.updated&Xg)>0}}function Zg(t,e){return!e||!t?t:t.bind(e)}class qo{constructor(e,n,r){this.name=e,this.init=Zg(n.init,r),this.apply=Zg(n.apply,r)}}const uM=[new qo("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new qo("selection",{init(t,e){return t.selection||G.atStart(e.doc)},apply(t){return t.selection}}),new qo("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new qo("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class nd{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=uM.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new qo(r.key,r.spec.state,r))})}}class qi{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let l=this.config.plugins[s];if(l.spec.appendTransaction){let a=i?i[s].n:0,c=i?i[s].state:this,d=a<n.length&&l.spec.appendTransaction.call(l,a?n.slice(a):n,c,r);if(d&&r.filterTransaction(d,s)){if(d.setMeta("appendedTransaction",e),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<s?{state:r,n:n.length}:{state:this,n:0})}n.push(d),r=r.applyInner(d),o=!0}i&&(i[s]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new qi(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new cM(this)}static create(e){let n=new nd(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new qi(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new nd(this.schema,e.plugins),r=n.fields,i=new qi(n);for(let o=0;o<r.length;o++){let s=r[o].name;i[s]=this.hasOwnProperty(s)?this[s]:r[o].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new nd(e.schema,e.plugins),o=new qi(i);return i.fields.forEach(s=>{if(s.name=="doc")o.doc=Mr.fromJSON(e.schema,n.doc);else if(s.name=="selection")o.selection=G.fromJSON(o.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],c=a.spec.state;if(a.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){o[s.name]=c.fromJSON.call(a,e,n[l],o);return}}o[s.name]=s.init(e,o)}}),o}}function j1(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=j1(i,e,{})),n[r]=i}return n}class Ze{constructor(e){this.spec=e,this.props={},e.props&&j1(e.props,this,this.props),this.key=e.key?e.key.key:A1("plugin")}getState(e){return e[this.key]}}const rd=Object.create(null);function A1(t){return t in rd?t+"$"+ ++rd[t]:(rd[t]=0,t+"$")}class Lt{constructor(e="key"){this.key=A1(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const qe=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},ho=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Lf=null;const Ln=function(t,e,n){let r=Lf||(Lf=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},dM=function(){Lf=null},xi=function(t,e,n,r){return n&&(ey(t,e,n,r,-1)||ey(t,e,n,r,1))},fM=/^(img|br|input|textarea|hr)$/i;function ey(t,e,n,r,i){for(var o;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Kt(t))){let s=t.parentNode;if(!s||s.nodeType!=1||cl(t)||fM.test(t.nodeName)||t.contentEditable=="false")return!1;e=qe(t)+(i<0?0:1),t=s}else if(t.nodeType==1){let s=t.childNodes[e+(i<0?-1:0)];if(s.nodeType==1&&s.contentEditable=="false")if(!((o=s.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=i;else return!1;else t=s,e=i<0?Kt(t):0}else return!1}}function Kt(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function pM(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Kt(t)}else if(t.parentNode&&!cl(t))e=qe(t),t=t.parentNode;else return null}}function hM(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!cl(t))e=qe(t)+1,t=t.parentNode;else return null}}function mM(t,e,n){for(let r=e==0,i=e==Kt(t);r||i;){if(t==n)return!0;let o=qe(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,i=i&&o==Kt(t)}}function cl(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const nu=function(t){return t.focusNode&&xi(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Kr(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function gM(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function yM(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Kt(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Kt(r.startContainer),r.startOffset)}}}const jn=typeof navigator<"u"?navigator:null,ty=typeof document<"u"?document:null,Fr=jn&&jn.userAgent||"",$f=/Edge\/(\d+)/.exec(Fr),D1=/MSIE \d/.exec(Fr),Ff=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Fr),wt=!!(D1||Ff||$f),jr=D1?document.documentMode:Ff?+Ff[1]:$f?+$f[1]:0,Yt=!wt&&/gecko\/(\d+)/i.test(Fr);Yt&&+(/Firefox\/(\d+)/.exec(Fr)||[0,0])[1];const Bf=!wt&&/Chrome\/(\d+)/.exec(Fr),Ge=!!Bf,R1=Bf?+Bf[1]:0,lt=!wt&&!!jn&&/Apple Computer/.test(jn.vendor),mo=lt&&(/Mobile\/\w+/.test(Fr)||!!jn&&jn.maxTouchPoints>2),Ut=mo||(jn?/Mac/.test(jn.platform):!1),I1=jn?/Win/.test(jn.platform):!1,_n=/Android \d/.test(Fr),ul=!!ty&&"webkitFontSmoothing"in ty.documentElement.style,xM=ul?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function vM(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function In(t,e){return typeof t=="number"?t:t[e]}function SM(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function ny(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let s=n||t.dom;s;){if(s.nodeType!=1){s=ho(s);continue}let l=s,a=l==o.body,c=a?vM(o):SM(l),d=0,f=0;if(e.top<c.top+In(r,"top")?f=-(c.top-e.top+In(i,"top")):e.bottom>c.bottom-In(r,"bottom")&&(f=e.bottom-e.top>c.bottom-c.top?e.top+In(i,"top")-c.top:e.bottom-c.bottom+In(i,"bottom")),e.left<c.left+In(r,"left")?d=-(c.left-e.left+In(i,"left")):e.right>c.right-In(r,"right")&&(d=e.right-c.right+In(i,"right")),d||f)if(a)o.defaultView.scrollBy(d,f);else{let h=l.scrollLeft,m=l.scrollTop;f&&(l.scrollTop+=f),d&&(l.scrollLeft+=d);let g=l.scrollLeft-h,S=l.scrollTop-m;e={left:e.left-g,top:e.top-S,right:e.right-g,bottom:e.bottom-S}}let p=a?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(p))break;s=p=="absolute"?s.offsetParent:ho(s)}}function bM(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let l=t.root.elementFromPoint(o,s);if(!l||l==t.dom||!t.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=n-20){r=l,i=a.top;break}}return{refDOM:r,refTop:i,stack:O1(t.dom)}}function O1(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=ho(r));return e}function wM({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;N1(n,r==0?0:r-e)}function N1(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:o}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let Di=null;function kM(t){if(t.setActive)return t.setActive();if(Di)return t.focus(Di);let e=O1(t);t.focus(Di==null?{get preventScroll(){return Di={preventScroll:!0},!0}}:void 0),Di||(Di=!1,N1(e,0))}function z1(t,e){let n,r=2e8,i,o=0,s=e.top,l=e.top,a,c;for(let d=t.firstChild,f=0;d;d=d.nextSibling,f++){let p;if(d.nodeType==1)p=d.getClientRects();else if(d.nodeType==3)p=Ln(d).getClientRects();else continue;for(let h=0;h<p.length;h++){let m=p[h];if(m.top<=s&&m.bottom>=l){s=Math.max(m.bottom,s),l=Math.min(m.top,l);let g=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(g<r){n=d,r=g,i=g&&n.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,d.nodeType==1&&g&&(o=f+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!a&&m.left<=e.left&&m.right>=e.left&&(a=d,c={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!n&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(o=f+1)}}return!n&&a&&(n=a,i=c,r=0),n&&n.nodeType==3?CM(n,i):!n||r&&n.nodeType==1?{node:t,offset:o}:z1(n,i)}function CM(t,e){let n=t.nodeValue.length,r=document.createRange(),i;for(let o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);let s=rr(r,1);if(s.top!=s.bottom&&mh(e,s)){i={node:t,offset:o+(e.left>=(s.left+s.right)/2?1:0)};break}}return r.detach(),i||{node:t,offset:0}}function mh(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function EM(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function TM(t,e,n){let{node:r,offset:i}=z1(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();o=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,i,o)}function MM(t,e,n,r){let i=-1;for(let o=e,s=!1;o!=t.dom;){let l=t.docView.nearestDesc(o,!0),a;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((a=l.dom.getBoundingClientRect()).width||a.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!s&&a.left>r.left||a.top>r.top?i=l.posBefore:(!s&&a.right<r.left||a.bottom<r.top)&&(i=l.posAfter),s=!0),!l.contentDOM&&i<0&&!l.node.isText))return(l.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?l.posBefore:l.posAfter;o=l.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function P1(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let s=t.childNodes[o];if(s.nodeType==1){let l=s.getClientRects();for(let a=0;a<l.length;a++){let c=l[a];if(mh(e,c))return P1(s,e,c)}}if((o=(o+1)%r)==i)break}return t}function jM(t,e){let n=t.dom.ownerDocument,r,i=0,o=yM(n,e.left,e.top);o&&({node:r,offset:i}=o);let s=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!s||!t.dom.contains(s.nodeType!=1?s.parentNode:s)){let c=t.dom.getBoundingClientRect();if(!mh(e,c)||(s=P1(t.dom,e,c),!s))return null}if(lt)for(let c=s;r&&c;c=ho(c))c.draggable&&(r=void 0);if(s=EM(s,e),r){if(Yt&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let d=r.childNodes[i],f;d.nodeName=="IMG"&&(f=d.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&i++}let c;ul&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=MM(t,r,i,e))}l==null&&(l=TM(t,s,e));let a=t.docView.nearestDesc(s,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function ry(t){return t.top<t.bottom||t.left<t.right}function rr(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(ry(r))return r}return Array.prototype.find.call(n,ry)||t.getBoundingClientRect()}const AM=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function L1(t,e,n){let{node:r,offset:i,atom:o}=t.docView.domFromPos(e,n<0?-1:1),s=ul||Yt;if(r.nodeType==3)if(s&&(AM.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let a=rr(Ln(r,i,i),n);if(Yt&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=rr(Ln(r,i-1,i-1),-1);if(c.top==a.top){let d=rr(Ln(r,i,i+1),-1);if(d.top!=a.top)return $o(d,d.left<c.left)}}return a}else{let a=i,c=i,d=n<0?1:-1;return n<0&&!i?(c++,d=-1):n>=0&&i==r.nodeValue.length?(a--,d=1):n<0?a--:c++,$o(rr(Ln(r,a,c),d),d<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(n<0||i==Kt(r))){let a=r.childNodes[i-1];if(a.nodeType==1)return id(a.getBoundingClientRect(),!1)}if(o==null&&i<Kt(r)){let a=r.childNodes[i];if(a.nodeType==1)return id(a.getBoundingClientRect(),!0)}return id(r.getBoundingClientRect(),n>=0)}if(o==null&&i&&(n<0||i==Kt(r))){let a=r.childNodes[i-1],c=a.nodeType==3?Ln(a,Kt(a)-(s?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(c)return $o(rr(c,1),!1)}if(o==null&&i<Kt(r)){let a=r.childNodes[i];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let c=a?a.nodeType==3?Ln(a,0,s?0:1):a.nodeType==1?a:null:null;if(c)return $o(rr(c,-1),!0)}return $o(rr(r.nodeType==3?Ln(r):r,-n),n>=0)}function $o(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function id(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function $1(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function DM(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return $1(t,e,()=>{let{node:o}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(o,!0);if(!l)break;if(l.node.isBlock){o=l.contentDOM||l.dom;break}o=l.dom.parentNode}let s=L1(t,i.pos,1);for(let l=o.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=Ln(l,0,l.nodeValue.length).getClientRects();else continue;for(let c=0;c<a.length;c++){let d=a[c];if(d.bottom>d.top+1&&(n=="up"?s.top-d.top>(d.bottom-s.top)*2:d.bottom-s.bottom>(s.bottom-d.top)*2))return!1}}return!0})}const RM=/[\u0590-\u08ac]/;function IM(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,l=t.domSelection();return l?!RM.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?o:s:$1(t,e,()=>{let{focusNode:a,focusOffset:c,anchorNode:d,anchorOffset:f}=t.domSelectionRange(),p=l.caretBidiLevel;l.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:m,focusOffset:g}=t.domSelectionRange(),S=m&&!h.contains(m.nodeType==1?m:m.parentNode)||a==m&&c==g;try{l.collapse(d,f),a&&(a!=d||c!=f)&&l.extend&&l.extend(a,c)}catch{}return p!=null&&(l.caretBidiLevel=p),S}):r.pos==r.start()||r.pos==r.end()}let iy=null,oy=null,sy=!1;function OM(t,e,n){return iy==e&&oy==n?sy:(iy=e,oy=n,sy=n=="up"||n=="down"?DM(t,e,n):IM(t,e,n))}const Qt=0,ly=1,Xr=2,An=3;class dl{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Qt,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,s;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>qe(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),s;if(o&&(!n||o.node))if(r&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)for(let s=0;s<i.children.length;s++){let l=i.children[s];if(l.size){i=l;break}}return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let s=this.children[r],l=o+s.size;if(l>e||s instanceof B1){i=e-o;break}o=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof F1&&o.side>=0;r--);if(n<=0){let o,s=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,s=!1);return o&&n&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?qe(o.dom)+1:0}}else{let o,s=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?qe(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let s=r,l=0;;l++){let a=this.children[l],c=s+a.size;if(i==-1&&e<=c){let d=s+a.border;if(e>=d&&n<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,n,d);e=s;for(let f=l;f>0;f--){let p=this.children[f-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){i=qe(p.dom)+1;break}e-=p.size}i==-1&&(i=0)}if(i>-1&&(c>n||l==this.children.length-1)){n=c;for(let d=l+1;d<this.children.length;d++){let f=this.children[d];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=qe(f.dom);break}n+=f.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let o=Math.min(e,n),s=Math.max(e,n);for(let h=0,m=0;h<this.children.length;h++){let g=this.children[h],S=m+g.size;if(o>m&&s<S)return g.setSelection(e-m-g.border,n-m-g.border,r,i);m=S}let l=this.domFromPos(e,e?-1:1),a=n==e?l:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),d=r.domSelectionRange(),f=!1;if((Yt||lt)&&e==n){let{node:h,offset:m}=l;if(h.nodeType==3){if(f=!!(m&&h.nodeValue[m-1]==`
`),f&&m==h.nodeValue.length)for(let g=h,S;g;g=g.parentNode){if(S=g.nextSibling){S.nodeName=="BR"&&(l=a={node:S.parentNode,offset:qe(S)+1});break}let y=g.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let g=h.childNodes[m-1];f=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(Yt&&d.focusNode&&d.focusNode!=a.node&&d.focusNode.nodeType==1){let h=d.focusNode.childNodes[d.focusOffset];h&&h.contentEditable=="false"&&(i=!0)}if(!(i||f&&lt)&&xi(l.node,l.offset,d.anchorNode,d.anchorOffset)&&xi(a.node,a.offset,d.focusNode,d.focusOffset))return;let p=!1;if((c.extend||e==n)&&!(f&&Yt)){c.collapse(l.node,l.offset);try{e!=n&&c.extend(a.node,a.offset),p=!0}catch{}}if(!p){if(e>n){let m=l;l=a,a=m}let h=document.createRange();h.setEnd(a.node,a.offset),h.setStart(l.node,l.offset),c.removeAllRanges(),c.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],s=r+o.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let l=r+o.border,a=s-o.border;if(e>=l&&n<=a){this.dirty=e==r||n==s?Xr:ly,e==l&&n==a&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=An:o.markDirty(e-l,n-l);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Xr:An}r=s}this.dirty=Xr}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Xr:ly;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class F1 extends dl{constructor(e,n,r,i){let o,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(s.nodeType!=1){let l=document.createElement("span");l.appendChild(s),s=l}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==Qt&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class NM extends dl{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class vi extends dl{constructor(e,n,r,i,o){super(e,[],r,i),this.mark=n,this.spec=o}static create(e,n,r,i){let o=i.nodeViews[n.type.name],s=o&&o(n,i,r);return(!s||!s.dom)&&(s=ki.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new vi(e,n,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&An||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=An&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Qt){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Qt}}slice(e,n,r){let i=vi.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;n<s&&(o=Hf(o,n,s,r)),e>0&&(o=Hf(o,0,e,r));for(let l=0;l<o.length;l++)o[l].parent=i;return i.children=o,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Ar extends dl{constructor(e,n,r,i,o,s,l,a,c){super(e,[],o,s),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(e,n,r,i,o,s){let l=o.nodeViews[n.type.name],a,c=l&&l(n,o,()=>{if(!a)return s;if(a.parent)return a.parent.posBeforeChild(a)},r,i),d=c&&c.dom,f=c&&c.contentDOM;if(n.isText){if(!d)d=document.createTextNode(n.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:f}=ki.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!f&&!n.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),n.type.spec.draggable&&(d.draggable=!0));let p=d;return d=U1(d,r,n),c?a=new zM(e,n,r,i,d,f||null,p,c,o,s+1):n.isText?new ru(e,n,r,i,d,p,o):new Ar(e,n,r,i,d,f||null,p,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>D.empty)}return e}matchesNode(e,n,r){return this.dirty==Qt&&e.eq(this.node)&&qa(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,o=e.composing?this.localCompositionInfo(e,n):null,s=o&&o.pos>-1?o:null,l=o&&o.pos<0,a=new LM(this,s&&s.node,e);BM(this.node,this.innerDeco,(c,d,f)=>{c.spec.marks?a.syncToMarks(c.spec.marks,r,e,d):c.type.side>=0&&!f&&a.syncToMarks(d==this.node.childCount?le.none:this.node.child(d).marks,r,e,d),a.placeWidget(c,e,i)},(c,d,f,p)=>{a.syncToMarks(c.marks,r,e,p);let h;a.findNodeMatch(c,d,f,p)||l&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(h=a.findIndexWithChild(o.node))>-1&&a.updateNodeAt(c,d,f,h,e)||a.updateNextNode(c,d,f,e,p,i)||a.addNode(c,d,f,e,i),i+=c.nodeSize}),a.syncToMarks([],r,e,0),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==Xr)&&(s&&this.protectLocalComposition(e,s),_1(this.contentDOM,this.children,e),mo&&_M(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof K)||r<n||i>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let s=o.nodeValue,l=HM(this.node.content,s,r-n,i-n);return l<0?null:{node:o,pos:l,text:s}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new NM(this,o,n,i);e.input.compositionNodes.push(s),this.children=Hf(this.children,r,r+i.length,e,s)}update(e,n,r,i){return this.dirty==An||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Qt}updateOuterDeco(e){if(qa(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=H1(this.dom,this.nodeDOM,_f(this.outerDeco,this.node,n),_f(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function ay(t,e,n,r,i){U1(r,e,t);let o=new Ar(void 0,t,e,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class ru extends Ar{constructor(e,n,r,i,o,s,l){super(e,n,r,i,o,null,s,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==An||this.dirty!=Qt&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Qt||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Qt,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),o=document.createTextNode(i.text);return new ru(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=An)}get domAtom(){return!1}isText(e){return this.node.text==e}}class B1 extends dl{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Qt&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class zM extends Ar{constructor(e,n,r,i,o,s,l,a,c,d){super(e,n,r,i,o,s,l,c,d),this.spec=a}update(e,n,r,i){if(this.dirty==An)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function _1(t,e,n){let r=t.firstChild,i=!1;for(let o=0;o<e.length;o++){let s=e[o],l=s.dom;if(l.parentNode==t){for(;l!=r;)r=cy(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(l,r);if(s instanceof vi){let a=r?r.previousSibling:t.lastChild;_1(s.contentDOM,s.children,n),r=a?a.nextSibling:t.firstChild}}for(;r;)r=cy(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const ds=function(t){t&&(this.nodeName=t)};ds.prototype=Object.create(null);const Zr=[new ds];function _f(t,e,n){if(t.length==0)return Zr;let r=n?Zr[0]:new ds,i=[r];for(let o=0;o<t.length;o++){let s=t[o].type.attrs;if(s){s.nodeName&&i.push(r=new ds(s.nodeName));for(let l in s){let a=s[l];a!=null&&(n&&i.length==1&&i.push(r=new ds(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a))}}}return i}function H1(t,e,n,r){if(n==Zr&&r==Zr)return e;let i=e;for(let o=0;o<r.length;o++){let s=r[o],l=n[o];if(o){let a;l&&l.nodeName==s.nodeName&&i!=t&&(a=i.parentNode)&&a.nodeName.toLowerCase()==s.nodeName||(a=document.createElement(s.nodeName),a.pmIsDeco=!0,a.appendChild(i),l=Zr[0]),i=a}PM(i,l||Zr[0],s)}return i}function PM(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&t.classList.add(i[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function U1(t,e,n){return H1(t,t,Zr,_f(e,n,t.nodeType!=1))}function qa(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function cy(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class LM{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=$M(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r,i){let o=0,s=this.stack.length>>1,l=Math.min(s,e.length);for(;o<l&&(o==s-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<s;)this.destroyRest(),this.top.dirty=Qt,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1,c=this.top.children.length;i<this.preMatch.index&&(c=Math.min(this.index+3,c));for(let d=this.index;d<c;d++){let f=this.top.children[d];if(f.matchesMark(e[s])&&!this.isLocked(f.dom)){a=d;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let d=vi.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,d),this.top=d,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let o=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))o=this.top.children.indexOf(s,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let c=this.top.children[l];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){o=l;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,i,o){let s=this.top.children[i];return s.dirty==An&&s.dom==s.contentDOM&&(s.dirty=Xr),s.update(e,n,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,o,s){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof Ar){let c=this.preMatch.matched.get(a);if(c!=null&&c!=o)return!1;let d=a.dom,f,p=this.isLocked(d)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=An&&qa(n,a.outerDeco));if(!p&&a.update(e,n,r,i))return this.destroyBetween(this.index,l),a.dom!=d&&(this.changed=!0),this.index++,!0;if(!p&&(f=this.recreateWrapper(a,e,n,r,i,s)))return this.destroyBetween(this.index,l),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=Xr,f.updateChildren(i,s+1),f.dirty=Qt),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,o,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!qa(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let l=Ar.create(this.top,n,r,i,o,s);if(l.contentDOM){l.children=e.children,e.children=[];for(let a of l.children)a.parent=l}return e.destroy(),l}addNode(e,n,r,i,o){let s=Ar.create(this.top,e,n,r,i,o);s.contentDOM&&s.updateChildren(i,o+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new F1(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof vi;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof ru)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((lt||Ge)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new B1(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function $M(t,e){let n=e,r=n.children.length,i=t.childCount,o=new Map,s=[];e:for(;i>0;){let l;for(;;)if(r){let c=n.children[r-1];if(c instanceof vi)n=c,r=c.children.length;else{l=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let a=l.node;if(a){if(a!=t.child(i-1))break;--i,o.set(l,i),s.push(l)}}return{index:i,matched:o,matches:s.reverse()}}function FM(t,e){return t.type.side-e.type.side}function BM(t,e,n,r){let i=e.locals(t),o=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let d=t.child(c);r(d,i,e.forChild(o,d),c),o+=d.nodeSize}return}let s=0,l=[],a=null;for(let c=0;;){let d,f;for(;s<i.length&&i[s].to==o;){let S=i[s++];S.widget&&(d?(f||(f=[d])).push(S):d=S)}if(d)if(f){f.sort(FM);for(let S=0;S<f.length;S++)n(f[S],c,!!a)}else n(d,c,!!a);let p,h;if(a)h=-1,p=a,a=null;else if(c<t.childCount)h=c,p=t.child(c++);else break;for(let S=0;S<l.length;S++)l[S].to<=o&&l.splice(S--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)l.push(i[s++]);let m=o+p.nodeSize;if(p.isText){let S=m;s<i.length&&i[s].from<S&&(S=i[s].from);for(let y=0;y<l.length;y++)l[y].to<S&&(S=l[y].to);S<m&&(a=p.cut(S-o),p=p.cut(0,S-o),m=S,h=-1)}else for(;s<i.length&&i[s].to<m;)s++;let g=p.isInline&&!p.isLeaf?l.filter(S=>!S.inline):l.slice();r(p,g,e.forChild(o,p),h),o=m}}function _M(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function HM(t,e,n,r){for(let i=0,o=0;i<t.childCount&&o<=r;){let s=t.child(i++),l=o;if(o+=s.nodeSize,!s.isText)continue;let a=s.text;for(;i<t.childCount;){let c=t.child(i++);if(o+=c.nodeSize,!c.isText)break;a+=c.text}if(o>=n){if(o>=r&&a.slice(r-e.length-l,r-l)==e)return r-e.length;let c=l<r?a.lastIndexOf(e,r-l-1):-1;if(c>=0&&c+e.length+l>=n)return l+c;if(n==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return-1}function Hf(t,e,n,r,i){let o=[];for(let s=0,l=0;s<t.length;s++){let a=t[s],c=l,d=l+=a.size;c>=n||d<=e?o.push(a):(c<e&&o.push(a.slice(0,e-c,r)),i&&(o.push(i),i=void 0),d>n&&o.push(a.slice(n-c,a.size,r)))}return o}function gh(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),o=i&&i.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let l=r.resolve(s),a,c;if(nu(n)){for(a=s;i&&!i.node;)i=i.parent;let f=i.node;if(i&&f.isAtom&&U.isSelectable(f)&&i.parent&&!(f.isInline&&mM(n.focusNode,n.focusOffset,i.dom))){let p=i.posBefore;c=new U(s==p?l:r.resolve(p))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let f=s,p=s;for(let h=0;h<n.rangeCount;h++){let m=n.getRangeAt(h);f=Math.min(f,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),p=Math.max(p,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(f<0)return null;[a,s]=p==t.state.selection.anchor?[p,f]:[f,p],l=r.resolve(s)}else a=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(a<0)return null}let d=r.resolve(a);if(!c){let f=e=="pointer"||t.state.selection.head<l.pos&&!o?1:-1;c=yh(t,d,l,f)}return c}function V1(t){return t.editable?t.hasFocus():K1(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Vn(t,e=!1){let n=t.state.selection;if(W1(t,n),!!V1(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Ge){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&xi(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)VM(t);else{let{anchor:r,head:i}=n,o,s;uy&&!(n instanceof K)&&(n.$from.parent.inlineContent||(o=dy(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=dy(t,n.to))),t.docView.setSelection(r,i,t,e),uy&&(o&&fy(o),s&&fy(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&UM(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const uy=lt||Ge&&R1<63;function dy(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(lt&&i&&i.contentEditable=="false")return od(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return od(i);if(o)return od(o)}}function od(t){return t.contentEditable="true",lt&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function fy(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function UM(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!V1(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function VM(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,qe(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&wt&&jr<=11&&(n.disabled=!0,n.disabled=!1)}function W1(t,e){if(e instanceof U){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(py(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else py(t)}function py(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function yh(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||K.between(e,n,r)}function hy(t){return t.editable&&!t.hasFocus()?!1:K1(t)}function K1(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function WM(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return xi(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Uf(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return o&&G.findFrom(o,e)}function lr(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function my(t,e,n){let r=t.state.selection;if(r instanceof K)if(n.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let s=t.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return lr(t,new K(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=Uf(t.state,e);return i&&i instanceof U?lr(t,i):!1}else if(!(Ut&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let l=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=t.docView.descAt(l))&&!s.contentDOM?U.isSelectable(o)?lr(t,new U(e<0?t.state.doc.resolve(i.pos-o.nodeSize):i)):ul?lr(t,new K(t.state.doc.resolve(e<0?l:l+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof U&&r.node.isInline)return lr(t,new K(e>0?r.$to:r.$from));{let i=Uf(t.state,e);return i?lr(t,i):!1}}}function Ja(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function fs(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Ri(t,e){return e<0?KM(t):qM(t)}function KM(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,s=!1;for(Yt&&n.nodeType==1&&r<Ja(n)&&fs(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(fs(l,-1))i=n,o=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(q1(n))break;{let l=n.previousSibling;for(;l&&fs(l,-1);)i=n.parentNode,o=qe(l),l=l.previousSibling;if(l)n=l,r=Ja(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?Vf(t,n,r):i&&Vf(t,i,o)}function qM(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Ja(n),o,s;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(fs(l,1))o=n,s=++r;else break}else{if(q1(n))break;{let l=n.nextSibling;for(;l&&fs(l,1);)o=l.parentNode,s=qe(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=Ja(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}o&&Vf(t,o,s)}function q1(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function JM(t,e){for(;t&&e==t.childNodes.length&&!cl(t);)e=qe(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function GM(t,e){for(;t&&!e&&!cl(t);)e=qe(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Vf(t,e,n){if(e.nodeType!=3){let o,s;(s=JM(e,n))?(e=s,n=0):(o=GM(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(!r)return;if(nu(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Vn(t)},50)}function gy(t,e){let n=t.state.doc.resolve(e);if(!(Ge||I1)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function yy(t,e,n){let r=t.state.selection;if(r instanceof K&&!r.empty||n.indexOf("s")>-1||Ut&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=Uf(t.state,e);if(s&&s instanceof U)return lr(t,s)}if(!i.parent.inlineContent){let s=e<0?i:o,l=r instanceof It?G.near(s,e):G.findFrom(s,e);return l?lr(t,l):!1}return!1}function xy(t,e){if(!(t.state.selection instanceof K))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let s=t.state.tr;return e<0?s.delete(n.pos-o.nodeSize,n.pos):s.delete(n.pos,n.pos+o.nodeSize),t.dispatch(s),!0}return!1}function vy(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function YM(t){if(!lt||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;vy(t,r,"true"),setTimeout(()=>vy(t,r,"false"),20)}return!1}function QM(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function XM(t,e){let n=e.keyCode,r=QM(e);if(n==8||Ut&&n==72&&r=="c")return xy(t,-1)||Ri(t,-1);if(n==46&&!e.shiftKey||Ut&&n==68&&r=="c")return xy(t,1)||Ri(t,1);if(n==13||n==27)return!0;if(n==37||Ut&&n==66&&r=="c"){let i=n==37?gy(t,t.state.selection.from)=="ltr"?-1:1:-1;return my(t,i,r)||Ri(t,i)}else if(n==39||Ut&&n==70&&r=="c"){let i=n==39?gy(t,t.state.selection.from)=="ltr"?1:-1:1;return my(t,i,r)||Ri(t,i)}else{if(n==38||Ut&&n==80&&r=="c")return yy(t,-1,r)||Ri(t,-1);if(n==40||Ut&&n==78&&r=="c")return YM(t)||yy(t,1,r)||Ri(t,1);if(r==(Ut?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function xh(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let s=t.someProp("clipboardSerializer")||ki.fromSchema(t.state.schema),l=Z1(),a=l.createElement("div");a.appendChild(s.serializeFragment(r,{document:l}));let c=a.firstChild,d,f=0;for(;c&&c.nodeType==1&&(d=X1[c.nodeName.toLowerCase()]);){for(let h=d.length-1;h>=0;h--){let m=l.createElement(d[h]);for(;a.firstChild;)m.appendChild(a.firstChild);a.appendChild(m),f++}c=a.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${o}${f?` -${f}`:""} ${JSON.stringify(n)}`);let p=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:p,slice:e}}function J1(t,e,n,r,i){let o=i.parent.type.spec.code,s,l;if(!n&&!e)return null;let a=!!e&&(r||o||!n);if(a){if(t.someProp("transformPastedText",p=>{e=p(e,o||r,t)}),o)return l=new P(D.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",p=>{l=p(l,t,!0)}),l;let f=t.someProp("clipboardTextParser",p=>p(e,i,r,t));if(f)l=f;else{let p=i.marks(),{schema:h}=t.state,m=ki.fromSchema(h);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let S=s.appendChild(document.createElement("p"));g&&S.appendChild(m.serializeNode(h.text(g,p)))})}}else t.someProp("transformPastedHTML",f=>{n=f(n,t)}),s=nj(n),ul&&rj(s);let c=s&&s.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let f=+d[3];f>0;f--){let p=s.firstChild;for(;p&&p.nodeType!=1;)p=p.nextSibling;if(!p)break;s=p}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||cs.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(a||d),context:i,ruleFromNode(p){return p.nodeName=="BR"&&!p.nextSibling&&p.parentNode&&!ZM.test(p.parentNode.nodeName)?{ignore:!0}:null}})),d)l=ij(Sy(l,+d[1],+d[2]),d[4]);else if(l=P.maxOpen(ej(l.content,i),!0),l.openStart||l.openEnd){let f=0,p=0;for(let h=l.content.firstChild;f<l.openStart&&!h.type.spec.isolating;f++,h=h.firstChild);for(let h=l.content.lastChild;p<l.openEnd&&!h.type.spec.isolating;p++,h=h.lastChild);l=Sy(l,f,p)}return t.someProp("transformPasted",f=>{l=f(l,t,a)}),l}const ZM=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function ej(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),o,s=[];if(t.forEach(l=>{if(!s)return;let a=i.findWrapping(l.type),c;if(!a)return s=null;if(c=s.length&&o.length&&Y1(a,o,l,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=Q1(s[s.length-1],o.length));let d=G1(l,a);s.push(d),i=i.matchType(d.type),o=a}}),s)return D.from(s)}return t}function G1(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,D.from(t));return t}function Y1(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let o=Y1(t,e,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(D.from(G1(n,t,i+1))))}}function Q1(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,Q1(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(D.empty,!0);return t.copy(n.append(r))}function Wf(t,e,n,r,i,o){let s=e<0?t.firstChild:t.lastChild,l=s.content;return t.childCount>1&&(o=0),i<r-1&&(l=Wf(l,e,n,r,i+1,o)),i>=n&&(l=e<0?s.contentMatchAt(0).fillBefore(l,o<=i).append(l):l.append(s.contentMatchAt(s.childCount).fillBefore(D.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(l))}function Sy(t,e,n){return e<t.openStart&&(t=new P(Wf(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new P(Wf(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const X1={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let by=null;function Z1(){return by||(by=document.implementation.createHTMLDocument("title"))}let sd=null;function tj(t){let e=window.trustedTypes;return e?(sd||(sd=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),sd.createHTML(t)):t}function nj(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=Z1().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&X1[r[1].toLowerCase()])&&(t=i.map(o=>"<"+o+">").join("")+t+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=tj(t),i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function rj(t){let e=t.querySelectorAll(Ge?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function ij(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:o,openEnd:s}=t;for(let l=r.length-2;l>=0;l-=2){let a=n.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;i=D.from(a.create(r[l+1],i)),o++,s++}return new P(i,o,s)}const dt={},ft={},oj={touchstart:!0,touchmove:!0};class sj{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function lj(t){for(let e in dt){let n=dt[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{cj(t,r)&&!vh(t,r)&&(t.editable||!(r.type in ft))&&n(t,r)},oj[e]?{passive:!0}:void 0)}lt&&t.dom.addEventListener("input",()=>null),Kf(t)}function xr(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function aj(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Kf(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>vh(t,r))})}function vh(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function cj(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function uj(t,e){!vh(t,e)&&dt[e.type]&&(t.editable||!(e.type in ft))&&dt[e.type](t,e)}ft.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!tS(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(_n&&Ge&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),mo&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Kr(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||XM(t,n)?n.preventDefault():xr(t,"key")};ft.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};ft.keypress=(t,e)=>{let n=e;if(tS(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Ut&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof K)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),o=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,i,o))&&t.dispatch(o()),n.preventDefault()}};function iu(t){return{left:t.clientX,top:t.clientY}}function dj(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Sh(t,e,n,r,i){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(t.someProp(e,l=>s>o.depth?l(t,n,o.nodeAfter,o.before(s),i,!0):l(t,n,o.node(s),o.before(s),i,!1)))return!0;return!1}function ro(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function fj(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&U.isSelectable(r)?(ro(t,new U(n)),!0):!1}function pj(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof U&&(r=n.node);let o=t.state.doc.resolve(e);for(let s=o.depth+1;s>0;s--){let l=s>o.depth?o.nodeAfter:o.node(s);if(U.isSelectable(l)){r&&n.$from.depth>0&&s>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(s);break}}return i!=null?(ro(t,U.create(t.state.doc,i)),!0):!1}function hj(t,e,n,r,i){return Sh(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(i?pj(t,n):fj(t,n))}function mj(t,e,n,r){return Sh(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function gj(t,e,n,r){return Sh(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||yj(t,n,r)}function yj(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(ro(t,K.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),l=i.before(o);if(s.inlineContent)ro(t,K.create(r,l+1,l+1+s.content.size));else if(U.isSelectable(s))ro(t,U.create(r,l));else continue;return!0}}function bh(t){return Ga(t)}const eS=Ut?"metaKey":"ctrlKey";dt.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=bh(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&dj(n,t.input.lastClick)&&!n[eS]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o,button:n.button};let s=t.posAtCoords(iu(n));s&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new xj(t,s,n,!!r)):(o=="doubleClick"?mj:gj)(t,s.pos,s.inside,n)?n.preventDefault():xr(t,"pointer"))};class xj{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[eS],this.allowDefault=r.shiftKey;let o,s;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),s=n.inside;else{let d=e.state.doc.resolve(n.pos);o=d.parent,s=d.depth?d.before():0}const l=i?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a&&a.nodeDOM.nodeType==1?a.nodeDOM:null;let{selection:c}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||c instanceof U&&c.from<=s&&c.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Yt&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),xr(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Vn(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(iu(e))),this.updateAllowDefault(e),this.allowDefault||!n?xr(this.view,"pointer"):hj(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||lt&&this.mightDrag&&!this.mightDrag.node.isAtom||Ge&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(ro(this.view,G.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):xr(this.view,"pointer")}move(e){this.updateAllowDefault(e),xr(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}dt.touchstart=t=>{t.input.lastTouch=Date.now(),bh(t),xr(t,"pointer")};dt.touchmove=t=>{t.input.lastTouch=Date.now(),xr(t,"pointer")};dt.contextmenu=t=>bh(t);function tS(t,e){return t.composing?!0:lt&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const vj=_n?5e3:-1;ft.compositionstart=ft.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof K&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||Ge&&I1&&Sj(t)))t.markCursor=t.state.storedMarks||n.marks(),Ga(t,!0),t.markCursor=null;else if(Ga(t,!e.selection.empty),Yt&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){let l=t.domSelection();l&&l.collapse(s,s.nodeValue.length);break}else i=s,o=-1}}t.input.composing=!0}nS(t,vj)};function Sj(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}ft.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.badSafariComposition?t.domObserver.forceFlush():t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,nS(t,20))};function nS(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Ga(t),e))}function rS(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=wj());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function bj(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=pM(e.focusNode,e.focusOffset),r=hM(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,o=t.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function wj(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Ga(t,e=!1){if(!(_n&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),rS(t),e||t.docView&&t.docView.dirty){let n=gh(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function kj(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Ks=wt&&jr<15||mo&&xM<604;dt.copy=ft.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let o=Ks?null:n.clipboardData,s=r.content(),{dom:l,text:a}=xh(t,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",l.innerHTML),o.setData("text/plain",a)):kj(t,l),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Cj(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function Ej(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?qs(t,r.value,null,i,e):qs(t,r.textContent,r.innerHTML,i,e)},50)}function qs(t,e,n,r,i){let o=J1(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",a=>a(t,i,o||P.empty)))return!0;if(!o)return!1;let s=Cj(o),l=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(o);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function iS(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}ft.paste=(t,e)=>{let n=e;if(t.composing&&!_n)return;let r=Ks?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&qs(t,iS(r),r.getData("text/html"),i,n)?n.preventDefault():Ej(t,n)};class oS{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const Tj=Ut?"altKey":"ctrlKey";function sS(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[Tj]}dt.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,o=i.empty?null:t.posAtCoords(iu(n)),s;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof U?i.to-1:i.to))){if(r&&r.mightDrag)s=U.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=t.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=t.docView&&(s=U.create(t.state.doc,f.posBefore))}}let l=(s||t.state.selection).content(),{dom:a,text:c,slice:d}=xh(t,l);(!n.dataTransfer.files.length||!Ge||R1>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Ks?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",Ks||n.dataTransfer.setData("text/plain",c),t.dragging=new oS(d,sS(t,n),s)};dt.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};ft.dragover=ft.dragenter=(t,e)=>e.preventDefault();ft.drop=(t,e)=>{try{Mj(t,e,t.dragging)}finally{t.dragging=null}};function Mj(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(iu(e));if(!r)return;let i=t.state.doc.resolve(r.pos),o=n&&n.slice;o?t.someProp("transformPasted",h=>{o=h(o,t,!1)}):o=J1(t,iS(e.dataTransfer),Ks?null:e.dataTransfer.getData("text/html"),!1,i);let s=!!(n&&sS(t,e));if(t.someProp("handleDrop",h=>h(t,e,o||P.empty,s))){e.preventDefault();return}if(!o)return;e.preventDefault();let l=o?w1(t.state.doc,i.pos,o):i.pos;l==null&&(l=i.pos);let a=t.state.tr;if(s){let{node:h}=n;h?h.replace(a):a.deleteSelection()}let c=a.mapping.map(l),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,f=a.doc;if(d?a.replaceRangeWith(c,c,o.content.firstChild):a.replaceRange(c,c,o),a.doc.eq(f))return;let p=a.doc.resolve(c);if(d&&U.isSelectable(o.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(o.content.firstChild))a.setSelection(new U(p));else{let h=a.mapping.map(l);a.mapping.maps[a.mapping.maps.length-1].forEach((m,g,S,y)=>h=y),a.setSelection(yh(t,p,a.doc.resolve(h)))}t.focus(),t.dispatch(a.setMeta("uiEvent","drop"))}dt.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Vn(t)},20))};dt.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};dt.beforeinput=(t,e)=>{if(Ge&&_n&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,Kr(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in ft)dt[t]=ft[t];function Js(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Ya{constructor(e,n){this.toDOM=e,this.spec=n||si,this.side=this.spec.side||0}map(e,n,r,i){let{pos:o,deleted:s}=e.mapResult(n.from+i,this.side<0?-1:1);return s?null:new Jt(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Ya&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Js(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Dr{constructor(e,n){this.attrs=e,this.spec=n||si}map(e,n,r,i){let o=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new Jt(o,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Dr&&Js(this.attrs,e.attrs)&&Js(this.spec,e.spec)}static is(e){return e.type instanceof Dr}destroy(){}}class wh{constructor(e,n){this.attrs=e,this.spec=n||si}map(e,n,r,i){let o=e.mapResult(n.from+i,1);if(o.deleted)return null;let s=e.mapResult(n.to+i,-1);return s.deleted||s.pos<=o.pos?null:new Jt(o.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),o;return i==n.from&&!(o=e.child(r)).isText&&i+o.nodeSize==n.to}eq(e){return this==e||e instanceof wh&&Js(this.attrs,e.attrs)&&Js(this.spec,e.spec)}destroy(){}}class Jt{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Jt(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Jt(e,e,new Ya(n,r))}static inline(e,n,r,i){return new Jt(e,n,new Dr(r,i))}static node(e,n,r,i){return new Jt(e,n,new wh(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Dr}get widget(){return this.type instanceof Ya}}const Oi=[],si={};class Re{constructor(e,n){this.local=e.length?e:Oi,this.children=n.length?n:Oi}static create(e,n){return n.length?Qa(n,e,0,si):it}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,o){for(let s=0;s<this.local.length;s++){let l=this.local[s];l.from<=n&&l.to>=e&&(!o||o(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let l=this.children[s]+1;this.children[s+2].findInner(e-l,n-l,r,i+l,o)}}map(e,n,r){return this==it||e.maps.length==0?this:this.mapInner(e,n,0,0,r||si)}mapInner(e,n,r,i,o){let s;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,i);a&&a.type.valid(n,a)?(s||(s=[])).push(a):o.onRemove&&o.onRemove(this.local[l].spec)}return this.children.length?jj(this.children,s||[],e,n,r,i,o):s?new Re(s.sort(li),Oi):it}add(e,n){return n.length?this==it?Re.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,o=0;e.forEach((l,a)=>{let c=a+r,d;if(d=aS(n,l,c)){for(i||(i=this.children.slice());o<i.length&&i[o]<a;)o+=3;i[o]==a?i[o+2]=i[o+2].addInner(l,d,c+1):i.splice(o,0,a,a+l.nodeSize,Qa(d,l,c+1,si)),o+=3}});let s=lS(o?cS(n):n,-r);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||s.splice(l--,1);return new Re(s.length?this.local.concat(s).sort(li):this.local,i||this.children)}remove(e){return e.length==0||this==it?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let s,l=r[o]+n,a=r[o+1]+n;for(let d=0,f;d<e.length;d++)(f=e[d])&&f.from>l&&f.to<a&&(e[d]=null,(s||(s=[])).push(f));if(!s)continue;r==this.children&&(r=this.children.slice());let c=r[o+2].removeInner(s,l+1);c!=it?r[o+2]=c:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<e.length;o++)if(s=e[o])for(let l=0;l<i.length;l++)i[l].eq(s,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Re(i,r):it}forChild(e,n){if(this==it)return this;if(n.isLeaf)return Re.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let o=e+1,s=o+n.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<s&&a.to>o&&a.type instanceof Dr){let c=Math.max(o,a.from)-o,d=Math.min(s,a.to)-o;c<d&&(i||(i=[])).push(a.copy(c,d))}}if(i){let l=new Re(i.sort(li),Oi);return r?new fr([l,r]):l}return r||it}eq(e){if(this==e)return!0;if(!(e instanceof Re)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return kh(this.localsInner(e))}localsInner(e){if(this==it)return Oi;if(e.inlineContent||!this.local.some(Dr.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Dr||n.push(this.local[r]);return n}forEachSet(e){e(this)}}Re.empty=new Re([],[]);Re.removeOverlap=kh;const it=Re.empty;class fr{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,si));return fr.from(r)}forChild(e,n){if(n.isLeaf)return Re.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,n);o!=it&&(o instanceof fr?r=r.concat(o.members):r.push(o))}return fr.from(r)}eq(e){if(!(e instanceof fr)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let s=0;s<o.length;s++)n.push(o[s])}}return n?kh(r?n:n.sort(li)):Oi}static from(e){switch(e.length){case 0:return it;case 1:return e[0];default:return new fr(e.every(n=>n instanceof Re)?e:e.reduce((n,r)=>n.concat(r instanceof Re?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function jj(t,e,n,r,i,o,s){let l=t.slice();for(let c=0,d=o;c<n.maps.length;c++){let f=0;n.maps[c].forEach((p,h,m,g)=>{let S=g-m-(h-p);for(let y=0;y<l.length;y+=3){let x=l[y+1];if(x<0||p>x+d-f)continue;let v=l[y]+d-f;h>=v?l[y+1]=p<=v?-2:-1:p>=d&&S&&(l[y]+=S,l[y+1]+=S)}f+=S}),d=n.maps[c].map(d,-1)}let a=!1;for(let c=0;c<l.length;c+=3)if(l[c+1]<0){if(l[c+1]==-2){a=!0,l[c+1]=-1;continue}let d=n.map(t[c]+o),f=d-i;if(f<0||f>=r.content.size){a=!0;continue}let p=n.map(t[c+1]+o,-1),h=p-i,{index:m,offset:g}=r.content.findIndex(f),S=r.maybeChild(m);if(S&&g==f&&g+S.nodeSize==h){let y=l[c+2].mapInner(n,S,d+1,t[c]+o+1,s);y!=it?(l[c]=f,l[c+1]=h,l[c+2]=y):(l[c+1]=-2,a=!0)}else a=!0}if(a){let c=Aj(l,t,e,n,i,o,s),d=Qa(c,r,0,s);e=d.local;for(let f=0;f<l.length;f+=3)l[f+1]<0&&(l.splice(f,3),f-=3);for(let f=0,p=0;f<d.children.length;f+=3){let h=d.children[f];for(;p<l.length&&l[p]<h;)p+=3;l.splice(p,0,d.children[f],d.children[f+1],d.children[f+2])}}return new Re(e.sort(li),l)}function lS(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new Jt(i.from+e,i.to+e,i.type))}return n}function Aj(t,e,n,r,i,o,s){function l(a,c){for(let d=0;d<a.local.length;d++){let f=a.local[d].map(r,i,c);f?n.push(f):s.onRemove&&s.onRemove(a.local[d].spec)}for(let d=0;d<a.children.length;d+=3)l(a.children[d+2],a.children[d]+c+1)}for(let a=0;a<t.length;a+=3)t[a+1]==-1&&l(t[a+2],e[a]+o+1);return n}function aS(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o=0,s;o<t.length;o++)(s=t[o])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),t[o]=null);return i}function cS(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Qa(t,e,n,r){let i=[],o=!1;e.forEach((l,a)=>{let c=aS(t,l,a+n);if(c){o=!0;let d=Qa(c,l,n+a+1,r);d!=it&&i.push(a,a+l.nodeSize,d)}});let s=lS(o?cS(t):t,-n).sort(li);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||(r.onRemove&&r.onRemove(s[l].spec),s.splice(l--,1));return s.length||i.length?new Re(s,i):it}function li(t,e){return t.from-e.from||t.to-e.to}function kh(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),wy(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),wy(e,i,r.copy(o.from,r.to)));break}}}return e}function wy(t,e,n){for(;e<t.length&&li(n,t[e])>0;)e++;t.splice(e,0,n)}function ld(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=it&&e.push(r)}),t.cursorWrapper&&e.push(Re.create(t.state.doc,[t.cursorWrapper.deco])),fr.from(e)}const Dj={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Rj=wt&&jr<=11;class Ij{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class Oj{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Ij,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);wt&&jr<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():lt&&e.composing&&r.some(i=>i.type=="childList"&&i.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),Rj&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Dj)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(hy(this.view)){if(this.suppressingSelectionUpdates)return Vn(this.view);if(wt&&jr<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&xi(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let o=e.focusNode;o;o=ho(o))n.add(o);for(let o=e.anchorNode;o;o=ho(o))if(n.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&hy(e)&&!this.ignoreSelectionChange(r),o=-1,s=-1,l=!1,a=[];if(e.editable)for(let d=0;d<n.length;d++){let f=this.registerMutation(n[d],a);f&&(o=o<0?f.from:Math.min(f.from,o),s=s<0?f.to:Math.max(f.to,s),f.typeOver&&(l=!0))}if(a.some(d=>d.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let d of a)if(d.nodeName=="BR"&&d.parentNode){let f=d.nextSibling;f&&f.nodeType==1&&f.contentEditable=="false"&&d.parentNode.removeChild(d)}}else if(Yt&&a.length){let d=a.filter(f=>f.nodeName=="BR");if(d.length==2){let[f,p]=d;f.parentNode&&f.parentNode.parentNode==p.parentNode?p.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let p of d){let h=p.parentNode;h&&h.nodeName=="LI"&&(!f||Pj(e,f)!=h)&&p.remove()}}}let c=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&nu(r)&&(c=gh(e))&&c.eq(G.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Vn(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,s),Nj(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,Lj(e,a)),this.handleDOMChange(o,s,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Vn(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let f=e.addedNodes[d];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(wt&&jr<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:f,nextSibling:p}=e.addedNodes[d];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f),(!p||Array.prototype.indexOf.call(e.addedNodes,p)<0)&&(o=p)}let s=i&&i.parentNode==e.target?qe(i)+1:0,l=r.localPosFromDOM(e.target,s,-1),a=o&&o.parentNode==e.target?qe(o):e.target.childNodes.length,c=r.localPosFromDOM(e.target,a,1);return{from:l,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let ky=new WeakMap,Cy=!1;function Nj(t){if(!ky.has(t)&&(ky.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Yt,Cy)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Cy=!0}}function Ey(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,s=t.domAtPos(t.state.selection.anchor);return xi(s.node,s.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function zj(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return Ey(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?Ey(t,n):null}function Pj(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function Lj(t,e){var n;let{focusNode:r,focusOffset:i}=t.domSelectionRange();for(let o of e)if(((n=o.parentNode)===null||n===void 0?void 0:n.nodeName)=="TR"){let s=o.nextSibling;for(;s&&s.nodeName!="TD"&&s.nodeName!="TH";)s=s.nextSibling;if(s){let l=s;for(;;){let a=l.firstChild;if(!a||a.nodeType!=1||a.contentEditable=="false"||/^(BR|IMG)$/.test(a.nodeName))break;l=a}l.insertBefore(o,l.firstChild),r==o&&t.domSelection().collapse(o,i)}else o.parentNode.removeChild(o)}}function $j(t,e,n){let{node:r,fromOffset:i,toOffset:o,from:s,to:l}=t.docView.parseRange(e,n),a=t.domSelectionRange(),c,d=a.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(c=[{node:d,offset:a.anchorOffset}],nu(a)||c.push({node:a.focusNode,offset:a.focusOffset})),Ge&&t.input.lastKeyCode===8)for(let S=o;S>i;S--){let y=r.childNodes[S-1],x=y.pmViewDesc;if(y.nodeName=="BR"&&!x){o=S;break}if(!x||x.size)break}let f=t.state.doc,p=t.someProp("domParser")||cs.fromSchema(t.state.schema),h=f.resolve(s),m=null,g=p.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:o,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:Fj,context:h});if(c&&c[0].pos!=null){let S=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=S),m={anchor:S+s,head:y+s}}return{doc:g,sel:m,from:s,to:l}}function Fj(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(lt&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||lt&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Bj=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function _j(t,e,n,r,i){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let C=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,E=gh(t,C);if(E&&!t.state.selection.eq(E)){if(Ge&&_n&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",N=>N(t,Kr(13,"Enter"))))return;let O=t.state.tr.setSelection(E);C=="pointer"?O.setMeta("pointer",!0):C=="key"&&O.scrollIntoView(),o&&O.setMeta("composition",o),t.dispatch(O)}return}let s=t.state.doc.resolve(e),l=s.sharedDepth(n);e=s.before(l+1),n=t.state.doc.resolve(n).after(l+1);let a=t.state.selection,c=$j(t,e,n),d=t.state.doc,f=d.slice(c.from,c.to),p,h;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(p=t.state.selection.to,h="end"):(p=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let m=Vj(f.content,c.doc.content,c.from,p,h);if(m&&t.input.domChangeCount++,(mo&&t.input.lastIOSEnter>Date.now()-225||_n)&&i.some(C=>C.nodeType==1&&!Bj.test(C.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",C=>C(t,Kr(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(r&&a instanceof K&&!a.empty&&a.$head.sameParent(a.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))m={start:a.from,endA:a.to,endB:a.to};else{if(c.sel){let C=Ty(t,t.state.doc,c.sel);if(C&&!C.eq(t.state.selection)){let E=t.state.tr.setSelection(C);o&&E.setMeta("composition",o),t.dispatch(E)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof K&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),wt&&jr<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>c.from&&c.doc.textBetween(m.start-c.from-1,m.start-c.from+1)==" "&&(m.start--,m.endA--,m.endB--);let g=c.doc.resolveNoCache(m.start-c.from),S=c.doc.resolveNoCache(m.endB-c.from),y=d.resolve(m.start),x=g.sameParent(S)&&g.parent.inlineContent&&y.end()>=m.endA;if((mo&&t.input.lastIOSEnter>Date.now()-225&&(!x||i.some(C=>C.nodeName=="DIV"||C.nodeName=="P"))||!x&&g.pos<c.doc.content.size&&(!g.sameParent(S)||!g.parent.inlineContent)&&g.pos<S.pos&&!/\S/.test(c.doc.textBetween(g.pos,S.pos,"","")))&&t.someProp("handleKeyDown",C=>C(t,Kr(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&Uj(d,m.start,m.endA,g,S)&&t.someProp("handleKeyDown",C=>C(t,Kr(8,"Backspace")))){_n&&Ge&&t.domObserver.suppressSelectionUpdates();return}Ge&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),_n&&!x&&g.start()!=S.start()&&S.parentOffset==0&&g.depth==S.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==m.endA&&(m.endB-=2,S=c.doc.resolveNoCache(m.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(C){return C(t,Kr(13,"Enter"))})},20));let v=m.start,w=m.endA,k=C=>{let E=C||t.state.tr.replace(v,w,c.doc.slice(m.start-c.from,m.endB-c.from));if(c.sel){let O=Ty(t,E.doc,c.sel);O&&!(Ge&&t.composing&&O.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(O.head==v||O.head==E.mapping.map(w)-1)||wt&&O.empty&&O.head==v)&&E.setSelection(O)}return o&&E.setMeta("composition",o),E.scrollIntoView()},T;if(x)if(g.pos==S.pos){wt&&jr<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Vn(t),20));let C=k(t.state.tr.delete(v,w)),E=d.resolve(m.start).marksAcross(d.resolve(m.endA));E&&C.ensureMarks(E),t.dispatch(C)}else if(m.endA==m.endB&&(T=Hj(g.parent.content.cut(g.parentOffset,S.parentOffset),y.parent.content.cut(y.parentOffset,m.endA-y.start())))){let C=k(t.state.tr);T.type=="add"?C.addMark(v,w,T.mark):C.removeMark(v,w,T.mark),t.dispatch(C)}else if(g.parent.child(g.index()).isText&&g.index()==S.index()-(S.textOffset?0:1)){let C=g.parent.textBetween(g.parentOffset,S.parentOffset),E=()=>k(t.state.tr.insertText(C,v,w));t.someProp("handleTextInput",O=>O(t,v,w,C,E))||t.dispatch(E())}else t.dispatch(k());else t.dispatch(k())}function Ty(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:yh(t,e.resolve(n.anchor),e.resolve(n.head))}function Hj(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,o=r,s,l,a;for(let d=0;d<r.length;d++)i=r[d].removeFromSet(i);for(let d=0;d<n.length;d++)o=n[d].removeFromSet(o);if(i.length==1&&o.length==0)l=i[0],s="add",a=d=>d.mark(l.addToSet(d.marks));else if(i.length==0&&o.length==1)l=o[0],s="remove",a=d=>d.mark(l.removeFromSet(d.marks));else return null;let c=[];for(let d=0;d<e.childCount;d++)c.push(a(e.child(d)));if(D.from(c).eq(t))return{mark:l,type:s}}function Uj(t,e,n,r,i){if(n-e<=i.pos-r.pos||ad(r,!0,!1)<i.pos)return!1;let o=t.resolve(e);if(!r.parent.isTextblock){let l=o.nodeAfter;return l!=null&&n==e+l.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=t.resolve(ad(o,!0,!0));return!s.parent.isTextblock||s.pos>n||ad(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function ad(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function Vj(t,e,n,r,i){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:s,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let a=Math.max(0,o-Math.min(s,l));r-=s+a-o}if(s<o&&t.size<e.size){let a=r<=o&&r>=s?o-r:0;o-=a,o&&o<e.size&&My(e.textBetween(o-1,o+1))&&(o+=a?1:-1),l=o+(l-s),s=o}else if(l<o){let a=r<=o&&r>=l?o-r:0;o-=a,o&&o<t.size&&My(t.textBetween(o-1,o+1))&&(o+=a?1:-1),s=o+(s-l),l=o}return{start:o,endA:s,endB:l}}function My(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class uS{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new sj,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Iy),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Dy(this),Ay(this),this.nodeViews=Ry(this),this.docView=ay(this.state.doc,jy(this),ld(this),this.dom,this),this.domObserver=new Oj(this,(r,i,o,s)=>_j(this,r,i,o,s)),this.domObserver.start(),lj(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Kf(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Iy),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,o=!1,s=!1;e.storedMarks&&this.composing&&(rS(this),s=!0),this.state=e;let l=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=Ry(this);Kj(h,this.nodeViews)&&(this.nodeViews=h,o=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&Kf(this),this.editable=Dy(this),Ay(this);let a=ld(this),c=jy(this),d=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=o||!this.docView.matchesNode(e.doc,c,a);(f||!e.selection.eq(i.selection))&&(s=!0);let p=d=="preserve"&&s&&this.dom.style.overflowAnchor==null&&bM(this);if(s){this.domObserver.stop();let h=f&&(wt||Ge)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&Wj(i.selection,e.selection);if(f){let m=Ge?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=bj(this)),(o||!this.docView.update(e.doc,c,a,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=ay(e.doc,c,a,this.dom,this)),m&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&WM(this))?Vn(this,h):(W1(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():p&&wM(p)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof U){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&ny(this,n.getBoundingClientRect(),e)}else ny(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new oS(e.slice,e.move,i<0?void 0:U.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let l=this.directPlugins[s].props[e];if(l!=null&&(i=n?n(l):l))return i}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let l=o[s].props[e];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(wt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&kM(this.dom),Vn(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return jM(this,e)}coordsAtPos(e,n=1){return L1(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return OM(this,n||this.state,e)}pasteHTML(e,n){return qs(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return qs(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return xh(this,e)}destroy(){this.docView&&(aj(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],ld(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,dM())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return uj(this,e)}domSelectionRange(){let e=this.domSelection();return e?lt&&this.root.nodeType===11&&gM(this.dom.ownerDocument)==this.dom&&zj(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}uS.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function jy(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Jt.node(0,t.state.doc.content.size,e)]}function Ay(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Jt.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Dy(t){return!t.someProp("editable",e=>e(t.state)===!1)}function Wj(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Ry(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function Kj(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function Iy(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Or={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Xa={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},qj=typeof navigator<"u"&&/Mac/.test(navigator.platform),Jj=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Je=0;Je<10;Je++)Or[48+Je]=Or[96+Je]=String(Je);for(var Je=1;Je<=24;Je++)Or[Je+111]="F"+Je;for(var Je=65;Je<=90;Je++)Or[Je]=String.fromCharCode(Je+32),Xa[Je]=String.fromCharCode(Je);for(var cd in Or)Xa.hasOwnProperty(cd)||(Xa[cd]=Or[cd]);function Gj(t){var e=qj&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Jj&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Xa:Or)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const Yj=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Qj=typeof navigator<"u"&&/Win/.test(navigator.platform);function Xj(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,o,s;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))Yj?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),s&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function Zj(t){let e=Object.create(null);for(let n in t)e[Xj(n)]=t[n];return e}function ud(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function eA(t){return new Ze({props:{handleKeyDown:dS(t)}})}function dS(t){let e=Zj(t);return function(n,r){let i=Gj(r),o,s=e[ud(i,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[ud(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(Qj&&r.ctrlKey&&r.altKey)&&(o=Or[r.keyCode])&&o!=i){let l=e[ud(o,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const Ch=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function fS(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const pS=(t,e,n)=>{let r=fS(t,n);if(!r)return!1;let i=Eh(r);if(!i){let s=r.blockRange(),l=s&&Eo(s);return l==null?!1:(e&&e(t.tr.lift(s,l).scrollIntoView()),!0)}let o=i.nodeBefore;if(wS(t,i,e,-1))return!0;if(r.parent.content.size==0&&(go(o,"end")||U.isSelectable(o)))for(let s=r.depth;;s--){let l=eu(t.doc,r.before(s),r.after(s),P.empty);if(l&&l.slice.size<l.to-l.from){if(e){let a=t.tr.step(l);a.setSelection(go(o,"end")?G.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):U.create(a.doc,i.pos-o.nodeSize)),e(a.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},tA=(t,e,n)=>{let r=fS(t,n);if(!r)return!1;let i=Eh(r);return i?hS(t,i,e):!1},nA=(t,e,n)=>{let r=gS(t,n);if(!r)return!1;let i=Th(r);return i?hS(t,i,e):!1};function hS(t,e,n){let r=e.nodeBefore,i=r,o=e.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let d=i.lastChild;if(!d)return!1;i=d}let s=e.nodeAfter,l=s,a=e.pos+1;for(;!l.isTextblock;a++){if(l.type.spec.isolating)return!1;let d=l.firstChild;if(!d)return!1;l=d}let c=eu(t.doc,o,a,P.empty);if(!c||c.from!=o||c instanceof Le&&c.slice.size>=a-o)return!1;if(n){let d=t.tr.step(c);d.setSelection(K.create(d.doc,o)),n(d.scrollIntoView())}return!0}function go(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const mS=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=Eh(r)}let s=o&&o.nodeBefore;return!s||!U.isSelectable(s)?!1:(e&&e(t.tr.setSelection(U.create(t.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function Eh(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function gS(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const yS=(t,e,n)=>{let r=gS(t,n);if(!r)return!1;let i=Th(r);if(!i)return!1;let o=i.nodeAfter;if(wS(t,i,e,1))return!0;if(r.parent.content.size==0&&(go(o,"start")||U.isSelectable(o))){let s=eu(t.doc,r.before(),r.after(),P.empty);if(s&&s.slice.size<s.to-s.from){if(e){let l=t.tr.step(s);l.setSelection(go(o,"start")?G.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):U.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},xS=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=Th(r)}let s=o&&o.nodeAfter;return!s||!U.isSelectable(s)?!1:(e&&e(t.tr.setSelection(U.create(t.doc,o.pos)).scrollIntoView()),!0)};function Th(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const rA=(t,e)=>{let n=t.selection,r=n instanceof U,i;if(r){if(n.node.isTextblock||!$r(t.doc,n.from))return!1;i=n.from}else if(i=Zc(t.doc,n.from,-1),i==null)return!1;if(e){let o=t.tr.join(i);r&&o.setSelection(U.create(o.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},iA=(t,e)=>{let n=t.selection,r;if(n instanceof U){if(n.node.isTextblock||!$r(t.doc,n.to))return!1;r=n.to}else if(r=Zc(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},oA=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&Eo(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},vS=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Mh(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const sA=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=Mh(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(e){let l=n.after(),a=t.tr.replaceWith(l,l,s.createAndFill());a.setSelection(G.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},SS=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof It||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=Mh(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=t.tr.insert(s,o.createAndFill());l.setSelection(K.create(l.doc,s+1)),e(l.scrollIntoView())}return!0},bS=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(Un(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Eo(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function lA(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof U&&e.selection.node.isBlock)return!r.parentOffset||!Un(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],s,l,a=!1,c=!1;for(let h=r.depth;;h--)if(r.node(h).isBlock){a=r.end(h)==r.pos+(r.depth-h),c=r.start(h)==r.pos-(r.depth-h),l=Mh(r.node(h-1).contentMatchAt(r.indexAfter(h-1))),o.unshift(a&&l?{type:l}:null),s=h;break}else{if(h==1)return!1;o.unshift(null)}let d=e.tr;(e.selection instanceof K||e.selection instanceof It)&&d.deleteSelection();let f=d.mapping.map(r.pos),p=Un(d.doc,f,o.length,o);if(p||(o[0]=l?{type:l}:null,p=Un(d.doc,f,o.length,o)),!p)return!1;if(d.split(f,o.length,o),!a&&c&&r.node(s).type!=l){let h=d.mapping.map(r.before(s)),m=d.doc.resolve(h);l&&r.node(s-1).canReplaceWith(m.index(),m.index()+1,l)&&d.setNodeMarkup(d.mapping.map(r.before(s)),l)}return n&&n(d.scrollIntoView()),!0}}const aA=lA(),cA=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection(U.create(t.doc,i))),!0)};function uA(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||$r(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function wS(t,e,n,r){let i=e.nodeBefore,o=e.nodeAfter,s,l,a=i.type.spec.isolating||o.type.spec.isolating;if(!a&&uA(t,e,n))return!0;let c=!a&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(s=(l=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&l.matchType(s[0]||o.type).validEnd){if(n){let h=e.pos+o.nodeSize,m=D.empty;for(let y=s.length-1;y>=0;y--)m=D.from(s[y].create(null,m));m=D.from(i.copy(m));let g=t.tr.step(new Fe(e.pos-1,h,e.pos,h,new P(m,1,0),s.length,!0)),S=g.doc.resolve(h+2*s.length);S.nodeAfter&&S.nodeAfter.type==i.type&&$r(g.doc,S.pos)&&g.join(S.pos),n(g.scrollIntoView())}return!0}let d=o.type.spec.isolating||r>0&&a?null:G.findFrom(e,1),f=d&&d.$from.blockRange(d.$to),p=f&&Eo(f);if(p!=null&&p>=e.depth)return n&&n(t.tr.lift(f,p).scrollIntoView()),!0;if(c&&go(o,"start",!0)&&go(i,"end")){let h=i,m=[];for(;m.push(h),!h.isTextblock;)h=h.lastChild;let g=o,S=1;for(;!g.isTextblock;g=g.firstChild)S++;if(h.canReplace(h.childCount,h.childCount,g.content)){if(n){let y=D.empty;for(let v=m.length-1;v>=0;v--)y=D.from(m[v].copy(y));let x=t.tr.step(new Fe(e.pos-m.length,e.pos+o.nodeSize,e.pos+S,e.pos+o.nodeSize-S,new P(y,m.length,0),0,!0));n(x.scrollIntoView())}return!0}}return!1}function kS(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection(K.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}const dA=kS(-1),fA=kS(1);function pA(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),l=s&&ph(s,t,e);return l?(r&&r(n.tr.wrap(s,l).scrollIntoView()),!0):!1}}function Oy(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:s},$to:{pos:l}}=n.selection.ranges[o];n.doc.nodesBetween(s,l,(a,c)=>{if(i)return!1;if(!(!a.isTextblock||a.hasMarkup(t,e)))if(a.type==t)i=!0;else{let d=n.doc.resolve(c),f=d.index();i=d.parent.canReplaceWith(f,f+1,t)}})}if(!i)return!1;if(r){let o=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:l},$to:{pos:a}}=n.selection.ranges[s];o.setBlockType(l,a,t,e)}r(o.scrollIntoView())}return!0}}function jh(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}jh(Ch,pS,mS);jh(Ch,yS,xS);jh(vS,SS,bS,aA);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function hA(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o);if(!s)return!1;let l=r?n.tr:null;return mA(l,s,t,e)?(r&&r(l.scrollIntoView()),!0):!1}}function mA(t,e,n,r=null){let i=!1,o=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let a=s.resolve(e.start-2);o=new Wa(a,a,e.depth),e.endIndex<e.parent.childCount&&(e=new Wa(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let l=ph(o,n,r,e);return l?(t&&gA(t,e,l,i,n),!0):!1}function gA(t,e,n,r,i){let o=D.empty;for(let d=n.length-1;d>=0;d--)o=D.from(n[d].type.create(n[d].attrs,o));t.step(new Fe(e.start-(r?2:0),e.end,e.start,e.end,new P(o,0,0),n.length,!0));let s=0;for(let d=0;d<n.length;d++)n[d].type==i&&(s=d+1);let l=n.length-s,a=e.start+n.length-(r?2:0),c=e.parent;for(let d=e.startIndex,f=e.endIndex,p=!0;d<f;d++,p=!1)!p&&Un(t.doc,a,l)&&(t.split(a,l),a+=2*l),a+=c.child(d).nodeSize;return t}function yA(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?xA(e,n,t,o):vA(e,n,o):!0:!1}}function xA(t,e,n,r){let i=t.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new Fe(o-1,s,o,s,new P(D.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Wa(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const l=Eo(r);if(l==null)return!1;i.lift(r,l);let a=i.doc.resolve(i.mapping.map(o,-1)-1);return $r(i.doc,a.pos)&&a.nodeBefore.type==a.nodeAfter.type&&i.join(a.pos),e(i.scrollIntoView()),!0}function vA(t,e,n){let r=t.tr,i=n.parent;for(let h=n.end,m=n.endIndex-1,g=n.startIndex;m>g;m--)h-=i.child(m).nodeSize,r.delete(h-1,h+1);let o=r.doc.resolve(n.start),s=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,a=n.endIndex==i.childCount,c=o.node(-1),d=o.index(-1);if(!c.canReplace(d+(l?0:1),d+1,s.content.append(a?D.empty:D.from(i))))return!1;let f=o.pos,p=f+s.nodeSize;return r.step(new Fe(f-(l?1:0),p+(a?1:0),f+1,p-1,new P((l?D.empty:D.from(i.copy(D.empty))).append(a?D.empty:D.from(i.copy(D.empty))),l?0:1,a?0:1),l?0:1)),e(r.scrollIntoView()),!0}function SA(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let l=o.parent,a=l.child(s-1);if(a.type!=t)return!1;if(n){let c=a.lastChild&&a.lastChild.type==l.type,d=D.from(c?t.create():null),f=new P(D.from(t.create(null,D.from(l.type.create(null,d)))),c?3:1,0),p=o.start,h=o.end;n(e.tr.step(new Fe(p-(c?3:1),h,p,h,f,1,!0)).scrollIntoView())}return!0}}function ou(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}class su{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:o}=r,s=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...d)=>{const f=a(...d)(s);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(o),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,l=[],a=!!e,c=e||o.tr,d=()=>(!a&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),l.every(p=>p===!0)),f={...Object.fromEntries(Object.entries(r).map(([p,h])=>[p,(...g)=>{const S=this.buildProps(c,n),y=h(...g)(S);return l.push(y),f}])),run:d};return f}createCan(e){const{rawCommands:n,state:r}=this,i=!1,o=e||r.tr,s=this.buildProps(o,i);return{...Object.fromEntries(Object.entries(n).map(([a,c])=>[a,(...d)=>c(...d)({...s,dispatch:void 0})])),chain:()=>this.createChain(o,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,l={tr:e,editor:i,view:s,state:ou({state:o,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([a,c])=>[a,(...d)=>c(...d)(l)]))}};return l}}class bA{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}once(e,n){const r=(...i)=>{this.off(e,r),n.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function $(t,e,n){return t.config[e]===void 0&&t.parent?$(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?$(t.parent,e,n):null}):t.config[e]}function lu(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function CS(t){const e=[],{nodeExtensions:n,markExtensions:r}=lu(t),i=[...n,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage,extensions:i},a=$(s,"addGlobalAttributes",l);if(!a)return;a().forEach(d=>{d.types.forEach(f=>{Object.entries(d.attributes).forEach(([p,h])=>{e.push({type:f,name:p,attribute:{...o,...h}})})})})}),i.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage},a=$(s,"addAttributes",l);if(!a)return;const c=a();Object.entries(c).forEach(([d,f])=>{const p={...o,...f};typeof(p==null?void 0:p.default)=="function"&&(p.default=p.default()),p!=null&&p.isRequired&&(p==null?void 0:p.default)===void 0&&delete p.default,e.push({type:s.name,name:d,attribute:p})})}),e}function _e(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Oe(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const l=o?String(o).split(" "):[],a=r[i]?r[i].split(" "):[],c=l.filter(d=>!a.includes(d));r[i]=[...a,...c].join(" ")}else if(i==="style"){const l=o?o.split(";").map(d=>d.trim()).filter(Boolean):[],a=r[i]?r[i].split(";").map(d=>d.trim()).filter(Boolean):[],c=new Map;a.forEach(d=>{const[f,p]=d.split(":").map(h=>h.trim());c.set(f,p)}),l.forEach(d=>{const[f,p]=d.split(":").map(h=>h.trim());c.set(f,p)}),r[i]=Array.from(c.entries()).map(([d,f])=>`${d}: ${f}`).join("; ")}else r[i]=o}),r},{})}function qf(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Oe(n,r),{})}function ES(t){return typeof t=="function"}function Y(t,e=void 0,...n){return ES(t)?e?t.bind(e)(...n):t(...n):t}function wA(t={}){return Object.keys(t).length===0&&t.constructor===Object}function kA(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function Ny(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((o,s)=>{const l=s.attribute.parseHTML?s.attribute.parseHTML(n):kA(n.getAttribute(s.name));return l==null?o:{...o,[s.name]:l}},{});return{...r,...i}}}}function zy(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&wA(n)?!1:n!=null))}function CA(t,e){var n;const r=CS(t),{nodeExtensions:i,markExtensions:o}=lu(t),s=(n=i.find(c=>$(c,"topNode")))===null||n===void 0?void 0:n.name,l=Object.fromEntries(i.map(c=>{const d=r.filter(y=>y.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:e},p=t.reduce((y,x)=>{const v=$(x,"extendNodeSchema",f);return{...y,...v?v(c):{}}},{}),h=zy({...p,content:Y($(c,"content",f)),marks:Y($(c,"marks",f)),group:Y($(c,"group",f)),inline:Y($(c,"inline",f)),atom:Y($(c,"atom",f)),selectable:Y($(c,"selectable",f)),draggable:Y($(c,"draggable",f)),code:Y($(c,"code",f)),whitespace:Y($(c,"whitespace",f)),linebreakReplacement:Y($(c,"linebreakReplacement",f)),defining:Y($(c,"defining",f)),isolating:Y($(c,"isolating",f)),attrs:Object.fromEntries(d.map(y=>{var x;return[y.name,{default:(x=y==null?void 0:y.attribute)===null||x===void 0?void 0:x.default}]}))}),m=Y($(c,"parseHTML",f));m&&(h.parseDOM=m.map(y=>Ny(y,d)));const g=$(c,"renderHTML",f);g&&(h.toDOM=y=>g({node:y,HTMLAttributes:qf(y,d)}));const S=$(c,"renderText",f);return S&&(h.toText=S),[c.name,h]})),a=Object.fromEntries(o.map(c=>{const d=r.filter(S=>S.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:e},p=t.reduce((S,y)=>{const x=$(y,"extendMarkSchema",f);return{...S,...x?x(c):{}}},{}),h=zy({...p,inclusive:Y($(c,"inclusive",f)),excludes:Y($(c,"excludes",f)),group:Y($(c,"group",f)),spanning:Y($(c,"spanning",f)),code:Y($(c,"code",f)),attrs:Object.fromEntries(d.map(S=>{var y;return[S.name,{default:(y=S==null?void 0:S.attribute)===null||y===void 0?void 0:y.default}]}))}),m=Y($(c,"parseHTML",f));m&&(h.parseDOM=m.map(S=>Ny(S,d)));const g=$(c,"renderHTML",f);return g&&(h.toDOM=S=>g({mark:S,HTMLAttributes:qf(S,d)})),[c.name,h]}));return new d1({topNode:s,nodes:l,marks:a})}function dd(t,e){return e.nodes[t]||e.marks[t]||null}function Py(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function Ah(t,e){const n=ki.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}const EA=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,o,s,l)=>{var a,c;const d=((c=(a=i.type.spec).toText)===null||c===void 0?void 0:c.call(a,{node:i,pos:o,parent:s,index:l}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?d:d.slice(0,Math.max(0,r-o))}),n};function Dh(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class au{constructor(e){this.find=e.find,this.handler=e.handler}}const TA=(t,e)=>{if(Dh(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function $l(t){var e;const{editor:n,from:r,to:i,text:o,rules:s,plugin:l}=t,{view:a}=n;if(a.composing)return!1;const c=a.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(p=>p.type.spec.code))return!1;let d=!1;const f=EA(c)+o;return s.forEach(p=>{if(d)return;const h=TA(f,p.find);if(!h)return;const m=a.state.tr,g=ou({state:a.state,transaction:m}),S={from:r-(h[0].length-o.length),to:i},{commands:y,chain:x,can:v}=new su({editor:n,state:g});p.handler({state:g,range:S,match:h,commands:y,chain:x,can:v})===null||!m.steps.length||(m.setMeta(l,{transform:m,from:r,to:i,text:o}),a.dispatch(m),d=!0)}),d}function MA(t){const{editor:e,rules:n}=t,r=new Ze({state:{init(){return null},apply(i,o,s){const l=i.getMeta(r);if(l)return l;const a=i.getMeta("applyInputRules");return!!a&&setTimeout(()=>{let{text:d}=a;typeof d=="string"?d=d:d=Ah(D.from(d),s.schema);const{from:f}=a,p=f+d.length;$l({editor:e,from:f,to:p,text:d,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:o}},props:{handleTextInput(i,o,s,l){return $l({editor:e,from:o,to:s,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&$l({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:s}=i.state.selection;return s?$l({editor:e,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function jA(t){return Object.prototype.toString.call(t).slice(8,-1)}function Fl(t){return jA(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function cu(t,e){const n={...t};return Fl(t)&&Fl(e)&&Object.keys(e).forEach(r=>{Fl(e[r])&&Fl(t[r])?n[r]=cu(t[r],e[r]):n[r]=e[r]}),n}class pn{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Y($(this,"addOptions",{name:this.name}))),this.storage=Y($(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new pn(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>cu(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new pn(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Y($(n,"addOptions",{name:n.name})),n.storage=Y($(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const s=i.marks();if(!!!s.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const a=s.find(c=>(c==null?void 0:c.type.name)===n.name);return a&&r.removeStoredMark(a),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function AA(t){return typeof t=="number"}class DA{constructor(e){this.find=e.find,this.handler=e.handler}}const RA=(t,e,n)=>{if(Dh(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const o=[i.text];return o.index=i.index,o.input=t,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function IA(t){const{editor:e,state:n,from:r,to:i,rule:o,pasteEvent:s,dropEvent:l}=t,{commands:a,chain:c,can:d}=new su({editor:e,state:n}),f=[];return n.doc.nodesBetween(r,i,(h,m)=>{if(!h.isTextblock||h.type.spec.code)return;const g=Math.max(r,m),S=Math.min(i,m+h.content.size),y=h.textBetween(g-m,S-m,void 0,"");RA(y,o.find,s).forEach(v=>{if(v.index===void 0)return;const w=g+v.index+1,k=w+v[0].length,T={from:n.tr.mapping.map(w),to:n.tr.mapping.map(k)},C=o.handler({state:n,range:T,match:v,commands:a,chain:c,can:d,pasteEvent:s,dropEvent:l});f.push(C)})}),f.every(h=>h!==null)}let Bl=null;const OA=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function NA(t){const{editor:e,rules:n}=t;let r=null,i=!1,o=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const a=({state:d,from:f,to:p,rule:h,pasteEvt:m})=>{const g=d.tr,S=ou({state:d,transaction:g});if(!(!IA({editor:e,state:S,from:Math.max(f-1,0),to:p.b-1,rule:h,pasteEvent:m,dropEvent:l})||!g.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return n.map(d=>new Ze({view(f){const p=m=>{var g;r=!((g=f.dom.parentElement)===null||g===void 0)&&g.contains(m.target)?f.dom.parentElement:null,r&&(Bl=e)},h=()=>{Bl&&(Bl=null)};return window.addEventListener("dragstart",p),window.addEventListener("dragend",h),{destroy(){window.removeEventListener("dragstart",p),window.removeEventListener("dragend",h)}}},props:{handleDOMEvents:{drop:(f,p)=>{if(o=r===f.dom.parentElement,l=p,!o){const h=Bl;h!=null&&h.isEditable&&setTimeout(()=>{const m=h.state.selection;m&&h.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(f,p)=>{var h;const m=(h=p.clipboardData)===null||h===void 0?void 0:h.getData("text/html");return s=p,i=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(f,p,h)=>{const m=f[0],g=m.getMeta("uiEvent")==="paste"&&!i,S=m.getMeta("uiEvent")==="drop"&&!o,y=m.getMeta("applyPasteRules"),x=!!y;if(!g&&!S&&!x)return;if(x){let{text:k}=y;typeof k=="string"?k=k:k=Ah(D.from(k),h.schema);const{from:T}=y,C=T+k.length,E=OA(k);return a({rule:d,state:h,from:T,to:{b:C},pasteEvt:E})}const v=p.doc.content.findDiffStart(h.doc.content),w=p.doc.content.findDiffEnd(h.doc.content);if(!(!AA(v)||!w||v===w.b))return a({rule:d,state:h,from:v,to:w,pasteEvt:s})}}))}function zA(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class Ji{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Ji.resolve(e),this.schema=CA(this.extensions,n),this.setupExtensions()}static resolve(e){const n=Ji.sort(Ji.flatten(e)),r=zA(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=$(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const o=$(r,"priority")||100,s=$(i,"priority")||100;return o>s?-1:o<s?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:dd(n.name,this.schema)},i=$(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=Ji.sort([...this.extensions].reverse()),r=[],i=[],o=n.map(s=>{const l={name:s.name,options:s.options,storage:s.storage,editor:e,type:dd(s.name,this.schema)},a=[],c=$(s,"addKeyboardShortcuts",l);let d={};if(s.type==="mark"&&$(s,"exitable",l)&&(d.ArrowRight=()=>pn.handleExit({editor:e,mark:s})),c){const g=Object.fromEntries(Object.entries(c()).map(([S,y])=>[S,()=>y({editor:e})]));d={...d,...g}}const f=eA(d);a.push(f);const p=$(s,"addInputRules",l);Py(s,e.options.enableInputRules)&&p&&r.push(...p());const h=$(s,"addPasteRules",l);Py(s,e.options.enablePasteRules)&&h&&i.push(...h());const m=$(s,"addProseMirrorPlugins",l);if(m){const g=m();a.push(...g)}return a}).flat();return[MA({editor:e,rules:r}),...NA({editor:e,rules:i}),...o]}get attributes(){return CS(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=lu(this.extensions);return Object.fromEntries(n.filter(r=>!!$(r,"addNodeView")).map(r=>{const i=this.attributes.filter(a=>a.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:e,type:_e(r.name,this.schema)},s=$(r,"addNodeView",o);if(!s)return[];const l=(a,c,d,f,p)=>{const h=qf(a,i);return s()({node:a,view:c,getPos:d,decorations:f,innerDecorations:p,editor:e,extension:r,HTMLAttributes:h})};return[r.name,l]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:dd(e.name,this.schema)};e.type==="mark"&&(!((n=Y($(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const i=$(e,"onBeforeCreate",r),o=$(e,"onCreate",r),s=$(e,"onUpdate",r),l=$(e,"onSelectionUpdate",r),a=$(e,"onTransaction",r),c=$(e,"onFocus",r),d=$(e,"onBlur",r),f=$(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),s&&this.editor.on("update",s),l&&this.editor.on("selectionUpdate",l),a&&this.editor.on("transaction",a),c&&this.editor.on("focus",c),d&&this.editor.on("blur",d),f&&this.editor.on("destroy",f)})}}class Xe{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Y($(this,"addOptions",{name:this.name}))),this.storage=Y($(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Xe(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>cu(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Xe({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Y($(n,"addOptions",{name:n.name})),n.storage=Y($(n,"addStorage",{name:n.name,options:n.options})),n}}function TS(t,e,n){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:s={}}=n||{};let l="";return t.nodesBetween(r,i,(a,c,d,f)=>{var p;a.isBlock&&c>r&&(l+=o);const h=s==null?void 0:s[a.type.name];if(h)return d&&(l+=h({node:a,pos:c,parent:d,index:f,range:e})),!1;a.isText&&(l+=(p=a==null?void 0:a.text)===null||p===void 0?void 0:p.slice(Math.max(r,c)-c,i-c))}),l}function MS(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const PA=Xe.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Ze({key:new Lt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,s=Math.min(...o.map(d=>d.$from.pos)),l=Math.max(...o.map(d=>d.$to.pos)),a=MS(n);return TS(r,{from:s,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:a})}}})]}}),LA=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),$A=(t=!1)=>({commands:e})=>e.setContent("",t),FA=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:s})=>{t.doc.nodesBetween(o.pos,s.pos,(l,a)=>{if(l.type.isText)return;const{doc:c,mapping:d}=e,f=c.resolve(d.map(a)),p=c.resolve(d.map(a+l.nodeSize)),h=f.blockRange(p);if(!h)return;const m=Eo(h);if(l.type.isTextblock){const{defaultType:g}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(h.start,g)}(m||m===0)&&e.lift(h,m)})}),!0},BA=t=>e=>t(e),_A=()=>({state:t,dispatch:e})=>SS(t,e),HA=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,o=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,o.content),r.setSelection(new K(r.doc.resolve(Math.max(s-1,0)))),!0},UA=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const l=i.before(o),a=i.after(o);t.delete(l,a).scrollIntoView()}return!0}return!1},VA=t=>({tr:e,state:n,dispatch:r})=>{const i=_e(t,n.schema),o=e.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===i){if(r){const a=o.before(s),c=o.after(s);e.delete(a,c).scrollIntoView()}return!0}return!1},WA=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},KA=()=>({state:t,dispatch:e})=>Ch(t,e),qA=()=>({commands:t})=>t.keyboardShortcut("Enter"),JA=()=>({state:t,dispatch:e})=>sA(t,e);function Za(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:Dh(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function jS(t,e,n={}){return t.find(r=>r.type===e&&Za(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function Ly(t,e,n={}){return!!jS(t,e,n)}function Rh(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(d=>d.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(d=>d.type===e)||(n=n||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!jS([...i.node.marks],e,n)))return;let s=i.index,l=t.start()+i.offset,a=s+1,c=l+i.node.nodeSize;for(;s>0&&Ly([...t.parent.child(s-1).marks],e,n);)s-=1,l-=t.parent.child(s).nodeSize;for(;a<t.parent.childCount&&Ly([...t.parent.child(a).marks],e,n);)c+=t.parent.child(a).nodeSize,a+=1;return{from:l,to:c}}function Br(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const GA=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const o=Br(t,r.schema),{doc:s,selection:l}=n,{$from:a,from:c,to:d}=l;if(i){const f=Rh(a,o,e);if(f&&f.from<=c&&f.to>=d){const p=K.create(s,f.from,f.to);n.setSelection(p)}}return!0},YA=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function AS(t){return t instanceof K}function ei(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function DS(t,e=null){if(!e)return null;const n=G.atStart(t),r=G.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,o=r.to;return e==="all"?K.create(t,ei(0,i,o),ei(t.content.size,i,o)):K.create(t,ei(e,i,o),ei(e,i,o))}function $y(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function ec(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function QA(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}const XA=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const s=()=>{(ec()||$y())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),QA()&&!ec()&&!$y()&&r.dom.focus({preventScroll:!0}))})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!AS(n.state.selection))return s(),!0;const l=DS(i.doc,t)||n.state.selection,a=n.state.selection.eq(l);return o&&(a||i.setSelection(l),a&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},ZA=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),eD=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),RS=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&RS(r)}return t};function _l(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return RS(n)}function Gs(t,e,n){if(t instanceof Mr||t instanceof D)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return D.fromArray(t.map(l=>e.nodeFromJSON(l)));const s=e.nodeFromJSON(t);return n.errorOnInvalidContent&&s.check(),s}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),Gs("",e,n)}if(i){if(n.errorOnInvalidContent){let s=!1,l="";const a=new d1({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(s=!0,l=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?cs.fromSchema(a).parseSlice(_l(t),n.parseOptions):cs.fromSchema(a).parse(_l(t),n.parseOptions),n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const o=cs.fromSchema(e);return n.slice?o.parseSlice(_l(t),n.parseOptions).content:o.parse(_l(t),n.parseOptions)}return Gs("",e,n)}function tD(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Le||i instanceof Fe))return;const o=t.mapping.maps[r];let s=0;o.forEach((l,a,c,d)=>{s===0&&(s=d)}),t.setSelection(G.near(t.doc.resolve(s),n))}const nD=t=>!("type"in t),rD=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{var s;if(i){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;const a=S=>{o.emit("contentError",{editor:o,error:S,disableCollaboration:()=>{o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{Gs(e,o.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(S){a(S)}try{l=Gs(e,o.schema,{parseOptions:c,errorOnInvalidContent:(s=n.errorOnInvalidContent)!==null&&s!==void 0?s:o.options.enableContentCheck})}catch(S){return a(S),!1}let{from:d,to:f}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},p=!0,h=!0;if((nD(l)?l:[l]).forEach(S=>{S.check(),p=p?S.isText&&S.marks.length===0:!1,h=h?S.isBlock:!1}),d===f&&h){const{parent:S}=r.doc.resolve(d);S.isTextblock&&!S.type.spec.code&&!S.childCount&&(d-=1,f+=1)}let g;if(p){if(Array.isArray(e))g=e.map(S=>S.text||"").join("");else if(e instanceof D){let S="";e.forEach(y=>{y.text&&(S+=y.text)}),g=S}else typeof e=="object"&&e&&e.text?g=e.text:g=e;r.insertText(g,d,f)}else g=l,r.replaceWith(d,f,g);n.updateSelection&&tD(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:d,text:g}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:d,text:g})}return!0},iD=()=>({state:t,dispatch:e})=>rA(t,e),oD=()=>({state:t,dispatch:e})=>iA(t,e),sD=()=>({state:t,dispatch:e})=>pS(t,e),lD=()=>({state:t,dispatch:e})=>yS(t,e),aD=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Zc(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},cD=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Zc(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},uD=()=>({state:t,dispatch:e})=>tA(t,e),dD=()=>({state:t,dispatch:e})=>nA(t,e);function IS(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function fD(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,o,s;for(let l=0;l<e.length-1;l+=1){const a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))ec()||IS()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}const pD=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=fD(t).split(/-(?!$)/),s=o.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),l=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,l))});return a==null||a.steps.forEach(c=>{const d=c.map(r.mapping);d&&i&&r.maybeStep(d)}),!0};function Ys(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,s=e?_e(e,t.schema):null,l=[];t.doc.nodesBetween(r,i,(f,p)=>{if(f.isText)return;const h=Math.max(r,p),m=Math.min(i,p+f.nodeSize);l.push({node:f,from:h,to:m})});const a=i-r,c=l.filter(f=>s?s.name===f.node.type.name:!0).filter(f=>Za(f.node.attrs,n,{strict:!1}));return o?!!c.length:c.reduce((f,p)=>f+p.to-p.from,0)>=a}const hD=(t,e={})=>({state:n,dispatch:r})=>{const i=_e(t,n.schema);return Ys(n,i,e)?oA(n,r):!1},mD=()=>({state:t,dispatch:e})=>bS(t,e),gD=t=>({state:e,dispatch:n})=>{const r=_e(t,e.schema);return yA(r)(e,n)},yD=()=>({state:t,dispatch:e})=>vS(t,e);function uu(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Fy(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const xD=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const l=uu(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(o=_e(t,r.schema)),l==="mark"&&(s=Br(t,r.schema)),i&&n.selection.ranges.forEach(a=>{r.doc.nodesBetween(a.$from.pos,a.$to.pos,(c,d)=>{o&&o===c.type&&n.setNodeMarkup(d,void 0,Fy(c.attrs,e)),s&&c.marks.length&&c.marks.forEach(f=>{s===f.type&&n.addMark(d,d+c.nodeSize,s.create(Fy(f.attrs,e)))})})}),!0):!1},vD=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),SD=()=>({tr:t,dispatch:e})=>{if(e){const n=new It(t.doc);t.setSelection(n)}return!0},bD=()=>({state:t,dispatch:e})=>mS(t,e),wD=()=>({state:t,dispatch:e})=>xS(t,e),kD=()=>({state:t,dispatch:e})=>cA(t,e),CD=()=>({state:t,dispatch:e})=>fA(t,e),ED=()=>({state:t,dispatch:e})=>dA(t,e);function Jf(t,e,n={},r={}){return Gs(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const TD=(t,e=!1,n={},r={})=>({editor:i,tr:o,dispatch:s,commands:l})=>{var a,c;const{doc:d}=o;if(n.preserveWhitespace!=="full"){const f=Jf(t,i.schema,n,{errorOnInvalidContent:(a=r.errorOnInvalidContent)!==null&&a!==void 0?a:i.options.enableContentCheck});return s&&o.replaceWith(0,d.content.size,f).setMeta("preventUpdate",!e),!0}return s&&o.setMeta("preventUpdate",!e),l.insertContentAt({from:0,to:d.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:i.options.enableContentCheck})};function OS(t,e){const n=Br(e,t.schema),{from:r,to:i,empty:o}=t.selection,s=[];o?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,a=>{s.push(...a.marks)});const l=s.find(a=>a.type.name===n.name);return l?{...l.attrs}:{}}function MD(t,e){const n=new M1(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function jD(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function AD(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,o)=>{n(i)&&r.push({node:i,pos:o})}),r}function DD(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Ih(t){return e=>DD(e.$from,t)}function RD(t,e){const n={from:0,to:t.content.size};return TS(t,n,e)}function ID(t,e){const n=_e(e,t.schema),{from:r,to:i}=t.selection,o=[];t.doc.nodesBetween(r,i,l=>{o.push(l)});const s=o.reverse().find(l=>l.type.name===n.name);return s?{...s.attrs}:{}}function NS(t,e){const n=uu(typeof e=="string"?e:e.name,t.schema);return n==="node"?ID(t,e):n==="mark"?OS(t,e):{}}function OD(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function ND(t){const e=OD(t);return e.length===1?e:e.filter((n,r)=>!e.filter((o,s)=>s!==r).some(o=>n.oldRange.from>=o.oldRange.from&&n.oldRange.to<=o.oldRange.to&&n.newRange.from>=o.newRange.from&&n.newRange.to<=o.newRange.to))}function zD(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,o)=>{const s=[];if(i.ranges.length)i.forEach((l,a)=>{s.push({from:l,to:a})});else{const{from:l,to:a}=n[o];if(l===void 0||a===void 0)return;s.push({from:l,to:a})}s.forEach(({from:l,to:a})=>{const c=e.slice(o).map(l,-1),d=e.slice(o).map(a),f=e.invert().map(c,-1),p=e.invert().map(d);r.push({oldRange:{from:f,to:p},newRange:{from:c,to:d}})})}),ND(r)}function Oh(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const o=n.resolve(t),s=Rh(o,i.type);s&&r.push({mark:i,...s})}):n.nodesBetween(t,e,(i,o)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(s=>({from:o,to:o+i.nodeSize,mark:s})))}),r}function la(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}function Gf(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?Br(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(f=>o?o.name===f.type.name:!0).find(f=>Za(f.attrs,n,{strict:!1}));let s=0;const l=[];if(i.forEach(({$from:f,$to:p})=>{const h=f.pos,m=p.pos;t.doc.nodesBetween(h,m,(g,S)=>{if(!g.isText&&!g.marks.length)return;const y=Math.max(h,S),x=Math.min(m,S+g.nodeSize),v=x-y;s+=v,l.push(...g.marks.map(w=>({mark:w,from:y,to:x})))})}),s===0)return!1;const a=l.filter(f=>o?o.name===f.mark.type.name:!0).filter(f=>Za(f.mark.attrs,n,{strict:!1})).reduce((f,p)=>f+p.to-p.from,0),c=l.filter(f=>o?f.mark.type!==o&&f.mark.type.excludes(o):!0).reduce((f,p)=>f+p.to-p.from,0);return(a>0?a+c:a)>=s}function PD(t,e,n={}){if(!e)return Ys(t,null,n)||Gf(t,null,n);const r=uu(e,t.schema);return r==="node"?Ys(t,e,n):r==="mark"?Gf(t,e,n):!1}function By(t,e){const{nodeExtensions:n}=lu(e),r=n.find(s=>s.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=Y($(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function Nh(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(o=>{i!==!1&&(Nh(o,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function LD(t){return t instanceof U}function $D(t,e,n){var r;const{selection:i}=e;let o=null;if(AS(i)&&(o=i.$cursor),o){const l=(r=t.storedMarks)!==null&&r!==void 0?r:o.marks();return!!n.isInSet(l)||!l.some(a=>a.type.excludes(n))}const{ranges:s}=i;return s.some(({$from:l,$to:a})=>{let c=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(l.pos,a.pos,(d,f,p)=>{if(c)return!1;if(d.isInline){const h=!p||p.type.allowsMarkType(n),m=!!n.isInSet(d.marks)||!d.marks.some(g=>g.type.excludes(n));c=h&&m}return!c}),c})}const FD=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:s,ranges:l}=o,a=Br(t,r.schema);if(i)if(s){const c=OS(r,a);n.addStoredMark(a.create({...c,...e}))}else l.forEach(c=>{const d=c.$from.pos,f=c.$to.pos;r.doc.nodesBetween(d,f,(p,h)=>{const m=Math.max(h,d),g=Math.min(h+p.nodeSize,f);p.marks.find(y=>y.type===a)?p.marks.forEach(y=>{a===y.type&&n.addMark(m,g,a.create({...y.attrs,...e}))}):n.addMark(m,g,a.create(e))})});return $D(r,n,a)},BD=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),_D=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=_e(t,n.schema);let s;return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:l})=>Oy(o,{...s,...e})(n)?!0:l.clearNodes()).command(({state:l})=>Oy(o,{...s,...e})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},HD=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=ei(t,0,r.content.size),o=U.create(r,i);e.setSelection(o)}return!0},UD=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,s=K.atStart(r).from,l=K.atEnd(r).to,a=ei(i,s,l),c=ei(o,s,l),d=K.create(r,a,c);e.setSelection(d)}return!0},VD=t=>({state:e,dispatch:n})=>{const r=_e(t,e.schema);return SA(r)(e,n)};function _y(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const WD=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:o,doc:s}=e,{$from:l,$to:a}=o,c=i.extensionManager.attributes,d=la(c,l.node().type.name,l.node().attrs);if(o instanceof U&&o.node.isBlock)return!l.parentOffset||!Un(s,l.pos)?!1:(r&&(t&&_y(n,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const f=a.parentOffset===a.parent.content.size,p=l.depth===0?void 0:jD(l.node(-1).contentMatchAt(l.indexAfter(-1)));let h=f&&p?[{type:p,attrs:d}]:void 0,m=Un(e.doc,e.mapping.map(l.pos),1,h);if(!h&&!m&&Un(e.doc,e.mapping.map(l.pos),1,p?[{type:p}]:void 0)&&(m=!0,h=p?[{type:p,attrs:d}]:void 0),r){if(m&&(o instanceof K&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,h),p&&!f&&!l.parentOffset&&l.parent.type!==p)){const g=e.mapping.map(l.before()),S=e.doc.resolve(g);l.node(-1).canReplaceWith(S.index(),S.index()+1,p)&&e.setNodeMarkup(e.mapping.map(l.before()),p)}t&&_y(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return m},KD=(t,e={})=>({tr:n,state:r,dispatch:i,editor:o})=>{var s;const l=_e(t,r.schema),{$from:a,$to:c}=r.selection,d=r.selection.node;if(d&&d.isBlock||a.depth<2||!a.sameParent(c))return!1;const f=a.node(-1);if(f.type!==l)return!1;const p=o.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==l||a.index(-2)!==a.node(-2).childCount-1)return!1;if(i){let y=D.empty;const x=a.index(-1)?1:a.index(-2)?2:3;for(let E=a.depth-x;E>=a.depth-3;E-=1)y=D.from(a.node(E).copy(y));const v=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,w={...la(p,a.node().type.name,a.node().attrs),...e},k=((s=l.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(w))||void 0;y=y.append(D.from(l.createAndFill(null,k)||void 0));const T=a.before(a.depth-(x-1));n.replace(T,a.after(-v),new P(y,4-x,0));let C=-1;n.doc.nodesBetween(T,n.doc.content.size,(E,O)=>{if(C>-1)return!1;E.isTextblock&&E.content.size===0&&(C=O+1)}),C>-1&&n.setSelection(K.near(n.doc.resolve(C))),n.scrollIntoView()}return!0}const h=c.pos===a.end()?f.contentMatchAt(0).defaultType:null,m={...la(p,f.type.name,f.attrs),...e},g={...la(p,a.node().type.name,a.node().attrs),...e};n.delete(a.pos,c.pos);const S=h?[{type:l,attrs:m},{type:h,attrs:g}]:[{type:l,attrs:m}];if(!Un(n.doc,a.pos,2))return!1;if(i){const{selection:y,storedMarks:x}=r,{splittableMarks:v}=o.extensionManager,w=x||y.$to.parentOffset&&y.$from.marks();if(n.split(a.pos,2,S).scrollIntoView(),!w||!i)return!0;const k=w.filter(T=>v.includes(T.type.name));n.ensureMarks(k)}return!0},fd=(t,e)=>{const n=Ih(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&$r(t.doc,n.pos)&&t.join(n.pos),!0},pd=(t,e)=>{const n=Ih(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&$r(t.doc,r)&&t.join(r),!0},qD=(t,e,n,r={})=>({editor:i,tr:o,state:s,dispatch:l,chain:a,commands:c,can:d})=>{const{extensions:f,splittableMarks:p}=i.extensionManager,h=_e(t,s.schema),m=_e(e,s.schema),{selection:g,storedMarks:S}=s,{$from:y,$to:x}=g,v=y.blockRange(x),w=S||g.$to.parentOffset&&g.$from.marks();if(!v)return!1;const k=Ih(T=>By(T.type.name,f))(g);if(v.depth>=1&&k&&v.depth-k.depth<=1){if(k.node.type===h)return c.liftListItem(m);if(By(k.node.type.name,f)&&h.validContent(k.node.content)&&l)return a().command(()=>(o.setNodeMarkup(k.pos,h),!0)).command(()=>fd(o,h)).command(()=>pd(o,h)).run()}return!n||!w||!l?a().command(()=>d().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>fd(o,h)).command(()=>pd(o,h)).run():a().command(()=>{const T=d().wrapInList(h,r),C=w.filter(E=>p.includes(E.type.name));return o.ensureMarks(C),T?!0:c.clearNodes()}).wrapInList(h,r).command(()=>fd(o,h)).command(()=>pd(o,h)).run()},JD=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,s=Br(t,r.schema);return Gf(r,s,e)?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,e)},GD=(t,e,n={})=>({state:r,commands:i})=>{const o=_e(t,r.schema),s=_e(e,r.schema),l=Ys(r,o,n);let a;return r.selection.$anchor.sameParent(r.selection.$head)&&(a=r.selection.$anchor.parent.attrs),l?i.setNode(s,a):i.setNode(o,{...a,...n})},YD=(t,e={})=>({state:n,commands:r})=>{const i=_e(t,n.schema);return Ys(n,i,e)?r.lift(i):r.wrapIn(i,e)},QD=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const s=t.tr,l=o.transform;for(let a=l.steps.length-1;a>=0;a-=1)s.step(l.steps[a].invert(l.docs[a]));if(o.text){const a=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,t.schema.text(o.text,a))}else s.delete(o.from,o.to)}return!0}}return!1},XD=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},ZD=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:s=!1}=e,{selection:l}=n,a=Br(t,r.schema),{$from:c,empty:d,ranges:f}=l;if(!i)return!0;if(d&&s){let{from:p,to:h}=l;const m=(o=c.marks().find(S=>S.type===a))===null||o===void 0?void 0:o.attrs,g=Rh(c,a,m);g&&(p=g.from,h=g.to),n.removeMark(p,h,a)}else f.forEach(p=>{n.removeMark(p.$from.pos,p.$to.pos,a)});return n.removeStoredMark(a),!0},eR=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const l=uu(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(o=_e(t,r.schema)),l==="mark"&&(s=Br(t,r.schema)),i&&n.selection.ranges.forEach(a=>{const c=a.$from.pos,d=a.$to.pos;let f,p,h,m;n.selection.empty?r.doc.nodesBetween(c,d,(g,S)=>{o&&o===g.type&&(h=Math.max(S,c),m=Math.min(S+g.nodeSize,d),f=S,p=g)}):r.doc.nodesBetween(c,d,(g,S)=>{S<c&&o&&o===g.type&&(h=Math.max(S,c),m=Math.min(S+g.nodeSize,d),f=S,p=g),S>=c&&S<=d&&(o&&o===g.type&&n.setNodeMarkup(S,void 0,{...g.attrs,...e}),s&&g.marks.length&&g.marks.forEach(y=>{if(s===y.type){const x=Math.max(S,c),v=Math.min(S+g.nodeSize,d);n.addMark(x,v,s.create({...y.attrs,...e}))}}))}),p&&(f!==void 0&&n.setNodeMarkup(f,void 0,{...p.attrs,...e}),s&&p.marks.length&&p.marks.forEach(g=>{s===g.type&&n.addMark(h,m,s.create({...g.attrs,...e}))}))}),!0):!1},tR=(t,e={})=>({state:n,dispatch:r})=>{const i=_e(t,n.schema);return pA(i,e)(n,r)},nR=(t,e={})=>({state:n,dispatch:r})=>{const i=_e(t,n.schema);return hA(i,e)(n,r)};var rR=Object.freeze({__proto__:null,blur:LA,clearContent:$A,clearNodes:FA,command:BA,createParagraphNear:_A,cut:HA,deleteCurrentNode:UA,deleteNode:VA,deleteRange:WA,deleteSelection:KA,enter:qA,exitCode:JA,extendMarkRange:GA,first:YA,focus:XA,forEach:ZA,insertContent:eD,insertContentAt:rD,joinBackward:sD,joinDown:oD,joinForward:lD,joinItemBackward:aD,joinItemForward:cD,joinTextblockBackward:uD,joinTextblockForward:dD,joinUp:iD,keyboardShortcut:pD,lift:hD,liftEmptyBlock:mD,liftListItem:gD,newlineInCode:yD,resetAttributes:xD,scrollIntoView:vD,selectAll:SD,selectNodeBackward:bD,selectNodeForward:wD,selectParentNode:kD,selectTextblockEnd:CD,selectTextblockStart:ED,setContent:TD,setMark:FD,setMeta:BD,setNode:_D,setNodeSelection:HD,setTextSelection:UD,sinkListItem:VD,splitBlock:WD,splitListItem:KD,toggleList:qD,toggleMark:JD,toggleNode:GD,toggleWrap:YD,undoInputRule:QD,unsetAllMarks:XD,unsetMark:ZD,updateAttributes:eR,wrapIn:tR,wrapInList:nR});const iR=Xe.create({name:"commands",addCommands(){return{...rR}}}),oR=Xe.create({name:"drop",addProseMirrorPlugins(){return[new Ze({key:new Lt("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),sR=Xe.create({name:"editable",addProseMirrorPlugins(){return[new Ze({key:new Lt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),lR=new Lt("focusEvents"),aR=Xe.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Ze({key:lR,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),cR=Xe.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:l})=>{const{selection:a,doc:c}=l,{empty:d,$anchor:f}=a,{pos:p,parent:h}=f,m=f.parent.isTextblock&&p>0?l.doc.resolve(p-1):f,g=m.parent.type.spec.isolating,S=f.pos-f.parentOffset,y=g&&m.parent.childCount===1?S===f.pos:G.atStart(c).from===p;return!d||!h.type.isTextblock||h.textContent.length||!y||y&&f.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return ec()||IS()?o:i},addProseMirrorPlugins(){return[new Ze({key:new Lt("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(g=>g.getMeta("composition")))return;const r=t.some(g=>g.docChanged)&&!e.doc.eq(n.doc),i=t.some(g=>g.getMeta("preventClearDocument"));if(!r||i)return;const{empty:o,from:s,to:l}=e.selection,a=G.atStart(e.doc).from,c=G.atEnd(e.doc).to;if(o||!(s===a&&l===c)||!Nh(n.doc))return;const p=n.tr,h=ou({state:n,transaction:p}),{commands:m}=new su({editor:this.editor,state:h});if(m.clearNodes(),!!p.steps.length)return p}})]}}),uR=Xe.create({name:"paste",addProseMirrorPlugins(){return[new Ze({key:new Lt("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),dR=Xe.create({name:"tabindex",addProseMirrorPlugins(){return[new Ze({key:new Lt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class qr{get name(){return this.node.type.name}constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new qr(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new qr(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new qr(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,s=this.pos+r+(o?0:1);if(s<0||s>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(s);if(!i&&l.depth<=this.depth)return;const a=new qr(l,this.editor,i,i?n:null);i&&(a.actualDepth=this.depth+1),e.push(new qr(l,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const o=i.node.attrs,s=Object.keys(n);for(let l=0;l<s.length;l+=1){const a=s[l];if(o[a]!==n[a])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const o=Object.keys(n);return this.children.forEach(s=>{r&&i.length>0||(s.node.type.name===e&&o.every(a=>n[a]===s.node.attrs[a])&&i.push(s),!(r&&i.length>0)&&(i=i.concat(s.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const fR=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function pR(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}class hR extends bA{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:i})=>this.options.onDrop(n,r,i)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=pR(fR,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=ES(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(o=>{const s=typeof o=="string"?`${o}$`:o.key;r=r.filter(l=>!l.key.startsWith(s))}),n.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[sR,PA.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),iR,aR,cR,dR,oR,uR].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o==null?void 0:o.type));this.extensionManager=new Ji(i,this)}createCommandManager(){this.commandManager=new su({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=Jf(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(l=>l.name!=="collaboration"),this.createExtensionManager()}}),n=Jf(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=DS(n,this.options.autofocus);this.view=new uS(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:qi.create({doc:n,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var l;return(l=this.capturedTransaction)===null||l===void 0?void 0:l.step(s)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),o=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return NS(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return PD(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Ah(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return RD(this.state.doc,{blockSeparator:n,textSerializers:{...MS(this.schema),...r}})}get isEmpty(){return Nh(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new qr(n,this)}get $doc(){return this.$pos(0)}}function yo(t){return new au({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Y(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,s=r[r.length-1],l=r[0];if(s){const a=l.search(/\S/),c=n.from+l.indexOf(s),d=c+s.length;if(Oh(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(g=>g===t.type&&g!==h.mark.type)).filter(h=>h.to>c).length)return null;d<n.to&&o.delete(d,n.to),c>n.from&&o.delete(n.from+a,c);const p=n.from+a+s.length;o.addMark(n.from+a,p,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}function mR(t){return new au({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Y(t.getAttributes,void 0,r)||{},{tr:o}=e,s=n.from;let l=n.to;const a=t.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let d=s+c;d>l?d=l:l=d+r[1].length;const f=r[0][r[0].length-1];o.insertText(f,s+r[0].length-1),o.replaceWith(d,l,a)}else if(r[0]){const c=t.type.isInline?s:s-1;o.insert(c,t.type.create(i)).delete(o.mapping.map(s),o.mapping.map(l))}o.scrollIntoView()}})}function Yf(t){return new au({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),o=Y(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)}})}function Qs(t){return new au({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const o=Y(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),a=s.doc.resolve(n.from).blockRange(),c=a&&ph(a,t.type,o);if(!c)return null;if(s.wrap(a,c),t.keepMarks&&t.editor){const{selection:f,storedMarks:p}=e,{splittableMarks:h}=t.editor.extensionManager,m=p||f.$to.parentOffset&&f.$from.marks();if(m){const g=m.filter(S=>h.includes(S.type.name));s.ensureMarks(g)}}if(t.keepAttributes){const f=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(f,o).run()}const d=s.doc.resolve(n.from-1).nodeBefore;d&&d.type===t.type&&$r(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,d))&&s.join(n.from-1)}})}class kt{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Y($(this,"addOptions",{name:this.name}))),this.storage=Y($(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new kt(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>cu(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new kt(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Y($(n,"addOptions",{name:n.name})),n.storage=Y($(n,"addStorage",{name:n.name,options:n.options})),n}}function Si(t){return new DA({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const o=Y(t.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:s}=e,l=r[r.length-1],a=r[0];let c=n.to;if(l){const d=a.search(/\S/),f=n.from+a.indexOf(l),p=f+l.length;if(Oh(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(S=>S===t.type&&S!==m.mark.type)).filter(m=>m.to>f).length)return null;p<n.to&&s.delete(p,n.to),f>n.from&&s.delete(n.from+d,f),c=n.from+d+l.length,s.addMark(n.from+d,c,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}function gR(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof U){const o=r.index();return r.parent.canReplaceWith(o,o+1,e)}let i=r.depth;for(;i>=0;){const o=r.index(i);if(r.node(i).contentMatchAt(o).matchType(e))return!0;i-=1}return!1}function yR(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zS={exports:{}},hd={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hy;function xR(){if(Hy)return hd;Hy=1;var t=Z;function e(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,o=t.useLayoutEffect,s=t.useDebugValue;function l(f,p){var h=p(),m=r({inst:{value:h,getSnapshot:p}}),g=m[0].inst,S=m[1];return o(function(){g.value=h,g.getSnapshot=p,a(g)&&S({inst:g})},[f,h,p]),i(function(){return a(g)&&S({inst:g}),f(function(){a(g)&&S({inst:g})})},[f]),s(h),h}function a(f){var p=f.getSnapshot;f=f.value;try{var h=p();return!n(f,h)}catch{return!0}}function c(f,p){return p()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:l;return hd.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,hd}zS.exports=xR();var zh=zS.exports;const vR=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},SR=({contentComponent:t})=>{const e=zh.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return Z.createElement(Z.Fragment,null,Object.values(e))};function bR(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:Dk.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}class wR extends Z.Component{constructor(e){var n;super(e),this.editorContentRef=Z.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=bR(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return Z.createElement(Z.Fragment,null,Z.createElement("div",{ref:vR(n,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&Z.createElement(SR,{contentComponent:e.contentComponent}))}}const kR=b.forwardRef((t,e)=>{const n=Z.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Z.createElement(wR,{key:n,innerRef:e,...t})}),CR=Z.memo(kR);var ER=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var s=o[i];if(!(s==="_owner"&&e.$$typeof)&&!t(e[s],n[s]))return!1}return!0}return e!==e&&n!==n},TR=yR(ER),PS={exports:{}},md={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uy;function MR(){if(Uy)return md;Uy=1;var t=Z,e=zh;function n(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,o=t.useRef,s=t.useEffect,l=t.useMemo,a=t.useDebugValue;return md.useSyncExternalStoreWithSelector=function(c,d,f,p,h){var m=o(null);if(m.current===null){var g={hasValue:!1,value:null};m.current=g}else g=m.current;m=l(function(){function y(T){if(!x){if(x=!0,v=T,T=p(T),h!==void 0&&g.hasValue){var C=g.value;if(h(C,T))return w=C}return w=T}if(C=w,r(v,T))return C;var E=p(T);return h!==void 0&&h(C,E)?C:(v=T,w=E)}var x=!1,v,w,k=f===void 0?null:f;return[function(){return y(d())},k===null?void 0:function(){return y(k())}]},[d,f,p,h]);var S=i(c,m[0],m[1]);return s(function(){g.hasValue=!0,g.value=S},[S]),a(S),S},md}PS.exports=MR();var jR=PS.exports;const AR=typeof window<"u"?b.useLayoutEffect:b.useEffect;class DR{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const n=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},r=this.editor;return r.on("transaction",n),()=>{r.off("transaction",n)}}}}function RR(t){var e;const[n]=b.useState(()=>new DR(t.editor)),r=jR.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!==null&&e!==void 0?e:TR);return AR(()=>n.watch(t.editor),[t.editor,n]),b.useDebugValue(r),r}const IR=!1,Qf=typeof window>"u",OR=Qf||!!(typeof window<"u"&&window.next);class Ph{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Qf||OR?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onBeforeCreate)===null||o===void 0?void 0:o.call(i,...r)},onBlur:(...r)=>{var i,o;return(o=(i=this.options.current).onBlur)===null||o===void 0?void 0:o.call(i,...r)},onCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onCreate)===null||o===void 0?void 0:o.call(i,...r)},onDestroy:(...r)=>{var i,o;return(o=(i=this.options.current).onDestroy)===null||o===void 0?void 0:o.call(i,...r)},onFocus:(...r)=>{var i,o;return(o=(i=this.options.current).onFocus)===null||o===void 0?void 0:o.call(i,...r)},onSelectionUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onSelectionUpdate)===null||o===void 0?void 0:o.call(i,...r)},onTransaction:(...r)=>{var i,o;return(o=(i=this.options.current).onTransaction)===null||o===void 0?void 0:o.call(i,...r)},onUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onUpdate)===null||o===void 0?void 0:o.call(i,...r)},onContentError:(...r)=>{var i,o;return(o=(i=this.options.current).onContentError)===null||o===void 0?void 0:o.call(i,...r)},onDrop:(...r)=>{var i,o;return(o=(i=this.options.current).onDrop)===null||o===void 0?void 0:o.call(i,...r)},onPaste:(...r)=>{var i,o;return(o=(i=this.options.current).onPaste)===null||o===void 0?void 0:o.call(i,...r)}};return new hR(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,o)=>{var s;return i===((s=n.extensions)===null||s===void 0?void 0:s[o])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Ph.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function NR(t={},e=[]){const n=b.useRef(t);n.current=t;const[r]=b.useState(()=>new Ph(n)),i=zh.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return b.useDebugValue(i),b.useEffect(r.onRender(e)),RR({editor:i,selector:({transactionNumber:o})=>t.shouldRerenderOnTransaction===!1?null:t.immediatelyRender&&o===0?0:o+1}),i}const zR=b.createContext({editor:null});zR.Consumer;const PR=b.createContext({onDragStart:void 0}),LR=()=>b.useContext(PR);Z.forwardRef((t,e)=>{const{onDragStart:n}=LR(),r=t.as||"div";return Z.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});const $R=/^\s*>\s$/,FR=kt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",Oe(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Qs({find:$R,type:this.type})]}}),BR=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,_R=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,HR=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,UR=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,VR=pn.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Oe(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[yo({find:BR,type:this.type}),yo({find:HR,type:this.type})]},addPasteRules(){return[Si({find:_R,type:this.type}),Si({find:UR,type:this.type})]}}),WR="listItem",Vy="textStyle",Wy=/^\s*([-+*])\s$/,KR=kt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Oe(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(WR,this.editor.getAttributes(Vy)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Qs({find:Wy,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Qs({find:Wy,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Vy),editor:this.editor})),[t]}}),qR=/(^|[^`])`([^`]+)`(?!`)/,JR=/(^|[^`])`([^`]+)`(?!`)/g,GR=pn.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Oe(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[yo({find:qR,type:this.type})]},addPasteRules(){return[Si({find:JR,type:this.type})]}}),YR=/^```([a-z]+)?[\s\n]$/,QR=/^~~~([a-z]+)?[\s\n]$/,XR=kt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,o=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(s=>s.startsWith(n)).map(s=>s.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Oe(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!o||!s?!1:t.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:r.nodeAt(l)?t.commands.command(({tr:c})=>(c.setSelection(G.near(r.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[Yf({find:YR,type:this.type,getAttributes:t=>({language:t[1]})}),Yf({find:QR,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Ze({key:new Lt("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i==null?void 0:i.mode;if(!n||!o)return!1;const{tr:s,schema:l}=t.state,a=l.text(n.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:o},a)),s.selection.$from.parent.type!==this.type&&s.setSelection(K.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),ZR=kt.create({name:"doc",topNode:!0,content:"block+"});function eI(t={}){return new Ze({view(e){return new tI(e,t)}})}class tI{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=s=>{this[i](s)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,o=i.getBoundingClientRect(),s=o.width/i.offsetWidth,l=o.height/i.offsetHeight;if(n){let f=e.nodeBefore,p=e.nodeAfter;if(f||p){let h=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(h){let m=h.getBoundingClientRect(),g=f?m.bottom:m.top;f&&p&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let S=this.width/2*l;r={left:m.left,right:m.right,top:g-S,bottom:g+S}}}}if(!r){let f=this.editorView.coordsAtPos(this.cursorPos),p=this.width/2*s;r={left:f.left-p,right:f.left+p,top:f.top,bottom:f.bottom}}let a=this.editorView.dom.offsetParent;this.element||(this.element=a.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,d;if(!a||a==document.body&&getComputedStyle(a).position=="static")c=-pageXOffset,d=-pageYOffset;else{let f=a.getBoundingClientRect(),p=f.width/a.offsetWidth,h=f.height/a.offsetHeight;c=f.left-a.scrollLeft*p,d=f.top-a.scrollTop*h}this.element.style.left=(r.left-c)/s+"px",this.element.style.top=(r.top-d)/l+"px",this.element.style.width=(r.right-r.left)/s+"px",this.element.style.height=(r.bottom-r.top)/l+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!o){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=w1(this.editorView.state.doc,s,this.editorView.dragging.slice);l!=null&&(s=l)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const nI=Xe.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[eI(this.options)]}});class be extends G{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return be.valid(r)?new be(r):G.near(r)}content(){return P.empty}eq(e){return e instanceof be&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new be(e.resolve(n.pos))}getBookmark(){return new Lh(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!rI(e)||!iI(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&be.valid(e))return e;let i=e.pos,o=null;for(let s=e.depth;;s--){let l=e.node(s);if(n>0?e.indexAfter(s)<l.childCount:e.index(s)>0){o=l.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;i+=n;let a=e.doc.resolve(i);if(be.valid(a))return a}for(;;){let s=n>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!U.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*n),r=!1;continue e}break}o=s,i+=n;let l=e.doc.resolve(i);if(be.valid(l))return l}return null}}}be.prototype.visible=!1;be.findFrom=be.findGapCursorFrom;G.jsonID("gapcursor",be);class Lh{constructor(e){this.pos=e}map(e){return new Lh(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return be.valid(n)?new be(n):G.near(n)}}function LS(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function rI(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||LS(i.type))return!0;if(i.inlineContent)return!1}}return!0}function iI(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||LS(i.type))return!0;if(i.inlineContent)return!1}}return!0}function oI(){return new Ze({props:{decorations:cI,createSelectionBetween(t,e,n){return e.pos==n.pos&&be.valid(n)?new be(n):null},handleClick:lI,handleKeyDown:sI,handleDOMEvents:{beforeinput:aI}}})}const sI=dS({ArrowLeft:Hl("horiz",-1),ArrowRight:Hl("horiz",1),ArrowUp:Hl("vert",-1),ArrowDown:Hl("vert",1)});function Hl(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let s=r.selection,l=e>0?s.$to:s.$from,a=s.empty;if(s instanceof K){if(!o.endOfTextblock(n)||l.depth==0)return!1;a=!1,l=r.doc.resolve(e>0?l.after():l.before())}let c=be.findGapCursorFrom(l,e,a);return c?(i&&i(r.tr.setSelection(new be(c))),!0):!1}}function lI(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!be.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&U.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new be(r))),!0)}function aI(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof be))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=D.empty;for(let s=r.length-1;s>=0;s--)i=D.from(r[s].createAndFill(null,i));let o=t.state.tr.replace(n.pos,n.pos,new P(i,0,0));return o.setSelection(K.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function cI(t){if(!(t.selection instanceof be))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Re.create(t.doc,[Jt.widget(t.selection.head,e,{key:"gapcursor"})])}const uI=Xe.create({name:"gapCursor",addProseMirrorPlugins(){return[oI()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Y($(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),dI=kt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Oe(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:o}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:l}=r.extensionManager,a=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:d})=>{if(d&&a&&s){const f=a.filter(p=>l.includes(p.type.name));c.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),fI=kt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Oe(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Yf({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var tc=200,Be=function(){};Be.prototype.append=function(e){return e.length?(e=Be.from(e),!this.length&&e||e.length<tc&&this.leafAppend(e)||this.length<tc&&e.leafPrepend(this)||this.appendInner(e)):this};Be.prototype.prepend=function(e){return e.length?Be.from(e).append(this):this};Be.prototype.appendInner=function(e){return new pI(this,e)};Be.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Be.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Be.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Be.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Be.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,s){return i.push(e(o,s))},n,r),i};Be.from=function(e){return e instanceof Be?e:e&&e.length?new $S(e):Be.empty};var $S=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,s,l){for(var a=o;a<s;a++)if(i(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,s,l){for(var a=o-1;a>=s;a--)if(i(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=tc)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=tc)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Be);Be.empty=new $S([]);var pI=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,s){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(o,l),s)===!1||o>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,o)-l,s+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,s){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(o,l)-l,s+l)===!1||o<l&&this.left.forEachInvertedInner(r,Math.min(i,l),o,s)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Be);const hI=500;class an{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;n&&(i=this.remapping(r,this.items.length),o=i.maps.length);let s=e.tr,l,a,c=[],d=[];return this.items.forEach((f,p)=>{if(!f.step){i||(i=this.remapping(r,p+1),o=i.maps.length),o--,d.push(f);return}if(i){d.push(new Sn(f.map));let h=f.step.map(i.slice(o)),m;h&&s.maybeStep(h).doc&&(m=s.mapping.maps[s.mapping.maps.length-1],c.push(new Sn(m,void 0,void 0,c.length+d.length))),o--,m&&i.appendMap(m,o)}else s.maybeStep(f.step);if(f.selection)return l=i?f.selection.map(i.slice(o)):f.selection,a=new an(this.items.slice(0,r).append(d.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:s,selection:l}}addTransform(e,n,r,i){let o=[],s=this.eventCount,l=this.items,a=!i&&l.length?l.get(l.length-1):null;for(let d=0;d<e.steps.length;d++){let f=e.steps[d].invert(e.docs[d]),p=new Sn(e.mapping.maps[d],f,n),h;(h=a&&a.merge(p))&&(p=h,d?o.pop():l=l.slice(0,l.length-1)),o.push(p),n&&(s++,n=void 0),i||(a=p)}let c=s-r.depth;return c>gI&&(l=mI(l,c),s-=c),new an(l.append(o),s)}remapping(e,n){let r=new Vs;return this.items.forEach((i,o)=>{let s=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new an(this.items.append(e.map(n=>new Sn(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),o=e.mapping,s=e.steps.length,l=this.eventCount;this.items.forEach(p=>{p.selection&&l--},i);let a=n;this.items.forEach(p=>{let h=o.getMirror(--a);if(h==null)return;s=Math.min(s,h);let m=o.maps[h];if(p.step){let g=e.steps[h].invert(e.docs[h]),S=p.selection&&p.selection.map(o.slice(a+1,h));S&&l++,r.push(new Sn(m,g,S))}else r.push(new Sn(m))},i);let c=[];for(let p=n;p<s;p++)c.push(new Sn(o.maps[p]));let d=this.items.slice(0,i).append(c).append(r),f=new an(d,l);return f.emptyItemCount()>hI&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],o=0;return this.items.forEach((s,l)=>{if(l>=e)i.push(s),s.selection&&o++;else if(s.step){let a=s.step.map(n.slice(r)),c=a&&a.getMap();if(r--,c&&n.appendMap(c,r),a){let d=s.selection&&s.selection.map(n.slice(r));d&&o++;let f=new Sn(c.invert(),a,d),p,h=i.length-1;(p=i.length&&i[h].merge(f))?i[h]=p:i.push(f)}}else s.map&&r--},this.items.length,0),new an(Be.from(i.reverse()),o)}}an.empty=new an(Be.empty,0);function mI(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class Sn{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Sn(n.getMap().invert(),n,this.selection)}}}class ar{constructor(e,n,r,i,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const gI=20;function yI(t,e,n,r){let i=n.getMeta(ai),o;if(i)return i.historyState;n.getMeta(SI)&&(t=new ar(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(ai))return s.getMeta(ai).redo?new ar(t.done.addTransform(n,void 0,r,aa(e)),t.undone,Ky(n.mapping.maps),t.prevTime,t.prevComposition):new ar(t.done,t.undone.addTransform(n,void 0,r,aa(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),a=t.prevTime==0||!s&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!xI(n,t.prevRanges)),c=s?gd(t.prevRanges,n.mapping):Ky(n.mapping.maps);return new ar(t.done.addTransform(n,a?e.selection.getBookmark():void 0,r,aa(e)),an.empty,c,n.time,l??t.prevComposition)}else return(o=n.getMeta("rebased"))?new ar(t.done.rebased(n,o),t.undone.rebased(n,o),gd(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new ar(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),gd(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function xI(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(n=!0)}),n}function Ky(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,o,s)=>e.push(o,s));return e}function gd(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function vI(t,e,n){let r=aa(e),i=ai.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let s=o.selection.resolve(o.transform.doc),l=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),a=new ar(n?l:o.remaining,n?o.remaining:l,null,0,-1);return o.transform.setSelection(s).setMeta(ai,{redo:n,historyState:a})}let yd=!1,qy=null;function aa(t){let e=t.plugins;if(qy!=e){yd=!1,qy=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){yd=!0;break}}return yd}const ai=new Lt("history"),SI=new Lt("closeHistory");function bI(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Ze({key:ai,state:{init(){return new ar(an.empty,an.empty,null,0,-1)},apply(e,n,r){return yI(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?BS:r=="historyRedo"?_S:null;return!i||!e.editable?!1:(n.preventDefault(),i(e.state,e.dispatch))}}}})}function FS(t,e){return(n,r)=>{let i=ai.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let o=vI(i,n,t);o&&r(e?o.scrollIntoView():o)}return!0}}const BS=FS(!1,!0),_S=FS(!0,!0),wI=Xe.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>BS(t,e),redo:()=>({state:t,dispatch:e})=>_S(t,e)}},addProseMirrorPlugins(){return[bI(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),kI=kt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Oe(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!gR(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$from:r,$to:i}=n,o=t();return r.parentOffset===0?o.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):LD(n)?o.insertContentAt(i.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({tr:s,dispatch:l})=>{var a;if(l){const{$to:c}=s.selection,d=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?s.setSelection(K.create(s.doc,c.pos+1)):c.nodeAfter.isBlock?s.setSelection(U.create(s.doc,c.pos)):s.setSelection(K.create(s.doc,c.pos));else{const f=(a=c.parent.type.contentMatch.defaultType)===null||a===void 0?void 0:a.create();f&&(s.insert(d,f),s.setSelection(K.create(s.doc,d+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[mR({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),CI=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,EI=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,TI=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,MI=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,jI=pn.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Oe(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[yo({find:CI,type:this.type}),yo({find:TI,type:this.type})]},addPasteRules(){return[Si({find:EI,type:this.type}),Si({find:MI,type:this.type})]}}),AI=kt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Oe(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),DI="listItem",Jy="textStyle",Gy=/^(\d+)\.\s$/,RI=kt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Oe(this.options.HTMLAttributes,n),0]:["ol",Oe(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(DI,this.editor.getAttributes(Jy)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Qs({find:Gy,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Qs({find:Gy,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Jy)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),II=kt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Oe(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),OI=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,NI=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,zI=pn.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Oe(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[yo({find:OI,type:this.type})]},addPasteRules(){return[Si({find:NI,type:this.type})]}}),PI=kt.create({name:"text",group:"inline"}),LI=Xe.create({name:"starterKit",addExtensions(){const t=[];return this.options.bold!==!1&&t.push(VR.configure(this.options.bold)),this.options.blockquote!==!1&&t.push(FR.configure(this.options.blockquote)),this.options.bulletList!==!1&&t.push(KR.configure(this.options.bulletList)),this.options.code!==!1&&t.push(GR.configure(this.options.code)),this.options.codeBlock!==!1&&t.push(XR.configure(this.options.codeBlock)),this.options.document!==!1&&t.push(ZR.configure(this.options.document)),this.options.dropcursor!==!1&&t.push(nI.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&t.push(uI.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&t.push(dI.configure(this.options.hardBreak)),this.options.heading!==!1&&t.push(fI.configure(this.options.heading)),this.options.history!==!1&&t.push(wI.configure(this.options.history)),this.options.horizontalRule!==!1&&t.push(kI.configure(this.options.horizontalRule)),this.options.italic!==!1&&t.push(jI.configure(this.options.italic)),this.options.listItem!==!1&&t.push(AI.configure(this.options.listItem)),this.options.orderedList!==!1&&t.push(RI.configure(this.options.orderedList)),this.options.paragraph!==!1&&t.push(II.configure(this.options.paragraph)),this.options.strike!==!1&&t.push(zI.configure(this.options.strike)),this.options.text!==!1&&t.push(PI.configure(this.options.text)),t}}),$I=pn.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Oe(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),FI="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",BI="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Xf="numeric",Zf="ascii",ep="alpha",ps="asciinumeric",Jo="alphanumeric",tp="domain",HS="emoji",_I="scheme",HI="slashscheme",xd="whitespace";function UI(t,e){return t in e||(e[t]=[]),e[t]}function ti(t,e,n){e[Xf]&&(e[ps]=!0,e[Jo]=!0),e[Zf]&&(e[ps]=!0,e[ep]=!0),e[ps]&&(e[Jo]=!0),e[ep]&&(e[Jo]=!0),e[Jo]&&(e[tp]=!0),e[HS]&&(e[tp]=!0);for(const r in e){const i=UI(r,n);i.indexOf(t)<0&&i.push(t)}}function VI(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function yt(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}yt.groups={};yt.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],o=e.jr[r][1];if(o&&i.test(t))return o}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||yt.groups;let i;return e&&e.j?i=e:(i=new yt(e),n&&r&&ti(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const o=t.length;if(!o)return i;for(let s=0;s<o-1;s++)i=i.tt(t[s]);return i.tt(t[o-1],e,n,r)},tt(t,e,n,r){r=r||yt.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const o=e;let s,l=i.go(t);if(l?(s=new yt,Object.assign(s.j,l.j),s.jr.push.apply(s.jr,l.jr),s.jd=l.jd,s.t=l.t):s=new yt,o){if(r)if(s.t&&typeof s.t=="string"){const a=Object.assign(VI(s.t,r),n);ti(o,a,r)}else n&&ti(o,n,r);s.t=o}return i.j[t]=s,s}};const J=(t,e,n,r,i)=>t.ta(e,n,r,i),ve=(t,e,n,r,i)=>t.tr(e,n,r,i),Yy=(t,e,n,r,i)=>t.ts(e,n,r,i),R=(t,e,n,r,i)=>t.tt(e,n,r,i),zn="WORD",np="UWORD",US="ASCIINUMERICAL",VS="ALPHANUMERICAL",Xs="LOCALHOST",rp="TLD",ip="UTLD",ca="SCHEME",Ni="SLASH_SCHEME",$h="NUM",op="WS",Fh="NL",hs="OPENBRACE",ms="CLOSEBRACE",nc="OPENBRACKET",rc="CLOSEBRACKET",ic="OPENPAREN",oc="CLOSEPAREN",sc="OPENANGLEBRACKET",lc="CLOSEANGLEBRACKET",ac="FULLWIDTHLEFTPAREN",cc="FULLWIDTHRIGHTPAREN",uc="LEFTCORNERBRACKET",dc="RIGHTCORNERBRACKET",fc="LEFTWHITECORNERBRACKET",pc="RIGHTWHITECORNERBRACKET",hc="FULLWIDTHLESSTHAN",mc="FULLWIDTHGREATERTHAN",gc="AMPERSAND",yc="APOSTROPHE",xc="ASTERISK",cr="AT",vc="BACKSLASH",Sc="BACKTICK",bc="CARET",pr="COLON",Bh="COMMA",wc="DOLLAR",bn="DOT",kc="EQUALS",_h="EXCLAMATION",_t="HYPHEN",gs="PERCENT",Cc="PIPE",Ec="PLUS",Tc="POUND",ys="QUERY",Hh="QUOTE",WS="FULLWIDTHMIDDLEDOT",Uh="SEMI",wn="SLASH",xs="TILDE",Mc="UNDERSCORE",KS="EMOJI",jc="SYM";var qS=Object.freeze({__proto__:null,ALPHANUMERICAL:VS,AMPERSAND:gc,APOSTROPHE:yc,ASCIINUMERICAL:US,ASTERISK:xc,AT:cr,BACKSLASH:vc,BACKTICK:Sc,CARET:bc,CLOSEANGLEBRACKET:lc,CLOSEBRACE:ms,CLOSEBRACKET:rc,CLOSEPAREN:oc,COLON:pr,COMMA:Bh,DOLLAR:wc,DOT:bn,EMOJI:KS,EQUALS:kc,EXCLAMATION:_h,FULLWIDTHGREATERTHAN:mc,FULLWIDTHLEFTPAREN:ac,FULLWIDTHLESSTHAN:hc,FULLWIDTHMIDDLEDOT:WS,FULLWIDTHRIGHTPAREN:cc,HYPHEN:_t,LEFTCORNERBRACKET:uc,LEFTWHITECORNERBRACKET:fc,LOCALHOST:Xs,NL:Fh,NUM:$h,OPENANGLEBRACKET:sc,OPENBRACE:hs,OPENBRACKET:nc,OPENPAREN:ic,PERCENT:gs,PIPE:Cc,PLUS:Ec,POUND:Tc,QUERY:ys,QUOTE:Hh,RIGHTCORNERBRACKET:dc,RIGHTWHITECORNERBRACKET:pc,SCHEME:ca,SEMI:Uh,SLASH:wn,SLASH_SCHEME:Ni,SYM:jc,TILDE:xs,TLD:rp,UNDERSCORE:Mc,UTLD:ip,UWORD:np,WORD:zn,WS:op});const On=/[a-z]/,Fo=new RegExp("\\p{L}","u"),vd=new RegExp("\\p{Emoji}","u"),Nn=/\d/,Sd=/\s/,Qy="\r",bd=`
`,WI="",KI="",wd="";let Ul=null,Vl=null;function qI(t=[]){const e={};yt.groups=e;const n=new yt;Ul==null&&(Ul=Xy(FI)),Vl==null&&(Vl=Xy(BI)),R(n,"'",yc),R(n,"{",hs),R(n,"}",ms),R(n,"[",nc),R(n,"]",rc),R(n,"(",ic),R(n,")",oc),R(n,"<",sc),R(n,">",lc),R(n,"",ac),R(n,"",cc),R(n,"",uc),R(n,"",dc),R(n,"",fc),R(n,"",pc),R(n,"",hc),R(n,"",mc),R(n,"&",gc),R(n,"*",xc),R(n,"@",cr),R(n,"`",Sc),R(n,"^",bc),R(n,":",pr),R(n,",",Bh),R(n,"$",wc),R(n,".",bn),R(n,"=",kc),R(n,"!",_h),R(n,"-",_t),R(n,"%",gs),R(n,"|",Cc),R(n,"+",Ec),R(n,"#",Tc),R(n,"?",ys),R(n,'"',Hh),R(n,"/",wn),R(n,";",Uh),R(n,"~",xs),R(n,"_",Mc),R(n,"\\",vc),R(n,"",WS);const r=ve(n,Nn,$h,{[Xf]:!0});ve(r,Nn,r);const i=ve(r,On,US,{[ps]:!0}),o=ve(r,Fo,VS,{[Jo]:!0}),s=ve(n,On,zn,{[Zf]:!0});ve(s,Nn,i),ve(s,On,s),ve(i,Nn,i),ve(i,On,i);const l=ve(n,Fo,np,{[ep]:!0});ve(l,On),ve(l,Nn,o),ve(l,Fo,l),ve(o,Nn,o),ve(o,On),ve(o,Fo,o);const a=R(n,bd,Fh,{[xd]:!0}),c=R(n,Qy,op,{[xd]:!0}),d=ve(n,Sd,op,{[xd]:!0});R(n,wd,d),R(c,bd,a),R(c,wd,d),ve(c,Sd,d),R(d,Qy),R(d,bd),ve(d,Sd,d),R(d,wd,d);const f=ve(n,vd,KS,{[HS]:!0});R(f,"#"),ve(f,vd,f),R(f,WI,f);const p=R(f,KI);R(p,"#"),ve(p,vd,f);const h=[[On,s],[Nn,i]],m=[[On,null],[Fo,l],[Nn,o]];for(let g=0;g<Ul.length;g++)nr(n,Ul[g],rp,zn,h);for(let g=0;g<Vl.length;g++)nr(n,Vl[g],ip,np,m);ti(rp,{tld:!0,ascii:!0},e),ti(ip,{utld:!0,alpha:!0},e),nr(n,"file",ca,zn,h),nr(n,"mailto",ca,zn,h),nr(n,"http",Ni,zn,h),nr(n,"https",Ni,zn,h),nr(n,"ftp",Ni,zn,h),nr(n,"ftps",Ni,zn,h),ti(ca,{scheme:!0,ascii:!0},e),ti(Ni,{slashscheme:!0,ascii:!0},e),t=t.sort((g,S)=>g[0]>S[0]?1:-1);for(let g=0;g<t.length;g++){const S=t[g][0],x=t[g][1]?{[_I]:!0}:{[HI]:!0};S.indexOf("-")>=0?x[tp]=!0:On.test(S)?Nn.test(S)?x[ps]=!0:x[Zf]=!0:x[Xf]=!0,Yy(n,S,S,x)}return Yy(n,"localhost",Xs,{ascii:!0}),n.jd=new yt(jc),{start:n,tokens:Object.assign({groups:e},qS)}}function JS(t,e){const n=JI(e.replace(/[A-Z]/g,l=>l.toLowerCase())),r=n.length,i=[];let o=0,s=0;for(;s<r;){let l=t,a=null,c=0,d=null,f=-1,p=-1;for(;s<r&&(a=l.go(n[s]));)l=a,l.accepts()?(f=0,p=0,d=l):f>=0&&(f+=n[s].length,p++),c+=n[s].length,o+=n[s].length,s++;o-=f,s-=p,c-=f,i.push({t:d.t,v:e.slice(o-c,o),s:o-c,e:o})}return i}function JI(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),o,s=i<55296||i>56319||r+1===n||(o=t.charCodeAt(r+1))<56320||o>57343?t[r]:t.slice(r,r+2);e.push(s),r+=s.length}return e}function nr(t,e,n,r,i){let o;const s=e.length;for(let l=0;l<s-1;l++){const a=e[l];t.j[a]?o=t.j[a]:(o=new yt(r),o.jr=i.slice(),t.j[a]=o),t=o}return o=new yt(n),o.jr=i.slice(),t.j[e[s-1]]=o,o}function Xy(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let o=0;for(;i.indexOf(t[r+o])>=0;)o++;if(o>0){e.push(n.join(""));for(let s=parseInt(t.substring(r,r+o),10);s>0;s--)n.pop();r+=o}else n.push(t[r]),r++}return e}const Zs={defaultProtocol:"http",events:null,format:Zy,formatHref:Zy,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Vh(t,e=null){let n=Object.assign({},Zs);t&&(n=Object.assign(n,t instanceof Vh?t.o:t));const r=n.ignoreTags,i=[];for(let o=0;o<r.length;o++)i.push(r[o].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}Vh.prototype={o:Zs,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:Zs[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function Zy(t){return t}function GS(t,e){this.t="token",this.v=t,this.tk=e}GS.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Zs.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),o=this.toFormattedString(t),s={},l=t.get("className",n,e),a=t.get("target",n,e),c=t.get("rel",n,e),d=t.getObj("attributes",n,e),f=t.getObj("events",n,e);return s.href=r,l&&(s.class=l),a&&(s.target=a),c&&(s.rel=c),d&&Object.assign(s,d),{tagName:i,attributes:s,content:o,eventListeners:f}}};function du(t,e){class n extends GS{constructor(i,o){super(i,o),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const ex=du("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),tx=du("text"),GI=du("nl"),Wl=du("url",{isLink:!0,toHref(t=Zs.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Xs&&t[1].t===pr}}),Bt=t=>new yt(t);function YI({groups:t}){const e=t.domain.concat([gc,xc,cr,vc,Sc,bc,wc,kc,_t,$h,gs,Cc,Ec,Tc,wn,jc,xs,Mc]),n=[yc,pr,Bh,bn,_h,gs,ys,Hh,Uh,sc,lc,hs,ms,rc,nc,ic,oc,ac,cc,uc,dc,fc,pc,hc,mc],r=[gc,yc,xc,vc,Sc,bc,wc,kc,_t,hs,ms,gs,Cc,Ec,Tc,ys,wn,jc,xs,Mc],i=Bt(),o=R(i,xs);J(o,r,o),J(o,t.domain,o);const s=Bt(),l=Bt(),a=Bt();J(i,t.domain,s),J(i,t.scheme,l),J(i,t.slashscheme,a),J(s,r,o),J(s,t.domain,s);const c=R(s,cr);R(o,cr,c),R(l,cr,c),R(a,cr,c);const d=R(o,bn);J(d,r,o),J(d,t.domain,o);const f=Bt();J(c,t.domain,f),J(f,t.domain,f);const p=R(f,bn);J(p,t.domain,f);const h=Bt(ex);J(p,t.tld,h),J(p,t.utld,h),R(c,Xs,h);const m=R(f,_t);R(m,_t,m),J(m,t.domain,f),J(h,t.domain,f),R(h,bn,p),R(h,_t,m);const g=R(h,pr);J(g,t.numeric,ex);const S=R(s,_t),y=R(s,bn);R(S,_t,S),J(S,t.domain,s),J(y,r,o),J(y,t.domain,s);const x=Bt(Wl);J(y,t.tld,x),J(y,t.utld,x),J(x,t.domain,s),J(x,r,o),R(x,bn,y),R(x,_t,S),R(x,cr,c);const v=R(x,pr),w=Bt(Wl);J(v,t.numeric,w);const k=Bt(Wl),T=Bt();J(k,e,k),J(k,n,T),J(T,e,k),J(T,n,T),R(x,wn,k),R(w,wn,k);const C=R(l,pr),E=R(a,pr),O=R(E,wn),N=R(O,wn);J(l,t.domain,s),R(l,bn,y),R(l,_t,S),J(a,t.domain,s),R(a,bn,y),R(a,_t,S),J(C,t.domain,k),R(C,wn,k),R(C,ys,k),J(N,t.domain,k),J(N,e,k),R(N,wn,k);const B=[[hs,ms],[nc,rc],[ic,oc],[sc,lc],[ac,cc],[uc,dc],[fc,pc],[hc,mc]];for(let X=0;X<B.length;X++){const[ce,we]=B[X],je=R(k,ce);R(T,ce,je),R(je,we,k);const ke=Bt(Wl);J(je,e,ke);const ie=Bt();J(je,n),J(ke,e,ke),J(ke,n,ie),J(ie,e,ke),J(ie,n,ie),R(ke,we,k),R(ie,we,k)}return R(i,Xs,x),R(i,Fh,GI),{start:i,tokens:qS}}function QI(t,e,n){let r=n.length,i=0,o=[],s=[];for(;i<r;){let l=t,a=null,c=null,d=0,f=null,p=-1;for(;i<r&&!(a=l.go(n[i].t));)s.push(n[i++]);for(;i<r&&(c=a||l.go(n[i].t));)a=null,l=c,l.accepts()?(p=0,f=l):p>=0&&p++,i++,d++;if(p<0)i-=d,i<r&&(s.push(n[i]),i++);else{s.length>0&&(o.push(kd(tx,e,s)),s=[]),i-=p,d-=p;const h=f.t,m=n.slice(i-d,i);o.push(kd(h,e,m))}}return s.length>0&&o.push(kd(tx,e,s)),o}function kd(t,e,n){const r=n[0].s,i=n[n.length-1].e,o=e.slice(r,i);return new t(o,n)}const XI=typeof console<"u"&&console&&console.warn||(()=>{}),ZI="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",de={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function eO(){return yt.groups={},de.scanner=null,de.parser=null,de.tokenQueue=[],de.pluginQueue=[],de.customSchemes=[],de.initialized=!1,de}function nx(t,e=!1){if(de.initialized&&XI(`linkifyjs: already initialized - will not register custom scheme "${t}" ${ZI}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);de.customSchemes.push([t,e])}function tO(){de.scanner=qI(de.customSchemes);for(let t=0;t<de.tokenQueue.length;t++)de.tokenQueue[t][1]({scanner:de.scanner});de.parser=YI(de.scanner.tokens);for(let t=0;t<de.pluginQueue.length;t++)de.pluginQueue[t][1]({scanner:de.scanner,parser:de.parser});return de.initialized=!0,de}function Wh(t){return de.initialized||tO(),QI(de.parser.start,t,JS(de.scanner.start,t))}Wh.scan=JS;function YS(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new Vh(n),i=Wh(t),o=[];for(let s=0;s<i.length;s++){const l=i[s];l.isLink&&(!e||l.t===e)&&r.check(l)&&o.push(l.toFormattedObject(r))}return o}const Kh="[\0- -\u2029]",nO=new RegExp(Kh),rO=new RegExp(`${Kh}$`),iO=new RegExp(Kh,"g");function oO(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function sO(t){return new Ze({key:new Lt("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(c=>c.docChanged)&&!n.doc.eq(r.doc),o=e.some(c=>c.getMeta("preventAutolink"));if(!i||o)return;const{tr:s}=r,l=MD(n.doc,[...e]);if(zD(l).forEach(({newRange:c})=>{const d=AD(r.doc,c,h=>h.isTextblock);let f,p;if(d.length>1)f=d[0],p=r.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ");else if(d.length){const h=r.doc.textBetween(c.from,c.to," "," ");if(!rO.test(h))return;f=d[0],p=r.doc.textBetween(f.pos,c.to,void 0," ")}if(f&&p){const h=p.split(nO).filter(Boolean);if(h.length<=0)return!1;const m=h[h.length-1],g=f.pos+p.lastIndexOf(m);if(!m)return!1;const S=Wh(m).map(y=>y.toObject(t.defaultProtocol));if(!oO(S))return!1;S.filter(y=>y.isLink).map(y=>({...y,from:g+y.start+1,to:g+y.end+1})).filter(y=>r.schema.marks.code?!r.doc.rangeHasMark(y.from,y.to,r.schema.marks.code):!0).filter(y=>t.validate(y.value)).filter(y=>t.shouldAutoLink(y.value)).forEach(y=>{Oh(y.from,y.to,r.doc).some(x=>x.mark.type===t.type)||s.addMark(y.from,y.to,t.type.create({href:y.href}))})}}),!!s.steps.length)return s}})}function lO(t){return new Ze({key:new Lt("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,o;if(r.button!==0||!e.editable)return!1;let s=r.target;const l=[];for(;s.nodeName!=="DIV";)l.push(s),s=s.parentNode;if(!l.find(p=>p.nodeName==="A"))return!1;const a=NS(e.state,t.type.name),c=r.target,d=(i=c==null?void 0:c.href)!==null&&i!==void 0?i:a.href,f=(o=c==null?void 0:c.target)!==null&&o!==void 0?o:a.target;return c&&d?(window.open(d,f),!0):!1}}})}function aO(t){return new Ze({key:new Lt("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:i}=e,{selection:o}=i,{empty:s}=o;if(s)return!1;let l="";r.content.forEach(c=>{l+=c.textContent});const a=YS(l,{defaultProtocol:t.defaultProtocol}).find(c=>c.isLink&&c.value===l);return!l||!a?!1:t.editor.commands.setMark(t.type,{href:a.href})}}})}function Hr(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!t||t.replace(iO,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const cO=pn.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){nx(t);return}nx(t.scheme,t.optionalSlashes)})},onDestroy(){eO()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Hr(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!Hr(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Hr(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Oe(this.options.HTMLAttributes,t),0]:["a",Oe(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Hr(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Hr(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Si({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,i=YS(t).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:s=>!!Hr(s,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(o=>e.push({text:o.value,data:{href:o.href},index:o.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(sO({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!Hr(i,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(lO({type:this.type})),this.options.linkOnPaste&&t.push(aO({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),uO=t=>{if(!t.children.length)return;const e=t.querySelectorAll("span");e&&e.forEach(n=>{var r,i;const o=n.getAttribute("style"),s=(i=(r=n.parentElement)===null||r===void 0?void 0:r.closest("span"))===null||i===void 0?void 0:i.getAttribute("style");n.setAttribute("style",`${s};${o}`)})},dO=pn.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!1}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&uO(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",Oe(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;return t.doc.nodesBetween(e.from,e.to,(n,r)=>{if(n.isTextblock)return!0;n.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(o=>!!o))||t.removeMark(r,r+n.nodeSize,this.type)}),!0}}}}),fO=Xe.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var e;return(e=t.style.color)===null||e===void 0?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),pO=Xe.create({name:"fontSize",addGlobalAttributes(){return[{types:["textStyle"],attributes:{fontSize:{default:null,parseHTML:t=>t.style.fontSize||null,renderHTML:t=>t.fontSize?{style:`font-size: ${t.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:t=>({chain:e})=>e().setMark("textStyle",{fontSize:t}).run(),unsetFontSize:()=>({chain:t})=>t().setMark("textStyle",{fontSize:null}).run()}}});function hO({html:t,placeholder:e,onChangeHtml:n,contentStyle:r}){const i=b.useMemo(()=>[LI.configure({heading:{levels:[1,2,3]}}),$I,cO.configure({openOnClick:!1,autolink:!1,linkOnPaste:!0}),dO,fO,pO],[]),o=NR({extensions:i,content:t||"",editorProps:{attributes:{"data-rich-editor":"1",style:"outline:none; min-height: 24px; "}},onUpdate:({editor:d})=>{n(d.getHTML())}});if(b.useEffect(()=>{if(!o)return;const d=o.getHTML(),f=t||"";d!==f&&o.commands.setContent(f,!1)},[o,t]),!o)return null;const s={border:"1px solid var(--color-border)",background:"var(--color-surface)",borderRadius:8,padding:"6px 10px",fontFamily:"var(--font-body)",fontSize:12,cursor:"pointer"},l={display:"flex",alignItems:"center",gap:6,flexWrap:"wrap"},a=d=>d?{background:"rgba(0,156,222,0.12)",borderColor:"rgba(0,156,222,0.35)"}:{},c=()=>{const d=o.getAttributes("link").href,f=window.prompt("Link URL",d||"")||"";if(!f){o.chain().focus().extendMarkRange("link").unsetLink().run();return}o.chain().focus().extendMarkRange("link").setLink({href:f}).run()};return u.jsxs("div",{style:{display:"grid",gap:10},children:[u.jsxs("div",{style:l,children:[u.jsx("button",{type:"button",style:{...s,...a(o.isActive("bold"))},onClick:()=>o.chain().focus().toggleBold().run(),children:u.jsx("b",{children:"B"})}),u.jsx("button",{type:"button",style:{...s,...a(o.isActive("italic"))},onClick:()=>o.chain().focus().toggleItalic().run(),children:u.jsx("i",{children:"I"})}),u.jsx("button",{type:"button",style:{...s,...a(o.isActive("underline"))},onClick:()=>o.chain().focus().toggleUnderline().run(),children:u.jsx("u",{children:"U"})}),u.jsx("button",{type:"button",style:{...s,...a(o.isActive("bulletList"))},onClick:()=>o.chain().focus().toggleBulletList().run(),children:" List"}),u.jsx("button",{type:"button",style:{...s,...a(o.isActive("orderedList"))},onClick:()=>o.chain().focus().toggleOrderedList().run(),children:"1. List"}),u.jsx("button",{type:"button",style:{...s,...a(o.isActive("blockquote"))},onClick:()=>o.chain().focus().toggleBlockquote().run(),children:"Quote"}),u.jsx("button",{type:"button",style:{...s,...a(o.isActive("link"))},onClick:c,children:"Link"}),u.jsx("span",{style:{width:1,height:22,background:"var(--color-border)",margin:"0 2px"}}),u.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:6,fontFamily:"var(--font-body)",fontSize:12,color:"var(--color-muted)"},children:["Color",u.jsx("input",{type:"color",value:o.getAttributes("textStyle").color||"#1A2B4A",onChange:d=>o.chain().focus().setColor(d.target.value).run(),style:{width:28,height:20,padding:0,border:"1px solid var(--color-border)",borderRadius:6,background:"transparent"}})]}),u.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:6,fontFamily:"var(--font-body)",fontSize:12,color:"var(--color-muted)"},children:["Size",u.jsxs("select",{value:o.getAttributes("textStyle").fontSize||"",onChange:d=>{const f=d.target.value;f?o.commands.setFontSize(f):o.commands.unsetFontSize()},style:{height:28,borderRadius:8,border:"1px solid var(--color-border)",background:"var(--color-surface)",padding:"0 8px",fontFamily:"var(--font-body)",fontSize:12},children:[u.jsx("option",{value:"",children:"Default"}),u.jsx("option",{value:"12px",children:"12"}),u.jsx("option",{value:"14px",children:"14"}),u.jsx("option",{value:"16px",children:"16"}),u.jsx("option",{value:"18px",children:"18"}),u.jsx("option",{value:"20px",children:"20"}),u.jsx("option",{value:"24px",children:"24"})]})]}),u.jsx("button",{type:"button",style:s,onClick:()=>o.chain().focus().undo().run(),children:"Undo"}),u.jsx("button",{type:"button",style:s,onClick:()=>o.chain().focus().redo().run(),children:"Redo"})]}),u.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:12,padding:12,background:"var(--color-surface)",minHeight:60,...r||{}},children:[e&&!o.getText().trim()?u.jsx("div",{style:{position:"absolute",opacity:0,pointerEvents:"none"},children:e}):null,u.jsx(CR,{editor:o})]})]})}const pt=(t=32,e=40)=>({padding:`${t}px ${e}px`});function mO({block:t,theme:e,editable:n,onUpdateBlock:r}){const i=t.backgroundStyle==="solid"?e.primary:`linear-gradient(135deg, ${e.primary} 0%, ${e.secondary} 60%, ${e.accent}44 100%)`;return u.jsxs("div",{className:"nap-white-section",style:{background:i,padding:"48px 40px",textAlign:"center",position:"relative",overflow:"hidden",color:"#fff"},children:[u.jsx("svg",{style:{position:"absolute",bottom:0,left:0,right:0,opacity:.08},viewBox:"0 0 800 60",fill:"none",preserveAspectRatio:"none",height:60,children:u.jsx("path",{d:"M0 40 Q200 0 400 30 Q600 60 800 20 L800 60 L0 60Z",fill:"white"})}),(t.logoDataUrl||t.logoUrl)&&u.jsx("div",{style:{marginBottom:20},children:u.jsx("img",{src:t.logoDataUrl||t.logoUrl,alt:"Logo",style:{maxHeight:60,maxWidth:240,borderRadius:8}})}),u.jsxs("div",{style:{fontFamily:e.fontMono,fontSize:11,letterSpacing:"0.22em",textTransform:"uppercase",color:"rgba(255,255,255,0.65)",marginBottom:12},children:[t.issueNumber,"  ",t.issueDate]}),u.jsx("h1",{style:{fontFamily:e.fontDisplay,fontSize:46,fontWeight:400,color:"#fff",margin:"0 0 10px",letterSpacing:"-0.02em",lineHeight:1.1},children:n?u.jsx(_,{value:t.title,placeholder:"Newsletter title",onCommit:o=>r({title:o}),style:{display:"block",width:"100%"}}):t.title}),u.jsx("p",{style:{fontFamily:e.fontDisplay,fontSize:20,fontStyle:"italic",color:"rgba(255,255,255,0.85)",margin:"0 0 18px",lineHeight:1.3},children:n?u.jsx(_,{value:t.subtitle,placeholder:"Subtitle",onCommit:o=>r({subtitle:o}),style:{display:"block",width:"100%"}}):t.subtitle}),u.jsx("div",{style:{height:1,background:"rgba(255,255,255,0.2)",maxWidth:280,margin:"0 auto 18px"}}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:13,color:"rgba(255,255,255,0.65)",margin:0,letterSpacing:"0.02em"},children:n?u.jsx(_,{value:t.tagline,placeholder:"Tagline",onCommit:o=>r({tagline:o}),style:{display:"block",width:"100%"}}):t.tagline})]})}function gO({block:t,theme:e}){const r={slow:60,medium:36,fast:20}[t.speed]||36,i="https://api.allorigins.win/get?url=",[o,s]=b.useState([]),l=b.useCallback(p=>{try{const m=new DOMParser().parseFromString(p,"text/xml");if(m.querySelector("parsererror"))return[];const g=Array.from(m.querySelectorAll("item"));return g.length?g.map(y=>{var x,v,w,k;return{text:((v=(x=y.querySelector("title"))==null?void 0:x.textContent)==null?void 0:v.trim())||"",url:((k=(w=y.querySelector("link"))==null?void 0:w.textContent)==null?void 0:k.trim())||""}}).filter(y=>!!y.text):Array.from(m.querySelectorAll("entry")).map(y=>{var x,v,w,k,T;return{text:((v=(x=y.querySelector("title"))==null?void 0:x.textContent)==null?void 0:v.trim())||"",url:((w=y.querySelector("link"))==null?void 0:w.getAttribute("href"))||((T=(k=y.querySelector("link"))==null?void 0:k.textContent)==null?void 0:T.trim())||""}}).filter(y=>!!y.text)}catch{return[]}},[]);b.useEffect(()=>{let p=!1;async function h(){if(t.sourceMode!=="rss"){s([]);return}const m=(t.rssUrls||[]).filter(Boolean);if(!m.length){s([]);return}const g=[];for(const v of m)try{const w=await fetch(i+encodeURIComponent(v),{cache:"no-store"});if(!w.ok)continue;const k=await w.json(),T=k&&typeof k.contents=="string"?k.contents:"";g.push(...l(T))}catch{}const S=new Set,x=g.filter(v=>{const w=v.url||v.text;return!w||S.has(w)?!1:(S.add(w),!0)}).slice(0,Math.max(1,t.rssMaxItems||20));p||s(x)}return h(),()=>{p=!0}},[t.sourceMode,(t.rssUrls||[]).join("|"),t.rssMaxItems,l]);const a=t.sourceMode==="rss"&&o.length>0,c=!a&&t.useLinks&&(t.links||[]).length>0,d=a?[...o,...o]:c?[...t.links||[],...t.links||[]]:[],f=a||c?[]:[...t.items||[],...t.items||[]];return u.jsxs("div",{className:"nap-ticker",style:{background:t.backgroundColor||e.primary,overflow:"hidden",height:40,display:"flex",alignItems:"center",color:t.textColor||"#fff"},children:[u.jsx("style",{children:"@keyframes ticker{from{transform:translateX(0)}to{transform:translateX(-50%)}}"}),u.jsx("div",{style:{display:"flex",gap:0,whiteSpace:"nowrap",animation:`ticker ${r}s linear infinite`,willChange:"transform"},children:d.length?d.map((p,h)=>u.jsxs("a",{href:p.url,target:"_blank",rel:"noopener noreferrer",style:{fontFamily:e.fontMono,fontSize:12,color:t.textColor||"#fff",padding:"0 32px",letterSpacing:"0.04em",display:"inline-flex",alignItems:"center",gap:10,textDecoration:"none",cursor:"pointer"},children:[u.jsx("span",{style:{width:5,height:5,borderRadius:"50%",background:e.accent,display:"inline-block",flexShrink:0}}),p.text,u.jsx("span",{style:{fontSize:10,opacity:.6},children:""})]},h)):f.map((p,h)=>u.jsxs("span",{style:{fontFamily:e.fontMono,fontSize:12,color:t.textColor||"#fff",padding:"0 32px",letterSpacing:"0.04em",display:"inline-flex",alignItems:"center",gap:10},children:[u.jsx("span",{style:{width:5,height:5,borderRadius:"50%",background:e.accent,display:"inline-block",flexShrink:0}}),p]},h))})]})}function yO({block:t,theme:e,editable:n,onUpdateBlock:r}){return t.style==="bold"?u.jsxs("div",{className:"nap-white-section",style:{background:e.primary,padding:"18px 40px",display:"flex",alignItems:"center",gap:16,color:"#fff"},children:[t.number>0&&u.jsx("span",{style:{fontFamily:e.fontMono,fontSize:32,fontWeight:300,color:"rgba(255,255,255,0.25)",lineHeight:1},children:String(t.number).padStart(2,"0")}),u.jsxs("div",{children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.22em",textTransform:"uppercase",color:"rgba(255,255,255,0.5)",marginBottom:2},children:"Section"}),u.jsx("div",{style:{fontFamily:e.fontDisplay,fontSize:22,color:"#fff",lineHeight:1.15},children:n?u.jsx(_,{value:t.label,placeholder:"Section title",onCommit:i=>r({label:i}),style:{display:"block",width:"100%"}}):t.label})]})]}):u.jsxs("div",{style:{padding:"32px 40px 16px"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:14,marginBottom:t.description?10:0},children:[u.jsxs("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.22em",textTransform:"uppercase",color:e.muted,whiteSpace:"nowrap"},children:[u.jsx("span",{children:t.number>0?`0${t.number}  `:" "}),n?u.jsx(_,{value:t.label,placeholder:"Section title",onCommit:i=>r({label:i}),style:{display:"block",width:"100%",color:e.muted}}):u.jsx("span",{children:t.label}),u.jsx("span",{children:" "})]}),u.jsx("div",{style:{flex:1,height:1,background:`linear-gradient(90deg, ${e.border}, transparent)`}})]}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:14,color:e.muted,margin:0,lineHeight:1.6},children:n?u.jsx(_,{value:t.description||"",placeholder:"Section description",multiline:!0,onCommit:i=>r({description:i}),style:{minHeight:18}}):t.description})]})}function xO({block:t,theme:e,editable:n,onUpdateBlock:r,onUpdateArticle:i}){return u.jsxs("div",{style:pt(24,40),children:[t.sectionTitle!==void 0&&u.jsx("h2",{style:{fontFamily:e.fontDisplay,fontSize:26,color:e.text,margin:"0 0 20px",fontWeight:400},children:n?u.jsx(_,{value:t.sectionTitle||"",placeholder:"Section title",onCommit:o=>r({sectionTitle:o}),style:{display:"block",width:"100%"}}):t.sectionTitle}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${t.columns}, 1fr)`,gap:20},children:(t.articles||[]).map(o=>u.jsx(vO,{article:o,theme:e,layout:t.layout,editable:n,onUpdate:s=>i(o.id,s)},o.id))})]})}function vO({article:t,theme:e,layout:n,editable:r,onUpdate:i}){const o={High:"#00A651",Moderate:"#F47920",Low:"#C0392B","Expert Opinion":"#7B2D8B"};return u.jsxs("div",{style:{border:`1px solid ${e.border}`,borderRadius:12,overflow:"hidden",background:e.surface,display:"flex",flexDirection:"column"},children:[t.imageUrl&&u.jsx("div",{style:{height:160,overflow:"hidden",flexShrink:0},children:u.jsx("img",{src:t.imageUrl,alt:t.title,style:{width:"100%",height:"100%",objectFit:"cover"}})}),u.jsxs("div",{style:{padding:n==="compact"?"10px 14px":"16px",flex:1,display:"flex",flexDirection:"column",minWidth:0},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8,flexWrap:"wrap",gap:6},children:[u.jsx("span",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.14em",textTransform:"uppercase",color:e.muted},children:r?u.jsx(_,{value:t.source||"",placeholder:"Source",onCommit:s=>i({source:s}),style:{display:"block",width:"100%",color:e.muted}}):t.source}),t.evidenceLevel&&u.jsx("span",{style:{background:o[t.evidenceLevel]+"22",color:o[t.evidenceLevel],border:`1px solid ${o[t.evidenceLevel]}44`,borderRadius:999,padding:"2px 8px",fontFamily:e.fontMono,fontSize:10,fontWeight:600},children:t.evidenceLevel})]}),u.jsx("h3",{style:{fontFamily:e.fontDisplay,fontSize:n==="compact"?16:20,color:e.text,margin:"0 0 10px",lineHeight:1.25,fontWeight:400},children:r?u.jsx(_,{value:t.title||"",placeholder:"Article title",multiline:!1,onCommit:s=>i({title:s}),style:{display:"block",width:"100%"}}):t.url?u.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",style:{color:e.text,textDecoration:"none"},onMouseEnter:s=>s.currentTarget.style.color=e.accent,onMouseLeave:s=>s.currentTarget.style.color=e.text,children:t.title}):t.title}),!n.includes("compact")&&u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:13,color:e.muted,margin:"0 0 12px",lineHeight:1.6,flex:1},children:r?u.jsx(_,{value:t.summary||"",placeholder:"Summary",multiline:!0,onCommit:s=>i({summary:s}),style:{minHeight:18,color:e.muted}}):t.summary}),u.jsxs("div",{style:{background:e.background,borderRadius:8,padding:"10px 12px",marginBottom:10},children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.12em",textTransform:"uppercase",color:e.muted,marginBottom:4},children:"Clinical Context"}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:13,color:e.text,margin:0,lineHeight:1.55},children:r?u.jsx(_,{value:t.clinicalContext||"",placeholder:"Clinical context",multiline:!0,onCommit:s=>i({clinicalContext:s}),style:{minHeight:18}}):t.clinicalContext})]}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:13,color:e.secondary,fontStyle:"italic",margin:"0 0 12px",borderLeft:`3px solid ${e.accent}`,paddingLeft:10,lineHeight:1.5},children:r?u.jsx(_,{value:t.myTake||"",placeholder:"My take",multiline:!0,onCommit:s=>i({myTake:s}),style:{minHeight:18,color:e.secondary}}):t.myTake}),t.url&&u.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",style:{marginTop:"auto",display:"inline-flex",alignItems:"center",gap:5,fontFamily:e.fontBody,fontSize:12,color:e.accent,fontWeight:600,textDecoration:"none"},children:["Read full paper ",u.jsx("span",{style:{fontSize:14},children:""})]})]})]})}function SO({block:t,theme:e,editable:n,onUpdateArticle:r}){const i=t.article,o=t.layout==="left-image",s=t.layout==="top-image",l=!!i.imageUrl;return s&&l?u.jsx("div",{style:pt(24,40),children:u.jsxs("div",{style:{border:`1px solid ${e.border}`,borderRadius:14,overflow:"hidden",background:e.surface},children:[u.jsx("img",{src:i.imageUrl,alt:i.title,style:{width:"100%",height:280,objectFit:"cover"}}),u.jsx("div",{style:{padding:24},children:u.jsx(rx,{art:i,theme:e,accentColor:t.accentColor,editable:n,onUpdate:a=>r(i.id,a)})})]})}):u.jsx("div",{style:pt(24,40),children:u.jsxs("div",{style:{border:`1px solid ${e.border}`,borderRadius:14,overflow:"hidden",background:e.surface,display:"flex",flexDirection:l?o?"row":"row-reverse":"column"},children:[l&&u.jsx("div",{style:{width:"40%",flexShrink:0},children:u.jsx("img",{src:i.imageUrl,alt:i.title,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}})}),u.jsxs("div",{style:{flex:1,padding:28,borderLeft:l&&o?`4px solid ${t.accentColor||e.accent}`:void 0,minWidth:0},children:[u.jsxs("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.18em",textTransform:"uppercase",color:e.muted,marginBottom:12},children:[" Spotlight  ",i.source]}),u.jsx(rx,{art:i,theme:e,accentColor:t.accentColor,editable:n,onUpdate:a=>r(i.id,a)})]})]})})}function rx({art:t,theme:e,accentColor:n,editable:r,onUpdate:i}){return u.jsxs(u.Fragment,{children:[u.jsx("h2",{style:{fontFamily:e.fontDisplay,fontSize:28,color:e.text,margin:"0 0 12px",fontWeight:400,lineHeight:1.2},children:r?u.jsx(_,{value:t.title||"",placeholder:"Spotlight title",onCommit:o=>i({title:o}),style:{display:"block",width:"100%"}}):t.url?u.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",style:{color:e.text,textDecoration:"none"},children:t.title}):t.title}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:15,color:e.muted,margin:"0 0 16px",lineHeight:1.65},children:r?u.jsx(_,{value:t.summary||"",placeholder:"Summary",multiline:!0,onCommit:o=>i({summary:o}),style:{minHeight:22,color:e.muted}}):t.summary}),u.jsxs("div",{style:{background:e.background,borderRadius:10,padding:"14px 16px",marginBottom:14},children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.12em",textTransform:"uppercase",color:e.muted,marginBottom:6},children:"Clinical Context"}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:14,color:e.text,margin:0,lineHeight:1.6},children:r?u.jsx(_,{value:t.clinicalContext||"",placeholder:"Clinical context",multiline:!0,onCommit:o=>i({clinicalContext:o}),style:{minHeight:22}}):t.clinicalContext})]}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:14,fontStyle:"italic",color:e.secondary,margin:"0 0 16px",borderLeft:`3px solid ${n}`,paddingLeft:12,lineHeight:1.6},children:r?u.jsx(_,{value:t.myTake||"",placeholder:"My take",multiline:!0,onCommit:o=>i({myTake:o}),style:{minHeight:22,color:e.secondary}}):t.myTake}),t.url&&u.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",alignItems:"center",gap:8,padding:"9px 18px",background:n||e.accent,color:"#fff",borderRadius:8,fontFamily:e.fontBody,fontSize:13,fontWeight:600,textDecoration:"none"},children:"Read the paper "})]})}function bO({block:t,theme:e,editable:n,onUpdateBlock:r}){return u.jsxs("div",{style:pt(28,40),children:[u.jsxs("div",{style:{marginBottom:20},children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.18em",textTransform:"uppercase",color:e.accent,marginBottom:6},children:" AI Ethics & Governance"}),u.jsx("h2",{style:{fontFamily:e.fontDisplay,fontSize:26,color:e.text,margin:"0 0 6px",fontWeight:400},children:n?u.jsx(_,{value:t.heading||"",placeholder:"Heading",onCommit:i=>r({heading:i}),style:{display:"block",width:"100%"}}):t.heading}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:14,color:e.muted,margin:0},children:n?u.jsx(_,{value:t.subheading||"",placeholder:"Subheading",multiline:!0,onCommit:i=>r({subheading:i}),style:{minHeight:18,color:e.muted}}):t.subheading}),t.source!==void 0&&u.jsxs("div",{style:{fontFamily:e.fontMono,fontSize:11,color:e.muted,marginTop:6},children:["Source:"," ",n?u.jsx(_,{value:t.source||"",placeholder:"Source",onCommit:i=>r({source:i}),style:{display:"block",width:"100%",color:e.muted}}):t.url?u.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",style:{color:e.accent},children:t.source}):t.source]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:20},children:[u.jsxs("div",{style:{border:`1px solid ${e.border}`,borderRadius:12,padding:20,background:e.background},children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.14em",textTransform:"uppercase",color:"#C0392B",fontWeight:700,marginBottom:10},children:n?u.jsx(_,{value:t.leftTitle||"",placeholder:"Left title",onCommit:i=>r({leftTitle:i}),style:{display:"block",width:"100%",color:"#C0392B"}}):t.leftTitle}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:14,color:e.text,margin:0,lineHeight:1.65},children:n?u.jsx(_,{value:t.leftContent||"",placeholder:"Left content",multiline:!0,onCommit:i=>r({leftContent:i}),style:{minHeight:18}}):t.leftContent})]}),u.jsxs("div",{style:{border:`1px solid ${e.accent}44`,borderRadius:12,padding:20,background:e.accent+"0A"},children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.14em",textTransform:"uppercase",color:e.accent,fontWeight:700,marginBottom:10},children:n?u.jsx(_,{value:t.rightTitle||"",placeholder:"Right title",onCommit:i=>r({rightTitle:i}),style:{display:"block",width:"100%",color:e.accent}}):t.rightTitle}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:14,color:e.text,margin:0,lineHeight:1.65},children:n?u.jsx(_,{value:t.rightContent||"",placeholder:"Right content",multiline:!0,onCommit:i=>r({rightContent:i}),style:{minHeight:18}}):t.rightContent})]})]}),u.jsxs("div",{style:{marginTop:16,padding:"14px 18px",border:`1px solid ${e.border}`,borderRadius:12,borderLeft:`4px solid ${e.accent}`},children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.14em",textTransform:"uppercase",color:e.muted,marginBottom:6},children:"Clinical Perspective"}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:14,color:e.text,margin:0,lineHeight:1.65},children:n?u.jsx(_,{value:t.clinicalPerspective||"",placeholder:"Clinical perspective",multiline:!0,onCommit:i=>r({clinicalPerspective:i}),style:{minHeight:18}}):t.clinicalPerspective})]})]})}function wO({block:t,theme:e}){const n=t.dataUrl||t.url,i={full:"100%",wide:"80%",medium:"60%",small:"40%"}[t.width]||"100%";return n?u.jsxs("div",{style:{padding:"16px 40px",textAlign:t.alignment},children:[t.linkUrl?u.jsx("a",{href:t.linkUrl,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",maxWidth:i},children:u.jsx("img",{src:n,alt:t.alt,style:{width:"100%",borderRadius:t.borderRadius,display:"block"}})}):u.jsx("img",{src:n,alt:t.alt,style:{maxWidth:i,width:"100%",borderRadius:t.borderRadius,display:"inline-block"}}),t.caption&&u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:12,color:e.muted,margin:"8px 0 0",textAlign:"center"},children:t.caption})]}):u.jsx("div",{style:{padding:"24px 40px",textAlign:t.alignment},children:u.jsx("div",{style:{display:"inline-block",border:`2px dashed ${e.border}`,borderRadius:12,padding:"40px 60px",color:e.muted,fontFamily:e.fontBody,fontSize:13},children:" No image  configure in Block Settings"})})}function kO({block:t,theme:e,editable:n,onUpdateBlock:r}){const i={full:"100%",reading:"720px",narrow:"560px"};return u.jsx("div",{style:{padding:"16px 40px"},children:u.jsx("div",{style:{fontFamily:e.fontBody,color:e.text,lineHeight:1.7,maxWidth:i[t.maxWidth]||"100%",margin:"0 auto",textAlign:t.alignment,fontSize:15},children:n?u.jsx(hO,{html:t.html||"",placeholder:"Type here",onChangeHtml:o=>r({html:o})}):u.jsx("div",{dangerouslySetInnerHTML:{__html:t.html}})})})}function CO({block:t,theme:e,editable:n,onUpdateBlock:r}){return u.jsxs("div",{style:{padding:"16px 40px"},children:[u.jsxs("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.12em",textTransform:"uppercase",color:e.muted,marginBottom:8},children:[""," ",n?u.jsx(_,{value:t.label||"",placeholder:"Embed label",onCommit:i=>r({label:i}),style:{display:"block",width:"100%",color:e.muted}}):t.label]}),n?u.jsx(mT,{html:t.html||"",placeholder:"Paste HTML here",onCommit:i=>r({html:i}),style:{border:`1px dashed ${e.border}`,borderRadius:10,padding:12,minHeight:60,background:e.background}}):u.jsx("div",{dangerouslySetInnerHTML:{__html:t.html}})]})}function EO({block:t,theme:e,editable:n,onUpdateBlock:r}){return u.jsxs("div",{style:pt(28,40),children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.18em",textTransform:"uppercase",color:e.accent,marginBottom:8},children:" Prompt Like a Rockstar"}),u.jsx("h2",{style:{fontFamily:e.fontDisplay,fontSize:26,color:e.text,margin:"0 0 6px",fontWeight:400},children:n?u.jsx(_,{value:t.heading||"",placeholder:"Heading",onCommit:i=>r({heading:i}),style:{display:"block",width:"100%"}}):t.heading}),u.jsx("div",{style:{fontFamily:e.fontBody,fontSize:14,color:e.muted,marginBottom:20},children:n?u.jsxs(u.Fragment,{children:[u.jsx(_,{value:t.step||"",placeholder:"Step",onCommit:i=>r({step:i}),style:{display:"block",width:"100%",color:e.muted}}),"  Framework: ",u.jsx("strong",{children:u.jsx(_,{value:t.framework||"",placeholder:"Framework",onCommit:i=>r({framework:i}),style:{display:"block",width:"100%"}})})]}):u.jsxs(u.Fragment,{children:[t.step,"  Framework: ",u.jsx("strong",{children:t.framework})]})}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[u.jsxs("div",{style:{border:"1px solid #f5c6c0",borderRadius:12,padding:16,background:"#FEF0EE"},children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.14em",textTransform:"uppercase",color:"#C0392B",marginBottom:8},children:" Bad Prompt"}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:14,fontStyle:"italic",color:"#7A1E12",margin:0,lineHeight:1.55},children:n?u.jsx(_,{value:t.badPrompt||"",placeholder:"Bad prompt",multiline:!0,onCommit:i=>r({badPrompt:i}),style:{minHeight:18,color:"#7A1E12"}}):t.badPrompt})]}),u.jsxs("div",{style:{border:`1px solid ${e.accent}44`,borderRadius:12,padding:16,background:e.accent+"0D"},children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.14em",textTransform:"uppercase",color:e.accent,marginBottom:8},children:" Good Prompt"}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:14,color:e.text,margin:0,lineHeight:1.55},children:n?u.jsx(_,{value:t.goodPrompt||"",placeholder:"Good prompt",multiline:!0,onCommit:i=>r({goodPrompt:i}),style:{minHeight:18}}):t.goodPrompt})]})]}),u.jsx("div",{style:{marginTop:14,padding:"12px 16px",background:e.background,borderRadius:10,borderLeft:`3px solid ${e.accent}`},children:u.jsxs("p",{style:{fontFamily:e.fontBody,fontSize:13,color:e.muted,margin:0,lineHeight:1.6},children:[u.jsx("strong",{children:"Why this matters:"})," ",n?u.jsx(_,{value:t.explanation||"",placeholder:"Explanation",multiline:!0,onCommit:i=>r({explanation:i}),style:{minHeight:18,color:e.muted}}):t.explanation]})})]})}function TO({block:t,theme:e,editable:n,onUpdateBlock:r}){const i=[e.primary,e.secondary,e.accent,"#7B2D8B","#00A651"],o=(s,l)=>{const a=(t.steps||[]).map((c,d)=>d===s?{...c,...l}:c);r({steps:a})};return u.jsxs("div",{style:pt(28,40),children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.18em",textTransform:"uppercase",color:e.accent,marginBottom:8},children:" SBAR-P Framework"}),u.jsx("h2",{style:{fontFamily:e.fontDisplay,fontSize:26,color:e.text,margin:"0 0 20px",fontWeight:400},children:n?u.jsx(_,{value:t.heading||"",placeholder:"Heading",onCommit:s=>r({heading:s}),style:{display:"block",width:"100%"}}):t.heading}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:12,marginBottom:20},children:(t.steps||[]).map((s,l)=>u.jsxs("div",{style:{border:`1px solid ${e.border}`,borderRadius:10,padding:14,background:e.surface},children:[u.jsx("div",{style:{fontFamily:e.fontDisplay,fontSize:64,fontWeight:400,color:i[l]||e.primary,lineHeight:1,marginBottom:6,fontStyle:"italic"},children:s.letter}),u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:9,letterSpacing:"0.14em",textTransform:"uppercase",color:e.muted,marginBottom:8,paddingBottom:8,borderBottom:`2px solid ${i[l]||e.primary}`},children:n?u.jsx(_,{value:s.name||"",placeholder:"Step name",onCommit:a=>o(l,{name:a}),style:{display:"block",width:"100%",color:e.muted}}):s.name}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:12,color:e.text,margin:"0 0 10px",lineHeight:1.5},children:n?u.jsx(_,{value:s.description||"",placeholder:"Description",multiline:!0,onCommit:a=>o(l,{description:a}),style:{minHeight:18}}):s.description}),u.jsx("div",{style:{background:e.background,borderRadius:6,padding:"8px 10px",borderLeft:`3px solid ${i[l]||e.primary}`},children:u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:11,color:e.muted,margin:0,fontStyle:"italic",lineHeight:1.45},children:n?u.jsx(_,{value:s.example||"",placeholder:"Example",multiline:!0,onCommit:a=>o(l,{example:a}),style:{minHeight:18,color:e.muted}}):s.example})})]},s.letter))})]})}function MO({block:t,theme:e,editable:n,onUpdateBlock:r}){const[i,o]=b.useState(!1),s=()=>{navigator.clipboard.writeText(t.prompt||"").then(()=>{o(!0),setTimeout(()=>o(!1),1600)})};return u.jsx("div",{style:pt(28,40),children:u.jsxs("details",{style:{border:`1px solid ${e.border}`,borderRadius:12,overflow:"hidden",background:e.surface},children:[u.jsxs("summary",{style:{listStyle:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",gap:12,padding:"12px 14px",userSelect:"none"},children:[u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:2},children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.18em",textTransform:"uppercase",color:e.accent},children:" Template Prompt"}),u.jsx("div",{style:{fontFamily:e.fontDisplay,fontSize:18,color:e.text,fontWeight:500},children:n?u.jsx(_,{value:t.heading||"",placeholder:"Heading",onCommit:l=>r({heading:l})}):t.heading})]}),u.jsx("button",{type:"button",onClick:l=>{l.preventDefault(),l.stopPropagation(),s()},style:{padding:"7px 12px",background:i?e.accent:e.primary,border:"none",borderRadius:8,fontFamily:e.fontBody,fontSize:12,color:"#fff",cursor:"pointer",whiteSpace:"nowrap"},children:i?" Copied":" Copy"})]}),u.jsx("div",{style:{padding:"12px 14px",background:e.background,borderTop:`1px solid ${e.border}`},children:u.jsx("pre",{style:{fontFamily:e.fontMono,fontSize:12,color:e.text,margin:0,whiteSpace:"pre-wrap",lineHeight:1.6},children:n?u.jsx(_,{value:t.prompt||"",placeholder:"Template prompt",multiline:!0,onCommit:l=>r({prompt:l}),style:{minHeight:140,fontFamily:e.fontMono,fontSize:12}}):t.prompt})})]})})}function jO({block:t,theme:e}){const n=(t.items||[]).filter(Boolean);return u.jsx("div",{style:pt(18,40),children:u.jsxs("div",{style:{border:"1px solid #F4D38B",background:"#FFF7E6",borderRadius:12,padding:14},children:[u.jsx("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:10},children:u.jsxs("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.14em",textTransform:"uppercase",color:"#8A5A00"},children:[" ",t.heading||"Safety Reminders"]})}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:n.length<=2?"1fr":"1fr 1fr",gap:10},children:n.map((r,i)=>u.jsxs("div",{style:{background:"rgba(255,255,255,0.65)",border:`1px solid ${e.border}`,borderRadius:10,padding:12,display:"flex",gap:10},children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:11,color:"#8A5A00",marginTop:1},children:""}),u.jsx("div",{style:{fontFamily:e.fontBody,fontSize:13,color:e.text,lineHeight:1.6},children:r})]},i))})]})})}function AO({block:t,theme:e}){const[n,r]=b.useState(null),[i,o]=b.useState(null),s=a=>{navigator.clipboard.writeText(a.prompt).then(()=>{r(a.id),setTimeout(()=>r(null),2e3)})},l={"Differential Diagnosis":e.primary,"Discharge Summary":e.secondary,"Literature Review":e.accent,"Patient Education":"#00A651","EEG / EMG Report":"#7B2D8B",Research:"#F47920"};return u.jsxs("div",{style:pt(28,40),children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.18em",textTransform:"uppercase",color:e.accent,marginBottom:8},children:" Ready-to-Use Prompts"}),u.jsx("h2",{style:{fontFamily:e.fontDisplay,fontSize:26,color:e.text,margin:"0 0 6px",fontWeight:400},children:t.heading}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:14,color:e.muted,margin:"0 0 20px"},children:t.description}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12},children:(t.templates||[]).map(a=>{const c=i===a.id,d=n===a.id,f=l[a.category]||e.primary;return u.jsxs("div",{style:{border:`1px solid ${e.border}`,borderRadius:10,overflow:"hidden",background:e.surface,transition:"box-shadow 0.15s"},children:[u.jsx("div",{style:{padding:"12px 14px",borderBottom:c?`1px solid ${e.border}`:"none"},children:u.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:8},children:[u.jsxs("div",{style:{flex:1,minWidth:0},children:[u.jsx("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:4},children:u.jsx("span",{style:{fontFamily:e.fontMono,fontSize:9,letterSpacing:"0.12em",textTransform:"uppercase",color:"#fff",padding:"2px 7px",background:f,borderRadius:999},children:a.category})}),u.jsx("div",{style:{fontFamily:e.fontBody,fontSize:13,fontWeight:600,color:e.text,marginBottom:3},children:a.title}),u.jsx("div",{style:{fontFamily:e.fontBody,fontSize:11,color:e.muted},children:a.useCase})]}),u.jsxs("div",{style:{display:"flex",gap:4,flexShrink:0},children:[u.jsx("button",{onClick:()=>o(c?null:a.id),style:{padding:"5px 8px",background:"none",border:`1px solid ${e.border}`,borderRadius:6,fontFamily:e.fontBody,fontSize:11,color:e.muted,cursor:"pointer"},children:c?"Collapse":"Preview"}),u.jsx("button",{onClick:()=>s(a),style:{padding:"5px 10px",background:d?e.accent:e.primary,border:"none",borderRadius:6,fontFamily:e.fontBody,fontSize:11,color:"#fff",cursor:"pointer",transition:"background 0.2s",whiteSpace:"nowrap"},children:d?" Copied!":" Copy"})]})]})}),c&&u.jsx("div",{style:{padding:"10px 14px",background:e.background},children:u.jsx("pre",{style:{fontFamily:e.fontMono,fontSize:11,color:e.text,margin:0,whiteSpace:"pre-wrap",lineHeight:1.6},children:a.prompt})})]},a.id)})})]})}function DO({block:t,theme:e,editable:n,onUpdateBlock:r}){return u.jsxs("div",{style:pt(28,40),children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.18em",textTransform:"uppercase",color:e.accent,marginBottom:8},children:" AI Term of the Month"}),u.jsx("h2",{style:{fontFamily:e.fontDisplay,fontSize:34,color:e.text,margin:"0 0 20px",fontWeight:400},children:n?u.jsx(_,{value:t.term||"",placeholder:"Term",onCommit:i=>r({term:i}),style:{display:"block",width:"100%"}}):t.term}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:16},children:[{title:"Definition",key:"definition",content:t.definition},{title:"Relevance to Practice",key:"relevance",content:t.relevance},{title:"Clinical Application",key:"clinicalApplication",content:t.clinicalApplication}].map(({title:i,key:o,content:s})=>u.jsxs("div",{style:{border:`1px solid ${e.border}`,borderRadius:10,padding:16,background:e.surface},children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.12em",textTransform:"uppercase",color:e.muted,marginBottom:8},children:i}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:13,color:e.text,margin:0,lineHeight:1.6},children:n?u.jsx(_,{value:s||"",placeholder:i,multiline:!0,onCommit:l=>r({[o]:l}),style:{minHeight:18}}):s})]},i))}),(t.relatedTerms||[]).length>0&&u.jsxs("div",{style:{marginTop:14,display:"flex",flexWrap:"wrap",gap:6},children:[u.jsx("span",{style:{fontFamily:e.fontMono,fontSize:10,color:e.muted,textTransform:"uppercase",letterSpacing:"0.1em",alignSelf:"center"},children:"Related:"}),t.relatedTerms.map(i=>u.jsx("span",{style:{fontFamily:e.fontBody,fontSize:12,padding:"3px 10px",background:e.background,border:`1px solid ${e.border}`,borderRadius:999,color:e.muted},children:i},i))]})]})}function RO({block:t,theme:e,editable:n,onUpdateBlock:r}){const i=t.imageDataUrl||t.imageUrl;return u.jsx("div",{style:pt(28,40),children:u.jsxs("div",{style:{display:"flex",gap:24,alignItems:"flex-start"},children:[u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:10,flexShrink:0},children:[u.jsxs("div",{style:{background:e.primary,borderRadius:10,padding:"14px 18px",textAlign:"center"},children:[u.jsx("div",{style:{fontFamily:e.fontDisplay,fontSize:28,color:"#fff",lineHeight:1,textShadow:"0 1px 0 rgba(0,0,0,0.18)"},children:n?u.jsx(_,{value:t.year||"",placeholder:"Year",onCommit:o=>r({year:o}),style:{display:"block",width:"100%",color:"#fff"}}):t.year}),u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,color:"rgba(255,255,255,0.85)",letterSpacing:"0.12em",textTransform:"uppercase",marginTop:4},children:"AI Case File"})]}),i&&u.jsx("div",{style:{width:100,height:80,borderRadius:8,overflow:"hidden",border:`1px solid ${e.border}`},children:u.jsx("img",{src:i,alt:t.title,style:{width:"100%",height:"100%",objectFit:"cover"}})})]}),u.jsxs("div",{style:{flex:1,minWidth:0},children:[u.jsx("h3",{style:{fontFamily:e.fontDisplay,fontSize:22,color:e.text,margin:"0 0 10px",fontWeight:400},children:n?u.jsx(_,{value:t.title||"",placeholder:"Title",onCommit:o=>r({title:o}),style:{display:"block",width:"100%"}}):t.title}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:14,color:e.muted,margin:"0 0 12px",lineHeight:1.65},children:n?u.jsx(_,{value:t.content||"",placeholder:"Content",multiline:!0,onCommit:o=>r({content:o}),style:{minHeight:18,color:e.muted}}):t.content}),t.significance&&u.jsx("div",{style:{background:e.background,borderRadius:8,padding:"10px 14px",borderLeft:`3px solid ${e.accent}`,marginBottom:12},children:u.jsxs("p",{style:{fontFamily:e.fontBody,fontSize:13,color:e.muted,margin:0,lineHeight:1.55},children:[u.jsx("strong",{children:"Significance:"})," ",t.significance]})}),(t.sourceUrl||t.sourceLabel)&&u.jsxs("div",{style:{fontFamily:e.fontMono,fontSize:11,color:e.muted},children:["Source: ",t.sourceUrl?u.jsx("a",{href:t.sourceUrl,target:"_blank",rel:"noopener noreferrer",style:{color:e.accent},children:t.sourceLabel||t.sourceUrl}):t.sourceLabel]})]})]})})}function IO({block:t,theme:e,editable:n,onUpdateBlock:r}){const i=(o,s)=>{const l=(t.hits||[]).map(a=>a.id===o?{...a,...s}:a);r({hits:l})};return u.jsxs("div",{style:pt(24,40),children:[u.jsxs("h2",{style:{fontFamily:e.fontDisplay,fontSize:26,color:e.text,margin:"0 0 16px",fontWeight:400},children:[""," ",n?u.jsx(_,{value:t.heading||"",placeholder:"Heading",onCommit:o=>r({heading:o}),style:{display:"block",width:"100%"}}):t.heading]}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:(t.hits||[]).map((o,s)=>u.jsxs("div",{style:{display:"flex",gap:14,alignItems:"flex-start",padding:"12px 14px",border:`1px solid ${e.border}`,borderRadius:10,background:e.surface},children:[u.jsx("span",{style:{fontFamily:e.fontMono,fontSize:18,color:e.accent,lineHeight:1,flexShrink:0,minWidth:28},children:String(s+1).padStart(2,"0")}),u.jsxs("div",{style:{flex:1,minWidth:0},children:[u.jsx("div",{style:{fontFamily:e.fontBody,fontSize:14,fontWeight:600,color:e.text,marginBottom:4,lineHeight:1.3},children:n?u.jsx(_,{value:o.title||"",placeholder:"Title",onCommit:l=>i(o.id,{title:l}),style:{display:"block",width:"100%"}}):o.url?u.jsx("a",{href:o.url,target:"_blank",rel:"noopener noreferrer",style:{color:e.text,textDecoration:"none"},children:o.title}):o.title}),u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,color:e.muted,letterSpacing:"0.1em",textTransform:"uppercase",marginBottom:4},children:n?u.jsx(_,{value:o.source||"",placeholder:"Source",onCommit:l=>i(o.id,{source:l}),style:{display:"block",width:"100%",color:e.muted}}):o.source}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:13,color:e.muted,margin:0,lineHeight:1.5},children:n?u.jsx(_,{value:o.summary||"",placeholder:"Summary",multiline:!0,onCommit:l=>i(o.id,{summary:l}),style:{minHeight:18,color:e.muted}}):o.summary})]}),o.url&&u.jsx("a",{href:o.url,target:"_blank",rel:"noopener noreferrer",style:{flexShrink:0,fontFamily:e.fontBody,fontSize:11,color:e.accent,fontWeight:600,textDecoration:"none"},children:"Read "})]},o.id))})]})}function OO({block:t,theme:e,editable:n,onUpdateBlock:r}){const i=t.imageDataUrl||t.imageUrl,o=t.imageFit||"contain",s=t.imageHeight;return u.jsx("div",{style:pt(28,40),children:u.jsxs("div",{style:{background:`linear-gradient(135deg, ${e.background}, ${e.surface})`,border:`1px solid ${e.border}`,borderRadius:16,overflow:"hidden"},children:[u.jsxs("div",{style:{padding:"16px 18px",borderBottom:`1px solid ${e.border}`,display:"flex",alignItems:"center",gap:10},children:[u.jsx("span",{style:{fontSize:18},children:""}),u.jsx("div",{style:{fontFamily:e.fontDisplay,fontSize:20,color:e.text,fontWeight:400},children:n?u.jsx(_,{value:t.heading||"Humor",placeholder:"Humor",onCommit:l=>r({heading:l}),style:{display:"block",width:"100%"}}):t.heading||"Humor"})]}),i&&u.jsxs("div",{style:{position:"relative"},children:[u.jsx("img",{src:i,alt:"Humor block",style:{width:"100%",display:"block",height:s?`${s}px`:"auto",objectFit:s?o:void 0}}),n&&u.jsxs("div",{style:{position:"absolute",bottom:8,right:8,display:"flex",gap:6,alignItems:"center",background:"rgba(0,0,0,0.55)",borderRadius:8,padding:"5px 10px"},children:[u.jsx("span",{style:{fontFamily:e.fontMono,fontSize:10,color:"#fff",whiteSpace:"nowrap"},children:s?`${s}px`:"Auto"}),u.jsx("input",{type:"range",min:80,max:600,step:20,value:s||300,onChange:l=>r({imageHeight:Number(l.target.value)}),style:{width:80,accentColor:e.accent,cursor:"pointer"},title:"Drag to set image height"}),u.jsxs("select",{value:o,onChange:l=>r({imageFit:l.target.value}),style:{fontFamily:e.fontMono,fontSize:10,background:"rgba(255,255,255,0.15)",color:"#fff",border:"none",borderRadius:4,padding:"2px 4px",cursor:"pointer"},title:"Image fit mode",children:[u.jsx("option",{value:"contain",children:"Fit (show all)"}),u.jsx("option",{value:"cover",children:"Fill (crop edges)"}),u.jsx("option",{value:"fill",children:"Stretch"})]}),s&&u.jsx("button",{onClick:()=>r({imageHeight:void 0}),style:{fontFamily:e.fontMono,fontSize:10,background:"rgba(255,255,255,0.2)",color:"#fff",border:"none",borderRadius:4,padding:"2px 6px",cursor:"pointer"},title:"Reset to auto height (show full image)",children:"Auto "})]})]}),u.jsxs("div",{style:{padding:"18px 22px",textAlign:"center"},children:[!i&&u.jsx("div",{style:{fontSize:44,marginBottom:10},children:t.emojiDecor||""}),u.jsx("div",{style:{fontFamily:e.fontBody,fontSize:14,color:e.muted,marginBottom:10},children:n?u.jsx(_,{value:t.attribution||"",placeholder:"Short caption (optional)",onCommit:l=>r({attribution:l}),style:{display:"block",width:"100%",color:e.muted}}):t.attribution}),u.jsx("div",{style:{fontFamily:e.fontBody,fontSize:16,color:e.text,fontStyle:"italic",lineHeight:1.65,maxWidth:760,margin:"0 auto"},children:n?u.jsx(_,{value:t.content||"",placeholder:"Punchline",multiline:!0,onCommit:l=>r({content:l}),style:{minHeight:18}}):t.content}),t.sourceUrl&&u.jsx("div",{style:{marginTop:10},children:u.jsx("a",{href:t.sourceUrl,target:"_blank",rel:"noopener noreferrer",style:{fontFamily:e.fontBody,fontSize:12,color:e.accent,textDecoration:"none"},children:"Source "})})]})]})})}function NO({block:t,theme:e}){return u.jsx("div",{style:{height:t.height,borderTop:t.showLine?`1px ${t.lineStyle} ${e.border}`:"none",margin:t.showLine?"0 40px":0}})}function zO({block:t,theme:e,editable:n,onUpdateBlock:r}){const i=(s,l)=>{const a=(t.updates||[]).map(c=>c.id===s?{...c,...l}:c);r({updates:a})},o={critical:{color:"#C0392B",bg:"#FEF0EE",border:"#f5c6c0",label:"CRITICAL",icon:""},high:{color:"#C06500",bg:"#FFF4E6",border:"#F6D860",label:"HIGH",icon:""},medium:{color:"#0057A8",bg:"#EEF4FF",border:"#C8D9EE",label:"MEDIUM",icon:""},informational:{color:"#005F6B",bg:"#F0FAFA",border:"#B2E0E4",label:"INFO",icon:""}};return u.jsxs("div",{style:pt(28,40),children:[u.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:20,flexWrap:"wrap",gap:10},children:[u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:6},children:[u.jsx("span",{style:{fontSize:18},children:""}),u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.18em",textTransform:"uppercase",color:"#C0392B"},children:"AI Safety Monitor"})]}),u.jsx("h2",{style:{fontFamily:e.fontDisplay,fontSize:26,color:e.text,margin:"0 0 4px",fontWeight:400},children:n?u.jsx(_,{value:t.heading||"",placeholder:"Heading",onCommit:s=>r({heading:s}),style:{display:"block",width:"100%"}}):t.heading}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:14,color:e.muted,margin:0},children:n?u.jsx(_,{value:t.subheading||"",placeholder:"Subheading",multiline:!0,onCommit:s=>r({subheading:s}),style:{minHeight:18,color:e.muted}}):t.subheading})]}),t.showLastUpdated&&u.jsxs("div",{style:{fontFamily:e.fontMono,fontSize:10,color:e.muted,textAlign:"right",lineHeight:1.4},children:["Last updated",u.jsx("br",{}),new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:(t.updates||[]).map(s=>{const l=o[s.severity]||o.informational;return u.jsx("div",{style:{border:`1px solid ${l.border}`,borderRadius:10,background:l.bg,overflow:"hidden"},children:u.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:12,padding:"14px 16px"},children:[u.jsxs("div",{style:{flexShrink:0,display:"flex",flexDirection:"column",alignItems:"center",gap:4,paddingTop:2},children:[u.jsx("span",{style:{fontSize:14},children:l.icon}),u.jsx("span",{style:{fontFamily:e.fontMono,fontSize:8,letterSpacing:"0.1em",textTransform:"uppercase",color:l.color,fontWeight:700},children:l.label})]}),u.jsxs("div",{style:{flex:1,minWidth:0},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4,flexWrap:"wrap"},children:[u.jsx("span",{style:{fontFamily:e.fontMono,fontSize:9,letterSpacing:"0.1em",textTransform:"uppercase",color:l.color,padding:"2px 7px",background:l.color+"18",borderRadius:999},children:n?u.jsx(_,{value:s.category||"",placeholder:"Category",onCommit:a=>i(s.id,{category:["FDA","Policy","Incident","Guideline","Alert","Research"].includes(a)?a:void 0}),style:{display:"block",width:"100%",color:l.color}}):s.category}),u.jsx("span",{style:{fontFamily:e.fontMono,fontSize:10,color:e.muted},children:n?u.jsx(_,{value:s.date||"",placeholder:"Date",onCommit:a=>i(s.id,{date:a}),style:{display:"block",width:"100%",color:e.muted}}):s.date})]}),u.jsx("div",{style:{fontFamily:e.fontBody,fontSize:14,fontWeight:600,color:e.text,marginBottom:4},children:n?u.jsx(_,{value:s.title||"",placeholder:"Title",onCommit:a=>i(s.id,{title:a}),style:{display:"block",width:"100%"}}):s.url?u.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",style:{color:e.text,textDecoration:"none"},children:s.title}):s.title}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:13,color:e.muted,margin:0,lineHeight:1.55},children:n?u.jsx(_,{value:s.summary||"",placeholder:"Summary",multiline:!0,onCommit:a=>i(s.id,{summary:a}),style:{minHeight:18,color:e.muted}}):s.summary}),s.url&&u.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",marginTop:8,fontFamily:e.fontBody,fontSize:11,color:l.color,fontWeight:600},children:"View full guidance "})]})]})},s.id)})})]})}function PO({block:t,theme:e}){return u.jsxs("div",{style:pt(28,40),children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:6},children:[u.jsx("div",{style:{width:28,height:28,background:e.primary,borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:u.jsx("span",{style:{fontSize:14},children:""})}),u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.18em",textTransform:"uppercase",color:e.primary},children:t.institutionLabel||"Your Institution"})]}),u.jsx("h2",{style:{fontFamily:e.fontDisplay,fontSize:26,color:e.text,margin:"0 0 4px",fontWeight:400},children:t.heading}),t.subheading&&u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:14,color:e.muted,margin:"0 0 20px"},children:t.subheading}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:14},children:(t.items||[]).slice(0,t.maxItems||6).map(n=>u.jsxs("div",{style:{border:`1px solid ${e.border}`,borderRadius:10,overflow:"hidden",background:e.surface,display:"flex",flexDirection:"column"},children:[n.imageUrl&&u.jsx("div",{style:{height:120,overflow:"hidden"},children:u.jsx("img",{src:n.imageUrl,alt:n.title,style:{width:"100%",height:"100%",objectFit:"cover"}})}),u.jsxs("div",{style:{padding:14,flex:1,display:"flex",flexDirection:"column"},children:[n.category&&u.jsx("span",{style:{fontFamily:e.fontMono,fontSize:9,letterSpacing:"0.12em",textTransform:"uppercase",color:e.accent,marginBottom:6,display:"block"},children:n.category}),u.jsx("div",{style:{fontFamily:e.fontBody,fontSize:13,fontWeight:600,color:e.text,marginBottom:6,lineHeight:1.35,flex:1,minWidth:0},children:n.url?u.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",style:{color:e.text,textDecoration:"none"},children:n.title}):n.title}),n.summary&&u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:12,color:e.muted,margin:"0 0 8px",lineHeight:1.5},children:n.summary}),n.pubDate&&u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,color:e.muted},children:new Date(n.pubDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),n.url&&u.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",style:{marginTop:8,fontFamily:e.fontBody,fontSize:11,color:e.accent,fontWeight:600,textDecoration:"none"},children:"Read more "})]})]},n.id))})]})}function LO({block:t,theme:e,editable:n,onUpdateBlock:r}){const i="https://api.allorigins.win/get?url=",[o,s]=b.useState(t.items||[]),[l,a]=b.useState(t.lastFetched||""),c=b.useCallback((p,h)=>{try{const g=new DOMParser().parseFromString(p,"text/xml");if(g.querySelector("parsererror"))return[];const S=Array.from(g.querySelectorAll("item"));return S.length?S.map(x=>{var v,w,k,T,C,E,O,N;return{title:((w=(v=x.querySelector("title"))==null?void 0:v.textContent)==null?void 0:w.trim())||"",url:((T=(k=x.querySelector("link"))==null?void 0:k.textContent)==null?void 0:T.trim())||"",pubDate:((E=(C=x.querySelector("pubDate"))==null?void 0:C.textContent)==null?void 0:E.trim())||"",source:((N=(O=x.querySelector("source"))==null?void 0:O.textContent)==null?void 0:N.trim())||h}}).filter(x=>!!x.title):Array.from(g.querySelectorAll("entry")).map(x=>{var v,w,k,T,C,E,O,N,B,X,ce;return{title:((w=(v=x.querySelector("title"))==null?void 0:v.textContent)==null?void 0:w.trim())||"",url:((k=x.querySelector("link"))==null?void 0:k.getAttribute("href"))||((C=(T=x.querySelector("link"))==null?void 0:T.textContent)==null?void 0:C.trim())||"",pubDate:((O=(E=x.querySelector("updated"))==null?void 0:E.textContent)==null?void 0:O.trim())||((B=(N=x.querySelector("published"))==null?void 0:N.textContent)==null?void 0:B.trim())||"",source:((ce=(X=g.querySelector("feed > title"))==null?void 0:X.textContent)==null?void 0:ce.trim())||h}}).filter(x=>!!x.title)}catch{return[]}},[]);b.useEffect(()=>{let p=!1;async function h(){if(!t.refreshOnView)return;const m=(t.feedUrls||[]).filter(Boolean);if(!m.length||typeof navigator<"u"&&navigator.onLine===!1)return;const g=[];for(const v of m)try{const w=await fetch(i+encodeURIComponent(v),{cache:"no-store"});if(!w.ok)continue;const k=await w.json(),T=k&&typeof k.contents=="string"?k.contents:"";g.push(...c(T,v))}catch{}const S=new Set,y=g.filter(v=>!v.url||S.has(v.url)?!1:(S.add(v.url),!0));y.sort((v,w)=>(Date.parse(w.pubDate)||0)-(Date.parse(v.pubDate)||0));const x=new Date().toISOString();p||(s(y),a(x),n&&r({items:y,lastFetched:x}))}return h(),()=>{p=!0}},[i,t.feedUrls,t.refreshOnView,n,r,c]);const d=t.refreshOnView?o:t.items||[],f=t.refreshOnView?l:t.lastFetched||"";return u.jsx("div",{className:"nap-rss-sidebar",style:{padding:"24px 40px"},children:u.jsx("div",{className:"nap-rss-config",children:u.jsxs("div",{style:{border:`1px solid ${e.border}`,borderRadius:12,overflow:"hidden",background:e.surface},children:[u.jsxs("div",{style:{background:e.primary,padding:"12px 18px",display:"flex",alignItems:"center",gap:8},children:[u.jsx("span",{style:{fontSize:14},children:""}),u.jsx("span",{style:{fontFamily:e.fontMono,fontSize:11,letterSpacing:"0.14em",textTransform:"uppercase",color:"rgba(255,255,255,0.9)"},children:t.heading}),f&&u.jsxs("span",{style:{marginLeft:"auto",fontFamily:e.fontMono,fontSize:9,color:"rgba(255,255,255,0.5)"},children:["Updated ",new Date(f).toLocaleDateString()]})]}),u.jsx("div",{className:"nap-rss-scroll",style:{maxHeight:t.enableScroll?420:"none",overflowY:t.enableScroll?"auto":"visible"},children:(d||[]).length===0?u.jsx("div",{style:{padding:"24px 18px",textAlign:"center",color:e.muted,fontFamily:e.fontBody,fontSize:13},children:"No feed items yet  configure feeds in Block Settings and refresh."}):(d||[]).slice(0,t.maxItems||8).map((p,h)=>u.jsxs("div",{style:{padding:"11px 18px",borderBottom:`1px solid ${e.border}`,display:"flex",gap:10,alignItems:"flex-start"},children:[u.jsx("span",{style:{fontFamily:e.fontMono,fontSize:12,color:e.accent,flexShrink:0,minWidth:20,marginTop:1},children:String(h+1).padStart(2,"0")}),u.jsxs("div",{style:{flex:1,minWidth:0},children:[u.jsx("div",{style:{fontFamily:e.fontBody,fontSize:13,fontWeight:600,color:e.text,lineHeight:1.3,marginBottom:3},children:p.url?u.jsx("a",{href:p.url,target:"_blank",rel:"noopener noreferrer",style:{color:e.text,textDecoration:"none"},onMouseEnter:m=>m.currentTarget.style.color=e.accent,onMouseLeave:m=>m.currentTarget.style.color=e.text,children:p.title}):p.title}),u.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[p.source&&u.jsx("span",{style:{fontFamily:e.fontMono,fontSize:9,color:e.muted,textTransform:"uppercase",letterSpacing:"0.08em"},children:p.source}),p.pubDate&&u.jsx("span",{style:{fontFamily:e.fontMono,fontSize:9,color:e.muted},children:new Date(p.pubDate).toLocaleDateString()})]})]}),p.url&&u.jsx("a",{href:p.url,target:"_blank",rel:"noopener noreferrer",style:{flexShrink:0,fontFamily:e.fontBody,fontSize:11,color:e.accent,fontWeight:600,textDecoration:"none",paddingTop:1},children:""})]},h))})]})})})}function $O({block:t,theme:e}){const n=t.contactEmail?`mailto:${t.contactEmail}?subject=${encodeURIComponent("Newsletter Feedback")}`:"#";return u.jsxs("div",{className:"nap-white-section",style:{background:e.primary,padding:"44px 40px 36px",textAlign:"center",color:"#fff"},children:[(t.nextIssueDate||t.nextIssueTeaser)&&u.jsxs("div",{style:{background:"rgba(255,255,255,0.12)",borderRadius:10,padding:"14px 20px",marginBottom:28,display:"inline-block"},children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.14em",textTransform:"uppercase",color:"rgba(255,255,255,0.75)",marginBottom:4},children:"Next Issue"}),u.jsxs("div",{style:{fontFamily:e.fontBody,fontSize:14,color:"#fff"},children:[t.nextIssueDate,t.nextIssueTeaser?`  ${t.nextIssueTeaser}`:""]})]}),u.jsx("div",{style:{fontFamily:e.fontDisplay,fontSize:22,color:"#fff",marginBottom:4,fontWeight:400},children:t.institution}),u.jsx("div",{style:{fontFamily:e.fontBody,fontSize:14,color:"rgba(255,255,255,0.85)",marginBottom:4},children:t.department}),t.editors&&u.jsx("div",{style:{fontFamily:e.fontBody,fontSize:13,color:"rgba(255,255,255,0.75)",marginBottom:22},children:t.editors}),u.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:22},children:u.jsxs("a",{href:n,style:{display:"inline-flex",alignItems:"center",gap:10,fontFamily:e.fontBody,fontSize:13,fontWeight:700,color:"#fff",textDecoration:"none",padding:"10px 16px",borderRadius:12,border:"1px solid rgba(255,255,255,0.35)",background:"rgba(255,255,255,0.10)"},children:["Contact Us",u.jsx("span",{style:{opacity:.8},children:""})]})}),u.jsx("div",{style:{height:1,background:"rgba(255,255,255,0.18)",maxWidth:240,margin:"0 auto 18px"}}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:11,color:"rgba(255,255,255,0.75)",margin:"0 0 8px",maxWidth:580,marginLeft:"auto",marginRight:"auto",lineHeight:1.6},children:t.disclaimer}),u.jsxs("p",{style:{fontFamily:e.fontMono,fontSize:10,color:"rgba(255,255,255,0.65)",margin:0,letterSpacing:"0.1em"},children:[" ",t.copyrightYear," ",t.institution]})]})}function ix({block:t,theme:e,newsletter:n,editable:r,onUpdateBlock:i,onUpdateArticle:o,onDeleteArticle:s,onMoveArticle:l,onAddArticle:a}){const c={theme:e,newsletter:n,editable:r,onUpdateBlock:i},d={onUpdateArticle:(f,p)=>o(t.id,f,p),onDeleteArticle:f=>s(t.id,f),onMoveArticle:(f,p)=>l(t.id,f,p),onAddArticle:()=>a(t.id)};switch(t.type){case"header":return u.jsx(mO,{block:t,...c});case"ticker":return u.jsx(gO,{block:t,...c});case"section-divider":return u.jsx(yO,{block:t,...c});case"article-grid":return u.jsx(xO,{block:t,...c,...d});case"spotlight":return u.jsx(SO,{block:t,...c,...d});case"ethics-split":return u.jsx(bO,{block:t,...c});case"image":return u.jsx(wO,{block:t,...c});case"text":return u.jsx(kO,{block:t,...c});case"html-embed":return u.jsx(CO,{block:t,...c});case"prompt-masterclass":return u.jsx(EO,{block:t,...c});case"sbar-prompt":return u.jsx(TO,{block:t,...c});case"prompt-template":return u.jsx(MO,{block:t,...c});case"safety-reminders":return u.jsx(jO,{block:t,...c});case"clinical-prompt-templates":return u.jsx(AO,{block:t,...c});case"term-of-month":return u.jsx(DO,{block:t,...c});case"ai-case-file":return u.jsx(RO,{block:t,...c});case"quick-hits":return u.jsx(IO,{block:t,...c});case"humor":return u.jsx(OO,{block:t,...c});case"spacer":return u.jsx(NO,{block:t,...c});case"footer":return u.jsx($O,{block:t,...c});case"ai-safety":return u.jsx(zO,{block:t,...c});case"institutional-spotlight":return u.jsx(PO,{block:t,...c});case"rss-sidebar":return u.jsx(LO,{block:t,...c});default:return u.jsxs("div",{style:{padding:16,fontFamily:"monospace",fontSize:12,color:"#999"},children:["Unknown block: ",t.type]})}}function ox({newsletter:t,editorState:e,isMobile:n,onSelectBlock:r,onMoveBlock:i,onDeleteBlock:o,onDuplicateBlock:s,onAddBlock:l,onUpdateBlock:a,onUpdateArticle:c,onDeleteArticle:d,onMoveArticle:f,onAddArticle:p}){const{blockOrder:h,blocks:m,theme:g}=t,{selectedBlockId:S,previewMode:y,zoom:x}=e,v=U2(kg(uh,{activationConstraint:{distance:6}}),kg(ah)),w=b.useCallback(E=>{const{active:O,over:N}=E;if(!N||O.id===N.id)return;const B=h.indexOf(String(O.id)),X=h.indexOf(String(N.id));B!==-1&&X!==-1&&i(B,X)},[h,i]),k=n?100:x,T=n?void 0:800,C=k/100;return u.jsx("div",{className:n?"nap-canvas-scroll":"",style:{flex:1,overflow:"auto",background:"var(--color-bg)",display:"flex",flexDirection:"column",alignItems:"center",padding:n?y?"0 0 70px":"12px 0 80px":y?"32px 0":"24px 0 80px",WebkitOverflowScrolling:"touch"},children:u.jsx("div",{style:{width:T?T*C:"100%",transformOrigin:"top center",transform:C!==1?`scale(${C})`:void 0,marginBottom:C<1?`calc((${C} - 1) * 100%)`:0,maxWidth:n?"100%":void 0},children:u.jsxs("div",{id:"nap-paper",style:{width:n?"100%":T,background:g.surface,boxShadow:y||n?"none":"0 0 0 1px rgba(0,0,0,0.05), 0 8px 40px rgba(0,0,0,0.12)",borderRadius:y||n?0:12,overflow:"hidden",minHeight:400},children:[u.jsx(qE,{sensors:v,collisionDetection:J2,onDragEnd:w,children:u.jsx(sT,{items:h,strategy:iT,children:h.map((E,O)=>{const N=m[E];return N?u.jsx(FO,{id:E,block:N,idx:O,total:h.length,selected:S===E,previewMode:y,isMobile:n,theme:t.theme,newsletter:t,onSelect:()=>r(S===E?null:E),onDelete:()=>o(E),onDuplicate:()=>s(E),onMoveUp:()=>i(O,O-1),onMoveDown:()=>i(O,O+1),onAddAfter:B=>l(B,E),onUpdateBlock:B=>a(E,B),onUpdateArticle:c,onDeleteArticle:d,onMoveArticle:f,onAddArticle:p},E):null})})}),h.length===0&&u.jsxs("div",{style:{padding:80,textAlign:"center",color:"var(--color-muted)",fontFamily:"var(--font-body)"},children:[u.jsx("div",{style:{fontSize:48,marginBottom:16},children:""}),u.jsx("div",{style:{fontSize:18,fontFamily:"var(--font-display)",marginBottom:8},children:"Empty newsletter"}),u.jsx("div",{style:{fontSize:14},children:"Use the Blocks panel to add your first block."})]})]})})})}function FO({id:t,block:e,idx:n,total:r,selected:i,previewMode:o,isMobile:s,theme:l,newsletter:a,onSelect:c,onDelete:d,onDuplicate:f,onMoveUp:p,onMoveDown:h,onAddAfter:m,onUpdateBlock:g,onUpdateArticle:S,onDeleteArticle:y,onMoveArticle:x,onAddArticle:v}){const{attributes:w,listeners:k,setNodeRef:T,transform:C,transition:E,isDragging:O}=pT({id:t}),N={transform:Bs.Transform.toString(C),transition:E,opacity:O?.4:1,position:"relative"};return o?u.jsx("div",{ref:T,style:N,children:u.jsx(ix,{block:e,theme:l,newsletter:a,editable:!1,onUpdateBlock:g,onUpdateArticle:S,onDeleteArticle:y,onMoveArticle:x,onAddArticle:v})}):u.jsxs("div",{ref:T,style:N,children:[u.jsxs("div",{onClick:c,style:{position:"relative",cursor:"pointer",outline:i?"2px solid var(--color-accent)":"2px solid transparent",outlineOffset:-2,transition:"outline 0.1s"},children:[u.jsx(ix,{block:e,theme:l,newsletter:a,editable:i,onUpdateBlock:g,onUpdateArticle:S,onDeleteArticle:y,onMoveArticle:x,onAddArticle:v}),i&&u.jsxs("div",{onClick:B=>B.stopPropagation(),style:{position:"absolute",top:6,right:6,display:"flex",alignItems:"center",gap:s?6:4,background:"var(--color-primary)",borderRadius:8,padding:s?"6px 8px":"4px 6px",boxShadow:"0 4px 16px rgba(0,0,0,0.2)",zIndex:10},children:[u.jsx(BO,{block:e}),u.jsx("div",{style:{width:1,height:16,background:"rgba(255,255,255,0.2)",margin:"0 2px"}}),u.jsx(Bo,{icon:u.jsx(sC,{size:12}),onClick:p,disabled:n===0,title:"Move up"}),u.jsx(Bo,{icon:u.jsx(oC,{size:12}),onClick:h,disabled:n===r-1,title:"Move down"}),u.jsx(Bo,{icon:u.jsx(lC,{size:12}),onClick:f,title:"Duplicate"}),u.jsx(Bo,{icon:u.jsx(jv,{size:12}),onClick:c,title:"Settings",highlight:!0}),u.jsx(Bo,{icon:u.jsx(bo,{size:12}),onClick:()=>{confirm("Delete this block?")&&d()},title:"Delete",danger:!0})]}),i&&!s&&u.jsx("div",{...w,...k,onClick:B=>B.stopPropagation(),style:{position:"absolute",top:6,left:6,background:"var(--color-primary)",borderRadius:6,padding:"4px 6px",cursor:"grab",color:"rgba(255,255,255,0.7)",display:"flex",alignItems:"center",zIndex:10},title:"Drag to reorder",children:u.jsx(dC,{size:14})})]}),i&&u.jsx(_O,{onAdd:m})]})}function BO({block:t}){const e=Cf[t.type]||t.type,n=e.split("  ")[0],r=e.split("  ").slice(1).join("").trim();return u.jsxs("span",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"rgba(255,255,255,0.7)",letterSpacing:"0.1em",textTransform:"uppercase"},children:[n," ",r]})}function Bo({icon:t,onClick:e,disabled:n,title:r,highlight:i,danger:o}){return u.jsx("button",{onClick:e,disabled:n,title:r,style:{display:"flex",alignItems:"center",justifyContent:"center",width:26,height:26,background:o?"rgba(192,57,43,0.4)":i?"rgba(0,156,222,0.5)":"rgba(255,255,255,0.12)",border:"none",borderRadius:6,color:"#fff",cursor:n?"not-allowed":"pointer",opacity:n?.4:1,transition:"background 0.12s"},onMouseEnter:s=>{n||(s.currentTarget.style.background=o?"rgba(192,57,43,0.65)":"rgba(255,255,255,0.25)")},onMouseLeave:s=>{s.currentTarget.style.background=o?"rgba(192,57,43,0.4)":i?"rgba(0,156,222,0.5)":"rgba(255,255,255,0.12)"},children:t})}function _O({onAdd:t}){const[e,n]=Z.useState(!1),r=[{type:"article-grid",label:" Article Grid"},{type:"spotlight",label:" Spotlight"},{type:"text",label:" Text"},{type:"image",label:" Image"},{type:"section-divider",label:" Divider"},{type:"spacer",label:" Spacer"},{type:"quick-hits",label:" Quick Hits"},{type:"ai-safety",label:" AI Safety"},{type:"institutional-spotlight",label:" Institutional"},{type:"rss-sidebar",label:" RSS Feed"},{type:"prompt-template",label:" Template Prompt"},{type:"safety-reminders",label:" Safety Reminders"},{type:"clinical-prompt-templates",label:" Prompts"},{type:"html-embed",label:" HTML"}];return u.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",height:32,zIndex:5},children:[u.jsx("div",{style:{position:"absolute",left:0,right:0,top:"50%",height:1,background:"var(--color-accent)",opacity:.3}}),u.jsxs("button",{onClick:i=>{i.stopPropagation(),n(o=>!o)},style:{position:"relative",display:"flex",alignItems:"center",gap:5,padding:"4px 12px",background:"var(--color-accent)",border:"none",borderRadius:999,color:"#fff",fontSize:11,fontFamily:"var(--font-body)",cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.15)"},children:[u.jsx(Lr,{size:11})," Add block here"]}),e&&u.jsx("div",{style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",marginTop:4,background:"var(--color-surface)",border:"1px solid var(--color-border)",borderRadius:10,boxShadow:"0 8px 32px rgba(0,0,0,0.15)",zIndex:100,padding:8,display:"flex",flexWrap:"wrap",gap:4,width:340},onClick:i=>i.stopPropagation(),children:r.map(({type:i,label:o})=>u.jsx("button",{onClick:()=>{t(i),n(!1)},style:{padding:"6px 10px",background:"var(--color-bg)",border:"1px solid var(--color-border)",borderRadius:6,fontFamily:"var(--font-body)",fontSize:12,color:"var(--color-text)",cursor:"pointer"},onMouseEnter:s=>{s.currentTarget.style.borderColor="var(--color-accent)"},onMouseLeave:s=>{s.currentTarget.style.borderColor="var(--color-border)"},children:o},i))})]})}function sx(){return(window.location.hash||"").startsWith("#/preview")}function HO(){const t=()=>({isMobile:window.innerWidth<768,isTablet:window.innerWidth>=768&&window.innerWidth<1024,isDesktop:window.innerWidth>=1024}),[e,n]=b.useState(t);return b.useEffect(()=>{const r=()=>n(t());return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),e}function UO(){const{newsletter:t,load:e,addBlock:n,deleteBlock:r,updateBlock:i,moveBlock:o,duplicateBlock:s,updateTheme:l,updateMeta:a,addArticle:c,updateArticle:d,deleteArticle:f,moveArticle:p,addQuickHit:h,updateQuickHit:m,deleteQuickHit:g}=Yk(),{autosave:S,loadAutosave:y,saveVersion:x,deleteVersion:v,versions:w,exportJSON:k,importJSON:T}=Qk(),C=nC(),{isMobile:E,isTablet:O}=HO(),[N,B]=b.useState(null),[X,ce]=b.useState(sx()),[we,je]=b.useState(!1),[ke,ie]=b.useState({selectedBlockId:null,activePanel:"blocks",previewMode:!1,zoom:100}),[z,H]=b.useState(""),[V,oe]=b.useState("");b.useEffect(()=>{qk(t.theme)},[t.theme]),b.useEffect(()=>{!E&&!O&&je(!1)},[E,O]),b.useEffect(()=>{const W=()=>ce(sx());return window.addEventListener("hashchange",W),()=>window.removeEventListener("hashchange",W)},[]),b.useEffect(()=>{if(X){if(window.__NAP_NEWSLETTER__){B(window.__NAP_NEWSLETTER__),e(window.__NAP_NEWSLETTER__);return}fetch("./newsletter.json",{cache:"no-store"}).then(W=>W.ok?W.json():Promise.reject(new Error(`HTTP ${W.status}`))).then(W=>{B(W),e(W)}).catch(()=>B(null))}},[X,e]),b.useEffect(()=>{if(X)return;const W=y();W&&(e(W),H("Loaded autosave"))},[]),Xk(t,W=>{X||S(W)});const q=b.useCallback(W=>{oe(W),setTimeout(()=>oe(""),3e3)},[]),et=b.useCallback(()=>{S(t),H(new Date().toLocaleTimeString()),q("Saved ")},[t,S,q]),He=b.useCallback(()=>{const W=prompt("Version name (optional):")||void 0;x(t,W),q("Version saved")},[t,x,q]),en=b.useCallback(async W=>{try{const Ne=await T(W);e(Ne),q("Imported ")}catch(Ne){q(`Import failed: ${Ne.message}`)}},[T,e,q]),xe=b.useCallback(W=>{ie(Ne=>({...Ne,activePanel:W})),(E||O)&&je(!0)},[E,O]),$t=b.useCallback(W=>{ie(Ne=>({...Ne,selectedBlockId:W})),W&&(E||O)&&(ie(Ne=>({...Ne,selectedBlockId:W,activePanel:"blocks"})),je(!0))},[E,O]),hn=b.useCallback(()=>ie(W=>({...W,previewMode:!W.previewMode,selectedBlockId:null})),[]),tn=b.useCallback(W=>ie(Ne=>({...Ne,zoom:W})),[]),ne=X||ke.previewMode;if(X)return N?u.jsx("div",{style:{height:"100vh",background:"var(--color-bg)",fontFamily:"var(--font-body)",overflow:"auto"},children:u.jsx(ox,{newsletter:t,editorState:{...ke,previewMode:!0,selectedBlockId:null,zoom:100},isMobile:E,onSelectBlock:()=>{},onMoveBlock:()=>{},onDeleteBlock:()=>{},onDuplicateBlock:()=>{},onAddBlock:()=>{},onUpdateBlock:()=>{},onUpdateArticle:()=>{},onDeleteArticle:()=>{},onMoveArticle:()=>{},onAddArticle:()=>{}})}):u.jsxs("div",{style:{padding:24,fontFamily:"var(--font-body)",background:"var(--color-bg)",minHeight:"100vh"},children:[u.jsx("h2",{style:{margin:0},children:"Preview not available"}),u.jsx("p",{style:{opacity:.8},children:"Could not load newsletter.json. Place it next to index.html in your hosted folder."})]});const _r={newsletter:t,editorState:ke,rss:C,versions:w,isMobile:E,isTablet:O,drawerOpen:we,onCloseDrawer:()=>je(!1),onSetPanel:xe,onAddBlock:n,onSelectBlock:$t,onUpdateBlock:i,onUpdateTheme:l,onRestoreVersion:W=>{e(W.newsletter),q("Version restored")},onDeleteVersion:v,onAddArticle:c,onUpdateArticle:d,onDeleteArticle:f,onAddQuickHit:h,onUpdateQuickHit:m,onDeleteQuickHit:g};return u.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh",background:"var(--color-bg)",fontFamily:"var(--font-body)",overflow:"hidden"},children:[u.jsx(YC,{newsletter:t,editorState:ke,lastSaved:z,isMobile:E,isTablet:O,drawerOpen:we,onToggleDrawer:()=>je(W=>!W),onSave:et,onSaveVersion:He,onExportJson:()=>k(t),onImport:en,onTogglePreview:hn,onZoomChange:tn,onUpdateMeta:a}),u.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden",position:"relative"},children:[!ne&&u.jsx(k2,{..._r}),u.jsx(ox,{newsletter:t,editorState:{...ke,previewMode:ne},isMobile:E,onSelectBlock:$t,onMoveBlock:o,onDeleteBlock:r,onDuplicateBlock:s,onAddBlock:n,onUpdateBlock:i,onUpdateArticle:d,onDeleteArticle:f,onMoveArticle:p,onAddArticle:c}),we&&(E||O)&&u.jsx("div",{className:"nap-drawer-scrim",onClick:()=>je(!1)})]}),V&&u.jsx("div",{style:{position:"fixed",bottom:E?72:24,right:24,zIndex:9999,background:"var(--color-primary)",color:"#fff",padding:"12px 20px",borderRadius:12,fontFamily:"var(--font-body)",fontSize:14,boxShadow:"0 8px 32px rgba(0,0,0,0.25)",animation:"fadeInUp 0.2s ease"},children:V})]})}Cd.createRoot(document.getElementById("root")).render(u.jsx(Z.StrictMode,{children:u.jsx(UO,{})}));
