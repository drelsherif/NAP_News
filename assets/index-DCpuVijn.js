(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function ex(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var tx={exports:{}},Ac={},nx={exports:{}},Q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var el=Symbol.for("react.element"),ZS=Symbol.for("react.portal"),eb=Symbol.for("react.fragment"),tb=Symbol.for("react.strict_mode"),nb=Symbol.for("react.profiler"),rb=Symbol.for("react.provider"),ib=Symbol.for("react.context"),ob=Symbol.for("react.forward_ref"),sb=Symbol.for("react.suspense"),lb=Symbol.for("react.memo"),ab=Symbol.for("react.lazy"),em=Symbol.iterator;function cb(t){return t===null||typeof t!="object"?null:(t=em&&t[em]||t["@@iterator"],typeof t=="function"?t:null)}var rx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ix=Object.assign,ox={};function yo(t,e,n){this.props=t,this.context=e,this.refs=ox,this.updater=n||rx}yo.prototype.isReactComponent={};yo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sx(){}sx.prototype=yo.prototype;function op(t,e,n){this.props=t,this.context=e,this.refs=ox,this.updater=n||rx}var sp=op.prototype=new sx;sp.constructor=op;ix(sp,yo.prototype);sp.isPureReactComponent=!0;var tm=Array.isArray,lx=Object.prototype.hasOwnProperty,lp={current:null},ax={key:!0,ref:!0,__self:!0,__source:!0};function cx(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)lx.call(e,r)&&!ax.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:el,type:t,key:o,ref:s,props:i,_owner:lp.current}}function ub(t,e){return{$$typeof:el,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ap(t){return typeof t=="object"&&t!==null&&t.$$typeof===el}function db(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var nm=/\/+/g;function hu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?db(""+t.key):e.toString(36)}function Kl(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case el:case ZS:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+hu(s,0):r,tm(i)?(n="",t!=null&&(n=t.replace(nm,"$&/")+"/"),Kl(i,e,n,"",function(c){return c})):i!=null&&(ap(i)&&(i=ub(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(nm,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",tm(t))for(var l=0;l<t.length;l++){o=t[l];var a=r+hu(o,l);s+=Kl(o,e,n,a,i)}else if(a=cb(t),typeof a=="function")for(t=a.call(t),l=0;!(o=t.next()).done;)o=o.value,a=r+hu(o,l++),s+=Kl(o,e,n,a,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function hl(t,e,n){if(t==null)return t;var r=[],i=0;return Kl(t,r,"","",function(o){return e.call(n,o,i++)}),r}function fb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var dt={current:null},ql={transition:null},pb={ReactCurrentDispatcher:dt,ReactCurrentBatchConfig:ql,ReactCurrentOwner:lp};function ux(){throw Error("act(...) is not supported in production builds of React.")}Q.Children={map:hl,forEach:function(t,e,n){hl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return hl(t,function(){e++}),e},toArray:function(t){return hl(t,function(e){return e})||[]},only:function(t){if(!ap(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Q.Component=yo;Q.Fragment=eb;Q.Profiler=nb;Q.PureComponent=op;Q.StrictMode=tb;Q.Suspense=sb;Q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pb;Q.act=ux;Q.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ix({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=lp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)lx.call(e,a)&&!ax.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:el,type:t.type,key:i,ref:o,props:r,_owner:s}};Q.createContext=function(t){return t={$$typeof:ib,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:rb,_context:t},t.Consumer=t};Q.createElement=cx;Q.createFactory=function(t){var e=cx.bind(null,t);return e.type=t,e};Q.createRef=function(){return{current:null}};Q.forwardRef=function(t){return{$$typeof:ob,render:t}};Q.isValidElement=ap;Q.lazy=function(t){return{$$typeof:ab,_payload:{_status:-1,_result:t},_init:fb}};Q.memo=function(t,e){return{$$typeof:lb,type:t,compare:e===void 0?null:e}};Q.startTransition=function(t){var e=ql.transition;ql.transition={};try{t()}finally{ql.transition=e}};Q.unstable_act=ux;Q.useCallback=function(t,e){return dt.current.useCallback(t,e)};Q.useContext=function(t){return dt.current.useContext(t)};Q.useDebugValue=function(){};Q.useDeferredValue=function(t){return dt.current.useDeferredValue(t)};Q.useEffect=function(t,e){return dt.current.useEffect(t,e)};Q.useId=function(){return dt.current.useId()};Q.useImperativeHandle=function(t,e,n){return dt.current.useImperativeHandle(t,e,n)};Q.useInsertionEffect=function(t,e){return dt.current.useInsertionEffect(t,e)};Q.useLayoutEffect=function(t,e){return dt.current.useLayoutEffect(t,e)};Q.useMemo=function(t,e){return dt.current.useMemo(t,e)};Q.useReducer=function(t,e,n){return dt.current.useReducer(t,e,n)};Q.useRef=function(t){return dt.current.useRef(t)};Q.useState=function(t){return dt.current.useState(t)};Q.useSyncExternalStore=function(t,e,n){return dt.current.useSyncExternalStore(t,e,n)};Q.useTransition=function(){return dt.current.useTransition()};Q.version="18.3.1";nx.exports=Q;var b=nx.exports;const Y=ex(b);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hb=b,mb=Symbol.for("react.element"),gb=Symbol.for("react.fragment"),yb=Object.prototype.hasOwnProperty,xb=hb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vb={key:!0,ref:!0,__self:!0,__source:!0};function dx(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)yb.call(e,r)&&!vb.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:mb,type:t,key:o,ref:s,props:i,_owner:xb.current}}Ac.Fragment=gb;Ac.jsx=dx;Ac.jsxs=dx;tx.exports=Ac;var u=tx.exports,wd={},fx={exports:{}},Ot={},px={exports:{}},hx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,_){var V=z.length;z.push(_);e:for(;0<V;){var ne=V-1>>>1,U=z[ne];if(0<i(U,_))z[ne]=_,z[V]=U,V=ne;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var _=z[0],V=z.pop();if(V!==_){z[0]=V;e:for(var ne=0,U=z.length,fe=U>>>1;ne<fe;){var ot=2*(ne+1)-1,Cn=z[ot],Ce=ot+1,En=z[Ce];if(0>i(Cn,V))Ce<U&&0>i(En,Cn)?(z[ne]=En,z[Ce]=V,ne=Ce):(z[ne]=Cn,z[ot]=V,ne=ot);else if(Ce<U&&0>i(En,V))z[ne]=En,z[Ce]=V,ne=Ce;else break e}}return _}function i(z,_){var V=z.sortIndex-_.sortIndex;return V!==0?V:z.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var a=[],c=[],d=1,f=null,p=3,h=!1,m=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(z){for(var _=n(c);_!==null;){if(_.callback===null)r(c);else if(_.startTime<=z)r(c),_.sortIndex=_.expirationTime,e(a,_);else break;_=n(c)}}function k(z){if(g=!1,S(z),!m)if(n(a)!==null)m=!0,Fe(w);else{var _=n(c);_!==null&&le(k,_.startTime-z)}}function w(z,_){m=!1,g&&(g=!1,y(j),j=-1),h=!0;var V=p;try{for(S(_),f=n(a);f!==null&&(!(f.expirationTime>_)||z&&!K());){var ne=f.callback;if(typeof ne=="function"){f.callback=null,p=f.priorityLevel;var U=ne(f.expirationTime<=_);_=t.unstable_now(),typeof U=="function"?f.callback=U:f===n(a)&&r(a),S(_)}else r(a);f=n(a)}if(f!==null)var fe=!0;else{var ot=n(c);ot!==null&&le(k,ot.startTime-_),fe=!1}return fe}finally{f=null,p=V,h=!1}}var E=!1,C=null,j=-1,O=5,N=-1;function K(){return!(t.unstable_now()-N<O)}function de(){if(C!==null){var z=t.unstable_now();N=z;var _=!0;try{_=C(!0,z)}finally{_?he():(E=!1,C=null)}}else E=!1}var he;if(typeof x=="function")he=function(){x(de)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,pt=oe.port2;oe.port1.onmessage=de,he=function(){pt.postMessage(null)}}else he=function(){v(de,0)};function Fe(z){C=z,E||(E=!0,he())}function le(z,_){j=v(function(){z(t.unstable_now())},_)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,Fe(w))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(z){switch(p){case 1:case 2:case 3:var _=3;break;default:_=p}var V=p;p=_;try{return z()}finally{p=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,_){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var V=p;p=z;try{return _()}finally{p=V}},t.unstable_scheduleCallback=function(z,_,V){var ne=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?ne+V:ne):V=ne,z){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=V+U,z={id:d++,callback:_,priorityLevel:z,startTime:V,expirationTime:U,sortIndex:-1},V>ne?(z.sortIndex=V,e(c,z),n(a)===null&&z===n(c)&&(g?(y(j),j=-1):g=!0,le(k,V-ne))):(z.sortIndex=U,e(a,z),m||h||(m=!0,Fe(w))),z},t.unstable_shouldYield=K,t.unstable_wrapCallback=function(z){var _=p;return function(){var V=p;p=_;try{return z.apply(this,arguments)}finally{p=V}}}})(hx);px.exports=hx;var Sb=px.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bb=b,Rt=Sb;function I(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mx=new Set,vs={};function vi(t,e){ro(t,e),ro(t+"Capture",e)}function ro(t,e){for(vs[t]=e,t=0;t<e.length;t++)mx.add(e[t])}var Hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cd=Object.prototype.hasOwnProperty,kb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rm={},im={};function wb(t){return Cd.call(im,t)?!0:Cd.call(rm,t)?!1:kb.test(t)?im[t]=!0:(rm[t]=!0,!1)}function Cb(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Eb(t,e,n,r){if(e===null||typeof e>"u"||Cb(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ft(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Je[t]=new ft(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Je[e]=new ft(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Je[t]=new ft(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Je[t]=new ft(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Je[t]=new ft(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Je[t]=new ft(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Je[t]=new ft(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Je[t]=new ft(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Je[t]=new ft(t,5,!1,t.toLowerCase(),null,!1,!1)});var cp=/[\-:]([a-z])/g;function up(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(cp,up);Je[e]=new ft(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(cp,up);Je[e]=new ft(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(cp,up);Je[e]=new ft(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Je[t]=new ft(t,1,!1,t.toLowerCase(),null,!1,!1)});Je.xlinkHref=new ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Je[t]=new ft(t,1,!1,t.toLowerCase(),null,!0,!0)});function dp(t,e,n,r){var i=Je.hasOwnProperty(e)?Je[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Eb(e,n,i,r)&&(n=null),r||i===null?wb(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Kn=bb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ml=Symbol.for("react.element"),Ni=Symbol.for("react.portal"),zi=Symbol.for("react.fragment"),fp=Symbol.for("react.strict_mode"),Ed=Symbol.for("react.profiler"),gx=Symbol.for("react.provider"),yx=Symbol.for("react.context"),pp=Symbol.for("react.forward_ref"),Td=Symbol.for("react.suspense"),Md=Symbol.for("react.suspense_list"),hp=Symbol.for("react.memo"),rr=Symbol.for("react.lazy"),xx=Symbol.for("react.offscreen"),om=Symbol.iterator;function Do(t){return t===null||typeof t!="object"?null:(t=om&&t[om]||t["@@iterator"],typeof t=="function"?t:null)}var ye=Object.assign,mu;function _o(t){if(mu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);mu=e&&e[1]||""}return`
`+mu+t}var gu=!1;function yu(t,e){if(!t||gu)return"";gu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var a=`
`+i[s].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=s&&0<=l);break}}}finally{gu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?_o(t):""}function Tb(t){switch(t.tag){case 5:return _o(t.type);case 16:return _o("Lazy");case 13:return _o("Suspense");case 19:return _o("SuspenseList");case 0:case 2:case 15:return t=yu(t.type,!1),t;case 11:return t=yu(t.type.render,!1),t;case 1:return t=yu(t.type,!0),t;default:return""}}function jd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zi:return"Fragment";case Ni:return"Portal";case Ed:return"Profiler";case fp:return"StrictMode";case Td:return"Suspense";case Md:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case yx:return(t.displayName||"Context")+".Consumer";case gx:return(t._context.displayName||"Context")+".Provider";case pp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case hp:return e=t.displayName||null,e!==null?e:jd(t.type)||"Memo";case rr:e=t._payload,t=t._init;try{return jd(t(e))}catch{}}return null}function Mb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jd(e);case 8:return e===fp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Dr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function jb(t){var e=vx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function gl(t){t._valueTracker||(t._valueTracker=jb(t))}function Sx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=vx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ua(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ad(t,e){var n=e.checked;return ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function sm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Dr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function bx(t,e){e=e.checked,e!=null&&dp(t,"checked",e,!1)}function Dd(t,e){bx(t,e);var n=Dr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Rd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Rd(t,e.type,Dr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function lm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Rd(t,e,n){(e!=="number"||ua(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ho=Array.isArray;function Ji(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Dr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Id(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(I(91));return ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function am(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(I(92));if(Ho(n)){if(1<n.length)throw Error(I(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Dr(n)}}function kx(t,e){var n=Dr(e.value),r=Dr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function cm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function wx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Od(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?wx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var yl,Cx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(yl=yl||document.createElement("div"),yl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=yl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ss(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Go={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ab=["Webkit","ms","Moz","O"];Object.keys(Go).forEach(function(t){Ab.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Go[e]=Go[t]})});function Ex(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Go.hasOwnProperty(t)&&Go[t]?(""+e).trim():e+"px"}function Tx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Ex(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Db=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nd(t,e){if(e){if(Db[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(I(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(I(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(I(61))}if(e.style!=null&&typeof e.style!="object")throw Error(I(62))}}function zd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ld=null;function mp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Pd=null,Gi=null,Qi=null;function um(t){if(t=rl(t)){if(typeof Pd!="function")throw Error(I(280));var e=t.stateNode;e&&(e=Nc(e),Pd(t.stateNode,t.type,e))}}function Mx(t){Gi?Qi?Qi.push(t):Qi=[t]:Gi=t}function jx(){if(Gi){var t=Gi,e=Qi;if(Qi=Gi=null,um(t),e)for(t=0;t<e.length;t++)um(e[t])}}function Ax(t,e){return t(e)}function Dx(){}var xu=!1;function Rx(t,e,n){if(xu)return t(e,n);xu=!0;try{return Ax(t,e,n)}finally{xu=!1,(Gi!==null||Qi!==null)&&(Dx(),jx())}}function bs(t,e){var n=t.stateNode;if(n===null)return null;var r=Nc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(I(231,e,typeof n));return n}var $d=!1;if(Hn)try{var Ro={};Object.defineProperty(Ro,"passive",{get:function(){$d=!0}}),window.addEventListener("test",Ro,Ro),window.removeEventListener("test",Ro,Ro)}catch{$d=!1}function Rb(t,e,n,r,i,o,s,l,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Qo=!1,da=null,fa=!1,Fd=null,Ib={onError:function(t){Qo=!0,da=t}};function Ob(t,e,n,r,i,o,s,l,a){Qo=!1,da=null,Rb.apply(Ib,arguments)}function Nb(t,e,n,r,i,o,s,l,a){if(Ob.apply(this,arguments),Qo){if(Qo){var c=da;Qo=!1,da=null}else throw Error(I(198));fa||(fa=!0,Fd=c)}}function Si(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ix(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function dm(t){if(Si(t)!==t)throw Error(I(188))}function zb(t){var e=t.alternate;if(!e){if(e=Si(t),e===null)throw Error(I(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return dm(i),t;if(o===r)return dm(i),e;o=o.sibling}throw Error(I(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(I(189))}}if(n.alternate!==r)throw Error(I(190))}if(n.tag!==3)throw Error(I(188));return n.stateNode.current===n?t:e}function Ox(t){return t=zb(t),t!==null?Nx(t):null}function Nx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Nx(t);if(e!==null)return e;t=t.sibling}return null}var zx=Rt.unstable_scheduleCallback,fm=Rt.unstable_cancelCallback,Lb=Rt.unstable_shouldYield,Pb=Rt.unstable_requestPaint,we=Rt.unstable_now,$b=Rt.unstable_getCurrentPriorityLevel,gp=Rt.unstable_ImmediatePriority,Lx=Rt.unstable_UserBlockingPriority,pa=Rt.unstable_NormalPriority,Fb=Rt.unstable_LowPriority,Px=Rt.unstable_IdlePriority,Dc=null,vn=null;function Bb(t){if(vn&&typeof vn.onCommitFiberRoot=="function")try{vn.onCommitFiberRoot(Dc,t,void 0,(t.current.flags&128)===128)}catch{}}var rn=Math.clz32?Math.clz32:Ub,_b=Math.log,Hb=Math.LN2;function Ub(t){return t>>>=0,t===0?32:31-(_b(t)/Hb|0)|0}var xl=64,vl=4194304;function Uo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ha(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~i;l!==0?r=Uo(l):(o&=s,o!==0&&(r=Uo(o)))}else s=n&~i,s!==0?r=Uo(s):o!==0&&(r=Uo(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-rn(e),i=1<<n,r|=t[n],e&=~i;return r}function Vb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wb(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-rn(o),l=1<<s,a=i[s];a===-1?(!(l&n)||l&r)&&(i[s]=Vb(l,e)):a<=e&&(t.expiredLanes|=l),o&=~l}}function Bd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $x(){var t=xl;return xl<<=1,!(xl&4194240)&&(xl=64),t}function vu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function tl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rn(e),t[e]=n}function Kb(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-rn(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function yp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-rn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var te=0;function Fx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Bx,xp,_x,Hx,Ux,_d=!1,Sl=[],xr=null,vr=null,Sr=null,ks=new Map,ws=new Map,cr=[],qb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pm(t,e){switch(t){case"focusin":case"focusout":xr=null;break;case"dragenter":case"dragleave":vr=null;break;case"mouseover":case"mouseout":Sr=null;break;case"pointerover":case"pointerout":ks.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ws.delete(e.pointerId)}}function Io(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=rl(e),e!==null&&xp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Jb(t,e,n,r,i){switch(e){case"focusin":return xr=Io(xr,t,e,n,r,i),!0;case"dragenter":return vr=Io(vr,t,e,n,r,i),!0;case"mouseover":return Sr=Io(Sr,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return ks.set(o,Io(ks.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ws.set(o,Io(ws.get(o)||null,t,e,n,r,i)),!0}return!1}function Vx(t){var e=Kr(t.target);if(e!==null){var n=Si(e);if(n!==null){if(e=n.tag,e===13){if(e=Ix(n),e!==null){t.blockedOn=e,Ux(t.priority,function(){_x(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Jl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Hd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ld=r,n.target.dispatchEvent(r),Ld=null}else return e=rl(n),e!==null&&xp(e),t.blockedOn=n,!1;e.shift()}return!0}function hm(t,e,n){Jl(t)&&n.delete(e)}function Gb(){_d=!1,xr!==null&&Jl(xr)&&(xr=null),vr!==null&&Jl(vr)&&(vr=null),Sr!==null&&Jl(Sr)&&(Sr=null),ks.forEach(hm),ws.forEach(hm)}function Oo(t,e){t.blockedOn===e&&(t.blockedOn=null,_d||(_d=!0,Rt.unstable_scheduleCallback(Rt.unstable_NormalPriority,Gb)))}function Cs(t){function e(i){return Oo(i,t)}if(0<Sl.length){Oo(Sl[0],t);for(var n=1;n<Sl.length;n++){var r=Sl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(xr!==null&&Oo(xr,t),vr!==null&&Oo(vr,t),Sr!==null&&Oo(Sr,t),ks.forEach(e),ws.forEach(e),n=0;n<cr.length;n++)r=cr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<cr.length&&(n=cr[0],n.blockedOn===null);)Vx(n),n.blockedOn===null&&cr.shift()}var Yi=Kn.ReactCurrentBatchConfig,ma=!0;function Qb(t,e,n,r){var i=te,o=Yi.transition;Yi.transition=null;try{te=1,vp(t,e,n,r)}finally{te=i,Yi.transition=o}}function Yb(t,e,n,r){var i=te,o=Yi.transition;Yi.transition=null;try{te=4,vp(t,e,n,r)}finally{te=i,Yi.transition=o}}function vp(t,e,n,r){if(ma){var i=Hd(t,e,n,r);if(i===null)Au(t,e,r,ga,n),pm(t,r);else if(Jb(i,t,e,n,r))r.stopPropagation();else if(pm(t,r),e&4&&-1<qb.indexOf(t)){for(;i!==null;){var o=rl(i);if(o!==null&&Bx(o),o=Hd(t,e,n,r),o===null&&Au(t,e,r,ga,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Au(t,e,r,null,n)}}var ga=null;function Hd(t,e,n,r){if(ga=null,t=mp(r),t=Kr(t),t!==null)if(e=Si(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ix(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ga=t,null}function Wx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($b()){case gp:return 1;case Lx:return 4;case pa:case Fb:return 16;case Px:return 536870912;default:return 16}default:return 16}}var pr=null,Sp=null,Gl=null;function Kx(){if(Gl)return Gl;var t,e=Sp,n=e.length,r,i="value"in pr?pr.value:pr.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return Gl=i.slice(t,1<r?1-r:void 0)}function Ql(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function bl(){return!0}function mm(){return!1}function Nt(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?bl:mm,this.isPropagationStopped=mm,this}return ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bl)},persist:function(){},isPersistent:bl}),e}var xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bp=Nt(xo),nl=ye({},xo,{view:0,detail:0}),Xb=Nt(nl),Su,bu,No,Rc=ye({},nl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==No&&(No&&t.type==="mousemove"?(Su=t.screenX-No.screenX,bu=t.screenY-No.screenY):bu=Su=0,No=t),Su)},movementY:function(t){return"movementY"in t?t.movementY:bu}}),gm=Nt(Rc),Zb=ye({},Rc,{dataTransfer:0}),ek=Nt(Zb),tk=ye({},nl,{relatedTarget:0}),ku=Nt(tk),nk=ye({},xo,{animationName:0,elapsedTime:0,pseudoElement:0}),rk=Nt(nk),ik=ye({},xo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ok=Nt(ik),sk=ye({},xo,{data:0}),ym=Nt(sk),lk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ak={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ck={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ck[t])?!!e[t]:!1}function kp(){return uk}var dk=ye({},nl,{key:function(t){if(t.key){var e=lk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ql(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ak[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kp,charCode:function(t){return t.type==="keypress"?Ql(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ql(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fk=Nt(dk),pk=ye({},Rc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xm=Nt(pk),hk=ye({},nl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kp}),mk=Nt(hk),gk=ye({},xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),yk=Nt(gk),xk=ye({},Rc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vk=Nt(xk),Sk=[9,13,27,32],wp=Hn&&"CompositionEvent"in window,Yo=null;Hn&&"documentMode"in document&&(Yo=document.documentMode);var bk=Hn&&"TextEvent"in window&&!Yo,qx=Hn&&(!wp||Yo&&8<Yo&&11>=Yo),vm=" ",Sm=!1;function Jx(t,e){switch(t){case"keyup":return Sk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Li=!1;function kk(t,e){switch(t){case"compositionend":return Gx(e);case"keypress":return e.which!==32?null:(Sm=!0,vm);case"textInput":return t=e.data,t===vm&&Sm?null:t;default:return null}}function wk(t,e){if(Li)return t==="compositionend"||!wp&&Jx(t,e)?(t=Kx(),Gl=Sp=pr=null,Li=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qx&&e.locale!=="ko"?null:e.data;default:return null}}var Ck={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ck[t.type]:e==="textarea"}function Qx(t,e,n,r){Mx(r),e=ya(e,"onChange"),0<e.length&&(n=new bp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xo=null,Es=null;function Ek(t){l0(t,0)}function Ic(t){var e=Fi(t);if(Sx(e))return t}function Tk(t,e){if(t==="change")return e}var Yx=!1;if(Hn){var wu;if(Hn){var Cu="oninput"in document;if(!Cu){var km=document.createElement("div");km.setAttribute("oninput","return;"),Cu=typeof km.oninput=="function"}wu=Cu}else wu=!1;Yx=wu&&(!document.documentMode||9<document.documentMode)}function wm(){Xo&&(Xo.detachEvent("onpropertychange",Xx),Es=Xo=null)}function Xx(t){if(t.propertyName==="value"&&Ic(Es)){var e=[];Qx(e,Es,t,mp(t)),Rx(Ek,e)}}function Mk(t,e,n){t==="focusin"?(wm(),Xo=e,Es=n,Xo.attachEvent("onpropertychange",Xx)):t==="focusout"&&wm()}function jk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ic(Es)}function Ak(t,e){if(t==="click")return Ic(e)}function Dk(t,e){if(t==="input"||t==="change")return Ic(e)}function Rk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sn=typeof Object.is=="function"?Object.is:Rk;function Ts(t,e){if(sn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Cd.call(e,i)||!sn(t[i],e[i]))return!1}return!0}function Cm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Em(t,e){var n=Cm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Cm(n)}}function Zx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Zx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function e0(){for(var t=window,e=ua();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ua(t.document)}return e}function Cp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Ik(t){var e=e0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Zx(n.ownerDocument.documentElement,n)){if(r!==null&&Cp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Em(n,o);var s=Em(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ok=Hn&&"documentMode"in document&&11>=document.documentMode,Pi=null,Ud=null,Zo=null,Vd=!1;function Tm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Vd||Pi==null||Pi!==ua(r)||(r=Pi,"selectionStart"in r&&Cp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zo&&Ts(Zo,r)||(Zo=r,r=ya(Ud,"onSelect"),0<r.length&&(e=new bp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Pi)))}function kl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $i={animationend:kl("Animation","AnimationEnd"),animationiteration:kl("Animation","AnimationIteration"),animationstart:kl("Animation","AnimationStart"),transitionend:kl("Transition","TransitionEnd")},Eu={},t0={};Hn&&(t0=document.createElement("div").style,"AnimationEvent"in window||(delete $i.animationend.animation,delete $i.animationiteration.animation,delete $i.animationstart.animation),"TransitionEvent"in window||delete $i.transitionend.transition);function Oc(t){if(Eu[t])return Eu[t];if(!$i[t])return t;var e=$i[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in t0)return Eu[t]=e[n];return t}var n0=Oc("animationend"),r0=Oc("animationiteration"),i0=Oc("animationstart"),o0=Oc("transitionend"),s0=new Map,Mm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(t,e){s0.set(t,e),vi(e,[t])}for(var Tu=0;Tu<Mm.length;Tu++){var Mu=Mm[Tu],Nk=Mu.toLowerCase(),zk=Mu[0].toUpperCase()+Mu.slice(1);Or(Nk,"on"+zk)}Or(n0,"onAnimationEnd");Or(r0,"onAnimationIteration");Or(i0,"onAnimationStart");Or("dblclick","onDoubleClick");Or("focusin","onFocus");Or("focusout","onBlur");Or(o0,"onTransitionEnd");ro("onMouseEnter",["mouseout","mouseover"]);ro("onMouseLeave",["mouseout","mouseover"]);ro("onPointerEnter",["pointerout","pointerover"]);ro("onPointerLeave",["pointerout","pointerover"]);vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vi("onBeforeInput",["compositionend","keypress","textInput","paste"]);vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vo));function jm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Nb(r,e,void 0,t),t.currentTarget=null}function l0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==o&&i.isPropagationStopped())break e;jm(i,l,c),o=a}else for(s=0;s<r.length;s++){if(l=r[s],a=l.instance,c=l.currentTarget,l=l.listener,a!==o&&i.isPropagationStopped())break e;jm(i,l,c),o=a}}}if(fa)throw t=Fd,fa=!1,Fd=null,t}function ae(t,e){var n=e[Gd];n===void 0&&(n=e[Gd]=new Set);var r=t+"__bubble";n.has(r)||(a0(e,t,2,!1),n.add(r))}function ju(t,e,n){var r=0;e&&(r|=4),a0(n,t,r,e)}var wl="_reactListening"+Math.random().toString(36).slice(2);function Ms(t){if(!t[wl]){t[wl]=!0,mx.forEach(function(n){n!=="selectionchange"&&(Lk.has(n)||ju(n,!1,t),ju(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[wl]||(e[wl]=!0,ju("selectionchange",!1,e))}}function a0(t,e,n,r){switch(Wx(e)){case 1:var i=Qb;break;case 4:i=Yb;break;default:i=vp}n=i.bind(null,e,n,t),i=void 0,!$d||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Au(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var a=s.tag;if((a===3||a===4)&&(a=s.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;s=s.return}for(;l!==null;){if(s=Kr(l),s===null)return;if(a=s.tag,a===5||a===6){r=o=s;continue e}l=l.parentNode}}r=r.return}Rx(function(){var c=o,d=mp(n),f=[];e:{var p=s0.get(t);if(p!==void 0){var h=bp,m=t;switch(t){case"keypress":if(Ql(n)===0)break e;case"keydown":case"keyup":h=fk;break;case"focusin":m="focus",h=ku;break;case"focusout":m="blur",h=ku;break;case"beforeblur":case"afterblur":h=ku;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=gm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=ek;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=mk;break;case n0:case r0:case i0:h=rk;break;case o0:h=yk;break;case"scroll":h=Xb;break;case"wheel":h=vk;break;case"copy":case"cut":case"paste":h=ok;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=xm}var g=(e&4)!==0,v=!g&&t==="scroll",y=g?p!==null?p+"Capture":null:p;g=[];for(var x=c,S;x!==null;){S=x;var k=S.stateNode;if(S.tag===5&&k!==null&&(S=k,y!==null&&(k=bs(x,y),k!=null&&g.push(js(x,k,S)))),v)break;x=x.return}0<g.length&&(p=new h(p,m,null,n,d),f.push({event:p,listeners:g}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",p&&n!==Ld&&(m=n.relatedTarget||n.fromElement)&&(Kr(m)||m[Un]))break e;if((h||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,h?(m=n.relatedTarget||n.toElement,h=c,m=m?Kr(m):null,m!==null&&(v=Si(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=c),h!==m)){if(g=gm,k="onMouseLeave",y="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(g=xm,k="onPointerLeave",y="onPointerEnter",x="pointer"),v=h==null?p:Fi(h),S=m==null?p:Fi(m),p=new g(k,x+"leave",h,n,d),p.target=v,p.relatedTarget=S,k=null,Kr(d)===c&&(g=new g(y,x+"enter",m,n,d),g.target=S,g.relatedTarget=v,k=g),v=k,h&&m)t:{for(g=h,y=m,x=0,S=g;S;S=ji(S))x++;for(S=0,k=y;k;k=ji(k))S++;for(;0<x-S;)g=ji(g),x--;for(;0<S-x;)y=ji(y),S--;for(;x--;){if(g===y||y!==null&&g===y.alternate)break t;g=ji(g),y=ji(y)}g=null}else g=null;h!==null&&Am(f,p,h,g,!1),m!==null&&v!==null&&Am(f,v,m,g,!0)}}e:{if(p=c?Fi(c):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var w=Tk;else if(bm(p))if(Yx)w=Dk;else{w=jk;var E=Mk}else(h=p.nodeName)&&h.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(w=Ak);if(w&&(w=w(t,c))){Qx(f,w,n,d);break e}E&&E(t,p,c),t==="focusout"&&(E=p._wrapperState)&&E.controlled&&p.type==="number"&&Rd(p,"number",p.value)}switch(E=c?Fi(c):window,t){case"focusin":(bm(E)||E.contentEditable==="true")&&(Pi=E,Ud=c,Zo=null);break;case"focusout":Zo=Ud=Pi=null;break;case"mousedown":Vd=!0;break;case"contextmenu":case"mouseup":case"dragend":Vd=!1,Tm(f,n,d);break;case"selectionchange":if(Ok)break;case"keydown":case"keyup":Tm(f,n,d)}var C;if(wp)e:{switch(t){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Li?Jx(t,n)&&(j="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(qx&&n.locale!=="ko"&&(Li||j!=="onCompositionStart"?j==="onCompositionEnd"&&Li&&(C=Kx()):(pr=d,Sp="value"in pr?pr.value:pr.textContent,Li=!0)),E=ya(c,j),0<E.length&&(j=new ym(j,t,null,n,d),f.push({event:j,listeners:E}),C?j.data=C:(C=Gx(n),C!==null&&(j.data=C)))),(C=bk?kk(t,n):wk(t,n))&&(c=ya(c,"onBeforeInput"),0<c.length&&(d=new ym("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=C))}l0(f,e)})}function js(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ya(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=bs(t,n),o!=null&&r.unshift(js(t,o,i)),o=bs(t,e),o!=null&&r.push(js(t,o,i))),t=t.return}return r}function ji(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Am(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,i?(a=bs(n,o),a!=null&&s.unshift(js(n,a,l))):i||(a=bs(n,o),a!=null&&s.push(js(n,a,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var Pk=/\r\n?/g,$k=/\u0000|\uFFFD/g;function Dm(t){return(typeof t=="string"?t:""+t).replace(Pk,`
`).replace($k,"")}function Cl(t,e,n){if(e=Dm(e),Dm(t)!==e&&n)throw Error(I(425))}function xa(){}var Wd=null,Kd=null;function qd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jd=typeof setTimeout=="function"?setTimeout:void 0,Fk=typeof clearTimeout=="function"?clearTimeout:void 0,Rm=typeof Promise=="function"?Promise:void 0,Bk=typeof queueMicrotask=="function"?queueMicrotask:typeof Rm<"u"?function(t){return Rm.resolve(null).then(t).catch(_k)}:Jd;function _k(t){setTimeout(function(){throw t})}function Du(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Cs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Cs(e)}function br(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Im(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var vo=Math.random().toString(36).slice(2),yn="__reactFiber$"+vo,As="__reactProps$"+vo,Un="__reactContainer$"+vo,Gd="__reactEvents$"+vo,Hk="__reactListeners$"+vo,Uk="__reactHandles$"+vo;function Kr(t){var e=t[yn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Un]||n[yn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Im(t);t!==null;){if(n=t[yn])return n;t=Im(t)}return e}t=n,n=t.parentNode}return null}function rl(t){return t=t[yn]||t[Un],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Fi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(I(33))}function Nc(t){return t[As]||null}var Qd=[],Bi=-1;function Nr(t){return{current:t}}function ue(t){0>Bi||(t.current=Qd[Bi],Qd[Bi]=null,Bi--)}function se(t,e){Bi++,Qd[Bi]=t.current,t.current=e}var Rr={},nt=Nr(Rr),yt=Nr(!1),li=Rr;function io(t,e){var n=t.type.contextTypes;if(!n)return Rr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function xt(t){return t=t.childContextTypes,t!=null}function va(){ue(yt),ue(nt)}function Om(t,e,n){if(nt.current!==Rr)throw Error(I(168));se(nt,e),se(yt,n)}function c0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(I(108,Mb(t)||"Unknown",i));return ye({},n,r)}function Sa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Rr,li=nt.current,se(nt,t),se(yt,yt.current),!0}function Nm(t,e,n){var r=t.stateNode;if(!r)throw Error(I(169));n?(t=c0(t,e,li),r.__reactInternalMemoizedMergedChildContext=t,ue(yt),ue(nt),se(nt,t)):ue(yt),se(yt,n)}var zn=null,zc=!1,Ru=!1;function u0(t){zn===null?zn=[t]:zn.push(t)}function Vk(t){zc=!0,u0(t)}function zr(){if(!Ru&&zn!==null){Ru=!0;var t=0,e=te;try{var n=zn;for(te=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}zn=null,zc=!1}catch(i){throw zn!==null&&(zn=zn.slice(t+1)),zx(gp,zr),i}finally{te=e,Ru=!1}}return null}var _i=[],Hi=0,ba=null,ka=0,_t=[],Ht=0,ai=null,Ln=1,Pn="";function _r(t,e){_i[Hi++]=ka,_i[Hi++]=ba,ba=t,ka=e}function d0(t,e,n){_t[Ht++]=Ln,_t[Ht++]=Pn,_t[Ht++]=ai,ai=t;var r=Ln;t=Pn;var i=32-rn(r)-1;r&=~(1<<i),n+=1;var o=32-rn(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ln=1<<32-rn(e)+i|n<<i|r,Pn=o+t}else Ln=1<<o|n<<i|r,Pn=t}function Ep(t){t.return!==null&&(_r(t,1),d0(t,1,0))}function Tp(t){for(;t===ba;)ba=_i[--Hi],_i[Hi]=null,ka=_i[--Hi],_i[Hi]=null;for(;t===ai;)ai=_t[--Ht],_t[Ht]=null,Pn=_t[--Ht],_t[Ht]=null,Ln=_t[--Ht],_t[Ht]=null}var At=null,jt=null,pe=!1,en=null;function f0(t,e){var n=Vt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function zm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,At=t,jt=br(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,At=t,jt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ai!==null?{id:Ln,overflow:Pn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Vt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,At=t,jt=null,!0):!1;default:return!1}}function Yd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Xd(t){if(pe){var e=jt;if(e){var n=e;if(!zm(t,e)){if(Yd(t))throw Error(I(418));e=br(n.nextSibling);var r=At;e&&zm(t,e)?f0(r,n):(t.flags=t.flags&-4097|2,pe=!1,At=t)}}else{if(Yd(t))throw Error(I(418));t.flags=t.flags&-4097|2,pe=!1,At=t}}}function Lm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;At=t}function El(t){if(t!==At)return!1;if(!pe)return Lm(t),pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!qd(t.type,t.memoizedProps)),e&&(e=jt)){if(Yd(t))throw p0(),Error(I(418));for(;e;)f0(t,e),e=br(e.nextSibling)}if(Lm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(I(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){jt=br(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}jt=null}}else jt=At?br(t.stateNode.nextSibling):null;return!0}function p0(){for(var t=jt;t;)t=br(t.nextSibling)}function oo(){jt=At=null,pe=!1}function Mp(t){en===null?en=[t]:en.push(t)}var Wk=Kn.ReactCurrentBatchConfig;function zo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(I(309));var r=n.stateNode}if(!r)throw Error(I(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=i.refs;s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(I(284));if(!n._owner)throw Error(I(290,t))}return t}function Tl(t,e){throw t=Object.prototype.toString.call(e),Error(I(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Pm(t){var e=t._init;return e(t._payload)}function h0(t){function e(y,x){if(t){var S=y.deletions;S===null?(y.deletions=[x],y.flags|=16):S.push(x)}}function n(y,x){if(!t)return null;for(;x!==null;)e(y,x),x=x.sibling;return null}function r(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function i(y,x){return y=Er(y,x),y.index=0,y.sibling=null,y}function o(y,x,S){return y.index=S,t?(S=y.alternate,S!==null?(S=S.index,S<x?(y.flags|=2,x):S):(y.flags|=2,x)):(y.flags|=1048576,x)}function s(y){return t&&y.alternate===null&&(y.flags|=2),y}function l(y,x,S,k){return x===null||x.tag!==6?(x=$u(S,y.mode,k),x.return=y,x):(x=i(x,S),x.return=y,x)}function a(y,x,S,k){var w=S.type;return w===zi?d(y,x,S.props.children,k,S.key):x!==null&&(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===rr&&Pm(w)===x.type)?(k=i(x,S.props),k.ref=zo(y,x,S),k.return=y,k):(k=ra(S.type,S.key,S.props,null,y.mode,k),k.ref=zo(y,x,S),k.return=y,k)}function c(y,x,S,k){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=Fu(S,y.mode,k),x.return=y,x):(x=i(x,S.children||[]),x.return=y,x)}function d(y,x,S,k,w){return x===null||x.tag!==7?(x=ti(S,y.mode,k,w),x.return=y,x):(x=i(x,S),x.return=y,x)}function f(y,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return x=$u(""+x,y.mode,S),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ml:return S=ra(x.type,x.key,x.props,null,y.mode,S),S.ref=zo(y,null,x),S.return=y,S;case Ni:return x=Fu(x,y.mode,S),x.return=y,x;case rr:var k=x._init;return f(y,k(x._payload),S)}if(Ho(x)||Do(x))return x=ti(x,y.mode,S,null),x.return=y,x;Tl(y,x)}return null}function p(y,x,S,k){var w=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return w!==null?null:l(y,x,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ml:return S.key===w?a(y,x,S,k):null;case Ni:return S.key===w?c(y,x,S,k):null;case rr:return w=S._init,p(y,x,w(S._payload),k)}if(Ho(S)||Do(S))return w!==null?null:d(y,x,S,k,null);Tl(y,S)}return null}function h(y,x,S,k,w){if(typeof k=="string"&&k!==""||typeof k=="number")return y=y.get(S)||null,l(x,y,""+k,w);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ml:return y=y.get(k.key===null?S:k.key)||null,a(x,y,k,w);case Ni:return y=y.get(k.key===null?S:k.key)||null,c(x,y,k,w);case rr:var E=k._init;return h(y,x,S,E(k._payload),w)}if(Ho(k)||Do(k))return y=y.get(S)||null,d(x,y,k,w,null);Tl(x,k)}return null}function m(y,x,S,k){for(var w=null,E=null,C=x,j=x=0,O=null;C!==null&&j<S.length;j++){C.index>j?(O=C,C=null):O=C.sibling;var N=p(y,C,S[j],k);if(N===null){C===null&&(C=O);break}t&&C&&N.alternate===null&&e(y,C),x=o(N,x,j),E===null?w=N:E.sibling=N,E=N,C=O}if(j===S.length)return n(y,C),pe&&_r(y,j),w;if(C===null){for(;j<S.length;j++)C=f(y,S[j],k),C!==null&&(x=o(C,x,j),E===null?w=C:E.sibling=C,E=C);return pe&&_r(y,j),w}for(C=r(y,C);j<S.length;j++)O=h(C,y,j,S[j],k),O!==null&&(t&&O.alternate!==null&&C.delete(O.key===null?j:O.key),x=o(O,x,j),E===null?w=O:E.sibling=O,E=O);return t&&C.forEach(function(K){return e(y,K)}),pe&&_r(y,j),w}function g(y,x,S,k){var w=Do(S);if(typeof w!="function")throw Error(I(150));if(S=w.call(S),S==null)throw Error(I(151));for(var E=w=null,C=x,j=x=0,O=null,N=S.next();C!==null&&!N.done;j++,N=S.next()){C.index>j?(O=C,C=null):O=C.sibling;var K=p(y,C,N.value,k);if(K===null){C===null&&(C=O);break}t&&C&&K.alternate===null&&e(y,C),x=o(K,x,j),E===null?w=K:E.sibling=K,E=K,C=O}if(N.done)return n(y,C),pe&&_r(y,j),w;if(C===null){for(;!N.done;j++,N=S.next())N=f(y,N.value,k),N!==null&&(x=o(N,x,j),E===null?w=N:E.sibling=N,E=N);return pe&&_r(y,j),w}for(C=r(y,C);!N.done;j++,N=S.next())N=h(C,y,j,N.value,k),N!==null&&(t&&N.alternate!==null&&C.delete(N.key===null?j:N.key),x=o(N,x,j),E===null?w=N:E.sibling=N,E=N);return t&&C.forEach(function(de){return e(y,de)}),pe&&_r(y,j),w}function v(y,x,S,k){if(typeof S=="object"&&S!==null&&S.type===zi&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case ml:e:{for(var w=S.key,E=x;E!==null;){if(E.key===w){if(w=S.type,w===zi){if(E.tag===7){n(y,E.sibling),x=i(E,S.props.children),x.return=y,y=x;break e}}else if(E.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===rr&&Pm(w)===E.type){n(y,E.sibling),x=i(E,S.props),x.ref=zo(y,E,S),x.return=y,y=x;break e}n(y,E);break}else e(y,E);E=E.sibling}S.type===zi?(x=ti(S.props.children,y.mode,k,S.key),x.return=y,y=x):(k=ra(S.type,S.key,S.props,null,y.mode,k),k.ref=zo(y,x,S),k.return=y,y=k)}return s(y);case Ni:e:{for(E=S.key;x!==null;){if(x.key===E)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){n(y,x.sibling),x=i(x,S.children||[]),x.return=y,y=x;break e}else{n(y,x);break}else e(y,x);x=x.sibling}x=Fu(S,y.mode,k),x.return=y,y=x}return s(y);case rr:return E=S._init,v(y,x,E(S._payload),k)}if(Ho(S))return m(y,x,S,k);if(Do(S))return g(y,x,S,k);Tl(y,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,x!==null&&x.tag===6?(n(y,x.sibling),x=i(x,S),x.return=y,y=x):(n(y,x),x=$u(S,y.mode,k),x.return=y,y=x),s(y)):n(y,x)}return v}var so=h0(!0),m0=h0(!1),wa=Nr(null),Ca=null,Ui=null,jp=null;function Ap(){jp=Ui=Ca=null}function Dp(t){var e=wa.current;ue(wa),t._currentValue=e}function Zd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Xi(t,e){Ca=t,jp=Ui=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(gt=!0),t.firstContext=null)}function Gt(t){var e=t._currentValue;if(jp!==t)if(t={context:t,memoizedValue:e,next:null},Ui===null){if(Ca===null)throw Error(I(308));Ui=t,Ca.dependencies={lanes:0,firstContext:t}}else Ui=Ui.next=t;return e}var qr=null;function Rp(t){qr===null?qr=[t]:qr.push(t)}function g0(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Rp(e)):(n.next=i.next,i.next=n),e.interleaved=n,Vn(t,r)}function Vn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ir=!1;function Ip(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function y0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Fn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function kr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,X&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Vn(t,n)}return i=r.interleaved,i===null?(e.next=e,Rp(r)):(e.next=i.next,i.next=e),r.interleaved=e,Vn(t,n)}function Yl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yp(t,n)}}function $m(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ea(t,e,n,r){var i=t.updateQueue;ir=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,c=a.next;a.next=null,s===null?o=c:s.next=c,s=a;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==s&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=a))}if(o!==null){var f=i.baseState;s=0,d=c=a=null,l=o;do{var p=l.lane,h=l.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=t,g=l;switch(p=e,h=n,g.tag){case 1:if(m=g.payload,typeof m=="function"){f=m.call(h,f,p);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,p=typeof m=="function"?m.call(h,f,p):m,p==null)break e;f=ye({},f,p);break e;case 2:ir=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[l]:p.push(l))}else h={eventTime:h,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=h,a=f):d=d.next=h,s|=p;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;p=l,l=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(a=f),i.baseState=a,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);ui|=s,t.lanes=s,t.memoizedState=f}}function Fm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(I(191,i));i.call(r)}}}var il={},Sn=Nr(il),Ds=Nr(il),Rs=Nr(il);function Jr(t){if(t===il)throw Error(I(174));return t}function Op(t,e){switch(se(Rs,e),se(Ds,t),se(Sn,il),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Od(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Od(e,t)}ue(Sn),se(Sn,e)}function lo(){ue(Sn),ue(Ds),ue(Rs)}function x0(t){Jr(Rs.current);var e=Jr(Sn.current),n=Od(e,t.type);e!==n&&(se(Ds,t),se(Sn,n))}function Np(t){Ds.current===t&&(ue(Sn),ue(Ds))}var me=Nr(0);function Ta(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Iu=[];function zp(){for(var t=0;t<Iu.length;t++)Iu[t]._workInProgressVersionPrimary=null;Iu.length=0}var Xl=Kn.ReactCurrentDispatcher,Ou=Kn.ReactCurrentBatchConfig,ci=0,ge=null,Me=null,Ie=null,Ma=!1,es=!1,Is=0,Kk=0;function Xe(){throw Error(I(321))}function Lp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sn(t[n],e[n]))return!1;return!0}function Pp(t,e,n,r,i,o){if(ci=o,ge=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xl.current=t===null||t.memoizedState===null?Qk:Yk,t=n(r,i),es){o=0;do{if(es=!1,Is=0,25<=o)throw Error(I(301));o+=1,Ie=Me=null,e.updateQueue=null,Xl.current=Xk,t=n(r,i)}while(es)}if(Xl.current=ja,e=Me!==null&&Me.next!==null,ci=0,Ie=Me=ge=null,Ma=!1,e)throw Error(I(300));return t}function $p(){var t=Is!==0;return Is=0,t}function pn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ie===null?ge.memoizedState=Ie=t:Ie=Ie.next=t,Ie}function Qt(){if(Me===null){var t=ge.alternate;t=t!==null?t.memoizedState:null}else t=Me.next;var e=Ie===null?ge.memoizedState:Ie.next;if(e!==null)Ie=e,Me=t;else{if(t===null)throw Error(I(310));Me=t,t={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},Ie===null?ge.memoizedState=Ie=t:Ie=Ie.next=t}return Ie}function Os(t,e){return typeof e=="function"?e(t):e}function Nu(t){var e=Qt(),n=e.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=t;var r=Me,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,a=null,c=o;do{var d=c.lane;if((ci&d)===d)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=f,s=r):a=a.next=f,ge.lanes|=d,ui|=d}c=c.next}while(c!==null&&c!==o);a===null?s=r:a.next=l,sn(r,e.memoizedState)||(gt=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,ge.lanes|=o,ui|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function zu(t){var e=Qt(),n=e.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);sn(o,e.memoizedState)||(gt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function v0(){}function S0(t,e){var n=ge,r=Qt(),i=e(),o=!sn(r.memoizedState,i);if(o&&(r.memoizedState=i,gt=!0),r=r.queue,Fp(w0.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Ie!==null&&Ie.memoizedState.tag&1){if(n.flags|=2048,Ns(9,k0.bind(null,n,r,i,e),void 0,null),ze===null)throw Error(I(349));ci&30||b0(n,e,i)}return i}function b0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ge.updateQueue,e===null?(e={lastEffect:null,stores:null},ge.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function k0(t,e,n,r){e.value=n,e.getSnapshot=r,C0(e)&&E0(t)}function w0(t,e,n){return n(function(){C0(e)&&E0(t)})}function C0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sn(t,n)}catch{return!0}}function E0(t){var e=Vn(t,1);e!==null&&on(e,t,1,-1)}function Bm(t){var e=pn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Os,lastRenderedState:t},e.queue=t,t=t.dispatch=Gk.bind(null,ge,t),[e.memoizedState,t]}function Ns(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ge.updateQueue,e===null?(e={lastEffect:null,stores:null},ge.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function T0(){return Qt().memoizedState}function Zl(t,e,n,r){var i=pn();ge.flags|=t,i.memoizedState=Ns(1|e,n,void 0,r===void 0?null:r)}function Lc(t,e,n,r){var i=Qt();r=r===void 0?null:r;var o=void 0;if(Me!==null){var s=Me.memoizedState;if(o=s.destroy,r!==null&&Lp(r,s.deps)){i.memoizedState=Ns(e,n,o,r);return}}ge.flags|=t,i.memoizedState=Ns(1|e,n,o,r)}function _m(t,e){return Zl(8390656,8,t,e)}function Fp(t,e){return Lc(2048,8,t,e)}function M0(t,e){return Lc(4,2,t,e)}function j0(t,e){return Lc(4,4,t,e)}function A0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function D0(t,e,n){return n=n!=null?n.concat([t]):null,Lc(4,4,A0.bind(null,e,t),n)}function Bp(){}function R0(t,e){var n=Qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Lp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function I0(t,e){var n=Qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Lp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function O0(t,e,n){return ci&21?(sn(n,e)||(n=$x(),ge.lanes|=n,ui|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,gt=!0),t.memoizedState=n)}function qk(t,e){var n=te;te=n!==0&&4>n?n:4,t(!0);var r=Ou.transition;Ou.transition={};try{t(!1),e()}finally{te=n,Ou.transition=r}}function N0(){return Qt().memoizedState}function Jk(t,e,n){var r=Cr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},z0(t))L0(e,n);else if(n=g0(t,e,n,r),n!==null){var i=lt();on(n,t,r,i),P0(n,e,r)}}function Gk(t,e,n){var r=Cr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(z0(t))L0(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(i.hasEagerState=!0,i.eagerState=l,sn(l,s)){var a=e.interleaved;a===null?(i.next=i,Rp(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=g0(t,e,i,r),n!==null&&(i=lt(),on(n,t,r,i),P0(n,e,r))}}function z0(t){var e=t.alternate;return t===ge||e!==null&&e===ge}function L0(t,e){es=Ma=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function P0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yp(t,n)}}var ja={readContext:Gt,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useInsertionEffect:Xe,useLayoutEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useMutableSource:Xe,useSyncExternalStore:Xe,useId:Xe,unstable_isNewReconciler:!1},Qk={readContext:Gt,useCallback:function(t,e){return pn().memoizedState=[t,e===void 0?null:e],t},useContext:Gt,useEffect:_m,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Zl(4194308,4,A0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Zl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Zl(4,2,t,e)},useMemo:function(t,e){var n=pn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=pn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Jk.bind(null,ge,t),[r.memoizedState,t]},useRef:function(t){var e=pn();return t={current:t},e.memoizedState=t},useState:Bm,useDebugValue:Bp,useDeferredValue:function(t){return pn().memoizedState=t},useTransition:function(){var t=Bm(!1),e=t[0];return t=qk.bind(null,t[1]),pn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ge,i=pn();if(pe){if(n===void 0)throw Error(I(407));n=n()}else{if(n=e(),ze===null)throw Error(I(349));ci&30||b0(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,_m(w0.bind(null,r,o,t),[t]),r.flags|=2048,Ns(9,k0.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=pn(),e=ze.identifierPrefix;if(pe){var n=Pn,r=Ln;n=(r&~(1<<32-rn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Is++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Kk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Yk={readContext:Gt,useCallback:R0,useContext:Gt,useEffect:Fp,useImperativeHandle:D0,useInsertionEffect:M0,useLayoutEffect:j0,useMemo:I0,useReducer:Nu,useRef:T0,useState:function(){return Nu(Os)},useDebugValue:Bp,useDeferredValue:function(t){var e=Qt();return O0(e,Me.memoizedState,t)},useTransition:function(){var t=Nu(Os)[0],e=Qt().memoizedState;return[t,e]},useMutableSource:v0,useSyncExternalStore:S0,useId:N0,unstable_isNewReconciler:!1},Xk={readContext:Gt,useCallback:R0,useContext:Gt,useEffect:Fp,useImperativeHandle:D0,useInsertionEffect:M0,useLayoutEffect:j0,useMemo:I0,useReducer:zu,useRef:T0,useState:function(){return zu(Os)},useDebugValue:Bp,useDeferredValue:function(t){var e=Qt();return Me===null?e.memoizedState=t:O0(e,Me.memoizedState,t)},useTransition:function(){var t=zu(Os)[0],e=Qt().memoizedState;return[t,e]},useMutableSource:v0,useSyncExternalStore:S0,useId:N0,unstable_isNewReconciler:!1};function Xt(t,e){if(t&&t.defaultProps){e=ye({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ef(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Pc={isMounted:function(t){return(t=t._reactInternals)?Si(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=lt(),i=Cr(t),o=Fn(r,i);o.payload=e,n!=null&&(o.callback=n),e=kr(t,o,i),e!==null&&(on(e,t,i,r),Yl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=lt(),i=Cr(t),o=Fn(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=kr(t,o,i),e!==null&&(on(e,t,i,r),Yl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=lt(),r=Cr(t),i=Fn(n,r);i.tag=2,e!=null&&(i.callback=e),e=kr(t,i,r),e!==null&&(on(e,t,r,n),Yl(e,t,r))}};function Hm(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Ts(n,r)||!Ts(i,o):!0}function $0(t,e,n){var r=!1,i=Rr,o=e.contextType;return typeof o=="object"&&o!==null?o=Gt(o):(i=xt(e)?li:nt.current,r=e.contextTypes,o=(r=r!=null)?io(t,i):Rr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Pc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Um(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Pc.enqueueReplaceState(e,e.state,null)}function tf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ip(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Gt(o):(o=xt(e)?li:nt.current,i.context=io(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(ef(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Pc.enqueueReplaceState(i,i.state,null),Ea(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ao(t,e){try{var n="",r=e;do n+=Tb(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Lu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function nf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Zk=typeof WeakMap=="function"?WeakMap:Map;function F0(t,e,n){n=Fn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Da||(Da=!0,pf=r),nf(t,e)},n}function B0(t,e,n){n=Fn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){nf(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){nf(t,e),typeof r!="function"&&(wr===null?wr=new Set([this]):wr.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function Vm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Zk;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=pw.bind(null,t,e,n),e.then(t,t))}function Wm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Km(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Fn(-1,1),e.tag=2,kr(n,e,1))),n.lanes|=1),t)}var ew=Kn.ReactCurrentOwner,gt=!1;function st(t,e,n,r){e.child=t===null?m0(e,null,n,r):so(e,t.child,n,r)}function qm(t,e,n,r,i){n=n.render;var o=e.ref;return Xi(e,i),r=Pp(t,e,n,r,o,i),n=$p(),t!==null&&!gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Wn(t,e,i)):(pe&&n&&Ep(e),e.flags|=1,st(t,e,r,i),e.child)}function Jm(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Jp(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,_0(t,e,o,r,i)):(t=ra(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ts,n(s,r)&&t.ref===e.ref)return Wn(t,e,i)}return e.flags|=1,t=Er(o,r),t.ref=e.ref,t.return=e,e.child=t}function _0(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Ts(o,r)&&t.ref===e.ref)if(gt=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(gt=!0);else return e.lanes=t.lanes,Wn(t,e,i)}return rf(t,e,n,r,i)}function H0(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},se(Wi,Tt),Tt|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,se(Wi,Tt),Tt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,se(Wi,Tt),Tt|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,se(Wi,Tt),Tt|=r;return st(t,e,i,n),e.child}function U0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function rf(t,e,n,r,i){var o=xt(n)?li:nt.current;return o=io(e,o),Xi(e,i),n=Pp(t,e,n,r,o,i),r=$p(),t!==null&&!gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Wn(t,e,i)):(pe&&r&&Ep(e),e.flags|=1,st(t,e,n,i),e.child)}function Gm(t,e,n,r,i){if(xt(n)){var o=!0;Sa(e)}else o=!1;if(Xi(e,i),e.stateNode===null)ea(t,e),$0(e,n,r),tf(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var a=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=Gt(c):(c=xt(n)?li:nt.current,c=io(e,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||a!==c)&&Um(e,s,r,c),ir=!1;var p=e.memoizedState;s.state=p,Ea(e,r,s,i),a=e.memoizedState,l!==r||p!==a||yt.current||ir?(typeof d=="function"&&(ef(e,n,d,r),a=e.memoizedState),(l=ir||Hm(e,n,l,r,p,a,c))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),s.props=r,s.state=a,s.context=c,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,y0(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:Xt(e.type,l),s.props=c,f=e.pendingProps,p=s.context,a=n.contextType,typeof a=="object"&&a!==null?a=Gt(a):(a=xt(n)?li:nt.current,a=io(e,a));var h=n.getDerivedStateFromProps;(d=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==f||p!==a)&&Um(e,s,r,a),ir=!1,p=e.memoizedState,s.state=p,Ea(e,r,s,i);var m=e.memoizedState;l!==f||p!==m||yt.current||ir?(typeof h=="function"&&(ef(e,n,h,r),m=e.memoizedState),(c=ir||Hm(e,n,c,r,p,m,a)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,m,a),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,m,a)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),s.props=r,s.state=m,s.context=a,r=c):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return of(t,e,n,r,o,i)}function of(t,e,n,r,i,o){U0(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&Nm(e,n,!1),Wn(t,e,o);r=e.stateNode,ew.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=so(e,t.child,null,o),e.child=so(e,null,l,o)):st(t,e,l,o),e.memoizedState=r.state,i&&Nm(e,n,!0),e.child}function V0(t){var e=t.stateNode;e.pendingContext?Om(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Om(t,e.context,!1),Op(t,e.containerInfo)}function Qm(t,e,n,r,i){return oo(),Mp(i),e.flags|=256,st(t,e,n,r),e.child}var sf={dehydrated:null,treeContext:null,retryLane:0};function lf(t){return{baseLanes:t,cachePool:null,transitions:null}}function W0(t,e,n){var r=e.pendingProps,i=me.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),se(me,i&1),t===null)return Xd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Bc(s,r,0,null),t=ti(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=lf(n),e.memoizedState=sf,t):_p(e,s));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return tw(t,e,s,r,l,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Er(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=Er(l,o):(o=ti(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?lf(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=sf,r}return o=t.child,t=o.sibling,r=Er(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function _p(t,e){return e=Bc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ml(t,e,n,r){return r!==null&&Mp(r),so(e,t.child,null,n),t=_p(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function tw(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=Lu(Error(I(422))),Ml(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Bc({mode:"visible",children:r.children},i,0,null),o=ti(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&so(e,t.child,null,s),e.child.memoizedState=lf(s),e.memoizedState=sf,o);if(!(e.mode&1))return Ml(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(I(419)),r=Lu(o,r,void 0),Ml(t,e,s,r)}if(l=(s&t.childLanes)!==0,gt||l){if(r=ze,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Vn(t,i),on(r,t,i,-1))}return qp(),r=Lu(Error(I(421))),Ml(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=hw.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,jt=br(i.nextSibling),At=e,pe=!0,en=null,t!==null&&(_t[Ht++]=Ln,_t[Ht++]=Pn,_t[Ht++]=ai,Ln=t.id,Pn=t.overflow,ai=e),e=_p(e,r.children),e.flags|=4096,e)}function Ym(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Zd(t.return,e,n)}function Pu(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function K0(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(st(t,e,r.children,n),r=me.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ym(t,n,e);else if(t.tag===19)Ym(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(se(me,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ta(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Pu(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ta(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Pu(e,!0,n,null,o);break;case"together":Pu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ea(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ui|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(I(153));if(e.child!==null){for(t=e.child,n=Er(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Er(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function nw(t,e,n){switch(e.tag){case 3:V0(e),oo();break;case 5:x0(e);break;case 1:xt(e.type)&&Sa(e);break;case 4:Op(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;se(wa,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(se(me,me.current&1),e.flags|=128,null):n&e.child.childLanes?W0(t,e,n):(se(me,me.current&1),t=Wn(t,e,n),t!==null?t.sibling:null);se(me,me.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return K0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),se(me,me.current),r)break;return null;case 22:case 23:return e.lanes=0,H0(t,e,n)}return Wn(t,e,n)}var q0,af,J0,G0;q0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};af=function(){};J0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Jr(Sn.current);var o=null;switch(n){case"input":i=Ad(t,i),r=Ad(t,r),o=[];break;case"select":i=ye({},i,{value:void 0}),r=ye({},r,{value:void 0}),o=[];break;case"textarea":i=Id(t,i),r=Id(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=xa)}Nd(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(vs.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var a=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(s in l)!l.hasOwnProperty(s)||a&&a.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in a)a.hasOwnProperty(s)&&l[s]!==a[s]&&(n||(n={}),n[s]=a[s])}else n||(o||(o=[]),o.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(o=o||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(o=o||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(vs.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&ae("scroll",t),o||l===a||(o=[])):(o=o||[]).push(c,a))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};G0=function(t,e,n,r){n!==r&&(e.flags|=4)};function Lo(t,e){if(!pe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ze(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function rw(t,e,n){var r=e.pendingProps;switch(Tp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(e),null;case 1:return xt(e.type)&&va(),Ze(e),null;case 3:return r=e.stateNode,lo(),ue(yt),ue(nt),zp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(El(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,en!==null&&(gf(en),en=null))),af(t,e),Ze(e),null;case 5:Np(e);var i=Jr(Rs.current);if(n=e.type,t!==null&&e.stateNode!=null)J0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(I(166));return Ze(e),null}if(t=Jr(Sn.current),El(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[yn]=e,r[As]=o,t=(e.mode&1)!==0,n){case"dialog":ae("cancel",r),ae("close",r);break;case"iframe":case"object":case"embed":ae("load",r);break;case"video":case"audio":for(i=0;i<Vo.length;i++)ae(Vo[i],r);break;case"source":ae("error",r);break;case"img":case"image":case"link":ae("error",r),ae("load",r);break;case"details":ae("toggle",r);break;case"input":sm(r,o),ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},ae("invalid",r);break;case"textarea":am(r,o),ae("invalid",r)}Nd(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Cl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Cl(r.textContent,l,t),i=["children",""+l]):vs.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&ae("scroll",r)}switch(n){case"input":gl(r),lm(r,o,!0);break;case"textarea":gl(r),cm(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=xa)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=wx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[yn]=e,t[As]=r,q0(t,e,!1,!1),e.stateNode=t;e:{switch(s=zd(n,r),n){case"dialog":ae("cancel",t),ae("close",t),i=r;break;case"iframe":case"object":case"embed":ae("load",t),i=r;break;case"video":case"audio":for(i=0;i<Vo.length;i++)ae(Vo[i],t);i=r;break;case"source":ae("error",t),i=r;break;case"img":case"image":case"link":ae("error",t),ae("load",t),i=r;break;case"details":ae("toggle",t),i=r;break;case"input":sm(t,r),i=Ad(t,r),ae("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ye({},r,{value:void 0}),ae("invalid",t);break;case"textarea":am(t,r),i=Id(t,r),ae("invalid",t);break;default:i=r}Nd(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var a=l[o];o==="style"?Tx(t,a):o==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Cx(t,a)):o==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Ss(t,a):typeof a=="number"&&Ss(t,""+a):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(vs.hasOwnProperty(o)?a!=null&&o==="onScroll"&&ae("scroll",t):a!=null&&dp(t,o,a,s))}switch(n){case"input":gl(t),lm(t,r,!1);break;case"textarea":gl(t),cm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Dr(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Ji(t,!!r.multiple,o,!1):r.defaultValue!=null&&Ji(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=xa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ze(e),null;case 6:if(t&&e.stateNode!=null)G0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(I(166));if(n=Jr(Rs.current),Jr(Sn.current),El(e)){if(r=e.stateNode,n=e.memoizedProps,r[yn]=e,(o=r.nodeValue!==n)&&(t=At,t!==null))switch(t.tag){case 3:Cl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Cl(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yn]=e,e.stateNode=r}return Ze(e),null;case 13:if(ue(me),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pe&&jt!==null&&e.mode&1&&!(e.flags&128))p0(),oo(),e.flags|=98560,o=!1;else if(o=El(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(I(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(I(317));o[yn]=e}else oo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ze(e),o=!1}else en!==null&&(gf(en),en=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||me.current&1?De===0&&(De=3):qp())),e.updateQueue!==null&&(e.flags|=4),Ze(e),null);case 4:return lo(),af(t,e),t===null&&Ms(e.stateNode.containerInfo),Ze(e),null;case 10:return Dp(e.type._context),Ze(e),null;case 17:return xt(e.type)&&va(),Ze(e),null;case 19:if(ue(me),o=e.memoizedState,o===null)return Ze(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Lo(o,!1);else{if(De!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Ta(t),s!==null){for(e.flags|=128,Lo(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return se(me,me.current&1|2),e.child}t=t.sibling}o.tail!==null&&we()>co&&(e.flags|=128,r=!0,Lo(o,!1),e.lanes=4194304)}else{if(!r)if(t=Ta(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Lo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!pe)return Ze(e),null}else 2*we()-o.renderingStartTime>co&&n!==1073741824&&(e.flags|=128,r=!0,Lo(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=we(),e.sibling=null,n=me.current,se(me,r?n&1|2:n&1),e):(Ze(e),null);case 22:case 23:return Kp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Tt&1073741824&&(Ze(e),e.subtreeFlags&6&&(e.flags|=8192)):Ze(e),null;case 24:return null;case 25:return null}throw Error(I(156,e.tag))}function iw(t,e){switch(Tp(e),e.tag){case 1:return xt(e.type)&&va(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return lo(),ue(yt),ue(nt),zp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Np(e),null;case 13:if(ue(me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(I(340));oo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ue(me),null;case 4:return lo(),null;case 10:return Dp(e.type._context),null;case 22:case 23:return Kp(),null;case 24:return null;default:return null}}var jl=!1,tt=!1,ow=typeof WeakSet=="function"?WeakSet:Set,P=null;function Vi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ve(t,e,r)}else n.current=null}function cf(t,e,n){try{n()}catch(r){ve(t,e,r)}}var Xm=!1;function sw(t,e){if(Wd=ma,t=e0(),Cp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,a=-1,c=0,d=0,f=t,p=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(l=s+i),f!==o||r!==0&&f.nodeType!==3||(a=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(h=f.firstChild)!==null;)p=f,f=h;for(;;){if(f===t)break t;if(p===n&&++c===i&&(l=s),p===o&&++d===r&&(a=s),(h=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=h}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Kd={focusedElem:t,selectionRange:n},ma=!1,P=e;P!==null;)if(e=P,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,P=t;else for(;P!==null;){e=P;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,v=m.memoizedState,y=e.stateNode,x=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:Xt(e.type,g),v);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(k){ve(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,P=t;break}P=e.return}return m=Xm,Xm=!1,m}function ts(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&cf(e,n,o)}i=i.next}while(i!==r)}}function $c(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function uf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Q0(t){var e=t.alternate;e!==null&&(t.alternate=null,Q0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yn],delete e[As],delete e[Gd],delete e[Hk],delete e[Uk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Y0(t){return t.tag===5||t.tag===3||t.tag===4}function Zm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Y0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function df(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=xa));else if(r!==4&&(t=t.child,t!==null))for(df(t,e,n),t=t.sibling;t!==null;)df(t,e,n),t=t.sibling}function ff(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ff(t,e,n),t=t.sibling;t!==null;)ff(t,e,n),t=t.sibling}var He=null,Zt=!1;function Zn(t,e,n){for(n=n.child;n!==null;)X0(t,e,n),n=n.sibling}function X0(t,e,n){if(vn&&typeof vn.onCommitFiberUnmount=="function")try{vn.onCommitFiberUnmount(Dc,n)}catch{}switch(n.tag){case 5:tt||Vi(n,e);case 6:var r=He,i=Zt;He=null,Zn(t,e,n),He=r,Zt=i,He!==null&&(Zt?(t=He,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):He.removeChild(n.stateNode));break;case 18:He!==null&&(Zt?(t=He,n=n.stateNode,t.nodeType===8?Du(t.parentNode,n):t.nodeType===1&&Du(t,n),Cs(t)):Du(He,n.stateNode));break;case 4:r=He,i=Zt,He=n.stateNode.containerInfo,Zt=!0,Zn(t,e,n),He=r,Zt=i;break;case 0:case 11:case 14:case 15:if(!tt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&cf(n,e,s),i=i.next}while(i!==r)}Zn(t,e,n);break;case 1:if(!tt&&(Vi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ve(n,e,l)}Zn(t,e,n);break;case 21:Zn(t,e,n);break;case 22:n.mode&1?(tt=(r=tt)||n.memoizedState!==null,Zn(t,e,n),tt=r):Zn(t,e,n);break;default:Zn(t,e,n)}}function eg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ow),e.forEach(function(r){var i=mw.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Yt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:He=l.stateNode,Zt=!1;break e;case 3:He=l.stateNode.containerInfo,Zt=!0;break e;case 4:He=l.stateNode.containerInfo,Zt=!0;break e}l=l.return}if(He===null)throw Error(I(160));X0(o,s,i),He=null,Zt=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(c){ve(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Z0(e,t),e=e.sibling}function Z0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Yt(e,t),fn(t),r&4){try{ts(3,t,t.return),$c(3,t)}catch(g){ve(t,t.return,g)}try{ts(5,t,t.return)}catch(g){ve(t,t.return,g)}}break;case 1:Yt(e,t),fn(t),r&512&&n!==null&&Vi(n,n.return);break;case 5:if(Yt(e,t),fn(t),r&512&&n!==null&&Vi(n,n.return),t.flags&32){var i=t.stateNode;try{Ss(i,"")}catch(g){ve(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&bx(i,o),zd(l,s);var c=zd(l,o);for(s=0;s<a.length;s+=2){var d=a[s],f=a[s+1];d==="style"?Tx(i,f):d==="dangerouslySetInnerHTML"?Cx(i,f):d==="children"?Ss(i,f):dp(i,d,f,c)}switch(l){case"input":Dd(i,o);break;case"textarea":kx(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?Ji(i,!!o.multiple,h,!1):p!==!!o.multiple&&(o.defaultValue!=null?Ji(i,!!o.multiple,o.defaultValue,!0):Ji(i,!!o.multiple,o.multiple?[]:"",!1))}i[As]=o}catch(g){ve(t,t.return,g)}}break;case 6:if(Yt(e,t),fn(t),r&4){if(t.stateNode===null)throw Error(I(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(g){ve(t,t.return,g)}}break;case 3:if(Yt(e,t),fn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Cs(e.containerInfo)}catch(g){ve(t,t.return,g)}break;case 4:Yt(e,t),fn(t);break;case 13:Yt(e,t),fn(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Vp=we())),r&4&&eg(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(tt=(c=tt)||d,Yt(e,t),tt=c):Yt(e,t),fn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(P=t,d=t.child;d!==null;){for(f=P=d;P!==null;){switch(p=P,h=p.child,p.tag){case 0:case 11:case 14:case 15:ts(4,p,p.return);break;case 1:Vi(p,p.return);var m=p.stateNode;if(typeof m.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){ve(r,n,g)}}break;case 5:Vi(p,p.return);break;case 22:if(p.memoizedState!==null){ng(f);continue}}h!==null?(h.return=p,P=h):ng(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=f.stateNode,a=f.memoizedProps.style,s=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Ex("display",s))}catch(g){ve(t,t.return,g)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(g){ve(t,t.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Yt(e,t),fn(t),r&4&&eg(t);break;case 21:break;default:Yt(e,t),fn(t)}}function fn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Y0(n)){var r=n;break e}n=n.return}throw Error(I(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ss(i,""),r.flags&=-33);var o=Zm(t);ff(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=Zm(t);df(t,l,s);break;default:throw Error(I(161))}}catch(a){ve(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function lw(t,e,n){P=t,ev(t)}function ev(t,e,n){for(var r=(t.mode&1)!==0;P!==null;){var i=P,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||jl;if(!s){var l=i.alternate,a=l!==null&&l.memoizedState!==null||tt;l=jl;var c=tt;if(jl=s,(tt=a)&&!c)for(P=i;P!==null;)s=P,a=s.child,s.tag===22&&s.memoizedState!==null?rg(i):a!==null?(a.return=s,P=a):rg(i);for(;o!==null;)P=o,ev(o),o=o.sibling;P=i,jl=l,tt=c}tg(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,P=o):tg(t)}}function tg(t){for(;P!==null;){var e=P;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:tt||$c(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!tt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Xt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Fm(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Fm(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Cs(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}tt||e.flags&512&&uf(e)}catch(p){ve(e,e.return,p)}}if(e===t){P=null;break}if(n=e.sibling,n!==null){n.return=e.return,P=n;break}P=e.return}}function ng(t){for(;P!==null;){var e=P;if(e===t){P=null;break}var n=e.sibling;if(n!==null){n.return=e.return,P=n;break}P=e.return}}function rg(t){for(;P!==null;){var e=P;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{$c(4,e)}catch(a){ve(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){ve(e,i,a)}}var o=e.return;try{uf(e)}catch(a){ve(e,o,a)}break;case 5:var s=e.return;try{uf(e)}catch(a){ve(e,s,a)}}}catch(a){ve(e,e.return,a)}if(e===t){P=null;break}var l=e.sibling;if(l!==null){l.return=e.return,P=l;break}P=e.return}}var aw=Math.ceil,Aa=Kn.ReactCurrentDispatcher,Hp=Kn.ReactCurrentOwner,Kt=Kn.ReactCurrentBatchConfig,X=0,ze=null,Ee=null,qe=0,Tt=0,Wi=Nr(0),De=0,zs=null,ui=0,Fc=0,Up=0,ns=null,ht=null,Vp=0,co=1/0,On=null,Da=!1,pf=null,wr=null,Al=!1,hr=null,Ra=0,rs=0,hf=null,ta=-1,na=0;function lt(){return X&6?we():ta!==-1?ta:ta=we()}function Cr(t){return t.mode&1?X&2&&qe!==0?qe&-qe:Wk.transition!==null?(na===0&&(na=$x()),na):(t=te,t!==0||(t=window.event,t=t===void 0?16:Wx(t.type)),t):1}function on(t,e,n,r){if(50<rs)throw rs=0,hf=null,Error(I(185));tl(t,n,r),(!(X&2)||t!==ze)&&(t===ze&&(!(X&2)&&(Fc|=n),De===4&&ur(t,qe)),vt(t,r),n===1&&X===0&&!(e.mode&1)&&(co=we()+500,zc&&zr()))}function vt(t,e){var n=t.callbackNode;Wb(t,e);var r=ha(t,t===ze?qe:0);if(r===0)n!==null&&fm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&fm(n),e===1)t.tag===0?Vk(ig.bind(null,t)):u0(ig.bind(null,t)),Bk(function(){!(X&6)&&zr()}),n=null;else{switch(Fx(r)){case 1:n=gp;break;case 4:n=Lx;break;case 16:n=pa;break;case 536870912:n=Px;break;default:n=pa}n=av(n,tv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function tv(t,e){if(ta=-1,na=0,X&6)throw Error(I(327));var n=t.callbackNode;if(Zi()&&t.callbackNode!==n)return null;var r=ha(t,t===ze?qe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ia(t,r);else{e=r;var i=X;X|=2;var o=rv();(ze!==t||qe!==e)&&(On=null,co=we()+500,ei(t,e));do try{dw();break}catch(l){nv(t,l)}while(!0);Ap(),Aa.current=o,X=i,Ee!==null?e=0:(ze=null,qe=0,e=De)}if(e!==0){if(e===2&&(i=Bd(t),i!==0&&(r=i,e=mf(t,i))),e===1)throw n=zs,ei(t,0),ur(t,r),vt(t,we()),n;if(e===6)ur(t,r);else{if(i=t.current.alternate,!(r&30)&&!cw(i)&&(e=Ia(t,r),e===2&&(o=Bd(t),o!==0&&(r=o,e=mf(t,o))),e===1))throw n=zs,ei(t,0),ur(t,r),vt(t,we()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(I(345));case 2:Hr(t,ht,On);break;case 3:if(ur(t,r),(r&130023424)===r&&(e=Vp+500-we(),10<e)){if(ha(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){lt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Jd(Hr.bind(null,t,ht,On),e);break}Hr(t,ht,On);break;case 4:if(ur(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-rn(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=we()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*aw(r/1960))-r,10<r){t.timeoutHandle=Jd(Hr.bind(null,t,ht,On),r);break}Hr(t,ht,On);break;case 5:Hr(t,ht,On);break;default:throw Error(I(329))}}}return vt(t,we()),t.callbackNode===n?tv.bind(null,t):null}function mf(t,e){var n=ns;return t.current.memoizedState.isDehydrated&&(ei(t,e).flags|=256),t=Ia(t,e),t!==2&&(e=ht,ht=n,e!==null&&gf(e)),t}function gf(t){ht===null?ht=t:ht.push.apply(ht,t)}function cw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sn(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ur(t,e){for(e&=~Up,e&=~Fc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-rn(e),r=1<<n;t[n]=-1,e&=~r}}function ig(t){if(X&6)throw Error(I(327));Zi();var e=ha(t,0);if(!(e&1))return vt(t,we()),null;var n=Ia(t,e);if(t.tag!==0&&n===2){var r=Bd(t);r!==0&&(e=r,n=mf(t,r))}if(n===1)throw n=zs,ei(t,0),ur(t,e),vt(t,we()),n;if(n===6)throw Error(I(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Hr(t,ht,On),vt(t,we()),null}function Wp(t,e){var n=X;X|=1;try{return t(e)}finally{X=n,X===0&&(co=we()+500,zc&&zr())}}function di(t){hr!==null&&hr.tag===0&&!(X&6)&&Zi();var e=X;X|=1;var n=Kt.transition,r=te;try{if(Kt.transition=null,te=1,t)return t()}finally{te=r,Kt.transition=n,X=e,!(X&6)&&zr()}}function Kp(){Tt=Wi.current,ue(Wi)}function ei(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Fk(n)),Ee!==null)for(n=Ee.return;n!==null;){var r=n;switch(Tp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&va();break;case 3:lo(),ue(yt),ue(nt),zp();break;case 5:Np(r);break;case 4:lo();break;case 13:ue(me);break;case 19:ue(me);break;case 10:Dp(r.type._context);break;case 22:case 23:Kp()}n=n.return}if(ze=t,Ee=t=Er(t.current,null),qe=Tt=e,De=0,zs=null,Up=Fc=ui=0,ht=ns=null,qr!==null){for(e=0;e<qr.length;e++)if(n=qr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}qr=null}return t}function nv(t,e){do{var n=Ee;try{if(Ap(),Xl.current=ja,Ma){for(var r=ge.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ma=!1}if(ci=0,Ie=Me=ge=null,es=!1,Is=0,Hp.current=null,n===null||n.return===null){De=1,zs=e,Ee=null;break}e:{var o=t,s=n.return,l=n,a=e;if(e=qe,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=Wm(s);if(h!==null){h.flags&=-257,Km(h,s,l,o,e),h.mode&1&&Vm(o,c,e),e=h,a=c;var m=e.updateQueue;if(m===null){var g=new Set;g.add(a),e.updateQueue=g}else m.add(a);break e}else{if(!(e&1)){Vm(o,c,e),qp();break e}a=Error(I(426))}}else if(pe&&l.mode&1){var v=Wm(s);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Km(v,s,l,o,e),Mp(ao(a,l));break e}}o=a=ao(a,l),De!==4&&(De=2),ns===null?ns=[o]:ns.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var y=F0(o,a,e);$m(o,y);break e;case 1:l=a;var x=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof x.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(wr===null||!wr.has(S)))){o.flags|=65536,e&=-e,o.lanes|=e;var k=B0(o,l,e);$m(o,k);break e}}o=o.return}while(o!==null)}ov(n)}catch(w){e=w,Ee===n&&n!==null&&(Ee=n=n.return);continue}break}while(!0)}function rv(){var t=Aa.current;return Aa.current=ja,t===null?ja:t}function qp(){(De===0||De===3||De===2)&&(De=4),ze===null||!(ui&268435455)&&!(Fc&268435455)||ur(ze,qe)}function Ia(t,e){var n=X;X|=2;var r=rv();(ze!==t||qe!==e)&&(On=null,ei(t,e));do try{uw();break}catch(i){nv(t,i)}while(!0);if(Ap(),X=n,Aa.current=r,Ee!==null)throw Error(I(261));return ze=null,qe=0,De}function uw(){for(;Ee!==null;)iv(Ee)}function dw(){for(;Ee!==null&&!Lb();)iv(Ee)}function iv(t){var e=lv(t.alternate,t,Tt);t.memoizedProps=t.pendingProps,e===null?ov(t):Ee=e,Hp.current=null}function ov(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=iw(n,e),n!==null){n.flags&=32767,Ee=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{De=6,Ee=null;return}}else if(n=rw(n,e,Tt),n!==null){Ee=n;return}if(e=e.sibling,e!==null){Ee=e;return}Ee=e=t}while(e!==null);De===0&&(De=5)}function Hr(t,e,n){var r=te,i=Kt.transition;try{Kt.transition=null,te=1,fw(t,e,n,r)}finally{Kt.transition=i,te=r}return null}function fw(t,e,n,r){do Zi();while(hr!==null);if(X&6)throw Error(I(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(I(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(Kb(t,o),t===ze&&(Ee=ze=null,qe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Al||(Al=!0,av(pa,function(){return Zi(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Kt.transition,Kt.transition=null;var s=te;te=1;var l=X;X|=4,Hp.current=null,sw(t,n),Z0(n,t),Ik(Kd),ma=!!Wd,Kd=Wd=null,t.current=n,lw(n),Pb(),X=l,te=s,Kt.transition=o}else t.current=n;if(Al&&(Al=!1,hr=t,Ra=i),o=t.pendingLanes,o===0&&(wr=null),Bb(n.stateNode),vt(t,we()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Da)throw Da=!1,t=pf,pf=null,t;return Ra&1&&t.tag!==0&&Zi(),o=t.pendingLanes,o&1?t===hf?rs++:(rs=0,hf=t):rs=0,zr(),null}function Zi(){if(hr!==null){var t=Fx(Ra),e=Kt.transition,n=te;try{if(Kt.transition=null,te=16>t?16:t,hr===null)var r=!1;else{if(t=hr,hr=null,Ra=0,X&6)throw Error(I(331));var i=X;for(X|=4,P=t.current;P!==null;){var o=P,s=o.child;if(P.flags&16){var l=o.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(P=c;P!==null;){var d=P;switch(d.tag){case 0:case 11:case 15:ts(8,d,o)}var f=d.child;if(f!==null)f.return=d,P=f;else for(;P!==null;){d=P;var p=d.sibling,h=d.return;if(Q0(d),d===c){P=null;break}if(p!==null){p.return=h,P=p;break}P=h}}}var m=o.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}P=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,P=s;else e:for(;P!==null;){if(o=P,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ts(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,P=y;break e}P=o.return}}var x=t.current;for(P=x;P!==null;){s=P;var S=s.child;if(s.subtreeFlags&2064&&S!==null)S.return=s,P=S;else e:for(s=x;P!==null;){if(l=P,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:$c(9,l)}}catch(w){ve(l,l.return,w)}if(l===s){P=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,P=k;break e}P=l.return}}if(X=i,zr(),vn&&typeof vn.onPostCommitFiberRoot=="function")try{vn.onPostCommitFiberRoot(Dc,t)}catch{}r=!0}return r}finally{te=n,Kt.transition=e}}return!1}function og(t,e,n){e=ao(n,e),e=F0(t,e,1),t=kr(t,e,1),e=lt(),t!==null&&(tl(t,1,e),vt(t,e))}function ve(t,e,n){if(t.tag===3)og(t,t,n);else for(;e!==null;){if(e.tag===3){og(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(wr===null||!wr.has(r))){t=ao(n,t),t=B0(e,t,1),e=kr(e,t,1),t=lt(),e!==null&&(tl(e,1,t),vt(e,t));break}}e=e.return}}function pw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=lt(),t.pingedLanes|=t.suspendedLanes&n,ze===t&&(qe&n)===n&&(De===4||De===3&&(qe&130023424)===qe&&500>we()-Vp?ei(t,0):Up|=n),vt(t,e)}function sv(t,e){e===0&&(t.mode&1?(e=vl,vl<<=1,!(vl&130023424)&&(vl=4194304)):e=1);var n=lt();t=Vn(t,e),t!==null&&(tl(t,e,n),vt(t,n))}function hw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),sv(t,n)}function mw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(I(314))}r!==null&&r.delete(e),sv(t,n)}var lv;lv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||yt.current)gt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return gt=!1,nw(t,e,n);gt=!!(t.flags&131072)}else gt=!1,pe&&e.flags&1048576&&d0(e,ka,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ea(t,e),t=e.pendingProps;var i=io(e,nt.current);Xi(e,n),i=Pp(null,e,r,t,i,n);var o=$p();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xt(r)?(o=!0,Sa(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ip(e),i.updater=Pc,e.stateNode=i,i._reactInternals=e,tf(e,r,t,n),e=of(null,e,r,!0,o,n)):(e.tag=0,pe&&o&&Ep(e),st(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ea(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=yw(r),t=Xt(r,t),i){case 0:e=rf(null,e,r,t,n);break e;case 1:e=Gm(null,e,r,t,n);break e;case 11:e=qm(null,e,r,t,n);break e;case 14:e=Jm(null,e,r,Xt(r.type,t),n);break e}throw Error(I(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xt(r,i),rf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xt(r,i),Gm(t,e,r,i,n);case 3:e:{if(V0(e),t===null)throw Error(I(387));r=e.pendingProps,o=e.memoizedState,i=o.element,y0(t,e),Ea(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=ao(Error(I(423)),e),e=Qm(t,e,r,n,i);break e}else if(r!==i){i=ao(Error(I(424)),e),e=Qm(t,e,r,n,i);break e}else for(jt=br(e.stateNode.containerInfo.firstChild),At=e,pe=!0,en=null,n=m0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(oo(),r===i){e=Wn(t,e,n);break e}st(t,e,r,n)}e=e.child}return e;case 5:return x0(e),t===null&&Xd(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,qd(r,i)?s=null:o!==null&&qd(r,o)&&(e.flags|=32),U0(t,e),st(t,e,s,n),e.child;case 6:return t===null&&Xd(e),null;case 13:return W0(t,e,n);case 4:return Op(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=so(e,null,r,n):st(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xt(r,i),qm(t,e,r,i,n);case 7:return st(t,e,e.pendingProps,n),e.child;case 8:return st(t,e,e.pendingProps.children,n),e.child;case 12:return st(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,se(wa,r._currentValue),r._currentValue=s,o!==null)if(sn(o.value,s)){if(o.children===i.children&&!yt.current){e=Wn(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(o.tag===1){a=Fn(-1,n&-n),a.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?a.next=a:(a.next=d.next,d.next=a),c.pending=a}}o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Zd(o.return,n,e),l.lanes|=n;break}a=a.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(I(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Zd(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}st(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Xi(e,n),i=Gt(i),r=r(i),e.flags|=1,st(t,e,r,n),e.child;case 14:return r=e.type,i=Xt(r,e.pendingProps),i=Xt(r.type,i),Jm(t,e,r,i,n);case 15:return _0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xt(r,i),ea(t,e),e.tag=1,xt(r)?(t=!0,Sa(e)):t=!1,Xi(e,n),$0(e,r,i),tf(e,r,i,n),of(null,e,r,!0,t,n);case 19:return K0(t,e,n);case 22:return H0(t,e,n)}throw Error(I(156,e.tag))};function av(t,e){return zx(t,e)}function gw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(t,e,n,r){return new gw(t,e,n,r)}function Jp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function yw(t){if(typeof t=="function")return Jp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===pp)return 11;if(t===hp)return 14}return 2}function Er(t,e){var n=t.alternate;return n===null?(n=Vt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ra(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Jp(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case zi:return ti(n.children,i,o,e);case fp:s=8,i|=8;break;case Ed:return t=Vt(12,n,e,i|2),t.elementType=Ed,t.lanes=o,t;case Td:return t=Vt(13,n,e,i),t.elementType=Td,t.lanes=o,t;case Md:return t=Vt(19,n,e,i),t.elementType=Md,t.lanes=o,t;case xx:return Bc(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case gx:s=10;break e;case yx:s=9;break e;case pp:s=11;break e;case hp:s=14;break e;case rr:s=16,r=null;break e}throw Error(I(130,t==null?t:typeof t,""))}return e=Vt(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function ti(t,e,n,r){return t=Vt(7,t,r,e),t.lanes=n,t}function Bc(t,e,n,r){return t=Vt(22,t,r,e),t.elementType=xx,t.lanes=n,t.stateNode={isHidden:!1},t}function $u(t,e,n){return t=Vt(6,t,null,e),t.lanes=n,t}function Fu(t,e,n){return e=Vt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function xw(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vu(0),this.expirationTimes=vu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Gp(t,e,n,r,i,o,s,l,a){return t=new xw(t,e,n,l,a),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Vt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ip(o),t}function vw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ni,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function cv(t){if(!t)return Rr;t=t._reactInternals;e:{if(Si(t)!==t||t.tag!==1)throw Error(I(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(I(171))}if(t.tag===1){var n=t.type;if(xt(n))return c0(t,n,e)}return e}function uv(t,e,n,r,i,o,s,l,a){return t=Gp(n,r,!0,t,i,o,s,l,a),t.context=cv(null),n=t.current,r=lt(),i=Cr(n),o=Fn(r,i),o.callback=e??null,kr(n,o,i),t.current.lanes=i,tl(t,i,r),vt(t,r),t}function _c(t,e,n,r){var i=e.current,o=lt(),s=Cr(i);return n=cv(n),e.context===null?e.context=n:e.pendingContext=n,e=Fn(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=kr(i,e,s),t!==null&&(on(t,i,s,o),Yl(t,i,s)),s}function Oa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function sg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Qp(t,e){sg(t,e),(t=t.alternate)&&sg(t,e)}function Sw(){return null}var dv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Yp(t){this._internalRoot=t}Hc.prototype.render=Yp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(I(409));_c(t,e,null,null)};Hc.prototype.unmount=Yp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;di(function(){_c(null,t,null,null)}),e[Un]=null}};function Hc(t){this._internalRoot=t}Hc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Hx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<cr.length&&e!==0&&e<cr[n].priority;n++);cr.splice(n,0,t),n===0&&Vx(t)}};function Xp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Uc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function lg(){}function bw(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=Oa(s);o.call(c)}}var s=uv(e,r,t,0,null,!1,!1,"",lg);return t._reactRootContainer=s,t[Un]=s.current,Ms(t.nodeType===8?t.parentNode:t),di(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=Oa(a);l.call(c)}}var a=Gp(t,0,!1,null,null,!1,!1,"",lg);return t._reactRootContainer=a,t[Un]=a.current,Ms(t.nodeType===8?t.parentNode:t),di(function(){_c(e,a,n,r)}),a}function Vc(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var a=Oa(s);l.call(a)}}_c(e,s,t,i)}else s=bw(n,e,t,i,r);return Oa(s)}Bx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Uo(e.pendingLanes);n!==0&&(yp(e,n|1),vt(e,we()),!(X&6)&&(co=we()+500,zr()))}break;case 13:di(function(){var r=Vn(t,1);if(r!==null){var i=lt();on(r,t,1,i)}}),Qp(t,1)}};xp=function(t){if(t.tag===13){var e=Vn(t,134217728);if(e!==null){var n=lt();on(e,t,134217728,n)}Qp(t,134217728)}};_x=function(t){if(t.tag===13){var e=Cr(t),n=Vn(t,e);if(n!==null){var r=lt();on(n,t,e,r)}Qp(t,e)}};Hx=function(){return te};Ux=function(t,e){var n=te;try{return te=t,e()}finally{te=n}};Pd=function(t,e,n){switch(e){case"input":if(Dd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Nc(r);if(!i)throw Error(I(90));Sx(r),Dd(r,i)}}}break;case"textarea":kx(t,n);break;case"select":e=n.value,e!=null&&Ji(t,!!n.multiple,e,!1)}};Ax=Wp;Dx=di;var kw={usingClientEntryPoint:!1,Events:[rl,Fi,Nc,Mx,jx,Wp]},Po={findFiberByHostInstance:Kr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ww={bundleType:Po.bundleType,version:Po.version,rendererPackageName:Po.rendererPackageName,rendererConfig:Po.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ox(t),t===null?null:t.stateNode},findFiberByHostInstance:Po.findFiberByHostInstance||Sw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dl.isDisabled&&Dl.supportsFiber)try{Dc=Dl.inject(ww),vn=Dl}catch{}}Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kw;Ot.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xp(e))throw Error(I(200));return vw(t,e,null,n)};Ot.createRoot=function(t,e){if(!Xp(t))throw Error(I(299));var n=!1,r="",i=dv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Gp(t,1,!1,null,null,n,!1,r,i),t[Un]=e.current,Ms(t.nodeType===8?t.parentNode:t),new Yp(e)};Ot.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(I(188)):(t=Object.keys(t).join(","),Error(I(268,t)));return t=Ox(e),t=t===null?null:t.stateNode,t};Ot.flushSync=function(t){return di(t)};Ot.hydrate=function(t,e,n){if(!Uc(e))throw Error(I(200));return Vc(null,t,e,!0,n)};Ot.hydrateRoot=function(t,e,n){if(!Xp(t))throw Error(I(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=dv;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=uv(e,null,t,1,n??null,i,!1,o,s),t[Un]=e.current,Ms(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Hc(e)};Ot.render=function(t,e,n){if(!Uc(e))throw Error(I(200));return Vc(null,t,e,!1,n)};Ot.unmountComponentAtNode=function(t){if(!Uc(t))throw Error(I(40));return t._reactRootContainer?(di(function(){Vc(null,null,t,!1,function(){t._reactRootContainer=null,t[Un]=null})}),!0):!1};Ot.unstable_batchedUpdates=Wp;Ot.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Uc(n))throw Error(I(200));if(t==null||t._reactInternals===void 0)throw Error(I(38));return Vc(t,e,n,!1,r)};Ot.version="18.3.1-next-f1338f8080-20240426";function fv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fv)}catch(t){console.error(t)}}fv(),fx.exports=Ot;var Gr=fx.exports;const Cw=ex(Gr);var ag=Gr;wd.createRoot=ag.createRoot,wd.hydrateRoot=ag.hydrateRoot;var pv=Symbol.for("immer-nothing"),cg=Symbol.for("immer-draftable"),It=Symbol.for("immer-state");function tn(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Ls=Object.getPrototypeOf;function uo(t){return!!t&&!!t[It]}function fi(t){var e;return t?hv(t)||Array.isArray(t)||!!t[cg]||!!((e=t.constructor)!=null&&e[cg])||ol(t)||Kc(t):!1}var Ew=Object.prototype.constructor.toString(),ug=new WeakMap;function hv(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=ug.get(n);return r===void 0&&(r=Function.toString.call(n),ug.set(n,r)),r===Ew}function Na(t,e,n=!0){Wc(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function Wc(t){const e=t[It];return e?e.type_:Array.isArray(t)?1:ol(t)?2:Kc(t)?3:0}function yf(t,e){return Wc(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function mv(t,e,n){const r=Wc(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function Tw(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function ol(t){return t instanceof Map}function Kc(t){return t instanceof Set}function Ur(t){return t.copy_||t.base_}function xf(t,e){if(ol(t))return new Map(t);if(Kc(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=hv(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[It];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],l=r[s];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(r[s]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[s]})}return Object.create(Ls(t),r)}else{const r=Ls(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function Zp(t,e=!1){return qc(t)||uo(t)||!fi(t)||(Wc(t)>1&&Object.defineProperties(t,{set:Rl,add:Rl,clear:Rl,delete:Rl}),Object.freeze(t),e&&Object.values(t).forEach(n=>Zp(n,!0))),t}function Mw(){tn(2)}var Rl={value:Mw};function qc(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var jw={};function pi(t){const e=jw[t];return e||tn(0,t),e}var Ps;function gv(){return Ps}function Aw(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function dg(t,e){e&&(pi("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function vf(t){Sf(t),t.drafts_.forEach(Dw),t.drafts_=null}function Sf(t){t===Ps&&(Ps=t.parent_)}function fg(t){return Ps=Aw(Ps,t)}function Dw(t){const e=t[It];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function pg(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[It].modified_&&(vf(e),tn(4)),fi(t)&&(t=za(e,t),e.parent_||La(e,t)),e.patches_&&pi("Patches").generateReplacementPatches_(n[It].base_,t,e.patches_,e.inversePatches_)):t=za(e,n,[]),vf(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==pv?t:void 0}function za(t,e,n){if(qc(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[It];if(!i)return Na(e,(o,s)=>hg(t,i,e,o,s,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return La(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const o=i.copy_;let s=o,l=!1;i.type_===3&&(s=new Set(o),o.clear(),l=!0),Na(s,(a,c)=>hg(t,i,o,a,c,n,l),r),La(t,o,!1),n&&t.patches_&&pi("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function hg(t,e,n,r,i,o,s){if(i==null||typeof i!="object"&&!s)return;const l=qc(i);if(!(l&&!s)){if(uo(i)){const a=o&&e&&e.type_!==3&&!yf(e.assigned_,r)?o.concat(r):void 0,c=za(t,i,a);if(mv(n,r,c),uo(c))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if(fi(i)&&!l){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&l)return;za(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(ol(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&La(t,i)}}}function La(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Zp(e,n)}function Rw(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:gv(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=eh;n&&(i=[r],o=$s);const{revoke:s,proxy:l}=Proxy.revocable(i,o);return r.draft_=l,r.revoke_=s,l}var eh={get(t,e){if(e===It)return t;const n=Ur(t);if(!yf(n,e))return Iw(t,n,e);const r=n[e];return t.finalized_||!fi(r)?r:r===Bu(t.base_,e)?(_u(t),t.copy_[e]=kf(r,t)):r},has(t,e){return e in Ur(t)},ownKeys(t){return Reflect.ownKeys(Ur(t))},set(t,e,n){const r=yv(Ur(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=Bu(Ur(t),e),o=i==null?void 0:i[It];if(o&&o.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Tw(n,i)&&(n!==void 0||yf(t.base_,e)))return!0;_u(t),bf(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Bu(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,_u(t),bf(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Ur(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){tn(11)},getPrototypeOf(t){return Ls(t.base_)},setPrototypeOf(){tn(12)}},$s={};Na(eh,(t,e)=>{$s[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});$s.deleteProperty=function(t,e){return $s.set.call(this,t,e,void 0)};$s.set=function(t,e,n){return eh.set.call(this,t[0],e,n,t[0])};function Bu(t,e){const n=t[It];return(n?Ur(n):t)[e]}function Iw(t,e,n){var i;const r=yv(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function yv(t,e){if(!(e in t))return;let n=Ls(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Ls(n)}}function bf(t){t.modified_||(t.modified_=!0,t.parent_&&bf(t.parent_))}function _u(t){t.copy_||(t.copy_=xf(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Ow=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const o=n;n=e;const s=this;return function(a=o,...c){return s.produce(a,d=>n.call(this,d,...c))}}typeof n!="function"&&tn(6),r!==void 0&&typeof r!="function"&&tn(7);let i;if(fi(e)){const o=fg(this),s=kf(e,void 0);let l=!0;try{i=n(s),l=!1}finally{l?vf(o):Sf(o)}return dg(o,r),pg(i,o)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===pv&&(i=void 0),this.autoFreeze_&&Zp(i,!0),r){const o=[],s=[];pi("Patches").generateReplacementPatches_(e,i,o,s),r(o,s)}return i}else tn(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...l)=>this.produceWithPatches(s,a=>e(a,...l));let r,i;return[this.produce(e,n,(s,l)=>{r=s,i=l}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){fi(t)||tn(8),uo(t)&&(t=Nw(t));const e=fg(this),n=kf(t,void 0);return n[It].isManual_=!0,Sf(e),n}finishDraft(t,e){const n=t&&t[It];(!n||!n.isManual_)&&tn(9);const{scope_:r}=n;return dg(r,e),pg(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=pi("Patches").applyPatches_;return uo(t)?r(t,e):this.produce(t,i=>r(i,e))}};function kf(t,e){const n=ol(t)?pi("MapSet").proxyMap_(t,e):Kc(t)?pi("MapSet").proxySet_(t,e):Rw(t,e);return(e?e.scope_:gv()).drafts_.push(n),n}function Nw(t){return uo(t)||tn(10,t),xv(t)}function xv(t){if(!fi(t)||qc(t))return t;const e=t[It];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=xf(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=xf(t,!0);return Na(n,(i,o)=>{mv(n,i,xv(o))},r),e&&(e.finalized_=!1),n}var zw=new Ow,Lw=zw.produce;let Il;const Pw=new Uint8Array(16);function $w(){if(!Il&&(Il=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Il))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Il(Pw)}const _e=[];for(let t=0;t<256;++t)_e.push((t+256).toString(16).slice(1));function Fw(t,e=0){return _e[t[e+0]]+_e[t[e+1]]+_e[t[e+2]]+_e[t[e+3]]+"-"+_e[t[e+4]]+_e[t[e+5]]+"-"+_e[t[e+6]]+_e[t[e+7]]+"-"+_e[t[e+8]]+_e[t[e+9]]+"-"+_e[t[e+10]]+_e[t[e+11]]+_e[t[e+12]]+_e[t[e+13]]+_e[t[e+14]]+_e[t[e+15]]}const Bw=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),mg={randomUUID:Bw};function F(t,e,n){if(mg.randomUUID&&!t)return mg.randomUUID();t=t||{};const r=t.random||(t.rng||$w)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Fw(r)}const vv=[{id:"northwell",name:"Northwell Blue",primary:"#003087",secondary:"#0057A8",accent:"#009CDE",background:"#F0F4FA",surface:"#FFFFFF",border:"#C8D9EE",text:"#1A2B4A",muted:"#5A789A",fontDisplay:'"DM Serif Display", Georgia, serif',fontBody:'"DM Sans", system-ui, sans-serif',fontMono:'"DM Mono", ui-monospace, monospace'},{id:"midnight",name:"Midnight Clinical",primary:"#0A0F1E",secondary:"#1A2744",accent:"#4FFFB0",background:"#080C18",surface:"#0F1628",border:"#1E2E50",text:"#E8F0FF",muted:"#6B82AA",fontDisplay:'"DM Serif Display", Georgia, serif',fontBody:'"DM Sans", system-ui, sans-serif',fontMono:'"DM Mono", ui-monospace, monospace'},{id:"editorial",name:"Editorial Print",primary:"#1A1A1A",secondary:"#333333",accent:"#C0392B",background:"#F5F0E8",surface:"#FEFCF8",border:"#D4CABC",text:"#1A1A1A",muted:"#7A6E62",fontDisplay:'"DM Serif Display", Georgia, serif',fontBody:'"DM Sans", system-ui, sans-serif',fontMono:'"DM Mono", ui-monospace, monospace'},{id:"teal",name:"Teal & Sand",primary:"#005F6B",secondary:"#008891",accent:"#F4A261",background:"#F7F3EE",surface:"#FFFFFF",border:"#D4CFC7",text:"#2C3E3F",muted:"#7A8C8D",fontDisplay:'"DM Serif Display", Georgia, serif',fontBody:'"DM Sans", system-ui, sans-serif',fontMono:'"DM Mono", ui-monospace, monospace'}];function _w(t){const e=document.documentElement;e.style.setProperty("--color-primary",t.primary),e.style.setProperty("--color-secondary",t.secondary),e.style.setProperty("--color-accent",t.accent),e.style.setProperty("--color-bg",t.background),e.style.setProperty("--color-surface",t.surface),e.style.setProperty("--color-border",t.border),e.style.setProperty("--color-text",t.text),e.style.setProperty("--color-muted",t.muted),e.style.setProperty("--font-display",t.fontDisplay),e.style.setProperty("--font-body",t.fontBody),e.style.setProperty("--font-mono",t.fontMono)}function Hu(t={}){return{id:F(),title:"Article Title",source:"Source / Journal",url:"",imageUrl:"",pubDate:"",summary:"Brief summary of the study.",clinicalContext:"Clinical context and implications for practice.",myTake:"Your clinical voice here.",evidenceLevel:"Moderate",tags:[],...t}}const ke={header:()=>({id:F(),type:"header",title:"The Neurology AI Pulse",subtitle:"Artificial Intelligence in Clinical Neuroscience",issueNumber:"Issue 001",issueDate:new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}),tagline:"Edited by Yasir El-Sherif MD, PhD & Jai Shahani MD  Staten Island University Hospital  Northwell Health",logoUrl:"",logoDataUrl:"",backgroundStyle:"gradient",accentColor:"#009CDE"}),ticker:()=>({id:F(),type:"ticker",sourceMode:"manual",items:["Nature Medicine: AI CT screening reaches 94% sensitivity across 47 RCTs","FDA authorizes record 692 AI medical devices in 2024","JAMA RCT: AI scribes reduce physician burnout 34% at 6 months"],links:[],useLinks:!1,rssUrls:[],rssMaxItems:20,speed:"medium",backgroundColor:"#003087",textColor:"#ffffff"}),"section-divider":()=>({id:F(),type:"section-divider",label:"TOP NEUROLOGY AI NEWS",style:"gradient",number:1,description:""}),"article-grid":()=>({id:F(),type:"article-grid",sectionTitle:"This Week in Neurology AI",columns:2,layout:"card",articles:[Hu({title:"AI Seizure Detection: CNN vs LSTM"}),Hu({title:"Foundation Models in Neuroradiology"})]}),spotlight:()=>({id:F(),type:"spotlight",article:Hu({title:"Spotlight: Paper of the Month"}),accentColor:"#009CDE",layout:"left-image"}),"ethics-split":()=>({id:F(),type:"ethics-split",heading:"AI Governance & Ethics Update",subheading:"What it means for clinical practice",leftTitle:"The Concern",leftContent:"Describe the ethical or governance concern here.",rightTitle:"Clinical Perspective",rightContent:"Your clinical perspective and recommended approach.",clinicalPerspective:"",url:"",source:""}),image:()=>({id:F(),type:"image",url:"",dataUrl:"",alt:"",caption:"",linkUrl:"",width:"full",alignment:"center",borderRadius:12}),text:()=>({id:F(),type:"text",html:'<p>Click to edit this text block. You can write <strong>bold</strong>, <em>italic</em>, and include <a href="#">links</a>.</p>',alignment:"left",maxWidth:"reading"}),"html-embed":()=>({id:F(),type:"html-embed",html:'<div style="padding:20px;border:1px dashed #ccc;border-radius:8px;text-align:center;color:#888">Custom HTML content</div>',label:"Custom HTML"}),"prompt-masterclass":()=>({id:F(),type:"prompt-masterclass",heading:"Prompt Like a Rockstar",step:"Step 1  The Baseline",framework:"Context  Task  Constraints",badPrompt:'"Explain MS."',goodPrompt:'Act as a neurology attending. In 120160 words, explain MS pathophysiology focusing on demyelination and immune mechanisms. Exclude treatment and epidemiology. Add 2 "clinical correlates" relevant to bedside localization. If uncertain, say so.',explanation:"Better prompts save time and reduce hallucinations. Persona + task verb + negative constraints + uncertainty disclosure."}),"sbar-prompt":()=>({id:F(),type:"sbar-prompt",heading:"SBAR-P Clinical AI Prompting Framework",steps:[{letter:"S",name:"SITUATION",description:"State the clinical context clearly  the care setting and presenting problem.",example:"58-year-old female admitted with acute decompensated heart failure, EF 25%, currently on IV furosemide."},{letter:"B",name:"BACKGROUND",description:"Provide relevant history, current medications, allergies, and key investigations.",example:"PMH: CKD stage 3 (eGFR 38), type 2 diabetes. Current Cr 2.1 (baseline 1.6). On metformin, lisinopril, carvedilol."},{letter:"A",name:"ASK",description:"Be explicit about exactly what you want. Vague asks produce vague answers.",example:"List the top 5 causes of worsening renal function in this setting and the targeted workup for each."},{letter:"R",name:"ROLE",description:"Assign a clinical persona to anchor the AI's frame of reference and reasoning style.",example:"Respond as a nephrology consultant reviewing this case and preparing a consultation note."},{letter:"P",name:"PARAMETERS",description:"Set safety guardrails: specify the evidence base, require uncertainty disclosure, and define what to do when information is insufficient.",example:"Use current KDIGO 2024 guidelines. Explicitly flag any uncertainty. Do not fabricate lab values or medication doses."}],templatePrompt:`Act as a [SPECIALTY] consultant reviewing this case.

Patient: [AGE] [SEX] presenting with [CHIEF COMPLAINT] for [DURATION].
Key findings: [VITAL SIGNS, EXAM FINDINGS, KEY LABS/IMAGING]
PMH: [RELEVANT COMORBIDITIES]
Current medications: [MED LIST]

Task: Generate a prioritized differential diagnosis (top 5 conditions).
For each diagnosis, provide:
  1. Likelihood assessment (High / Moderate / Low)
  2. Supporting clinical features from this case
  3. Single most informative next investigation

Requirements:
- Base reasoning on current evidence-based guidelines
- Explicitly flag areas of uncertainty
- Do not fabricate laboratory values, imaging findings, or medication doses
- If clinical information is insufficient, state what additional data is needed`,safetyTips:["Always verify AI-generated clinical reasoning against primary sources before acting.","Never submit patient-identifiable information (PHI) to consumer AI tools  use only approved institutional platforms.","AI supports clinical judgment; it does not replace it. Final decisions remain with the treating clinician.","Document AI tool use in the medical record where institutional policy requires it."]}),"prompt-template":()=>({id:F(),type:"prompt-template",heading:"Template Prompt",prompt:`Act as a [SPECIALTY] consultant reviewing this case.

Patient: [AGE] [SEX] presenting with [CHIEF COMPLAINT] for [DURATION].
Key findings: [VITAL SIGNS, EXAM FINDINGS, KEY LABS/IMAGING]
PMH: [RELEVANT COMORBIDITIES]
Current medications: [MED LIST]

Task: Generate a prioritized differential diagnosis (top 5 conditions).
For each diagnosis, provide:
  1. Likelihood assessment (High / Moderate / Low)
  2. Supporting clinical features from this case
  3. Single most informative next investigation

Requirements:
- Base reasoning on current evidence-based guidelines
- Explicitly flag areas of uncertainty
- Do not fabricate laboratory values, imaging findings, or medication doses
- If clinical information is insufficient, state what additional data is needed`}),"safety-reminders":()=>({id:F(),type:"safety-reminders",heading:"Safety Reminders",items:["Always verify AI-generated clinical reasoning against primary sources before acting.","Never submit patient-identifiable information (PHI) to consumer AI tools  use only approved institutional platforms.","AI supports clinical judgment; it does not replace it. Final decisions remain with the treating clinician.","Document AI tool use in the medical record where institutional policy requires it."]}),"clinical-prompt-templates":()=>({id:F(),type:"clinical-prompt-templates",heading:"Clinical Prompt Templates",description:"Click any prompt to copy it. Ready-to-use templates for common clinical AI scenarios.",templates:[{id:F(),category:"Differential Diagnosis",title:"Generate Differential Diagnosis",prompt:"Act as a neurology attending. My patient is a [AGE] [SEX] presenting with [SYMPTOM] for [DURATION]. Key findings: [EXAM/LABS/IMAGING]. Generate a prioritized differential (top 5), with likelihood, supporting features, and one targeted investigation for each. Use evidence-based reasoning. Flag uncertainty. Do not fabricate data.",useCase:"Clinical reasoning support for complex presentations"},{id:F(),category:"Discharge Summary",title:"Discharge Summary Draft",prompt:"Act as a hospitalist writing a discharge summary. Patient: [NAME OMITTED], [AGE] [SEX], admitted [DATE] for [PRIMARY DIAGNOSIS]. Hospital course: [BRIEF SUMMARY]. Discharge condition: [STABLE/IMPROVED]. Write a structured discharge summary including: diagnosis, hospital course, discharge medications, follow-up instructions, and return precautions. Use clear patient-friendly language for the patient section.",useCase:"Streamline discharge documentation"},{id:F(),category:"Literature Review",title:"Evidence Summary",prompt:"Summarize the current evidence base for [INTERVENTION/DRUG/PROCEDURE] in patients with [CONDITION]. Include: level of evidence, key RCTs or meta-analyses, effect size, number needed to treat (if applicable), major contraindications, and areas of ongoing debate. Limit to 200 words. Cite uncertainty where evidence is weak. Do not fabricate citations.",useCase:"Quick evidence review at the point of care"},{id:F(),category:"Patient Education",title:"Patient Education Letter",prompt:'Write a patient education letter for a [AGE]-year-old with [DIAGNOSIS]. Explain: what the condition is, why it matters, the recommended treatment plan, what to expect, and when to seek urgent care. Use a 6th-grade reading level. Avoid medical jargon. End with 3 specific "warning signs" requiring immediate emergency evaluation.',useCase:"Generate patient-readable health information"},{id:F(),category:"EEG / EMG Report",title:"Neurophysiology Interpretation",prompt:"Act as a clinical neurophysiologist. Interpret the following EEG/EMG findings and generate a structured report: [PASTE FINDINGS]. Include: technical quality, relevant findings, clinical correlation, and impression. Note limitations. Flag any findings that warrant urgent clinical attention. Do not infer diagnoses beyond what the data supports.",useCase:"Neurophysiology report drafting and review"},{id:F(),category:"Research",title:"Research Abstract Summary",prompt:"Summarize this research paper for a clinical audience. Provide: (1) Study question in one sentence, (2) Study design and population, (3) Primary outcome and result, (4) Key limitations, (5) Clinical bottom line in one sentence. Keep total to 150 words. Do not overstate conclusions beyond what the study supports.",useCase:"Rapid journal club and literature scanning"}]}),"term-of-month":()=>({id:F(),type:"term-of-month",term:"Foundation Model",definition:"A large-scale AI model trained on broad, diverse data that serves as a reusable base adaptable to many downstream tasks  including text, medical imaging, and multimodal applications.",relevance:"Foundation models shift clinical AI from narrow, single-disease algorithms to robust systems that can generalize across conditions  enabling faster iteration and broader utility, while introducing new governance and validation challenges.",neurologyApplication:"A vision foundation model trained on large MRI datasets can screen for multiple emergencies (stroke, hemorrhage, mass effect, hydrocephalus) from a single inference, rather than requiring separate validated detectors for each pathology.",relatedTerms:["Transfer Learning","Fine-tuning","Large Language Model","GPT","Multimodal AI","BERT"]}),"ai-case-file":()=>({id:F(),type:"ai-case-file",year:"1950",title:"The Turing Test",content:'In 1950, Alan Turing published "Computing Machinery and Intelligence," proposing the Imitation Game as a practical test for machine intelligence. Rather than asking "Can machines think?"  philosophically unanswerable  Turing asked whether a machine could behave indistinguishably from a human in text conversation. This reframing from metaphysics to measurement shaped the next 70 years of AI development.',significance:"The Turing Test established the behavioral benchmark for AI that still drives philosophical debate about machine consciousness, language, and cognition today.",imageUrl:"",imageDataUrl:"",sourceUrl:"https://doi.org/10.1093/mind/LIX.236.433",sourceLabel:"Turing, 1950  Mind Journal"}),"quick-hits":()=>({id:F(),type:"quick-hits",heading:"Quick Hits",hits:[{id:F(),title:"Add article title here",url:"",source:"Journal",summary:"12 line summary."},{id:F(),title:"Add article title here",url:"",source:"Journal",summary:"12 line summary."}]}),humor:()=>({id:F(),type:"humor",heading:" Neurology Humor Break",content:'My AI dictation system transcribed "patient denies diplopia" as "patient denies diplopia, but suspects the government." To be fair, given the context of the visit, I cannot entirely rule this out.',attribution:" Submitted anonymously by a Northwell attending",emojiDecor:"",imageUrl:"",imageDataUrl:"",sourceUrl:"",imageHeight:void 0,imageFit:"contain"}),spacer:()=>({id:F(),type:"spacer",height:32,showLine:!1,lineStyle:"solid"}),footer:()=>({id:F(),type:"footer",institution:"Northwell Health",department:"Department of Neurology",editors:"Yasir El-Sherif MD, PhD & Jai Shahani MD",unsubscribeUrl:"",subscribeUrl:"",websiteUrl:"",contactEmail:"yelsherif@northwell.edu",copyrightYear:String(new Date().getFullYear()),disclaimer:"This newsletter is for educational purposes only and does not constitute medical advice. Content represents the views of the authors and not Northwell Health as an institution.",socials:[],showSocials:!1,nextIssueDate:"",nextIssueTeaser:""}),"ai-safety":()=>({id:F(),type:"ai-safety",heading:"AI Safety Monitor",subheading:"Regulatory updates, incidents, and clinical safety alerts",showLastUpdated:!0,updates:[{id:F(),date:new Date().toISOString().split("T")[0],category:"FDA",title:"FDA Issues Guidance on AI-Enabled Medical Devices",summary:"New guidance emphasizes post-market surveillance requirements for adaptive AI algorithms used in clinical decision support.",url:"https://www.fda.gov/medical-devices/software-medical-device-samd/artificial-intelligence-and-machine-learning-aiml-enabled-medical-devices",severity:"high"},{id:F(),date:new Date().toISOString().split("T")[0],category:"Guideline",title:"AAN Position Statement: Clinical Use of Large Language Models",summary:"The American Academy of Neurology recommends structured validation and institutional oversight before deploying LLMs in patient-facing clinical workflows.",url:"https://www.aan.com",severity:"medium"},{id:F(),date:new Date().toISOString().split("T")[0],category:"Alert",title:"Hallucination Risk: AI Drug Dosing Tools",summary:"Multiple case reports have identified incorrect medication dosing recommendations from consumer AI chatbots used without clinical validation. Institutional guardrails are strongly recommended.",url:"",severity:"critical"}]}),"northwell-spotlight":()=>({id:F(),type:"northwell-spotlight",heading:"Northwell Health AI Spotlight",subheading:"Latest AI innovation from across the Northwell system",autoFetch:!1,lastFetched:"",maxItems:6,items:[{id:F(),category:"Innovation",title:"Add Northwell AI news item",url:"https://www.northwell.edu/news",pubDate:new Date().toISOString(),summary:"Summary of the Northwell AI initiative or news item.",imageUrl:""}]}),"rss-sidebar":()=>({id:F(),type:"rss-sidebar",heading:"In the Feed This Week",feedUrls:["https://pubmed.ncbi.nlm.nih.gov/rss/search/1/?term=neurology+artificial+intelligence&sort=date","https://jamanetwork.com/rss/site_16/onlineFirst_72.xml","https://pn.bmj.com/rss/current.xml"],items:[],maxItems:15,lastFetched:"",position:"inline",refreshOnView:!1,enableScroll:!1})},wf={header:"  Header / Masthead",ticker:"  Scrolling News Ticker","section-divider":"  Section Divider","article-grid":"  Article Grid",spotlight:"  Spotlight Article","ethics-split":"   Ethics & Governance",image:"  Image Block",text:"  Rich Text Block","html-embed":"  HTML Embed","prompt-masterclass":"  Prompt Masterclass","sbar-prompt":"  SBAR-P Framework","prompt-template":"  Template Prompt","safety-reminders":"  Safety Reminders","clinical-prompt-templates":"  Clinical Prompt Templates","term-of-month":"  AI Term of the Month","ai-case-file":"  AI Case File / History","quick-hits":"  Quick Hits",humor:"  Humor Break",spacer:"  Spacer",footer:"  Footer","ai-safety":"  AI Safety Monitor","northwell-spotlight":"  Northwell AI Spotlight","rss-sidebar":"  RSS Feed Panel"};function Hw(){const t=F(),e=F(),n=F(),r=F(),i=F(),o=F(),s=F(),l=F(),a=F(),c=F(),d=F(),f=F(),p=F(),h=F(),m=F(),g=F(),v=F(),y=F(),x=F(),S=F();return{meta:{id:F(),title:"Neurology AI Pulse  Issue 001",issueNumber:"001",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},theme:vv[0],blockOrder:[t,e,n,r,i,o,s,l,a,c,d,f,p,h,m,g,v,y,x,S],blocks:{[t]:{...ke.header(),id:t},[e]:{...ke.ticker(),id:e},[n]:{...ke["section-divider"](),id:n,label:"TOP NEUROLOGY AI NEWS",number:1},[r]:{...ke["article-grid"](),id:r},[i]:{...ke.spotlight(),id:i},[o]:{...ke["section-divider"](),id:o,label:"AI SAFETY & ETHICS",number:2},[s]:{...ke["ethics-split"](),id:s},[l]:{...ke["ai-safety"](),id:l},[a]:{...ke["section-divider"](),id:a,label:"CLINICAL AI SKILLS",number:3},[c]:{...ke["sbar-prompt"](),id:c},[d]:{...ke["prompt-template"](),id:d},[f]:{...ke["safety-reminders"](),id:f},[p]:{...ke["clinical-prompt-templates"](),id:p},[h]:{...ke["term-of-month"](),id:h},[m]:{...ke["section-divider"](),id:m,label:"NORTHWELL & COMMUNITY",number:4},[g]:{...ke["northwell-spotlight"](),id:g},[v]:{...ke["rss-sidebar"](),id:v},[y]:{...ke.humor(),id:y},[x]:{...ke.spacer(),id:x},[S]:{...ke.footer(),id:S}}}}function Uw(t,e){return Lw(t,n=>{switch(e.type){case"LOAD":return e.payload;case"ADD_BLOCK":{const r={...ke[e.payload.blockType](),id:F()};if(n.blocks[r.id]=r,e.payload.afterId){const i=n.blockOrder.indexOf(e.payload.afterId);n.blockOrder.splice(i+1,0,r.id)}else n.blockOrder.push(r.id);break}case"DELETE_BLOCK":{const r=n.blockOrder.indexOf(e.payload.id);r>-1&&n.blockOrder.splice(r,1),delete n.blocks[e.payload.id];break}case"UPDATE_BLOCK":{const r=n.blocks[e.payload.id];r&&Object.assign(r,e.payload.changes);break}case"MOVE_BLOCK":{const{from:r,to:i}=e.payload,[o]=n.blockOrder.splice(r,1);n.blockOrder.splice(i,0,o);break}case"DUPLICATE_BLOCK":{const r=n.blocks[e.payload.id];if(!r)break;const i=JSON.parse(JSON.stringify(r));i.id=F(),n.blocks[i.id]=i;const o=n.blockOrder.indexOf(e.payload.id);n.blockOrder.splice(o+1,0,i.id);break}case"UPDATE_THEME":n.theme=e.payload;break;case"UPDATE_META":Object.assign(n.meta,e.payload);break;case"ADD_ARTICLE":{const r=n.blocks[e.payload.blockId];r!=null&&r.articles&&r.articles.push({id:F(),title:"New Article",source:"",url:"",imageUrl:"",pubDate:"",summary:"",clinicalContext:"",myTake:"",evidenceLevel:"",tags:[]}),(r==null?void 0:r.article)===void 0&&(r==null||r.type);break}case"UPDATE_ARTICLE":{const r=n.blocks[e.payload.blockId];if(r!=null&&r.articles){const i=r.articles.find(o=>o.id===e.payload.articleId);i&&Object.assign(i,e.payload.changes)}else r!=null&&r.article&&e.payload.articleId===r.article.id&&Object.assign(r.article,e.payload.changes);break}case"DELETE_ARTICLE":{const r=n.blocks[e.payload.blockId];r!=null&&r.articles&&(r.articles=r.articles.filter(i=>i.id!==e.payload.articleId));break}case"MOVE_ARTICLE":{const r=n.blocks[e.payload.blockId];if(r!=null&&r.articles){const[i]=r.articles.splice(e.payload.from,1);r.articles.splice(e.payload.to,0,i)}break}case"ADD_QUICK_HIT":{const r=n.blocks[e.payload.blockId];r!=null&&r.hits&&r.hits.push({id:F(),title:"New hit",url:"",source:"",summary:""});break}case"UPDATE_QUICK_HIT":{const r=n.blocks[e.payload.blockId];if(r!=null&&r.hits){const i=r.hits.find(o=>o.id===e.payload.hitId);i&&Object.assign(i,e.payload.changes)}break}case"DELETE_QUICK_HIT":{const r=n.blocks[e.payload.blockId];r!=null&&r.hits&&(r.hits=r.hits.filter(i=>i.id!==e.payload.hitId));break}}n.meta.updatedAt=new Date().toISOString()})}function Vw(t){const[e,n]=b.useReducer(Uw,Hw()),r=b.useCallback(x=>n({type:"LOAD",payload:x}),[]),i=b.useCallback((x,S)=>n({type:"ADD_BLOCK",payload:{blockType:x,afterId:S}}),[]),o=b.useCallback(x=>n({type:"DELETE_BLOCK",payload:{id:x}}),[]),s=b.useCallback((x,S)=>n({type:"UPDATE_BLOCK",payload:{id:x,changes:S}}),[]),l=b.useCallback((x,S)=>n({type:"MOVE_BLOCK",payload:{from:x,to:S}}),[]),a=b.useCallback(x=>n({type:"DUPLICATE_BLOCK",payload:{id:x}}),[]),c=b.useCallback(x=>n({type:"UPDATE_THEME",payload:x}),[]),d=b.useCallback(x=>n({type:"UPDATE_META",payload:x}),[]),f=b.useCallback(x=>n({type:"ADD_ARTICLE",payload:{blockId:x}}),[]),p=b.useCallback((x,S,k)=>n({type:"UPDATE_ARTICLE",payload:{blockId:x,articleId:S,changes:k}}),[]),h=b.useCallback((x,S)=>n({type:"DELETE_ARTICLE",payload:{blockId:x,articleId:S}}),[]),m=b.useCallback((x,S,k)=>n({type:"MOVE_ARTICLE",payload:{blockId:x,from:S,to:k}}),[]),g=b.useCallback(x=>n({type:"ADD_QUICK_HIT",payload:{blockId:x}}),[]),v=b.useCallback((x,S,k)=>n({type:"UPDATE_QUICK_HIT",payload:{blockId:x,hitId:S,changes:k}}),[]),y=b.useCallback((x,S)=>n({type:"DELETE_QUICK_HIT",payload:{blockId:x,hitId:S}}),[]);return{newsletter:e,load:r,addBlock:i,deleteBlock:o,updateBlock:s,moveBlock:l,duplicateBlock:a,updateTheme:c,updateMeta:d,addArticle:f,updateArticle:p,deleteArticle:h,moveArticle:m,addQuickHit:g,updateQuickHit:v,deleteQuickHit:y}}const gg="nap:autosave",Uu="nap:versions";function Ww(){const[t,e]=b.useState(()=>{try{return JSON.parse(localStorage.getItem(Uu)||"[]")}catch{return[]}}),n=b.useCallback(a=>{try{localStorage.setItem(gg,JSON.stringify(a))}catch{console.warn("Autosave failed")}},[]),r=b.useCallback(()=>{try{const a=localStorage.getItem(gg);return a?JSON.parse(a):null}catch{return null}},[]),i=b.useCallback((a,c)=>{const d={id:F(),label:c||`Version ${new Date().toLocaleString()}`,createdAt:new Date().toISOString(),newsletter:a};e(f=>{const p=[d,...f].slice(0,20);return localStorage.setItem(Uu,JSON.stringify(p)),p})},[]),o=b.useCallback(a=>{e(c=>{const d=c.filter(f=>f.id!==a);return localStorage.setItem(Uu,JSON.stringify(d)),d})},[]),s=b.useCallback(a=>{const c=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),d=URL.createObjectURL(c),f=document.createElement("a");f.href=d,f.download=`nap-issue-${a.meta.issueNumber||"draft"}.json`,f.click(),URL.revokeObjectURL(d)},[]),l=b.useCallback(a=>new Promise((c,d)=>{const f=new FileReader;f.onload=p=>{var h;try{c(JSON.parse((h=p.target)==null?void 0:h.result))}catch{d(new Error("Invalid JSON file"))}},f.onerror=()=>d(new Error("File read failed")),f.readAsText(a)}),[]);return{versions:t,autosave:n,loadAutosave:r,saveVersion:i,deleteVersion:o,exportJSON:s,importJSON:l}}function Kw(t,e,n=3e4){b.useEffect(()=>{const r=setInterval(()=>e(t),n);return()=>clearInterval(r)},[t,e,n])}const qw=[{url:"https://pubmed.ncbi.nlm.nih.gov/rss/search/1/?term=neurology+artificial+intelligence&sort=date",label:"PubMed  Neurology AI",enabled:!0},{url:"https://pubmed.ncbi.nlm.nih.gov/rss/search/1/?term=stroke+artificial+intelligence&sort=date",label:"PubMed  Stroke AI",enabled:!0},{url:"https://pubmed.ncbi.nlm.nih.gov/rss/search/1/?term=epilepsy+deep+learning&sort=date",label:"PubMed  Epilepsy DL",enabled:!0},{url:"https://pubmed.ncbi.nlm.nih.gov/rss/search/1/?term=EEG+machine+learning&sort=date",label:"PubMed  EEG ML",enabled:!1}],Jw="https://api.allorigins.win/get?url=";function Gw(t,e){try{const r=new DOMParser().parseFromString(t,"text/xml");if(r.querySelector("parsererror"))return[];const i=Array.from(r.querySelectorAll("item"));return i.length?i.map(s=>{var l,a,c,d,f,p,h,m,g,v,y;return{title:((a=(l=s.querySelector("title"))==null?void 0:l.textContent)==null?void 0:a.trim())||"",link:((d=(c=s.querySelector("link"))==null?void 0:c.textContent)==null?void 0:d.trim())||"",pubDate:((p=(f=s.querySelector("pubDate"))==null?void 0:f.textContent)==null?void 0:p.trim())||"",source:((m=(h=s.querySelector("source"))==null?void 0:h.textContent)==null?void 0:m.trim())||e,description:((v=(g=s.querySelector("description"))==null?void 0:g.textContent)==null?void 0:v.trim())||"",imageUrl:((y=s.querySelector('enclosure[type^="image"]'))==null?void 0:y.getAttribute("url"))||""}}):Array.from(r.querySelectorAll("entry")).map(s=>{var l,a,c,d,f,p,h,m,g,v,y,x,S,k,w;return{title:((a=(l=s.querySelector("title"))==null?void 0:l.textContent)==null?void 0:a.trim())||"",link:((c=s.querySelector("link"))==null?void 0:c.getAttribute("href"))||((f=(d=s.querySelector("link"))==null?void 0:d.textContent)==null?void 0:f.trim())||"",pubDate:((h=(p=s.querySelector("updated"))==null?void 0:p.textContent)==null?void 0:h.trim())||((g=(m=s.querySelector("published"))==null?void 0:m.textContent)==null?void 0:g.trim())||"",source:((y=(v=r.querySelector("feed > title"))==null?void 0:v.textContent)==null?void 0:y.trim())||e,description:((S=(x=s.querySelector("summary"))==null?void 0:x.textContent)==null?void 0:S.trim())||((w=(k=s.querySelector("content"))==null?void 0:k.textContent)==null?void 0:w.trim())||"",imageUrl:""}})}catch{return[]}}function Qw(){const[t,e]=b.useState(qw),[n,r]=b.useState([]),[i,o]=b.useState(!1),[s,l]=b.useState([]),[a,c]=b.useState(""),d=b.useCallback(async()=>{o(!0),l([]);const g=[],v=[];for(const S of t.filter(k=>k.enabled))try{const k=await fetch(Jw+encodeURIComponent(S.url),{cache:"no-store"});if(!k.ok)throw new Error(`HTTP ${k.status}`);const w=await k.json(),E=w&&typeof w.contents=="string"?w.contents:"";g.push(...Gw(E,S.label))}catch(k){v.push(`${S.label}: ${k.message}`)}const y=new Set,x=g.filter(S=>!S.link||y.has(S.link)?!1:(y.add(S.link),!0));x.sort((S,k)=>(Date.parse(k.pubDate)||0)-(Date.parse(S.pubDate)||0)),r(x),l(v),o(!1)},[t]),f=a?n.filter(g=>(g.title+" "+g.description).toLowerCase().includes(a.toLowerCase())):n,p=b.useCallback((g,v)=>{e(y=>[...y,{url:g,label:v,enabled:!0}])},[]),h=b.useCallback(g=>{e(v=>v.filter(y=>y.url!==g))},[]),m=b.useCallback(g=>{e(v=>v.map(y=>y.url===g?{...y,enabled:!y.enabled}:y))},[]);return{feeds:t,items:f,loading:i,errors:s,filter:a,refresh:d,setFilter:c,addFeed:p,removeFeed:h,toggleFeed:m}}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Yw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xw=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),be=(t,e)=>{const n=b.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:l="",children:a,...c},d)=>b.createElement("svg",{ref:d,...Yw,width:i,height:i,stroke:r,strokeWidth:s?Number(o)*24/Number(i):o,className:["lucide",`lucide-${Xw(t)}`,l].join(" "),...c},[...e.map(([f,p])=>b.createElement(f,p)),...Array.isArray(a)?a:[a]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=be("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=be("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=be("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=be("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=be("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=be("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=be("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=be("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=be("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=be("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=be("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=be("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=be("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=be("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=be("Rss",[["path",{d:"M4 11a9 9 0 0 1 9 9",key:"pv89mb"}],["path",{d:"M4 4a16 16 0 0 1 16 16",key:"k0647b"}],["circle",{cx:"5",cy:"19",r:"1",key:"bfqh0e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=be("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=be("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=be("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=be("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=be("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=be("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=be("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function M(t){return(t??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function gC(t){if(!t)return[];if(Array.isArray(t))return t.filter(Boolean).map(String);if(typeof t=="string"){const e=t.split(/\s*,\s*|\n+/g).map(n=>n.trim()).filter(Boolean);return e.length?e:[t.trim()]}return[String(t)]}function yC(t,e){const n=Number.isFinite(e)?`html{font-size:${e}px}`:"";return`
:root {
  --c-primary: ${t.primary};
  --c-secondary: ${t.secondary};
  --c-accent: ${t.accent};
  --c-bg: ${t.background};
  --c-surface: ${t.surface};
  --c-border: ${t.border};
  --c-text: ${t.text};
  --c-muted: ${t.muted};
  --f-display: ${t.fontDisplay};
  --f-body: ${t.fontBody};
  --f-mono: ${t.fontMono};
}
*,*::before,*::after { box-sizing: border-box; }
${n}
html, body { margin: 0; height: auto !important; overflow: auto !important; }
body {
  font-family: var(--f-body);
  color: var(--c-text);
  background: var(--c-bg);
  padding: 22px 0;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
/* Match builder: links default to accent; white sections inherit; ticker stays white */
a { color: var(--c-accent); text-decoration: none; }
a:hover { text-decoration: underline; }
/* Ticker links always white */
.nap-ticker a { color: inherit !important; text-decoration: none !important; }
.nap-ticker span { color: inherit; }
/* White section links */
.nap-white-section a { color: inherit; }
img { max-width: 100%; display: block; }
/* Export fidelity: DO NOT scale. Keep 1:1 typography and layout. */
.nap-export-wrap { width: 100%; display: flex; justify-content: center; }
.nap-shell {
  max-width: 900px;
  width: 100%;
  margin: 0 auto;
  background: var(--c-surface);
  border: 1px solid var(--c-border);
  border-radius: 18px;
  overflow: hidden;
  box-shadow: 0 14px 40px rgba(0,0,0,0.10);
}
[contenteditable] { outline: none !important; }
[data-editor-ui], [data-dnd-dragging] { display: none !important; }

@keyframes nap_ticker { from { transform: translateX(0); } to { transform: translateX(-50%); } }
@keyframes nap_pulse { 0%,100% { opacity:1; } 50% { opacity:0.3; } }
.nap-ticker-track { display: flex; white-space: nowrap; will-change: transform; }

@media (max-width: 680px) {
  .nap-2col, .nap-3col, .nap-5col { display: block !important; }
  .nap-2col > *, .nap-3col > *, .nap-5col > * { margin-bottom: 14px; }
}

.nap-tpl-prompt { display: none; padding: 10px 14px; }
.nap-tpl-prompt.open { display: block; }
.nap-copy-btn { cursor: pointer; color: #fff !important; }
.nap-expand-btn { cursor: pointer; }
/* Export should NOT truncate RSS: show all items without an internal scroll box. */
.nap-rss-scroll { max-height: none !important; overflow: visible !important; }
/* Safety: enforce SBAR letter styling even if something external tries to override. */
.nap-sbar-letter { font-size:56px !important; font-weight:400 !important; line-height:1 !important; margin-bottom:6px !important; font-style:italic !important; text-transform:uppercase !important; }

/* Export-only: ensure "Related" chips render as clear pills even if imported CSS has aggressive !important rules. */
.ai-related-label { font-weight: 700 !important; }
.ai-related-pill {
  display: inline-block !important;
  background: #F3F6FF !important;
  border: 1px solid var(--c-border) !important;
  color: var(--c-text) !important;
  padding: 4px 10px !important;
  border-radius: 999px !important;
  font-family: var(--f-mono) !important;
  font-size: 11px !important;
  line-height: 16px !important;
  margin: 0 6px 0 0 !important;
}
`}function xC(t,e){return`
<div class="nap-white-section" style="background:${t.backgroundStyle==="solid"?e.primary:`linear-gradient(135deg, ${e.primary} 0%, ${e.secondary} 60%, ${e.accent}44 100%)`};padding:48px 40px;text-align:center;position:relative;overflow:hidden;color:#fff">
  <svg style="position:absolute;bottom:0;left:0;right:0;opacity:0.08" viewBox="0 0 800 60" fill="none" preserveAspectRatio="none" height="60">
    <path d="M0 40 Q200 0 400 30 Q600 60 800 20 L800 60 L0 60Z" fill="white"/>
  </svg>
  ${t.logoDataUrl||t.logoUrl?`<div style="margin-bottom:20px"><img src="${M(t.logoDataUrl||t.logoUrl)}" alt="Logo" style="max-height:60px;max-width:240px;border-radius:8px;display:inline-block;margin:0 auto"></div>`:""}
  <div style="font-family:${e.fontMono};font-size:11px;letter-spacing:0.22em;text-transform:uppercase;color:rgba(255,255,255,0.8);margin-bottom:12px">${M(t.issueNumber)}  ${M(t.issueDate)}</div>
  <h1 style="font-family:${e.fontDisplay};font-size:46px;font-weight:400;color:#fff;margin:0 0 10px;letter-spacing:-0.02em;line-height:1.1">${M(t.title)}</h1>
  <p style="font-family:${e.fontDisplay};font-size:20px;font-style:italic;color:rgba(255,255,255,0.92);margin:0 0 18px;line-height:1.3">${M(t.subtitle)}</p>
  <div style="height:1px;background:rgba(255,255,255,0.3);max-width:280px;margin:0 auto 18px"></div>
  <p style="font-family:${e.fontBody};font-size:13px;color:rgba(255,255,255,0.85);margin:0;letter-spacing:0.02em">${M(t.tagline)}</p>
</div>`}function vC(t,e){const n={slow:60,medium:36,fast:20}[t.speed]??36,r=t.textColor||"#ffffff",i=t.backgroundColor||e.primary,o=`<span style="width:5px;height:5px;border-radius:50%;background:${e.accent};display:inline-block;flex-shrink:0"></span>`,s=`font-family:${e.fontMono};font-size:12px;color:${r};padding:0 32px;letter-spacing:0.04em;display:inline-flex;align-items:center;gap:10px;text-decoration:none`;let l="";t.sourceMode==="rss"||t.useLinks?l=(t.links||[]).filter(d=>d==null?void 0:d.text).map(d=>`<a class="nap-ticker-item" href="${M(d.url||"#")}" target="_blank" rel="noopener noreferrer" style="${s}">${o}${M(d.text)}<span style="font-size:10px;opacity:0.6;color:${r}"></span></a>`).join(""):l=(t.items||[]).map(d=>`<span class="nap-ticker-item" style="${s}">${o}${M(d)}</span>`).join("");const a=M(JSON.stringify((t.rssUrls||[]).filter(Boolean))),c=t.sourceMode==="rss"?`
  <details class="nap-rss-config" data-rss-kind="ticker" style="position:relative;z-index:2;margin-left:auto;margin-right:14px">
    <summary style="list-style:none;cursor:pointer;font-family:${e.fontMono};font-size:10px;letter-spacing:0.14em;text-transform:uppercase;color:rgba(255,255,255,0.85);padding:6px 10px;border:1px solid rgba(255,255,255,0.25);border-radius:999px;user-select:none">RSS </summary>
    <div style="margin-top:10px;background:rgba(0,0,0,0.35);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.2);border-radius:12px;padding:12px;min-width:280px">
      <div style="font-family:${e.fontBody};font-size:12px;color:#fff;margin-bottom:10px;line-height:1.4">Snapshot is shown by default. Enable <b>Live</b> to refresh from selected feeds.</div>
      <label style="display:flex;align-items:center;gap:8px;font-family:${e.fontBody};font-size:12px;color:#fff;margin-bottom:10px">
        <input type="checkbox" class="nap-rss-live" style="transform:translateY(1px)" /> Live RSS
      </label>
      <div class="nap-rss-preset-list" style="display:grid;gap:6px"></div>
      <div style="display:flex;gap:8px;margin-top:10px">
        <input class="nap-rss-add" placeholder="Add RSS URL" style="flex:1;padding:8px 10px;border-radius:10px;border:1px solid rgba(255,255,255,0.25);background:rgba(255,255,255,0.08);color:#fff;font-family:${e.fontBody};font-size:12px" />
        <button class="nap-rss-add-btn" type="button" style="padding:8px 10px;border-radius:10px;border:1px solid rgba(255,255,255,0.25);background:rgba(255,255,255,0.12);color:#fff;font-family:${e.fontBody};font-size:12px;cursor:pointer">Add</button>
      </div>
      <div class="nap-rss-status" style="margin-top:10px;font-family:${e.fontBody};font-size:12px;color:rgba(255,255,255,0.85)"></div>
    </div>
  </details>`:"";return`
<div class="nap-ticker"
  data-source="${M(t.sourceMode||"manual")}"
  data-rss='${a}'
  data-rss-max="${M(String(t.rssMaxItems||20))}"
  data-live="0"
  data-key="${M(t.id||"ticker")}"
  style="background:${i};overflow:hidden;height:40px;display:flex;align-items:center;color:${r}">
  ${c}
  <div class="nap-ticker-track" style="animation:nap_ticker ${n}s linear infinite">
    ${l}${l}
  </div>
</div>`}function SC(t,e){return t.style==="bold"?`
<div class="nap-white-section" style="background:${e.primary};padding:18px 40px;display:flex;align-items:center;gap:16px;color:#fff">
  ${t.number>0?`<span style="font-family:${e.fontMono};font-size:32px;font-weight:300;color:rgba(255,255,255,0.25);line-height:1">${M(String(t.number).padStart(2,"0"))}</span>`:""}
  <div>
    <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.22em;text-transform:uppercase;color:rgba(255,255,255,0.5);margin-bottom:2px">Section</div>
    <div style="font-family:${e.fontDisplay};font-size:22px;color:#fff;line-height:1.15">${M(t.label)}</div>
  </div>
</div>`:`
<div style="padding:32px 40px 16px">
  <div style="display:flex;align-items:center;gap:14px;margin-bottom:${t.description?10:0}px">
    <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.22em;text-transform:uppercase;color:${e.muted};white-space:nowrap">
      <span>${t.number>0?`0${t.number}  `:" "}</span>${M(t.label)}<span> </span>
    </div>
    <div style="flex:1;height:1px;background:linear-gradient(90deg, ${e.border}, transparent)"></div>
  </div>
  ${t.description?`<p style="font-family:${e.fontBody};font-size:14px;color:${e.muted};margin:0;line-height:1.6">${M(t.description)}</p>`:""}
</div>`}function bC(t,e){const n=t.columns||2,r=t.layout||"default",i={High:"#00A651",Moderate:"#F47920",Low:"#C0392B","Expert Opinion":"#7B2D8B"},o=(t.articles||[]).map(s=>{const l=s.evidenceLevel?i[s.evidenceLevel]:null,a=s.url?`<a href="${M(s.url)}" target="_blank" rel="noopener noreferrer" style="color:${e.text};text-decoration:none">${M(s.title)}</a>`:M(s.title);return`
<div style="border:1px solid ${e.border};border-radius:12px;overflow:hidden;background:${e.surface};display:flex;flex-direction:column">
  ${s.imageUrl?`<div style="height:160px;overflow:hidden;flex-shrink:0"><img src="${M(s.imageUrl)}" alt="${M(s.title)}" style="width:100%;height:100%;object-fit:cover"></div>`:""}
  <div style="padding:${r==="compact"?"10px 14px":"16px"};flex:1;display:flex;flex-direction:column">
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;flex-wrap:wrap;gap:6px">
      <span style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.14em;text-transform:uppercase;color:${e.muted}">${M(s.source||"")}</span>
      ${l?`<span style="background:${l}22;color:${l};border:1px solid ${l}44;border-radius:999px;padding:2px 8px;font-family:${e.fontMono};font-size:10px;font-weight:600">${M(s.evidenceLevel)}</span>`:""}
    </div>
    <h3 style="font-family:${e.fontDisplay};font-size:${r==="compact"?16:20}px;color:${e.text};margin:0 0 10px;line-height:1.25;font-weight:400">${a}</h3>
    ${!r.includes("compact")&&s.summary?`<p style="font-family:${e.fontBody};font-size:13px;color:${e.muted};margin:0 0 12px;line-height:1.6;flex:1">${M(s.summary)}</p>`:""}
    ${s.clinicalContext?`
    <div style="background:${e.background};border-radius:8px;padding:10px 12px;margin-bottom:10px">
      <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.12em;text-transform:uppercase;color:${e.muted};margin-bottom:4px">Clinical Context</div>
      <p style="font-family:${e.fontBody};font-size:13px;color:${e.text};margin:0;line-height:1.55">${M(s.clinicalContext)}</p>
    </div>`:""}
    ${s.myTake?`<p style="font-family:${e.fontBody};font-size:13px;color:${e.secondary};font-style:italic;margin:0 0 12px;border-left:3px solid ${e.accent};padding-left:10px;line-height:1.5">${M(s.myTake)}</p>`:""}
    ${s.url?`<a href="${M(s.url)}" target="_blank" rel="noopener noreferrer" style="margin-top:auto;display:inline-flex;align-items:center;gap:5px;font-family:${e.fontBody};font-size:12px;color:${e.accent};font-weight:600;text-decoration:none">Read full paper <span style="font-size:14px"></span></a>`:""}
  </div>
</div>`}).join("");return`
<div style="padding:24px 40px">
  ${t.sectionTitle?`<h2 style="font-family:${e.fontDisplay};font-size:26px;color:${e.text};margin:0 0 20px;font-weight:400">${M(t.sectionTitle)}</h2>`:""}
  <div class="nap-${n}col" style="display:grid;grid-template-columns:repeat(${n},1fr);gap:20px">${o}</div>
</div>`}function kC(t,e){const n=t.article||{},r=t.accentColor||e.accent,i=t.layout==="top-image",o=t.layout==="left-image",s=!!n.imageUrl,l=n.url?`<a href="${M(n.url)}" target="_blank" rel="noopener noreferrer" style="color:${e.text};text-decoration:none">${M(n.title)}</a>`:M(n.title),a=n.url?`<a href="${M(n.url)}" target="_blank" rel="noopener noreferrer" style="display:inline-flex;align-items:center;gap:8px;padding:9px 18px;background:${r};color:#fff;border-radius:8px;font-family:${e.fontBody};font-size:13px;font-weight:600;text-decoration:none">Read the paper </a>`:"",c=`
    <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.18em;text-transform:uppercase;color:${e.muted};margin-bottom:12px"> Spotlight  ${M(n.source||"")}</div>
    <h2 style="font-family:${e.fontDisplay};font-size:28px;color:${e.text};margin:0 0 12px;font-weight:400;line-height:1.2">${l}</h2>
    ${n.summary?`<p style="font-family:${e.fontBody};font-size:15px;color:${e.muted};margin:0 0 16px;line-height:1.65">${M(n.summary)}</p>`:""}
    ${n.clinicalContext?`
    <div style="background:${e.background};border-radius:10px;padding:14px 16px;margin-bottom:14px">
      <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.12em;text-transform:uppercase;color:${e.muted};margin-bottom:6px">Clinical Context</div>
      <p style="font-family:${e.fontBody};font-size:14px;color:${e.text};margin:0;line-height:1.6">${M(n.clinicalContext)}</p>
    </div>`:""}
    ${n.myTake?`<p style="font-family:${e.fontBody};font-size:14px;font-style:italic;color:${e.secondary};margin:0 0 16px;border-left:3px solid ${r};padding-left:12px;line-height:1.6">${M(n.myTake)}</p>`:""}
    ${a}`;if(i&&s)return`
<div style="padding:24px 40px">
  <div style="border:1px solid ${e.border};border-radius:14px;overflow:hidden;background:${e.surface}">
    <img src="${M(n.imageUrl)}" alt="${M(n.title||"")}" style="width:100%;height:280px;object-fit:cover">
    <div style="padding:24px">${c}</div>
  </div>
</div>`;const d=s?`<div style="width:40%;flex-shrink:0"><img src="${M(n.imageUrl)}" alt="${M(n.title||"")}" style="width:100%;height:100%;object-fit:cover;display:block"></div>`:"",f=s?o?"row":"row-reverse":"column",p=s&&o?`border-left:4px solid ${r};`:"";return`
<div style="padding:24px 40px">
  <div style="border:1px solid ${e.border};border-radius:14px;overflow:hidden;background:${e.surface};display:flex;flex-direction:${f}">
    ${d}
    <div style="flex:1;padding:28px;${p}">${c}</div>
  </div>
</div>`}function wC(t,e){const n=t.source?t.url?`<a href="${M(t.url)}" target="_blank" rel="noopener noreferrer" style="color:${e.accent}">${M(t.source)}</a>`:M(t.source):"";return`
<div style="padding:28px 40px">
  <div style="margin-bottom:20px">
    <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.18em;text-transform:uppercase;color:${e.accent};margin-bottom:6px"> AI Ethics &amp; Governance</div>
    <h2 style="font-family:${e.fontDisplay};font-size:26px;color:${e.text};margin:0 0 6px;font-weight:400">${M(t.heading||"")}</h2>
    <p style="font-family:${e.fontBody};font-size:14px;color:${e.muted};margin:0">${M(t.subheading||"")}</p>
    ${t.source!==void 0?`<div style="font-family:${e.fontMono};font-size:11px;color:${e.muted};margin-top:6px">Source: ${n}</div>`:""}
  </div>
  <div class="nap-2col" style="display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:16px">
    <div style="border:1px solid ${e.border};border-radius:12px;padding:20px;background:${e.background}">
      <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.14em;text-transform:uppercase;color:#C0392B;font-weight:700;margin-bottom:10px">${M(t.leftTitle||"")}</div>
      <p style="font-family:${e.fontBody};font-size:14px;color:${e.text};margin:0;line-height:1.65">${M(t.leftContent||"")}</p>
    </div>
    <div style="border:1px solid ${e.accent}44;border-radius:12px;padding:20px;background:${e.accent}0A">
      <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.14em;text-transform:uppercase;color:${e.accent};font-weight:700;margin-bottom:10px">${M(t.rightTitle||"")}</div>
      <p style="font-family:${e.fontBody};font-size:14px;color:${e.text};margin:0;line-height:1.65">${M(t.rightContent||"")}</p>
    </div>
  </div>
  <div style="padding:14px 18px;border:1px solid ${e.border};border-radius:12px;border-left:4px solid ${e.accent}">
    <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.14em;text-transform:uppercase;color:${e.muted};margin-bottom:6px">Clinical Perspective</div>
    <p style="font-family:${e.fontBody};font-size:14px;color:${e.text};margin:0;line-height:1.65">${M(t.clinicalPerspective||"")}</p>
  </div>
</div>`}function CC(t,e){const n=t.dataUrl||t.url;if(!n)return"";const i={full:"100%",wide:"80%",medium:"60%",small:"40%"}[t.width]||"100%",o=`<img src="${M(n)}" alt="${M(t.alt||"")}" style="max-width:${i};border-radius:${Number(t.borderRadius??12)}px;display:inline-block">`;return`
<div style="padding:16px 40px;text-align:${M(t.alignment||"center")}">
  ${t.linkUrl?`<a href="${M(t.linkUrl)}" target="_blank" rel="noopener noreferrer" style="display:inline-block;max-width:${i}">${o}</a>`:o}
  ${t.caption?`<p style="font-family:${e.fontBody};font-size:12px;color:${e.muted};margin:8px 0 0;text-align:center">${M(t.caption)}</p>`:""}
</div>`}function EC(t,e){const n={full:"100%",reading:"720px",narrow:"560px"};return`
<div style="padding:16px 40px">
  <div style="font-family:${e.fontBody};color:${e.text};line-height:1.7;max-width:${n[t.maxWidth]||"100%"};margin:0 auto;text-align:${M(t.alignment||"left")};font-size:15px">
    ${t.html||""}
  </div>
</div>`}function TC(t,e){return`
<div style="padding:16px 40px">
  ${t.label?`<div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.12em;text-transform:uppercase;color:${e.muted};margin-bottom:8px"> ${M(t.label)}</div>`:""}
  <div>${t.html||""}</div>
</div>`}function MC(t,e){return`
<div style="padding:28px 40px">
  <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.18em;text-transform:uppercase;color:${e.accent};margin-bottom:8px"> Prompt Like a Rockstar</div>
  <h2 style="font-family:${e.fontDisplay};font-size:26px;color:${e.text};margin:0 0 6px;font-weight:400">${M(t.heading||"")}</h2>
  <div style="font-family:${e.fontBody};font-size:14px;color:${e.muted};margin-bottom:20px">${M(t.step||"")}  Framework: <strong>${M(t.framework||"")}</strong></div>
  <div class="nap-2col" style="display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:14px">
    <div style="border:1px solid #f5c6c0;border-radius:12px;padding:16px;background:#FEF0EE">
      <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.14em;text-transform:uppercase;color:#C0392B;margin-bottom:8px"> Bad Prompt</div>
      <p style="font-family:${e.fontBody};font-size:14px;font-style:italic;color:#7A1E12;margin:0;line-height:1.55">${M(t.badPrompt||"")}</p>
    </div>
    <div style="border:1px solid ${e.accent}44;border-radius:12px;padding:16px;background:${e.accent}0D">
      <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.14em;text-transform:uppercase;color:${e.accent};margin-bottom:8px"> Good Prompt</div>
      <p style="font-family:${e.fontBody};font-size:14px;color:${e.text};margin:0;line-height:1.55">${M(t.goodPrompt||"")}</p>
    </div>
  </div>
  <div style="padding:12px 16px;background:${e.background};border-radius:10px;border-left:3px solid ${e.accent}">
    <p style="font-family:${e.fontBody};font-size:13px;color:${e.muted};margin:0;line-height:1.6"><strong>Why this matters:</strong> ${M(t.explanation||"")}</p>
  </div>
</div>`}function jC(t,e){const n=[e.primary,e.secondary,e.accent,"#7B2D8B","#00A651"],r=(t.steps||[]).map((i,o)=>{const s=n[o]||e.primary;return`
<div style="border:1px solid ${e.border};border-radius:10px;padding:14px;background:${e.surface}">
  <div class="nap-sbar-letter" style="font-family:${e.fontDisplay};color:${s};">${M((i.letter||"").toUpperCase())}</div>
  <div style="font-family:${e.fontMono};font-size:9px;letter-spacing:0.14em;text-transform:uppercase;color:${e.muted};margin-bottom:8px;padding-bottom:8px;border-bottom:2px solid ${s}">${M(i.name||"")}</div>
  <p style="font-family:${e.fontBody};font-size:12px;color:${e.text};margin:0 0 10px;line-height:1.5">${M(i.description||"")}</p>
  <div style="background:${e.background};border-radius:6px;padding:8px 10px;border-left:3px solid ${s}">
    <p style="font-family:${e.fontBody};font-size:11px;color:${e.muted};margin:0;font-style:italic;line-height:1.45">${M(i.example||"")}</p>
  </div>
</div>`}).join("");return`
<div style="padding:28px 40px">
  <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.18em;text-transform:uppercase;color:${e.accent};margin-bottom:8px"> Clinical AI Prompting</div>
  <h2 style="font-family:${e.fontDisplay};font-size:26px;color:${e.text};margin:0 0 20px;font-weight:400">${M(t.heading||"")}</h2>
  <div class="nap-5col" style="display:grid;grid-template-columns:repeat(5,1fr);gap:12px;margin-bottom:20px">${r}</div>
</div>`}function AC(t,e){const n=String(t.prompt||""),r=String(t.heading||"Template Prompt");return`
<div style="padding:18px 40px">
  <details style="border:1px solid ${e.border};border-radius:12px;overflow:hidden;background:${e.surface}">
    <summary style="list-style:none;cursor:pointer;display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px 14px;user-select:none">
      <div style="display:flex;flex-direction:column;gap:2px">
        <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.18em;text-transform:uppercase;color:${e.accent}"> Template Prompt</div>
        <div style="font-family:${e.fontDisplay};font-size:18px;color:${e.text};font-weight:500">${M(r)}</div>
      </div>
      <button class="nap-copy-btn" data-copy="${M(n)}" style="padding:7px 12px;background:${e.primary};border:none;border-radius:8px;font-family:${e.fontBody};font-size:12px;color:#fff;cursor:pointer;white-space:nowrap"> Copy</button>
    </summary>
    <div style="padding:12px 14px;background:${e.background};border-top:1px solid ${e.border}">
      <pre style="font-family:${e.fontMono};font-size:12px;color:${e.text};margin:0;white-space:pre-wrap;line-height:1.6">${M(n)}</pre>
    </div>
  </details>
</div>`}function DC(t,e){const n=(t.items||[]).filter(Boolean);if(!n.length)return"";const r=n.length<=2?"1fr":"1fr 1fr";return`
<div style="padding:10px 40px 18px">
  <div style="background:#FFF7E6;border:1px solid #F4D38B;border-radius:12px;padding:14px">
    <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.12em;text-transform:uppercase;color:#8A5A00;margin-bottom:10px"> ${M(t.heading||"Safety Reminders")}</div>
    <div style="display:grid;grid-template-columns:${r};gap:10px">
      ${n.map(i=>`
        <div style="background:rgba(255,255,255,0.65);border:1px solid ${e.border};border-radius:10px;padding:12px;display:flex;gap:10px">
          <div style="font-family:${e.fontMono};font-size:11px;color:#8A5A00;margin-top:1px"></div>
          <div style="font-family:${e.fontBody};font-size:13px;color:${e.text};line-height:1.6">${M(i)}</div>
        </div>`).join("")}
    </div>
  </div>
</div>`}function RC(t,e){const n={"Differential Diagnosis":e.primary,"Discharge Summary":e.secondary,"Literature Review":e.accent,"Patient Education":"#00A651","EEG / EMG Report":"#7B2D8B",Research:"#F47920"},r=(t.templates||[]).map(i=>{const o=n[i.category]||e.primary,s=`tpl-${M(String(i.id||Math.random().toString(36).slice(2)))}`;return`
<div style="border:1px solid ${e.border};border-radius:10px;overflow:hidden;background:${e.surface}">
  <div style="padding:12px 14px">
    <div style="display:flex;align-items:flex-start;justify-content:space-between;gap:8px">
      <div style="flex:1">
        <div style="display:flex;align-items:center;gap:6px;margin-bottom:4px">
          <span style="font-family:${e.fontMono};font-size:9px;letter-spacing:0.12em;text-transform:uppercase;color:#fff;padding:2px 7px;background:${o};border-radius:999px">${M(i.category)}</span>
        </div>
        <div style="font-family:${e.fontBody};font-size:13px;font-weight:600;color:${e.text};margin-bottom:3px">${M(i.title)}</div>
        <div style="font-family:${e.fontBody};font-size:11px;color:${e.muted}">${M(i.useCase)}</div>
      </div>
      <div style="display:flex;gap:4px;flex-shrink:0">
        <button class="nap-expand-btn" data-target="${s}" style="padding:5px 8px;background:none;border:1px solid ${e.border};border-radius:6px;font-family:${e.fontBody};font-size:11px;color:${e.muted}">Preview</button>
        <button class="nap-copy-btn" data-copy="${M(i.prompt)}" style="padding:5px 10px;background:${e.primary};border:none;border-radius:6px;font-family:${e.fontBody};font-size:11px;color:#fff"> Copy</button>
      </div>
    </div>
  </div>
  <div id="${s}" class="nap-tpl-prompt" style="background:${e.background}">
    <pre style="font-family:${e.fontMono};font-size:11px;color:${e.text};margin:0;white-space:pre-wrap;line-height:1.6">${M(i.prompt)}</pre>
  </div>
</div>`}).join("");return`
<div style="padding:28px 40px">
  <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.18em;text-transform:uppercase;color:${e.accent};margin-bottom:8px"> Ready-to-Use Prompts</div>
  <h2 style="font-family:${e.fontDisplay};font-size:26px;color:${e.text};margin:0 0 6px;font-weight:400">${M(t.heading||"")}</h2>
  <p style="font-family:${e.fontBody};font-size:14px;color:${e.muted};margin:0 0 20px">${M(t.description||"")}</p>
  <div class="nap-2col" style="display:grid;grid-template-columns:repeat(2,1fr);gap:12px">${r}</div>
</div>`}function IC(t,e){const n=[{title:"Definition",content:t.definition},{title:"Relevance to Medicine",content:t.relevance},{title:"Neurology Application",content:t.neurologyApplication}];return`
<div style="padding:28px 40px">
  <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.18em;text-transform:uppercase;color:${e.accent};margin-bottom:8px"> AI Term of the Month</div>
  <h2 style="font-family:${e.fontDisplay};font-size:34px;color:${e.text};margin:0 0 20px;font-weight:400">${M(t.term||"")}</h2>
  <div class="nap-3col" style="display:grid;grid-template-columns:repeat(3,1fr);gap:16px">
    ${n.map(r=>`
    <div style="border:1px solid ${e.border};border-radius:10px;padding:16px;background:${e.surface}">
      <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.12em;text-transform:uppercase;color:${e.muted};margin-bottom:8px">${M(r.title)}</div>
      <p style="font-family:${e.fontBody};font-size:13px;color:${e.text};margin:0;line-height:1.6">${M(r.content||"")}</p>
    </div>`).join("")}
  </div>
  ${(t.relatedTerms||[]).length?`
  <div style="margin-top:14px;display:flex;flex-wrap:wrap;gap:8px;align-items:center">
    <strong class="ai-related-label" style="font-family:${e.fontBody};font-size:13px;color:${e.text};font-weight:700">Related:</strong>
    ${gC(t.relatedTerms).map(r=>`<span class="ai-related-pill" style="display:inline-block !important;font-family:${e.fontMono} !important;font-size:11px !important;padding:4px 10px !important;background:#F3F6FF !important;border:1px solid ${e.border} !important;border-radius:999px !important;color:${e.text} !important;line-height:16px !important">${M(r)}</span>`).join("")}
  </div>`:""}
</div>`}function OC(t,e){const n=t.imageDataUrl||t.imageUrl;return`
<div style="padding:28px 40px">
  <div style="display:flex;gap:24px;align-items:flex-start">
    <div style="display:flex;flex-direction:column;align-items:center;gap:10px;flex-shrink:0">
      <div style="background:${e.primary};border-radius:10px;padding:14px 18px;text-align:center;color:#fff !important">
        <div style="font-family:${e.fontDisplay};font-size:28px;color:#fff !important;line-height:1;text-shadow:0 1px 0 rgba(0,0,0,0.18)">${M(t.year||"")}</div>
        <div style="font-family:${e.fontMono};font-size:10px;color:rgba(255,255,255,0.92) !important;letter-spacing:0.12em;text-transform:uppercase;margin-top:4px;text-shadow:0 1px 0 rgba(0,0,0,0.12)">AI Case File</div>
      </div>
      ${n?`<div style="width:100px;height:80px;border-radius:8px;overflow:hidden;border:1px solid ${e.border}"><img src="${M(n)}" alt="${M(t.title||"")}" style="width:100%;height:100%;object-fit:cover"></div>`:""}
    </div>
    <div style="flex:1">
      <h3 style="font-family:${e.fontDisplay};font-size:22px;color:${e.text};margin:0 0 10px;font-weight:400">${M(t.title||"")}</h3>
      <p style="font-family:${e.fontBody};font-size:14px;color:${e.muted};margin:0 0 12px;line-height:1.65">${M(t.content||"")}</p>
      ${t.significance?`<div style="background:${e.background};border-radius:8px;padding:10px 14px;border-left:3px solid ${e.accent};margin-bottom:12px"><p style="font-family:${e.fontBody};font-size:13px;color:${e.muted};margin:0;line-height:1.55"><strong>Significance:</strong> ${M(t.significance)}</p></div>`:""}
      ${t.sourceUrl||t.sourceLabel?`<div style="font-family:${e.fontMono};font-size:11px;color:${e.muted}">Source: ${t.sourceUrl?`<a href="${M(t.sourceUrl)}" target="_blank" rel="noopener noreferrer" style="color:${e.accent}">${M(t.sourceLabel||t.sourceUrl)}</a>`:M(t.sourceLabel)}</div>`:""}
    </div>
  </div>
</div>`}function NC(t,e){const n=(t.hits||[]).map((r,i)=>{const o=r.url?`<a href="${M(r.url)}" target="_blank" rel="noopener noreferrer" style="color:${e.text};text-decoration:none">${M(r.title||"")}</a>`:M(r.title||"");return`
<div style="display:flex;gap:14px;align-items:flex-start;padding:12px 14px;border:1px solid ${e.border};border-radius:10px;background:${e.surface}">
  <span style="font-family:${e.fontMono};font-size:18px;color:${e.accent};line-height:1;flex-shrink:0;min-width:28px">${String(i+1).padStart(2,"0")}</span>
  <div style="flex:1">
    <div style="font-family:${e.fontBody};font-size:14px;font-weight:600;color:${e.text};margin-bottom:4px;line-height:1.3">${o}</div>
    <div style="font-family:${e.fontMono};font-size:10px;color:${e.muted};letter-spacing:0.1em;text-transform:uppercase;margin-bottom:4px">${M(r.source||"")}</div>
    ${r.summary?`<p style="font-family:${e.fontBody};font-size:13px;color:${e.muted};margin:0;line-height:1.5">${M(r.summary)}</p>`:""}
  </div>
  ${r.url?`<a href="${M(r.url)}" target="_blank" rel="noopener noreferrer" style="flex-shrink:0;font-family:${e.fontBody};font-size:11px;color:${e.accent};font-weight:600;text-decoration:none">Read </a>`:""}
</div>`}).join("");return`
<div style="padding:24px 40px">
  <h2 style="font-family:${e.fontDisplay};font-size:26px;color:${e.text};margin:0 0 16px;font-weight:400"> ${M(t.heading||"")}</h2>
  <div style="display:flex;flex-direction:column;gap:10px">${n}</div>
</div>`}function zC(t,e){const n=t.imageDataUrl||t.imageUrl,r=t.imageFit||"contain",i=t.imageHeight,o=i?`width:100%;height:${i}px;object-fit:${r};display:block`:"width:100%;height:auto;display:block";return`
<div style="padding:28px 40px">
  <div style="background:linear-gradient(135deg,${e.background},${e.surface});border:1px solid ${e.border};border-radius:16px;overflow:hidden">
    <div style="padding:16px 18px;border-bottom:1px solid ${e.border};display:flex;align-items:center;gap:10px">
      <span style="font-size:18px"></span>
      <div style="font-family:${e.fontDisplay};font-size:20px;color:${e.text};font-weight:400">${M(t.heading||"Humor")}</div>
    </div>
    ${n?`<img src="${M(n)}" alt="" style="${o}">`:""}
    <div style="padding:18px 22px;text-align:center">
      ${n?"":`<div style="font-size:44px;margin-bottom:10px">${M(t.emojiDecor||"")}</div>`}
      ${t.attribution?`<div style="font-family:${e.fontBody};font-size:14px;color:${e.muted};margin-bottom:10px">${M(t.attribution)}</div>`:""}
      <div style="font-family:${e.fontBody};font-size:16px;color:${e.text};font-style:italic;line-height:1.65;max-width:760px;margin:0 auto">${M(t.content||"")}</div>
      ${t.sourceUrl?`<div style="margin-top:10px"><a href="${M(t.sourceUrl)}" target="_blank" rel="noopener noreferrer" style="font-family:${e.fontBody};font-size:12px;color:${e.accent};text-decoration:none">Source </a></div>`:""}
    </div>
  </div>
</div>`}function LC(t,e){return`<div style="height:${Number(t.height||24)}px;${t.showLine?`border-top:1px ${M(t.lineStyle||"solid")} ${e.border};margin:0 40px`:""}"></div>`}function PC(t,e){const n={critical:{color:"#C0392B",bg:"#FEF0EE",border:"#f5c6c0",label:"CRITICAL",icon:""},high:{color:"#C06500",bg:"#FFF4E6",border:"#F6D860",label:"HIGH",icon:""},medium:{color:"#0057A8",bg:"#EEF4FF",border:"#C8D9EE",label:"MEDIUM",icon:""},informational:{color:"#005F6B",bg:"#F0FAFA",border:"#B2E0E4",label:"INFO",icon:""}},r=(t.updates||[]).map(i=>{const o=n[i.severity]||n.informational,s=i.url?`<a href="${M(i.url)}" target="_blank" rel="noopener noreferrer" style="color:${e.text};text-decoration:none">${M(i.title||"")}</a>`:M(i.title||"");return`
<div style="border:1px solid ${o.border};border-radius:10px;background:${o.bg}">
  <div style="display:flex;align-items:flex-start;gap:12px;padding:14px 16px">
    <div style="flex-shrink:0;display:flex;flex-direction:column;align-items:center;gap:4px;padding-top:2px">
      <span style="font-size:14px">${o.icon}</span>
      <span style="font-family:${e.fontMono};font-size:8px;letter-spacing:0.1em;text-transform:uppercase;color:${o.color};font-weight:700">${o.label}</span>
    </div>
    <div style="flex:1">
      <div style="display:flex;align-items:center;gap:8px;margin-bottom:4px;flex-wrap:wrap">
        <span style="font-family:${e.fontMono};font-size:9px;letter-spacing:0.1em;text-transform:uppercase;color:${o.color};padding:2px 7px;background:${o.color}18;border-radius:999px">${M(i.category||"")}</span>
        <span style="font-family:${e.fontMono};font-size:10px;color:${e.muted}">${M(i.date||"")}</span>
      </div>
      <div style="font-family:${e.fontBody};font-size:14px;font-weight:600;color:${e.text};margin-bottom:4px">${s}</div>
      <p style="font-family:${e.fontBody};font-size:13px;color:${e.muted};margin:0;line-height:1.55">${M(i.summary||"")}</p>
      ${i.url?`<a href="${M(i.url)}" target="_blank" rel="noopener noreferrer" style="display:inline-block;margin-top:8px;font-family:${e.fontBody};font-size:11px;color:${o.color};font-weight:600">View full guidance </a>`:""}
    </div>
  </div>
</div>`}).join("");return`
<div style="padding:28px 40px">
  <div style="display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:20px;flex-wrap:wrap;gap:10px">
    <div>
      <div style="display:flex;align-items:center;gap:8px;margin-bottom:6px">
        <span style="font-size:18px"></span>
        <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.18em;text-transform:uppercase;color:#C0392B">AI Safety Monitor</div>
      </div>
      <h2 style="font-family:${e.fontDisplay};font-size:26px;color:${e.text};margin:0 0 4px;font-weight:400">${M(t.heading||"")}</h2>
      <p style="font-family:${e.fontBody};font-size:14px;color:${e.muted};margin:0">${M(t.subheading||"")}</p>
    </div>
    ${t.showLastUpdated?`<div style="font-family:${e.fontMono};font-size:10px;color:${e.muted};text-align:right;line-height:1.4">Last updated<br>${new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}</div>`:""}
  </div>
  <div style="display:flex;flex-direction:column;gap:12px">${r}</div>
</div>`}function $C(t,e){const n=(t.items||[]).slice(0,t.maxItems||6).map(r=>`
<div style="border:1px solid ${e.border};border-radius:10px;overflow:hidden;background:${e.surface};display:flex;flex-direction:column">
  ${r.imageUrl?`<div style="height:120px;overflow:hidden"><img src="${M(r.imageUrl)}" alt="${M(r.title)}" style="width:100%;height:100%;object-fit:cover"></div>`:""}
  <div style="padding:14px;flex:1;display:flex;flex-direction:column">
    ${r.category?`<span style="font-family:${e.fontMono};font-size:9px;letter-spacing:0.12em;text-transform:uppercase;color:${e.accent};margin-bottom:6px;display:block">${M(r.category)}</span>`:""}
    <div style="font-family:${e.fontBody};font-size:13px;font-weight:600;color:${e.text};margin-bottom:6px;line-height:1.35;flex:1">
      ${r.url?`<a href="${M(r.url)}" target="_blank" rel="noopener noreferrer" style="color:${e.text};text-decoration:none">${M(r.title)}</a>`:M(r.title)}
    </div>
    ${r.summary?`<p style="font-family:${e.fontBody};font-size:12px;color:${e.muted};margin:0 0 8px;line-height:1.5">${M(r.summary)}</p>`:""}
    ${r.pubDate?`<div style="font-family:${e.fontMono};font-size:10px;color:${e.muted}">${new Date(r.pubDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})}</div>`:""}
    ${r.url?`<a href="${M(r.url)}" target="_blank" rel="noopener noreferrer" style="margin-top:8px;font-family:${e.fontBody};font-size:11px;color:${e.accent};font-weight:600;text-decoration:none">Read more </a>`:""}
  </div>
</div>`).join("");return`
<div style="padding:28px 40px">
  <div style="display:flex;align-items:center;gap:10px;margin-bottom:6px">
    <div style="width:28px;height:28px;background:${e.primary};border-radius:6px;display:flex;align-items:center;justify-content:center;flex-shrink:0"><span style="font-size:14px"></span></div>
    <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.18em;text-transform:uppercase;color:${e.primary}">Northwell Health</div>
  </div>
  <h2 style="font-family:${e.fontDisplay};font-size:26px;color:${e.text};margin:0 0 4px;font-weight:400">${M(t.heading||"")}</h2>
  ${t.subheading?`<p style="font-family:${e.fontBody};font-size:14px;color:${e.muted};margin:0 0 20px">${M(t.subheading)}</p>`:""}
  <div class="nap-3col" style="display:grid;grid-template-columns:repeat(3,1fr);gap:14px">${n}</div>
</div>`}function FC(t,e){const n=(t.feedUrls||[]).filter(Boolean),r=M(JSON.stringify(n)),i=typeof t.maxItems=="number"?t.maxItems:10,o=Math.min(50,Math.max(1,i)),s=(t.items||[]).slice(0,o).map((a,c)=>`
<div style="padding:11px 18px;border-bottom:1px solid ${e.border};display:flex;gap:10px;align-items:flex-start">
  <span style="font-family:${e.fontMono};font-size:12px;color:${e.accent};flex-shrink:0;min-width:20px;margin-top:1px">${String(c+1).padStart(2,"0")}</span>
  <div style="flex:1">
    <div style="font-family:${e.fontBody};font-size:13px;font-weight:600;color:${e.text};line-height:1.3;margin-bottom:3px">
      ${a.url?`<a href="${M(a.url)}" target="_blank" rel="noopener noreferrer" style="color:${e.text};text-decoration:none">${M(a.title||"")}</a>`:M(a.title||"")}
    </div>
    <div style="display:flex;gap:8px;align-items:center">
      ${a.source?`<span style="font-family:${e.fontMono};font-size:9px;color:${e.muted};text-transform:uppercase;letter-spacing:0.08em">${M(a.source)}</span>`:""}
      ${a.pubDate?`<span style="font-family:${e.fontMono};font-size:9px;color:${e.muted}">${new Date(a.pubDate).toLocaleDateString()}</span>`:""}
    </div>
  </div>
  ${a.url?`<a href="${M(a.url)}" target="_blank" rel="noopener noreferrer" style="flex-shrink:0;font-family:${e.fontBody};font-size:11px;color:${e.accent};font-weight:600;text-decoration:none;padding-top:1px"></a>`:""}
</div>`).join(""),l=`
    <details class="nap-rss-config" data-rss-kind="sidebar" style="padding:10px 18px;border-bottom:1px solid ${e.border};background:${e.background}">
      <summary style="list-style:none;cursor:pointer;font-family:${e.fontMono};font-size:10px;letter-spacing:0.14em;text-transform:uppercase;color:${e.muted};user-select:none">RSS sources </summary>
      <div style="margin-top:10px;display:grid;gap:10px">
        <div style="font-family:${e.fontBody};font-size:12px;color:${e.text};line-height:1.45">Snapshot is shown by default. Enable <b>Live</b> to refresh from selected feeds.</div>
        <label style="display:flex;align-items:center;gap:8px;font-family:${e.fontBody};font-size:12px;color:${e.text}">
          <input type="checkbox" class="nap-rss-live" style="transform:translateY(1px)" /> Live RSS
        </label>
        <div style="display:flex;align-items:center;gap:10px">
          <div style="font-family:${e.fontBody};font-size:12px;color:${e.text}">Items per feed</div>
          <select class="nap-rss-max" style="margin-left:auto;padding:6px 10px;border-radius:10px;border:1px solid ${e.border};background:${e.surface};color:${e.text};font-family:${e.fontBody};font-size:12px">
            <option value="3">3</option>
            <option value="5">5</option>
            <option value="8">8</option>
            <option value="10">10</option>
            <option value="15">15</option>
            <option value="20">20</option>
          </select>
        </div>
        <div class="nap-rss-preset-list" style="display:grid;gap:6px"></div>
        <div style="display:flex;gap:8px">
          <input class="nap-rss-add" placeholder="Add RSS URL" style="flex:1;padding:8px 10px;border-radius:10px;border:1px solid ${e.border};background:${e.surface};color:${e.text};font-family:${e.fontBody};font-size:12px" />
          <button class="nap-rss-add-btn" type="button" style="padding:8px 10px;border-radius:10px;border:1px solid ${e.border};background:${e.background};color:${e.text};font-family:${e.fontBody};font-size:12px;cursor:pointer">Add</button>
        </div>
        <div class="nap-rss-status" style="font-family:${e.fontBody};font-size:12px;color:${e.muted}"></div>
      </div>
    </details>`;return`
<div style="padding:24px 40px">
  <div class="nap-rss-sidebar" data-feeds='${r}' data-max="${o}" data-live="0" data-key="${M(t.id||t.heading||"rss")}" style="border:1px solid ${e.border};border-radius:12px;overflow:hidden;background:${e.surface}">
    <div style="background:${e.primary};padding:12px 18px;display:flex;align-items:center;gap:8px;color:#fff">
      <span style="font-size:14px"></span>
      <span style="font-family:${e.fontMono};font-size:11px;letter-spacing:0.14em;text-transform:uppercase;color:#fff;font-weight:600">${M(t.heading||"News")}</span>
      <span style="margin-left:auto;font-family:${e.fontMono};font-size:9px;color:rgba(255,255,255,0.7)" class="nap-rss-timestamp">${t.lastFetched?`Updated ${new Date(t.lastFetched).toLocaleDateString()}`:"Snapshot"}</span>
    </div>
    ${l}
    <div class="nap-rss-scroll">
      <div class="nap-rss-items">
        ${s||(n.length?`<div style="padding:24px 18px;text-align:center;color:${e.muted};font-family:${e.fontBody};font-size:13px">Snapshot not available yet. Enable Live to fetch.</div>`:`<div style="padding:24px 18px;text-align:center;color:${e.muted};font-family:${e.fontBody};font-size:13px">No feeds configured.</div>`)}
      </div>
    </div>
  </div>
</div>`}function BC(t,e){const n=`mailto:yelsherif@northwell.edu?subject=${encodeURIComponent("Neurology AI Pulse Newsletter Suggestions/Comments")}`;return`
<div class="nap-white-section" style="background:${e.primary};padding:44px 40px 36px;text-align:center;color:#fff">
  ${t.nextIssueDate||t.nextIssueTeaser?`
  <div style="background:rgba(255,255,255,0.12);border-radius:10px;padding:14px 20px;margin-bottom:28px;display:inline-block">
    <div style="font-family:${e.fontMono};font-size:10px;letter-spacing:0.14em;text-transform:uppercase;color:rgba(255,255,255,0.75);margin-bottom:4px">Next Issue</div>
    <div style="font-family:${e.fontBody};font-size:14px;color:#fff">${M(t.nextIssueDate||"")}${t.nextIssueTeaser?`  ${M(t.nextIssueTeaser)}`:""}</div>
  </div>`:""}

  <div style="font-family:${e.fontDisplay};font-size:22px;color:#fff;margin-bottom:4px;font-weight:400">${M(t.institution||"")}</div>
  <div style="font-family:${e.fontBody};font-size:14px;color:rgba(255,255,255,0.85);margin-bottom:4px">${M(t.department||"")}</div>
  ${t.editors?`<div style="font-family:${e.fontBody};font-size:13px;color:rgba(255,255,255,0.75);margin-bottom:22px">${M(t.editors)}</div>`:""}

  <div style="display:flex;justify-content:center;margin-bottom:22px">
    <a href="${M(n)}" style="display:inline-flex;align-items:center;gap:10px;font-family:${e.fontBody};font-size:13px;font-weight:700;color:#fff;text-decoration:none;padding:10px 16px;border-radius:12px;border:1px solid rgba(255,255,255,0.35);background:rgba(255,255,255,0.10)">
      Contact Us <span style="opacity:0.8"></span>
    </a>
  </div>

  <div style="height:1px;background:rgba(255,255,255,0.18);max-width:240px;margin:0 auto 18px"></div>

  <p style="font-family:${e.fontBody};font-size:11px;color:rgba(255,255,255,0.75);margin:0 0 8px;max-width:580px;margin-left:auto;margin-right:auto;line-height:1.6">${M(t.disclaimer||"")}</p>
  <p style="font-family:${e.fontMono};font-size:10px;color:rgba(255,255,255,0.65);margin:0;letter-spacing:0.1em"> ${M(t.copyrightYear||"")} ${M(t.institution||"")}</p>
</div>`}function _C(){return`<script>
(function(){
  'use strict';
  const PROXY = 'https://api.allorigins.win/get?url=';

  // Preset RSS feeds (starter set). Users can add custom URLs.
  const PRESETS = [
    { label: 'JAMA Neurology (Online First)', url: 'https://jamanetwork.com/rss/site_16/onlineFirst_72.xml' },
    { label: 'JAMA Neurology (Current Issue)', url: 'https://jamanetwork.com/rss/site_16/72.xml' },
    { label: 'Practical Neurology (BMJ)  Current', url: 'https://pn.bmj.com/rss/current.xml' },
    { label: 'Fierce Healthcare (Health IT)', url: 'https://www.fiercehealthcare.com/rss/healthit' },
    { label: 'MIT Technology Review (AI)', url: 'https://www.technologyreview.com/feed/' },
    { label: 'arXiv (cs.AI recent)', url: 'https://export.arxiv.org/rss/cs.AI' }
  ];

  function esc(s){ return (s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;'); }

  function parseXml(xml){
    try {
      const doc = new DOMParser().parseFromString(xml,'text/xml');
      if(doc.querySelector('parsererror')) return [];
      const items = Array.from(doc.querySelectorAll('item'));
      if(items.length) return items.map(el=>({
        title:(el.querySelector('title')?.textContent||'').trim(),
        url:(el.querySelector('link')?.textContent||'').trim(),
        date:(el.querySelector('pubDate')?.textContent||'').trim(),
        source:''
      })).filter(x=>x.title);
      return Array.from(doc.querySelectorAll('entry')).map(el=>({
        title:(el.querySelector('title')?.textContent||'').trim(),
        url:(el.querySelector('link')?.getAttribute('href')||el.querySelector('link')?.textContent||'').trim(),
        date:(el.querySelector('updated')?.textContent||'').trim(),
        source:''
      })).filter(x=>x.title);
    } catch(e){ return []; }
  }

  async function fetchFeed(url){
    try {
      const res = await fetch(PROXY+encodeURIComponent(url),{cache:'no-store'});
      if(!res.ok) return [];
      const data = await res.json();
      const xml = (data && typeof data.contents === 'string') ? data.contents : '';
      return parseXml(xml);
    } catch(e){ return []; }
  }

  function dedupe(arr,max){
    const seen=new Set();
    return arr.filter(x=>{const k=x.url||x.title;if(!k||seen.has(k))return false;seen.add(k);return true;}).slice(0,Math.max(1,max));
  }

  function getCssVar(v){ return getComputedStyle(document.documentElement).getPropertyValue(v).trim(); }

  function storageKey(kind,key){ return 'nap_rss_'+kind+'_'+(key||'default'); }
  function safeJsonParse(raw, fallback){ try{ const v=JSON.parse(raw); return v ?? fallback; }catch(e){ return fallback; } }

  function getSelectedFeeds(kind, el){
    const key = el.getAttribute('data-key') || 'default';
    const k = storageKey(kind, key);
    const saved = safeJsonParse(localStorage.getItem(k) || 'null', null);
    if(Array.isArray(saved) && saved.length) return saved;
    const raw = (kind==='sidebar') ? (el.getAttribute('data-feeds')||'[]') : (el.getAttribute('data-rss')||'[]');
    const arr = safeJsonParse(raw, []);
    return Array.isArray(arr) ? arr : [];
  }

  function setSelectedFeeds(kind, el, feeds){
    const key = el.getAttribute('data-key') || 'default';
    const k = storageKey(kind, key);
    localStorage.setItem(k, JSON.stringify(feeds));
    if(kind==='sidebar') el.setAttribute('data-feeds', JSON.stringify(feeds));
    else el.setAttribute('data-rss', JSON.stringify(feeds));
  }

  function getLiveEnabled(kind, el){
    const key = el.getAttribute('data-key') || 'default';
    const k = storageKey(kind, key) + '_live';
    const v = localStorage.getItem(k);
    if(v==='1') return true;
    return (el.getAttribute('data-live')||'0') === '1';
  }

  function setLiveEnabled(kind, el, on){
    el.setAttribute('data-live', on ? '1' : '0');
    const key = el.getAttribute('data-key') || 'default';
    const k = storageKey(kind, key) + '_live';
    localStorage.setItem(k, on ? '1' : '0');
  }

  function getMaxItems(kind, el){
    const key = el.getAttribute('data-key') || 'default';
    const k = storageKey(kind, key) + '_max';
    const v = localStorage.getItem(k);
    if(v && /^d+$/.test(v)) return parseInt(v,10);
    if(kind==='ticker') return parseInt(el.getAttribute('data-rss-max')||'20',10);
    return parseInt(el.getAttribute('data-max')||'10',10);
  }

  function setMaxItems(kind, el, n){
    const key = el.getAttribute('data-key') || 'default';
    const k = storageKey(kind, key) + '_max';
    const val = String(Math.min(50, Math.max(1, parseInt(n,10)||10)));
    localStorage.setItem(k, val);
    if(kind==='ticker') el.setAttribute('data-rss-max', val);
    else el.setAttribute('data-max', val);
  }

  function applySidebarMax(el){
    try{
      const container = el.querySelector('.nap-rss-items');
      if(!container) return;
      const max = getMaxItems('sidebar', el);
      const kids = Array.from(container.children);
      kids.forEach((node, idx)=>{ node.style.display = (idx < max) ? '' : 'none'; });
    } catch(e){}
  }


  function renderPresetList(el, kind){
    const list = el.querySelector('.nap-rss-preset-list');
    if(!list) return;
    const selected = new Set(getSelectedFeeds(kind, el));
    const text = kind==='ticker' ? 'rgba(255,255,255,0.92)' : (getCssVar('--c-text')||'#1A2B4A');
    const muted = kind==='ticker' ? 'rgba(255,255,255,0.75)' : (getCssVar('--c-muted')||'#5A789A');
    const fb=getCssVar('--f-body')||'system-ui';
    list.innerHTML = PRESETS.map(p => {
      const checked = selected.has(p.url) ? 'checked' : '';
      return '<label style="display:flex;gap:8px;align-items:flex-start;font-family:'+fb+';font-size:12px;color:'+text+';line-height:1.3">'
        + '<input type="checkbox" data-url="'+esc(p.url)+'" '+checked+' style="transform:translateY(2px)" />'
        + '<span><span style="font-weight:600">'+esc(p.label)+'</span><br/><span style="color:'+muted+';font-size:11px">'+esc(p.url)+'</span></span>'
        + '</label>';
    }).join('');

    list.querySelectorAll('input[type=checkbox]').forEach(cb => {
      cb.addEventListener('change', () => {
        const url = cb.getAttribute('data-url');
        const next = new Set(getSelectedFeeds(kind, el));
        if(cb.checked) next.add(url); else next.delete(url);
        setSelectedFeeds(kind, el, Array.from(next));
        const st = el.querySelector('.nap-rss-status');
        if(st) st.textContent = 'Selected '+next.size+' feed(s).';
      });
    });
  }

  function wireRssConfig(el, kind){
    const details = el.querySelector('.nap-rss-config');
    if(!details) return;
    const live = details.querySelector('.nap-rss-live');
    if(live){
      live.checked = getLiveEnabled(kind, el);
      live.addEventListener('change', () => {
        setLiveEnabled(kind, el, live.checked);
        const st = el.querySelector('.nap-rss-status');
        if(st) st.textContent = live.checked ? 'Live enabled. Refreshing' : 'Live disabled (snapshot).';
        if(live.checked){
          if(kind==='sidebar') hydrateRssSidebar(el);
          else hydrateTicker(el);
        }
      });
    }
    renderPresetList(el, kind);
    const maxSel = details.querySelector('.nap-rss-max');
    if(maxSel){
      // Set initial value from persisted settings
      maxSel.value = String(getMaxItems(kind, el));
      maxSel.addEventListener('change', () => {
        setMaxItems(kind, el, maxSel.value);
        const st = el.querySelector('.nap-rss-status');
        if(st) st.textContent = 'Items per feed: ' + getMaxItems(kind, el) + '.';
        if(kind==='sidebar'){
          if(getLiveEnabled('sidebar', el)) hydrateRssSidebar(el);
          else applySidebarMax(el);
        } else {
          if(getLiveEnabled('ticker', el)) hydrateTicker(el);
        }
      });
    }
    const input = details.querySelector('.nap-rss-add');
    const btn = details.querySelector('.nap-rss-add-btn');
    function addUrl(){
      const v = (input && input.value || '').trim();
      if(!v) return;
      try{ new URL(v); } catch(e){ const st=el.querySelector('.nap-rss-status'); if(st) st.textContent='Invalid URL.'; return; }
      const next = new Set(getSelectedFeeds(kind, el));
      next.add(v);
      setSelectedFeeds(kind, el, Array.from(next));
      if(input) input.value='';
      renderPresetList(el, kind);
      const st = el.querySelector('.nap-rss-status');
      if(st) st.textContent='Added feed. Selected '+next.size+' feed(s).';
    }
    if(btn) btn.addEventListener('click', addUrl);
    if(input) input.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ e.preventDefault(); addUrl(); } });
    const st = el.querySelector('.nap-rss-status');
    if(st) st.textContent = 'Selected '+getSelectedFeeds(kind, el).length+' feed(s).';
  }

  /*  Ticker  */
  async function hydrateTicker(el){
    if(!el||el.getAttribute('data-source')!=='rss') return;
    if(!getLiveEnabled('ticker', el)) return;
    const urls = getSelectedFeeds('ticker', el);
    if(!urls.length) return;
    const max=parseInt(el.getAttribute('data-rss-max')||'20',10);
    const all=[];
    for(const u of urls){const items=await fetchFeed(u);all.push(...items);}
    const items=dedupe(all,max);
    if(!items.length) return;
    const textColor=el.style.color||'#fff';
    const accent=getCssVar('--c-accent')||'#009CDE';
    const fm=getCssVar('--f-mono')||'ui-monospace';
    const html=items.map(it=>
      '<a href="'+esc(it.url||'#')+'" target="_blank" rel="noopener noreferrer" '+
      'style="font-family:'+fm+';font-size:12px;color:'+textColor+';padding:0 32px;letter-spacing:0.04em;display:inline-flex;align-items:center;gap:10px;text-decoration:none">'+
      '<span style="width:5px;height:5px;border-radius:50%;background:'+accent+';display:inline-block;flex-shrink:0"></span>'+
      esc(it.title)+'<span style="font-size:10px;opacity:0.6"></span></a>'
    ).join('');
    const track=el.querySelector('.nap-ticker-track');
    if(track) track.innerHTML=html+html;
  }

  /*  RSS Sidebar  */
  async function hydrateRssSidebar(el){
    if(!el) return;
    if(!getLiveEnabled('sidebar', el)) return;
    const feeds = getSelectedFeeds('sidebar', el);
    if(!feeds.length) return;
    const max=getMaxItems('sidebar', el);
    const all=[];
    for(const u of feeds){
      const items=await fetchFeed(u);
      try{const host=new URL(u).hostname.replace(/^www./,'');items.forEach(it=>it.source=host);}catch(e){}
      all.push(...items);
    }
    const items=dedupe(all,max);
    if(!items.length) return;
    const text=getCssVar('--c-text')||'#1A2B4A';
    const accent=getCssVar('--c-accent')||'#009CDE';
    const muted=getCssVar('--c-muted')||'#5A789A';
    const border=getCssVar('--c-border')||'#C8D9EE';
    const fb=getCssVar('--f-body')||'system-ui';
    const fm=getCssVar('--f-mono')||'ui-monospace';
    function fmtDate(d){try{return new Date(d).toLocaleDateString();}catch(e){return '';}}
    const container=el.querySelector('.nap-rss-items');
    if(!container) return;
    container.innerHTML=items.map((it,i)=>{
      const n=String(i+1).padStart(2,'0');
      const dt=it.date?fmtDate(it.date):'';
      return '<div style="padding:11px 18px;border-bottom:1px solid '+border+';display:flex;gap:10px;align-items:flex-start">'+
        '<span style="font-family:'+fm+';font-size:12px;color:'+accent+';flex-shrink:0;min-width:20px;margin-top:1px">'+n+'</span>'+
        '<div style="flex:1">'+
          '<div style="font-family:'+fb+';font-size:13px;font-weight:600;color:'+text+';line-height:1.3;margin-bottom:3px">'+
            (it.url?'<a href="'+esc(it.url)+'" target="_blank" rel="noopener" style="color:'+text+';text-decoration:none">'+esc(it.title)+'</a>':esc(it.title))+
          '</div>'+
          '<div style="display:flex;gap:8px;align-items:center">'+
            (it.source?'<span style="font-family:'+fm+';font-size:9px;color:'+muted+';text-transform:uppercase;letter-spacing:0.08em">'+esc(it.source)+'</span>':'')+
            (dt?'<span style="font-family:'+fm+';font-size:9px;color:'+muted+'">'+dt+'</span>':'')+
          '</div>'+
        '</div>'+
        (it.url?'<a href="'+esc(it.url)+'" target="_blank" rel="noopener" style="flex-shrink:0;font-family:'+fb+';font-size:11px;color:'+accent+';font-weight:600;text-decoration:none;padding-top:1px"></a>':'')+
      '</div>';
    }).join('');
    /* Update timestamp */
    const ts=el.querySelector('.nap-rss-timestamp');
    applySidebarMax(el);
    if(ts) ts.textContent='Updated '+new Date().toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});
  }

  /*  Copy buttons  */
  function initCopyButtons(){
    document.querySelectorAll('.nap-copy-btn').forEach(function(btn){
      btn.addEventListener('click',function(){
        const text=this.getAttribute('data-copy')||'';
        const orig=this.innerHTML;
        const accent=getCssVar('--c-accent')||'#009CDE';
        const done=()=>{
          this.innerHTML=' Copied!';
          this.style.background=accent;
          this.style.color='#fff';
          this.style.border='none';
          setTimeout(()=>{this.innerHTML=orig;this.style.background='';this.style.color='';this.style.border='';},2000);
        };
        if(navigator.clipboard){
          navigator.clipboard.writeText(text).then(done).catch(()=>done());
        } else {
          const ta=document.createElement('textarea');
          ta.value=text;ta.style.position='fixed';ta.style.opacity='0';
          document.body.appendChild(ta);ta.select();document.execCommand('copy');
          document.body.removeChild(ta);done();
        }
      });
    });
  }

  /*  Template expand  */
  function initExpandButtons(){
    document.querySelectorAll('.nap-expand-btn').forEach(function(btn){
      btn.addEventListener('click',function(){
        const target=document.getElementById(this.getAttribute('data-target'));
        if(!target) return;
        const isOpen=target.classList.toggle('open');
        this.textContent=isOpen?'Collapse':'Preview';
      });
    });
  }

  // Wire RSS config UIs (snapshot-first; live optional)
  document.querySelectorAll('.nap-ticker[data-source="rss"]').forEach(el=>wireRssConfig(el,'ticker'));
  document.querySelectorAll('.nap-rss-sidebar').forEach(el=>wireRssConfig(el,'sidebar'));
  document.querySelectorAll('.nap-rss-sidebar').forEach(el=>applySidebarMax(el));

  // Only hydrate if live is enabled (persisted)
  document.querySelectorAll('.nap-ticker[data-source="rss"]').forEach(el=>{ if(getLiveEnabled('ticker', el)) hydrateTicker(el); });
  document.querySelectorAll('.nap-rss-sidebar').forEach(el=>{ if(getLiveEnabled('sidebar', el)) hydrateRssSidebar(el); });
  initCopyButtons();
  initExpandButtons();

  /*  Hourly live refresh  */
  const REFRESH_MS = 60 * 60 * 1000; // 1 hour
  setInterval(function() {
    document.querySelectorAll('.nap-ticker[data-source="rss"]').forEach(el=>{ if(getLiveEnabled('ticker', el)) hydrateTicker(el); });
    document.querySelectorAll('.nap-rss-sidebar').forEach(el=>{ if(getLiveEnabled('sidebar', el)) hydrateRssSidebar(el); });
  }, REFRESH_MS);

  /* Show a subtle "Live" indicator on the RSS sidebar header */
  document.querySelectorAll('.nap-rss-sidebar').forEach(function(rssEl){
    const header = rssEl.querySelector('div');
    if (!header) return;
    const dot = document.createElement('span');
    dot.title = 'Updates every hour (when Live is enabled)';
    dot.style.cssText = 'width:6px;height:6px;border-radius:50%;background:#00A651;display:inline-block;margin-left:auto;animation:nap_pulse 2s ease-in-out infinite;opacity:0.85';
    header.appendChild(dot);
  });
})();
<\/script>`}function HC(t,e){const n=t;switch(t.type){case"header":return xC(n,e);case"ticker":return vC(n,e);case"section-divider":return SC(n,e);case"article-grid":return bC(n,e);case"spotlight":return kC(n,e);case"ethics-split":return wC(n,e);case"image":return CC(n,e);case"text":return EC(n,e);case"html-embed":return TC(n,e);case"prompt-masterclass":return MC(n,e);case"sbar-prompt":return jC(n,e);case"prompt-template":return AC(n,e);case"safety-reminders":return DC(n,e);case"clinical-prompt-templates":return RC(n,e);case"term-of-month":return IC(n,e);case"ai-case-file":return OC(n,e);case"quick-hits":return NC(n,e);case"humor":return zC(n,e);case"spacer":return LC(n,e);case"ai-safety":return PC(n,e);case"northwell-spotlight":return $C(n,e);case"rss-sidebar":return FC(n,e);case"footer":return BC(n,e);default:return`<!-- unsupported block: ${t.type} -->`}}function UC(t,e){var a;const{theme:n,blocks:r,blockOrder:i}=t,o=i.map(c=>r[c]?HC(r[c],n):"").join(`
`),s=e==null?void 0:e.baseFontPx,l=(e==null?void 0:e.extraCss)||"";return`<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>${M(((a=t.meta)==null?void 0:a.title)||"Neurology AI Pulse")}</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;0,9..40,800;1,9..40,300;1,9..40,400&family=DM+Mono:ital,wght@0,300;0,400;0,500;1,300&display=swap" rel="stylesheet">
<style>
${yC(n,s)}
${l}
</style>
</head>
<body>
<div class="nap-export-wrap">
  <div class="nap-shell">
  ${o}
  </div>
</div>
${_C()}
</body>
</html>`}function VC(t){var l;let e="";try{const a=Array.from(document.styleSheets||[]),c=[];for(const d of a)try{const f=d.cssRules;if(!f)continue;for(const p of Array.from(f))c.push(p.cssText)}catch{}e=c.join(`
`)}catch{e=""}const n=(()=>{try{const a=parseFloat(getComputedStyle(document.documentElement).fontSize);return Number.isFinite(a)?Math.max(12,a*.92):void 0}catch{return}})(),r=UC(t,{baseFontPx:n,extraCss:e}),i=new Blob([r],{type:"text/html"}),o=URL.createObjectURL(i),s=document.createElement("a");s.href=o,s.download=`nap-issue-${((l=t.meta)==null?void 0:l.issueNumber)||"draft"}.html`,s.click(),URL.revokeObjectURL(o)}function WC({newsletter:t,editorState:e,lastSaved:n,onSave:r,onSaveVersion:i,onExportJson:o,onImport:s,onTogglePreview:l,onZoomChange:a}){const c=b.useRef(null),d=[75,90,100,110,125],f=d.indexOf(e.zoom);return u.jsxs("div",{style:{height:56,background:"var(--color-primary)",borderBottom:"1px solid rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 16px",gap:12,flexShrink:0,fontFamily:"var(--font-body)"},children:[u.jsx("div",{style:{display:"flex",alignItems:"center",gap:12},children:u.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[u.jsx("span",{style:{color:"#fff",fontFamily:"var(--font-display)",fontSize:16,fontWeight:400,lineHeight:1.1},children:"The Neurology AI Pulse"}),u.jsxs("span",{style:{color:"rgba(255,255,255,0.5)",fontFamily:"var(--font-mono)",fontSize:10,letterSpacing:"0.14em",textTransform:"uppercase"},children:["Issue ",t.meta.issueNumber," Builder"]})]})}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[u.jsx(er,{icon:u.jsx(mC,{size:14}),title:"Zoom out",onClick:()=>a(d[Math.max(0,f-1)]),disabled:f<=0}),u.jsxs("span",{style:{color:"rgba(255,255,255,0.7)",fontFamily:"var(--font-mono)",fontSize:12,minWidth:36,textAlign:"center"},children:[e.zoom,"%"]}),u.jsx(er,{icon:u.jsx(hC,{size:14}),title:"Zoom in",onClick:()=>a(d[Math.min(d.length-1,f+1)]),disabled:f>=d.length-1})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[n&&u.jsxs("span",{style:{color:"rgba(255,255,255,0.45)",fontFamily:"var(--font-mono)",fontSize:11,marginRight:6},children:["Saved ",n]}),u.jsx(er,{icon:u.jsx(rC,{size:14}),label:e.previewMode?"Edit":"Preview",onClick:l,active:e.previewMode}),u.jsx(er,{icon:u.jsx(fC,{size:14}),label:"Save",onClick:r,highlight:!0}),u.jsx(er,{icon:u.jsx(oC,{size:14}),label:"Version",onClick:i}),u.jsx("div",{style:{width:1,height:24,background:"rgba(255,255,255,0.15)",margin:"0 4px"}}),u.jsx(er,{icon:u.jsx(Sv,{size:14}),label:"Export HTML",onClick:()=>VC(t)}),u.jsx(er,{icon:u.jsx(iC,{size:14}),label:"Export JSON",onClick:o}),u.jsx(er,{icon:u.jsx(pC,{size:14}),label:"Import",onClick:()=>{var p;return(p=c.current)==null?void 0:p.click()}}),u.jsx("input",{ref:c,type:"file",accept:".json",style:{display:"none"},onChange:p=>{var m;const h=(m=p.target.files)==null?void 0:m[0];h&&s(h),p.target.value=""}})]})]})}function er({icon:t,label:e,onClick:n,title:r,active:i,highlight:o,disabled:s}){return u.jsxs("button",{onClick:n,disabled:s,title:r,style:{display:"inline-flex",alignItems:"center",gap:6,padding:e?"6px 12px":"6px 8px",background:o?"rgba(255,255,255,0.22)":i?"rgba(255,255,255,0.16)":"rgba(255,255,255,0.08)",border:"1px solid",borderColor:o?"rgba(255,255,255,0.4)":"rgba(255,255,255,0.15)",borderRadius:8,color:"#fff",fontSize:12,fontFamily:"var(--font-body)",cursor:s?"not-allowed":"pointer",opacity:s?.4:1,transition:"all 0.15s"},onMouseEnter:l=>{s||(l.currentTarget.style.background="rgba(255,255,255,0.22)")},onMouseLeave:l=>{l.currentTarget.style.background=o?"rgba(255,255,255,0.22)":i?"rgba(255,255,255,0.16)":"rgba(255,255,255,0.08)"},children:[t,e&&u.jsx("span",{children:e})]})}const Pa=[{id:"jama-neuro-onlinefirst",label:"JAMA Neurology  Online First",url:"https://jamanetwork.com/rss/site_16/onlineFirst_72.xml",tags:["neurology","journal"]},{id:"jama-neuro-current",label:"JAMA Neurology  Current Issue",url:"https://jamanetwork.com/rss/site_16/72.xml",tags:["neurology","journal"]},{id:"practical-neurology-current",label:"Practical Neurology (BMJ)  Current Issue",url:"https://pn.bmj.com/rss/current.xml",tags:["neurology","journal"]},{id:"fierce-healthcare-healthtech",label:"Fierce Healthcare  Health Tech",url:"https://www.fiercehealthcare.com/rss/health%20%26%20tech/xml",tags:["ai","health-it","news"]},{id:"fierce-healthcare-all",label:"Fierce Healthcare  All Stories",url:"https://www.fiercehealthcare.com/rss/xml",tags:["health-it","news"]},{id:"nejm-ai-podcast",label:"NEJM AI Grand Rounds (Podcast RSS)",url:"https://ai-podcast.nejm.org/feed.xml",tags:["ai","medicine","podcast"]}];function KC({block:t,onClose:e,onUpdateBlock:n,onAddArticle:r,onUpdateArticle:i,onDeleteArticle:o,onAddQuickHit:s,onUpdateQuickHit:l,onDeleteQuickHit:a}){const c=d=>n(t.id,d);return u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:16},children:[u.jsx("span",{style:{fontFamily:"var(--font-mono)",fontSize:11,letterSpacing:"0.1em",textTransform:"uppercase",color:"var(--color-muted)"},children:"Block Settings"}),u.jsx("button",{onClick:e,style:{background:"none",border:"none",cursor:"pointer",color:"var(--color-muted)",padding:4,borderRadius:4},children:u.jsx(kv,{size:16})})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:0},children:[t.type==="header"&&u.jsx(qC,{block:t,upd:c}),t.type==="ticker"&&u.jsx(f2,{block:t,upd:c}),t.type==="section-divider"&&u.jsx(JC,{block:t,upd:c}),t.type==="article-grid"&&u.jsx(GC,{block:t,upd:c,onAddArticle:()=>r(t.id),onUpdateArticle:(d,f)=>i(t.id,d,f),onDeleteArticle:d=>o(t.id,d)}),t.type==="spotlight"&&u.jsx(QC,{block:t,upd:c,onUpdateArticle:(d,f)=>i(t.id,d,f)}),t.type==="ethics-split"&&u.jsx(YC,{block:t,upd:c}),t.type==="image"&&u.jsx(ZC,{block:t,upd:c}),t.type==="text"&&u.jsx(e2,{block:t,upd:c}),t.type==="html-embed"&&u.jsx(t2,{block:t,upd:c}),t.type==="prompt-masterclass"&&u.jsx(n2,{block:t,upd:c}),t.type==="sbar-prompt"&&u.jsx(r2,{block:t,upd:c}),t.type==="prompt-template"&&u.jsx(i2,{block:t,upd:c}),t.type==="safety-reminders"&&u.jsx(o2,{block:t,upd:c}),t.type==="term-of-month"&&u.jsx(s2,{block:t,upd:c}),t.type==="ai-case-file"&&u.jsx(d2,{block:t,upd:c}),t.type==="quick-hits"&&u.jsx(l2,{block:t,upd:c,onAddHit:()=>s(t.id),onUpdateHit:(d,f)=>l(t.id,d,f),onDeleteHit:d=>a(t.id,d)}),t.type==="humor"&&u.jsx(u2,{block:t,upd:c}),t.type==="spacer"&&u.jsx(a2,{block:t,upd:c}),t.type==="footer"&&u.jsx(c2,{block:t,upd:c}),t.type==="ai-safety"&&u.jsx(XC,{block:t,upd:c}),t.type==="northwell-spotlight"&&u.jsx(p2,{block:t,upd:c}),t.type==="rss-sidebar"&&u.jsx(h2,{block:t,upd:c}),t.type==="clinical-prompt-templates"&&u.jsx(m2,{block:t,upd:c})]})]})}function qC({block:t,upd:e}){const n=b.useRef(null);return u.jsxs(u.Fragment,{children:[u.jsx(T,{label:"Title",children:u.jsx("input",{style:A,value:t.title,onChange:r=>e({title:r.target.value})})}),u.jsx(T,{label:"Subtitle",children:u.jsx("input",{style:A,value:t.subtitle,onChange:r=>e({subtitle:r.target.value})})}),u.jsx(T,{label:"Issue Number",children:u.jsx("input",{style:A,value:t.issueNumber,onChange:r=>e({issueNumber:r.target.value})})}),u.jsx(T,{label:"Issue Date",children:u.jsx("input",{style:A,value:t.issueDate,onChange:r=>e({issueDate:r.target.value})})}),u.jsx(T,{label:"Tagline",children:u.jsx("textarea",{style:Z,value:t.tagline,onChange:r=>e({tagline:r.target.value})})}),u.jsx(T,{label:"Background Style",children:u.jsxs("select",{style:A,value:t.backgroundStyle,onChange:r=>e({backgroundStyle:r.target.value}),children:[u.jsx("option",{value:"gradient",children:"Gradient"}),u.jsx("option",{value:"solid",children:"Solid"}),u.jsx("option",{value:"mesh",children:"Mesh"}),u.jsx("option",{value:"wave",children:"Wave"})]})}),u.jsx(T,{label:"Logo URL",children:u.jsx("input",{style:A,value:t.logoUrl,onChange:r=>e({logoUrl:r.target.value}),placeholder:"https://"})}),u.jsxs(T,{label:"Logo Upload",children:[u.jsx("button",{onClick:()=>{var r;return(r=n.current)==null?void 0:r.click()},style:{...A,cursor:"pointer",textAlign:"center",color:"var(--color-muted)"},children:"Click to upload image"}),u.jsx("input",{ref:n,type:"file",accept:"image/*",style:{display:"none"},onChange:r=>{var s;const i=(s=r.target.files)==null?void 0:s[0];if(!i)return;const o=new FileReader;o.onload=l=>{var a;return e({logoDataUrl:(a=l.target)==null?void 0:a.result})},o.readAsDataURL(i)}}),t.logoDataUrl&&u.jsx("div",{style:{marginTop:8,padding:8,background:"var(--color-bg)",borderRadius:8,textAlign:"center"},children:u.jsx("img",{src:t.logoDataUrl,alt:"Logo",style:{maxHeight:48,maxWidth:"100%"}})})]})]})}function JC({block:t,upd:e}){return u.jsxs(u.Fragment,{children:[u.jsx(T,{label:"Label",children:u.jsx("input",{style:A,value:t.label,onChange:n=>e({label:n.target.value})})}),u.jsx(T,{label:"Number",children:u.jsx("input",{style:A,type:"number",value:t.number,onChange:n=>e({number:Number(n.target.value)})})}),u.jsx(T,{label:"Description",children:u.jsx("textarea",{style:Z,value:t.description,onChange:n=>e({description:n.target.value})})}),u.jsx(T,{label:"Style",children:u.jsxs("select",{style:A,value:t.style,onChange:n=>e({style:n.target.value}),children:[u.jsx("option",{value:"gradient",children:"Gradient"}),u.jsx("option",{value:"line",children:"Line"}),u.jsx("option",{value:"bold",children:"Bold"}),u.jsx("option",{value:"numbered",children:"Numbered"})]})})]})}function wv({article:t,onUpdate:e,onDelete:n}){const r=b.useRef(null);return u.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:8,padding:12,marginBottom:12},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10},children:[u.jsx("span",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",letterSpacing:"0.1em",textTransform:"uppercase"},children:"Article"}),u.jsx("button",{onClick:n,style:{background:"#FEF0EE",border:"1px solid #f5c6c0",borderRadius:6,color:"#7A1E12",cursor:"pointer",padding:"3px 8px",fontSize:11,fontFamily:"var(--font-body)"},children:"Delete"})]}),u.jsx(T,{label:"Title",children:u.jsx("input",{style:A,value:t.title,onChange:i=>e({title:i.target.value})})}),u.jsx(T,{label:"URL",children:u.jsx("input",{style:A,value:t.url,onChange:i=>e({url:i.target.value}),placeholder:"https://"})}),u.jsx(T,{label:"Source / Journal",children:u.jsx("input",{style:A,value:t.source,onChange:i=>e({source:i.target.value})})}),u.jsx(T,{label:"Date",children:u.jsx("input",{style:A,type:"date",value:t.pubDate,onChange:i=>e({pubDate:i.target.value})})}),u.jsx(T,{label:"Image URL",children:u.jsx("input",{style:A,value:t.imageUrl,onChange:i=>e({imageUrl:i.target.value}),placeholder:"https:// (optional)"})}),u.jsxs(T,{label:"Upload Image",children:[u.jsx("button",{onClick:()=>{var i;return(i=r.current)==null?void 0:i.click()},style:{...A,cursor:"pointer",textAlign:"center",color:"var(--color-muted)"},children:"Upload image"}),u.jsx("input",{ref:r,type:"file",accept:"image/*",style:{display:"none"},onChange:i=>{var l;const o=(l=i.target.files)==null?void 0:l[0];if(!o)return;const s=new FileReader;s.onload=a=>{var c;return e({imageUrl:(c=a.target)==null?void 0:c.result})},s.readAsDataURL(o)}})]}),u.jsx(T,{label:"Summary",children:u.jsx("textarea",{style:Z,value:t.summary,onChange:i=>e({summary:i.target.value})})}),u.jsx(T,{label:"Clinical Context",children:u.jsx("textarea",{style:Z,value:t.clinicalContext,onChange:i=>e({clinicalContext:i.target.value})})}),u.jsx(T,{label:"My Take",children:u.jsx("textarea",{style:{...Z,minHeight:60},value:t.myTake,onChange:i=>e({myTake:i.target.value})})}),u.jsx(T,{label:"Evidence Level",children:u.jsxs("select",{style:A,value:t.evidenceLevel,onChange:i=>e({evidenceLevel:i.target.value}),children:[u.jsx("option",{value:"",children:""}),u.jsx("option",{children:"High"}),u.jsx("option",{children:"Moderate"}),u.jsx("option",{children:"Low"}),u.jsx("option",{children:"Expert Opinion"})]})})]})}function GC({block:t,upd:e,onAddArticle:n,onUpdateArticle:r,onDeleteArticle:i}){var o;return u.jsxs(u.Fragment,{children:[u.jsx(T,{label:"Section Title",children:u.jsx("input",{style:A,value:t.sectionTitle,onChange:s=>e({sectionTitle:s.target.value})})}),u.jsx(T,{label:"Columns",children:u.jsxs("select",{style:A,value:t.columns,onChange:s=>e({columns:Number(s.target.value)}),children:[u.jsx("option",{value:1,children:"1 column"}),u.jsx("option",{value:2,children:"2 columns"}),u.jsx("option",{value:3,children:"3 columns"})]})}),u.jsx(T,{label:"Layout",children:u.jsxs("select",{style:A,value:t.layout,onChange:s=>e({layout:s.target.value}),children:[u.jsx("option",{value:"card",children:"Card"}),u.jsx("option",{value:"editorial",children:"Editorial"}),u.jsx("option",{value:"compact",children:"Compact"})]})}),u.jsxs("div",{style:{marginTop:16},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10},children:[u.jsxs("span",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",letterSpacing:"0.12em",textTransform:"uppercase"},children:[((o=t.articles)==null?void 0:o.length)||0," Articles"]}),u.jsxs("button",{onClick:n,style:{display:"flex",alignItems:"center",gap:4,padding:"5px 10px",background:"var(--color-accent)",border:"none",borderRadius:6,color:"#fff",fontSize:12,fontFamily:"var(--font-body)",cursor:"pointer"},children:[u.jsx(Lr,{size:11})," Add Article"]})]}),(t.articles||[]).map(s=>u.jsx(wv,{article:s,onUpdate:l=>r(s.id,l),onDelete:()=>i(s.id)},s.id))]})]})}function QC({block:t,upd:e,onUpdateArticle:n}){return u.jsxs(u.Fragment,{children:[u.jsx(T,{label:"Layout",children:u.jsxs("select",{style:A,value:t.layout,onChange:r=>e({layout:r.target.value}),children:[u.jsx("option",{value:"left-image",children:"Image Left"}),u.jsx("option",{value:"right-image",children:"Image Right"}),u.jsx("option",{value:"top-image",children:"Image Top"}),u.jsx("option",{value:"no-image",children:"No Image"})]})}),u.jsx(T,{label:"Accent Color",children:u.jsx("input",{type:"color",value:t.accentColor,onChange:r=>e({accentColor:r.target.value})})}),u.jsxs("div",{style:{marginTop:8},children:[u.jsx("div",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",letterSpacing:"0.12em",textTransform:"uppercase",marginBottom:8},children:"Article"}),u.jsx(wv,{article:t.article,onUpdate:r=>n(t.article.id,r),onDelete:()=>{}})]})]})}function YC({block:t,upd:e}){return u.jsxs(u.Fragment,{children:[u.jsx(T,{label:"Heading",children:u.jsx("input",{style:A,value:t.heading,onChange:n=>e({heading:n.target.value})})}),u.jsx(T,{label:"Subheading",children:u.jsx("input",{style:A,value:t.subheading,onChange:n=>e({subheading:n.target.value})})}),u.jsx(T,{label:"Source / Publication",children:u.jsx("input",{style:A,value:t.source,onChange:n=>e({source:n.target.value})})}),u.jsx(T,{label:"URL",children:u.jsx("input",{style:A,value:t.url,onChange:n=>e({url:n.target.value}),placeholder:"https://"})}),u.jsx(T,{label:"Left Title",children:u.jsx("input",{style:A,value:t.leftTitle,onChange:n=>e({leftTitle:n.target.value})})}),u.jsx(T,{label:"Left Content",children:u.jsx("textarea",{style:Z,value:t.leftContent,onChange:n=>e({leftContent:n.target.value})})}),u.jsx(T,{label:"Right Title",children:u.jsx("input",{style:A,value:t.rightTitle,onChange:n=>e({rightTitle:n.target.value})})}),u.jsx(T,{label:"Right Content",children:u.jsx("textarea",{style:Z,value:t.rightContent,onChange:n=>e({rightContent:n.target.value})})}),u.jsx(T,{label:"Clinical Perspective",children:u.jsx("textarea",{style:Z,value:t.clinicalPerspective,onChange:n=>e({clinicalPerspective:n.target.value})})})]})}function XC({block:t,upd:e}){const n=t.updates||[],r=(s,l)=>{const a=n.map(c=>c.id===s?{...c,...l}:c);e({updates:a})},i=()=>{const s=`su_${Math.random().toString(36).slice(2,10)}`,l=new Date,a=l.getFullYear(),c=String(l.getMonth()+1).padStart(2,"0"),d=String(l.getDate()).padStart(2,"0"),f={id:s,date:`${a}-${c}-${d}`,category:"Guideline",title:"New safety update",summary:"Edit this safety recommendation and add a link (optional).",url:"",severity:"informational"};e({updates:[...n,f]})},o=s=>{e({updates:n.filter(l=>l.id!==s)})};return u.jsxs(u.Fragment,{children:[u.jsx(T,{label:"Heading",children:u.jsx("input",{style:A,value:t.heading,onChange:s=>e({heading:s.target.value})})}),u.jsx(T,{label:"Subheading",children:u.jsx("textarea",{style:Z,value:t.subheading,onChange:s=>e({subheading:s.target.value})})}),u.jsx(T,{label:"Show last updated",children:u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:10,fontFamily:"var(--font-body)",fontSize:12,color:"var(--color-text)"},children:[u.jsx("input",{type:"checkbox",checked:!!t.showLastUpdated,onChange:s=>e({showLastUpdated:s.target.checked})}),'Display "last updated" date']})}),u.jsxs("div",{style:{marginTop:14},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10},children:[u.jsxs("span",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",letterSpacing:"0.12em",textTransform:"uppercase"},children:[n.length," Updates"]}),u.jsxs("button",{onClick:i,style:{display:"flex",alignItems:"center",gap:6,padding:"6px 10px",background:"var(--color-accent)",border:"none",borderRadius:8,color:"#fff",fontSize:12,fontFamily:"var(--font-body)",cursor:"pointer"},children:[u.jsx(Lr,{size:12})," Add Update"]})]}),n.map(s=>u.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:10,padding:12,marginBottom:12,background:"var(--color-surface)"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10},children:[u.jsx("span",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",letterSpacing:"0.1em",textTransform:"uppercase"},children:"Safety update"}),u.jsx("button",{onClick:()=>o(s.id),style:{background:"#FEF0EE",border:"1px solid #f5c6c0",borderRadius:8,color:"#7A1E12",cursor:"pointer",padding:"4px 10px",fontSize:11,fontFamily:"var(--font-body)"},children:"Remove"})]}),u.jsx(T,{label:"Date",children:u.jsx("input",{style:A,type:"date",value:s.date,onChange:l=>r(s.id,{date:l.target.value})})}),u.jsx(T,{label:"Category",children:u.jsxs("select",{style:A,value:s.category,onChange:l=>r(s.id,{category:l.target.value}),children:[u.jsx("option",{value:"FDA",children:"FDA"}),u.jsx("option",{value:"Policy",children:"Policy"}),u.jsx("option",{value:"Guideline",children:"Guideline"}),u.jsx("option",{value:"Incident",children:"Incident"}),u.jsx("option",{value:"Alert",children:"Alert"}),u.jsx("option",{value:"Research",children:"Research"})]})}),u.jsx(T,{label:"Severity",children:u.jsxs("select",{style:A,value:s.severity,onChange:l=>r(s.id,{severity:l.target.value}),children:[u.jsx("option",{value:"critical",children:"critical"}),u.jsx("option",{value:"high",children:"high"}),u.jsx("option",{value:"medium",children:"medium"}),u.jsx("option",{value:"informational",children:"informational"})]})}),u.jsx(T,{label:"Title",children:u.jsx("input",{style:A,value:s.title,onChange:l=>r(s.id,{title:l.target.value})})}),u.jsx(T,{label:"URL",children:u.jsx("input",{style:A,value:s.url,onChange:l=>r(s.id,{url:l.target.value}),placeholder:"https:// (optional)"})}),u.jsx(T,{label:"Safety recommendation / summary",children:u.jsx("textarea",{style:{...Z,minHeight:90},value:s.summary,onChange:l=>r(s.id,{summary:l.target.value})})})]},s.id))]})]})}function ZC({block:t,upd:e}){const n=b.useRef(null);return u.jsxs(u.Fragment,{children:[u.jsx(T,{label:"Image URL",children:u.jsx("input",{style:A,value:t.url,onChange:r=>e({url:r.target.value}),placeholder:"https://"})}),u.jsxs(T,{label:"Upload Image",children:[u.jsx("button",{onClick:()=>{var r;return(r=n.current)==null?void 0:r.click()},style:{...A,cursor:"pointer",textAlign:"center",color:"var(--color-muted)"},children:t.dataUrl?" Image uploaded  click to replace":"Click to upload image"}),u.jsx("input",{ref:n,type:"file",accept:"image/*",style:{display:"none"},onChange:r=>{var s;const i=(s=r.target.files)==null?void 0:s[0];if(!i)return;const o=new FileReader;o.onload=l=>{var a;return e({dataUrl:(a=l.target)==null?void 0:a.result})},o.readAsDataURL(i)}})]}),(t.dataUrl||t.url)&&u.jsx("div",{style:{marginBottom:14,padding:8,background:"var(--color-bg)",borderRadius:8,textAlign:"center"},children:u.jsx("img",{src:t.dataUrl||t.url,alt:"Preview",style:{maxHeight:120,maxWidth:"100%",borderRadius:6}})}),u.jsx(T,{label:"Alt Text",children:u.jsx("input",{style:A,value:t.alt,onChange:r=>e({alt:r.target.value})})}),u.jsx(T,{label:"Caption",children:u.jsx("input",{style:A,value:t.caption,onChange:r=>e({caption:r.target.value})})}),u.jsxs("details",{style:{marginTop:6},children:[u.jsx("summary",{style:{cursor:"pointer",fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",letterSpacing:"0.12em",textTransform:"uppercase"},children:"Links / URLs"}),u.jsx("div",{style:{marginTop:10},children:u.jsx(T,{label:"Link URL",children:u.jsx("input",{style:A,value:t.linkUrl,onChange:r=>e({linkUrl:r.target.value}),placeholder:"https://"})})})]}),u.jsx(T,{label:"Width",children:u.jsxs("select",{style:A,value:t.width,onChange:r=>e({width:r.target.value}),children:[u.jsx("option",{value:"full",children:"Full width"}),u.jsx("option",{value:"wide",children:"Wide (80%)"}),u.jsx("option",{value:"medium",children:"Medium (60%)"}),u.jsx("option",{value:"small",children:"Small (40%)"})]})}),u.jsx(T,{label:"Alignment",children:u.jsxs("select",{style:A,value:t.alignment,onChange:r=>e({alignment:r.target.value}),children:[u.jsx("option",{value:"left",children:"Left"}),u.jsx("option",{value:"center",children:"Center"}),u.jsx("option",{value:"right",children:"Right"})]})}),u.jsxs(T,{label:"Border Radius",children:[u.jsx("input",{type:"range",min:0,max:32,value:t.borderRadius,onChange:r=>e({borderRadius:Number(r.target.value)}),style:{width:"100%",accentColor:"var(--color-accent)"}}),u.jsxs("span",{style:{fontFamily:"var(--font-mono)",fontSize:11,color:"var(--color-muted)"},children:[t.borderRadius,"px"]})]})]})}function e2({block:t,upd:e}){return u.jsxs(u.Fragment,{children:[u.jsx(T,{label:"Content (HTML)",hint:"Supports <strong>, <em>, <a>, <ul>, <ol>, <h3>, etc.",children:u.jsx("textarea",{style:{...Z,minHeight:200,fontFamily:"var(--font-mono)",fontSize:12},value:t.html,onChange:n=>e({html:n.target.value})})}),u.jsx(T,{label:"Alignment",children:u.jsxs("select",{style:A,value:t.alignment,onChange:n=>e({alignment:n.target.value}),children:[u.jsx("option",{value:"left",children:"Left"}),u.jsx("option",{value:"center",children:"Center"}),u.jsx("option",{value:"right",children:"Right"})]})}),u.jsx(T,{label:"Max Width",children:u.jsxs("select",{style:A,value:t.maxWidth,onChange:n=>e({maxWidth:n.target.value}),children:[u.jsx("option",{value:"full",children:"Full"}),u.jsx("option",{value:"reading",children:"Reading (720px)"}),u.jsx("option",{value:"narrow",children:"Narrow (560px)"})]})})]})}function t2({block:t,upd:e}){return u.jsxs(u.Fragment,{children:[u.jsx(T,{label:"Label",children:u.jsx("input",{style:A,value:t.label,onChange:n=>e({label:n.target.value})})}),u.jsx(T,{label:"HTML Source",hint:"Inline styles are safe. Scripts are not supported.",children:u.jsx("textarea",{style:{...Z,minHeight:240,fontFamily:"var(--font-mono)",fontSize:12},value:t.html,onChange:n=>e({html:n.target.value})})})]})}function n2({block:t,upd:e}){return u.jsxs(u.Fragment,{children:[u.jsx(T,{label:"Heading",children:u.jsx("input",{style:A,value:t.heading,onChange:n=>e({heading:n.target.value})})}),u.jsx(T,{label:"Step Label",children:u.jsx("input",{style:A,value:t.step,onChange:n=>e({step:n.target.value})})}),u.jsx(T,{label:"Framework",children:u.jsx("input",{style:A,value:t.framework,onChange:n=>e({framework:n.target.value})})}),u.jsx(T,{label:"Bad Prompt",children:u.jsx("textarea",{style:{...Z,minHeight:60},value:t.badPrompt,onChange:n=>e({badPrompt:n.target.value})})}),u.jsx(T,{label:"Good Prompt",children:u.jsx("textarea",{style:{...Z,minHeight:120},value:t.goodPrompt,onChange:n=>e({goodPrompt:n.target.value})})}),u.jsx(T,{label:"Explanation",children:u.jsx("textarea",{style:Z,value:t.explanation,onChange:n=>e({explanation:n.target.value})})})]})}function r2({block:t,upd:e}){return u.jsxs(u.Fragment,{children:[u.jsx(T,{label:"Heading",children:u.jsx("input",{style:A,value:t.heading,onChange:n=>e({heading:n.target.value})})}),(t.steps||[]).map((n,r)=>u.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:8,padding:10,marginBottom:10},children:[u.jsxs("div",{style:{fontFamily:"var(--font-mono)",fontSize:11,color:"var(--color-muted)",marginBottom:8},children:[n.letter,"  ",n.name]}),u.jsx(T,{label:"Description",children:u.jsx("textarea",{style:{...Z,minHeight:60},value:n.description,onChange:i=>{const o=[...t.steps];o[r]={...n,description:i.target.value},e({steps:o})}})}),u.jsx(T,{label:"Example",children:u.jsx("textarea",{style:{...Z,minHeight:60},value:n.example,onChange:i=>{const o=[...t.steps];o[r]={...n,example:i.target.value},e({steps:o})}})})]},n.letter))]})}function i2({block:t,upd:e}){return u.jsxs(u.Fragment,{children:[u.jsx(T,{label:"Heading",children:u.jsx("input",{style:A,value:t.heading,onChange:n=>e({heading:n.target.value})})}),u.jsx(T,{label:"Prompt",hint:"Plain text. Rendered as a collapsible, copyable <pre> in the newsletter.",children:u.jsx("textarea",{style:{...Z,minHeight:220,fontFamily:"var(--font-mono)",fontSize:12},value:t.prompt,onChange:n=>e({prompt:n.target.value})})})]})}const Vu=["Always verify AI-generated clinical reasoning against primary sources before acting.","Never submit patient-identifiable information (PHI) to consumer AI tools  use only approved institutional platforms.","AI supports clinical judgment; it does not replace it. Final decisions remain with the treating clinician.","Document AI tool use in the medical record where institutional policy requires it."];function o2({block:t,upd:e}){const n=Array.isArray(t.items)?t.items:[],r=(s,l)=>{const a=l?Array.from(new Set([...n,s])):n.filter(c=>c!==s);e({items:a})},i=s=>{const l=s.split(`
`).map(c=>c.trim()).filter(Boolean),a=Vu.filter(c=>n.includes(c));e({items:[...a,...l]})},o=n.filter(s=>!Vu.includes(s));return u.jsxs(u.Fragment,{children:[u.jsx(T,{label:"Heading",children:u.jsx("input",{style:A,value:t.heading,onChange:s=>e({heading:s.target.value})})}),u.jsx(T,{label:"Standard reminders",hint:"Choose 14 defaults, then optionally add custom lines below.",children:u.jsx("div",{style:{display:"grid",gap:8},children:Vu.map(s=>u.jsxs("label",{style:{display:"flex",gap:10,alignItems:"flex-start",fontFamily:"var(--font-body)",fontSize:13,cursor:"pointer"},children:[u.jsx("input",{type:"checkbox",checked:n.includes(s),onChange:l=>r(s,l.target.checked),style:{accentColor:"var(--color-accent)",marginTop:2}}),u.jsx("span",{style:{color:"var(--color-text)",lineHeight:1.45},children:s})]},s))})}),u.jsx(T,{label:"Custom reminders",hint:"One per line. These are added in addition to checked defaults.",children:u.jsx("textarea",{style:{...Z,minHeight:140,fontFamily:"var(--font-body)",fontSize:13},value:o.join(`
`),onChange:s=>i(s.target.value),placeholder:"Add your own reminder lines"})})]})}function s2({block:t,upd:e}){return u.jsxs(u.Fragment,{children:[u.jsx(T,{label:"Term",children:u.jsx("input",{style:A,value:t.term,onChange:n=>e({term:n.target.value})})}),u.jsx(T,{label:"Definition",children:u.jsx("textarea",{style:Z,value:t.definition,onChange:n=>e({definition:n.target.value})})}),u.jsx(T,{label:"Relevance to Medicine",children:u.jsx("textarea",{style:Z,value:t.relevance,onChange:n=>e({relevance:n.target.value})})}),u.jsx(T,{label:"Neurology Application",children:u.jsx("textarea",{style:Z,value:t.neurologyApplication,onChange:n=>e({neurologyApplication:n.target.value})})}),u.jsx(T,{label:"Related Terms",hint:"Comma-separated",children:u.jsx("input",{style:A,value:(t.relatedTerms||[]).join(", "),onChange:n=>e({relatedTerms:n.target.value.split(",").map(r=>r.trim()).filter(Boolean)})})})]})}function l2({block:t,upd:e,onAddHit:n,onUpdateHit:r,onDeleteHit:i}){var o;return u.jsxs(u.Fragment,{children:[u.jsx(T,{label:"Heading",children:u.jsx("input",{style:A,value:t.heading,onChange:s=>e({heading:s.target.value})})}),u.jsxs("div",{style:{marginTop:12},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10},children:[u.jsxs("span",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",letterSpacing:"0.12em",textTransform:"uppercase"},children:[((o=t.hits)==null?void 0:o.length)||0," Hits"]}),u.jsxs("button",{onClick:n,style:{display:"flex",alignItems:"center",gap:4,padding:"5px 10px",background:"var(--color-accent)",border:"none",borderRadius:6,color:"#fff",fontSize:12,fontFamily:"var(--font-body)",cursor:"pointer"},children:[u.jsx(Lr,{size:11})," Add Hit"]})]}),(t.hits||[]).map(s=>u.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:8,padding:10,marginBottom:10},children:[u.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:8},children:u.jsx("button",{onClick:()=>i(s.id),style:{background:"none",border:"none",cursor:"pointer",color:"#C0392B"},children:u.jsx(So,{size:13})})}),u.jsx(T,{label:"Title",children:u.jsx("input",{style:A,value:s.title,onChange:l=>r(s.id,{title:l.target.value})})}),u.jsx(T,{label:"URL",children:u.jsx("input",{style:A,value:s.url,onChange:l=>r(s.id,{url:l.target.value}),placeholder:"https://"})}),u.jsx(T,{label:"Source",children:u.jsx("input",{style:A,value:s.source,onChange:l=>r(s.id,{source:l.target.value})})}),u.jsx(T,{label:"Summary",children:u.jsx("textarea",{style:{...Z,minHeight:60},value:s.summary,onChange:l=>r(s.id,{summary:l.target.value})})})]},s.id))]})]})}function a2({block:t,upd:e}){return u.jsxs(u.Fragment,{children:[u.jsx(T,{label:`Height: ${t.height}px`,children:u.jsx("input",{type:"range",min:8,max:200,value:t.height,onChange:n=>e({height:Number(n.target.value)}),style:{width:"100%"}})}),u.jsx(T,{label:"Show Divider Line",children:u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,fontFamily:"var(--font-body)",fontSize:13,cursor:"pointer"},children:[u.jsx("input",{type:"checkbox",checked:!!t.showLine,onChange:n=>e({showLine:n.target.checked}),style:{accentColor:"var(--color-accent)"}}),"Show divider line"]})}),t.showLine&&u.jsx(T,{label:"Line Style",children:u.jsxs("select",{style:A,value:t.lineStyle,onChange:n=>e({lineStyle:n.target.value}),children:[u.jsx("option",{value:"solid",children:"Solid"}),u.jsx("option",{value:"dashed",children:"Dashed"}),u.jsx("option",{value:"dotted",children:"Dotted"})]})})]})}function c2({block:t,upd:e}){return u.jsxs(u.Fragment,{children:[u.jsx(T,{label:"Institution",children:u.jsx("input",{style:A,value:t.institution,onChange:n=>e({institution:n.target.value})})}),u.jsx(T,{label:"Department",children:u.jsx("input",{style:A,value:t.department,onChange:n=>e({department:n.target.value})})}),u.jsx(T,{label:"Editors",children:u.jsx("input",{style:A,value:t.editors,onChange:n=>e({editors:n.target.value})})}),u.jsx(T,{label:"Contact Email",children:u.jsx("input",{style:A,type:"email",value:t.contactEmail,onChange:n=>e({contactEmail:n.target.value})})}),u.jsx(T,{label:"Website URL",children:u.jsx("input",{style:A,value:t.websiteUrl,onChange:n=>e({websiteUrl:n.target.value}),placeholder:"https://"})}),u.jsx(T,{label:"Subscribe URL",children:u.jsx("input",{style:A,value:t.subscribeUrl,onChange:n=>e({subscribeUrl:n.target.value}),placeholder:"https://"})}),u.jsx(T,{label:"Unsubscribe URL",children:u.jsx("input",{style:A,value:t.unsubscribeUrl,onChange:n=>e({unsubscribeUrl:n.target.value}),placeholder:"https://"})}),u.jsx(T,{label:"Copyright Year",children:u.jsx("input",{style:A,value:t.copyrightYear,onChange:n=>e({copyrightYear:n.target.value})})}),u.jsx(T,{label:"Disclaimer",children:u.jsx("textarea",{style:Z,value:t.disclaimer,onChange:n=>e({disclaimer:n.target.value})})}),u.jsx(T,{label:"Next Issue Date",children:u.jsx("input",{style:A,value:t.nextIssueDate,onChange:n=>e({nextIssueDate:n.target.value})})}),u.jsx(T,{label:"Next Issue Teaser",children:u.jsx("input",{style:A,value:t.nextIssueTeaser,onChange:n=>e({nextIssueTeaser:n.target.value})})})]})}function u2({block:t,upd:e}){const n=b.useRef(null);return u.jsxs(u.Fragment,{children:[u.jsx(T,{label:"Heading",children:u.jsx("input",{style:A,value:t.heading,onChange:r=>e({heading:r.target.value})})}),u.jsx(T,{label:"Emoji Decoration",children:u.jsx("input",{style:A,value:t.emojiDecor,onChange:r=>e({emojiDecor:r.target.value}),placeholder:"  "})}),u.jsx(T,{label:"Content",children:u.jsx("textarea",{style:{...Z,minHeight:120},value:t.content,onChange:r=>e({content:r.target.value})})}),u.jsx(T,{label:"Attribution",children:u.jsx("input",{style:A,value:t.attribution,onChange:r=>e({attribution:r.target.value})})}),u.jsx(T,{label:"Source URL (optional)",children:u.jsx("input",{style:A,value:t.sourceUrl||"",onChange:r=>e({sourceUrl:r.target.value}),placeholder:"https://"})}),u.jsx(T,{label:"Image URL (optional)",children:u.jsx("input",{style:A,value:t.imageUrl||"",onChange:r=>e({imageUrl:r.target.value}),placeholder:"https://"})}),u.jsxs(T,{label:"Upload Image",children:[u.jsx("button",{onClick:()=>{var r;return(r=n.current)==null?void 0:r.click()},style:{...A,cursor:"pointer",textAlign:"center",color:"var(--color-muted)"},children:t.imageDataUrl?" Uploaded  click to replace":"Click to upload image"}),u.jsx("input",{ref:n,type:"file",accept:"image/*",style:{display:"none"},onChange:r=>{var s;const i=(s=r.target.files)==null?void 0:s[0];if(!i)return;const o=new FileReader;o.onload=l=>{var a;return e({imageDataUrl:(a=l.target)==null?void 0:a.result})},o.readAsDataURL(i)}}),(t.imageDataUrl||t.imageUrl)&&u.jsx("div",{style:{marginTop:8},children:u.jsx("img",{src:t.imageDataUrl||t.imageUrl,alt:"Preview",style:{maxHeight:100,maxWidth:"100%",borderRadius:8}})})]}),(t.imageDataUrl||t.imageUrl)&&u.jsxs(u.Fragment,{children:[u.jsxs(T,{label:"Image Height",children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[u.jsx("input",{type:"range",min:80,max:600,step:20,value:t.imageHeight||300,onChange:r=>e({imageHeight:Number(r.target.value)}),style:{flex:1,accentColor:"var(--color-accent)"}}),u.jsx("span",{style:{fontFamily:"var(--font-mono)",fontSize:11,color:"var(--color-muted)",minWidth:44},children:t.imageHeight?`${t.imageHeight}px`:"Auto"})]}),u.jsx("button",{onClick:()=>e({imageHeight:void 0}),style:{...A,marginTop:4,cursor:"pointer",textAlign:"center",fontSize:11,color:"var(--color-muted)"},children:"Reset to Auto (show full image)"})]}),u.jsx(T,{label:"Image Fit",children:u.jsxs("select",{style:A,value:t.imageFit||"contain",onChange:r=>e({imageFit:r.target.value}),children:[u.jsx("option",{value:"contain",children:"Fit  show entire image"}),u.jsx("option",{value:"cover",children:"Fill  crop to fit height"}),u.jsx("option",{value:"fill",children:"Stretch  fill exactly"})]})})]})]})}function d2({block:t,upd:e}){const n=b.useRef(null);return u.jsxs(u.Fragment,{children:[u.jsx(T,{label:"Year",children:u.jsx("input",{style:A,value:t.year,onChange:r=>e({year:r.target.value})})}),u.jsx(T,{label:"Title",children:u.jsx("input",{style:A,value:t.title,onChange:r=>e({title:r.target.value})})}),u.jsx(T,{label:"Content",children:u.jsx("textarea",{style:{...Z,minHeight:140},value:t.content,onChange:r=>e({content:r.target.value})})}),u.jsx(T,{label:"Significance",children:u.jsx("textarea",{style:Z,value:t.significance,onChange:r=>e({significance:r.target.value})})}),u.jsx(T,{label:"Source URL",children:u.jsx("input",{style:A,value:t.sourceUrl||"",onChange:r=>e({sourceUrl:r.target.value}),placeholder:"https://doi.org/"})}),u.jsx(T,{label:"Source Label",children:u.jsx("input",{style:A,value:t.sourceLabel||"",onChange:r=>e({sourceLabel:r.target.value}),placeholder:"Author, Year  Journal"})}),u.jsx(T,{label:"Image URL (optional)",children:u.jsx("input",{style:A,value:t.imageUrl||"",onChange:r=>e({imageUrl:r.target.value}),placeholder:"https://"})}),u.jsxs(T,{label:"Upload Image",children:[u.jsx("button",{onClick:()=>{var r;return(r=n.current)==null?void 0:r.click()},style:{...A,cursor:"pointer",textAlign:"center",color:"var(--color-muted)"},children:t.imageDataUrl?" Uploaded  click to replace":"Click to upload image"}),u.jsx("input",{ref:n,type:"file",accept:"image/*",style:{display:"none"},onChange:r=>{var s;const i=(s=r.target.files)==null?void 0:s[0];if(!i)return;const o=new FileReader;o.onload=l=>{var a;return e({imageDataUrl:(a=l.target)==null?void 0:a.result})},o.readAsDataURL(i)}}),(t.imageDataUrl||t.imageUrl)&&u.jsx("div",{style:{marginTop:8},children:u.jsx("img",{src:t.imageDataUrl||t.imageUrl,alt:"Preview",style:{maxHeight:100,maxWidth:"100%",borderRadius:8}})})]})]})}function f2({block:t,upd:e}){const n=t.links||[],r=t.items||[],[i,o]=b.useState((t.rssUrls||[]).join(`
`));return u.jsxs(u.Fragment,{children:[u.jsx(T,{label:"Source",children:u.jsxs("select",{style:A,value:t.sourceMode||"manual",onChange:s=>e({sourceMode:s.target.value}),children:[u.jsx("option",{value:"manual",children:"Manual"}),u.jsx("option",{value:"rss",children:"RSS feeds"})]})}),t.sourceMode==="rss"&&u.jsxs("details",{style:{marginTop:6},children:[u.jsx("summary",{style:{cursor:"pointer",fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",textTransform:"uppercase",letterSpacing:"0.12em"},children:"RSS settings"}),u.jsxs("div",{style:{marginTop:10},children:[u.jsx(T,{label:"Quick add from presets",hint:"Select a preset to append it to your RSS list. You can still edit/remove URLs below.",children:u.jsxs("select",{style:A,defaultValue:"",onChange:s=>{const l=s.target.value;if(!l)return;const a=Pa.find(d=>d.id===l);if(!a)return;const c=(t.rssUrls||[]).map(d=>d.trim()).filter(Boolean);if(!c.includes(a.url)){const d=[...c,a.url];o(d.join(`
`)),e({rssUrls:d})}s.currentTarget.value=""},children:[u.jsx("option",{value:"",children:" Choose a feed "}),Pa.map(s=>u.jsx("option",{value:s.id,children:s.label},s.id))]})}),u.jsx(T,{label:"RSS URLs (one per line)",children:u.jsx("textarea",{style:{...Z,minHeight:110},value:i,onChange:s=>o(s.target.value),onBlur:()=>{const s=i.split(/\r?\n/).map(l=>l.trim()).filter(Boolean);e({rssUrls:s})},placeholder:"https:///rss.xml\\nhttps:///feed"})}),u.jsx(T,{label:"Max RSS items",children:u.jsx("input",{style:A,type:"number",min:5,max:100,value:t.rssMaxItems??20,onChange:s=>e({rssMaxItems:Number(s.target.value)||20})})}),u.jsx("div",{style:{fontFamily:"var(--font-body)",fontSize:12,color:"var(--color-muted)"},children:"The ticker will aggregate titles across feeds and render them as clickable links."})]})]}),u.jsx(T,{label:"Speed",children:u.jsxs("select",{style:A,value:t.speed,onChange:s=>e({speed:s.target.value}),children:[u.jsx("option",{value:"slow",children:"Slow"}),u.jsx("option",{value:"medium",children:"Medium"}),u.jsx("option",{value:"fast",children:"Fast"})]})}),u.jsx(T,{label:"Background Color",children:u.jsx("input",{type:"color",value:t.backgroundColor||"#003087",onChange:s=>e({backgroundColor:s.target.value})})}),u.jsx(T,{label:"Text Color",children:u.jsx("input",{type:"color",value:t.textColor||"#ffffff",onChange:s=>e({textColor:s.target.value})})}),t.sourceMode!=="rss"&&u.jsxs(u.Fragment,{children:[u.jsx(T,{label:"Mode",children:u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,fontFamily:"var(--font-body)",fontSize:13,cursor:"pointer",marginBottom:8},children:[u.jsx("input",{type:"checkbox",checked:!!t.useLinks,onChange:s=>e({useLinks:s.target.checked}),style:{accentColor:"var(--color-accent)"}}),"Use clickable linked headlines"]})}),t.useLinks?u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[u.jsxs("span",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",textTransform:"uppercase",letterSpacing:"0.12em"},children:[n.length," Linked Items"]}),u.jsxs("button",{onClick:()=>e({links:[...n,{text:"New headline",url:""}]}),style:{display:"flex",alignItems:"center",gap:4,padding:"4px 10px",background:"var(--color-accent)",border:"none",borderRadius:6,color:"#fff",fontSize:11,fontFamily:"var(--font-body)",cursor:"pointer"},children:[u.jsx(Lr,{size:10})," Add"]})]}),n.map((s,l)=>u.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:8,padding:10,marginBottom:8},children:[u.jsx(T,{label:"Headline",children:u.jsx("input",{style:A,value:s.text,onChange:a=>{const c=[...n];c[l]={...s,text:a.target.value},e({links:c})}})}),u.jsxs("details",{children:[u.jsx("summary",{style:{cursor:"pointer",fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",textTransform:"uppercase",letterSpacing:"0.12em"},children:"URL"}),u.jsx("div",{style:{marginTop:10},children:u.jsx(T,{label:"URL",children:u.jsx("input",{style:A,value:s.url,onChange:a=>{const c=[...n];c[l]={...s,url:a.target.value},e({links:c})},placeholder:"https://"})})})]}),u.jsxs("button",{onClick:()=>e({links:n.filter((a,c)=>c!==l)}),style:{background:"none",border:"none",color:"#C0392B",fontSize:12,cursor:"pointer",fontFamily:"var(--font-body)",padding:0,display:"flex",alignItems:"center",gap:4},children:[u.jsx(So,{size:11})," Remove"]})]},l))]}):u.jsx(T,{label:`Plain Text Items (${r.length})`,hint:"One headline per line",children:u.jsx("textarea",{style:{...Z,minHeight:120},value:r.join(`
`),onChange:s=>e({items:s.target.value.split(`
`).filter(l=>l.trim())})})})]})]})}function p2({block:t,upd:e}){const n=b.useRef({}),r=t.items||[];return u.jsxs(u.Fragment,{children:[u.jsx(T,{label:"Heading",children:u.jsx("input",{style:A,value:t.heading,onChange:i=>e({heading:i.target.value})})}),u.jsx(T,{label:"Subheading",children:u.jsx("input",{style:A,value:t.subheading,onChange:i=>e({subheading:i.target.value})})}),u.jsx(T,{label:"Max Items (16)",children:u.jsx("input",{style:A,type:"number",min:1,max:6,value:t.maxItems||6,onChange:i=>e({maxItems:Number(i.target.value)})})}),u.jsxs("div",{style:{marginTop:16},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10},children:[u.jsxs("span",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",textTransform:"uppercase",letterSpacing:"0.12em"},children:[r.length," Items"]}),u.jsxs("button",{onClick:()=>e({items:[...r,{id:String(Date.now()),title:"New Northwell Item",url:"",pubDate:new Date().toISOString(),summary:"",imageUrl:"",category:"AI Innovation"}]}),style:{display:"flex",alignItems:"center",gap:4,padding:"5px 10px",background:"var(--color-accent)",border:"none",borderRadius:6,color:"#fff",fontSize:12,fontFamily:"var(--font-body)",cursor:"pointer"},children:[u.jsx(Lr,{size:11})," Add Item"]})]}),r.map((i,o)=>{var s;return u.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:8,padding:12,marginBottom:12},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[u.jsxs("span",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",textTransform:"uppercase"},children:["Item ",o+1]}),u.jsxs("button",{onClick:()=>e({items:r.filter((l,a)=>a!==o)}),style:{background:"#FEF0EE",border:"1px solid #f5c6c0",borderRadius:5,color:"#7A1E12",cursor:"pointer",padding:"3px 8px",fontSize:11,display:"flex",alignItems:"center",gap:4},children:[u.jsx(So,{size:11})," Delete"]})]}),u.jsx(T,{label:"Category",children:u.jsx("input",{style:A,value:i.category,onChange:l=>{const a=[...r];a[o]={...i,category:l.target.value},e({items:a})}})}),u.jsx(T,{label:"Title",children:u.jsx("input",{style:A,value:i.title,onChange:l=>{const a=[...r];a[o]={...i,title:l.target.value},e({items:a})}})}),u.jsx(T,{label:"URL",children:u.jsx("input",{style:A,value:i.url,onChange:l=>{const a=[...r];a[o]={...i,url:l.target.value},e({items:a})},placeholder:"https://northwell.edu/"})}),u.jsx(T,{label:"Summary",children:u.jsx("textarea",{style:{...Z,minHeight:60},value:i.summary,onChange:l=>{const a=[...r];a[o]={...i,summary:l.target.value},e({items:a})}})}),u.jsx(T,{label:"Image URL",children:u.jsx("input",{style:A,value:i.imageUrl,onChange:l=>{const a=[...r];a[o]={...i,imageUrl:l.target.value},e({items:a})},placeholder:"https://"})}),u.jsxs(T,{label:"Upload Image",children:[u.jsx("button",{onClick:()=>{var l;return(l=n.current[o])==null?void 0:l.click()},style:{...A,cursor:"pointer",textAlign:"center",color:"var(--color-muted)"},children:"Upload image"}),u.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},ref:l=>{n.current[o]=l},onChange:l=>{var d;const a=(d=l.target.files)==null?void 0:d[0];if(!a)return;const c=new FileReader;c.onload=f=>{var h;const p=[...r];p[o]={...i,imageUrl:(h=f.target)==null?void 0:h.result},e({items:p})},c.readAsDataURL(a)}})]}),u.jsx(T,{label:"Pub Date",children:u.jsx("input",{style:A,type:"date",value:((s=i.pubDate)==null?void 0:s.split("T")[0])||"",onChange:l=>{const a=[...r];a[o]={...i,pubDate:l.target.value},e({items:a})}})})]},i.id)})]})]})}function h2({block:t,upd:e}){const[n,r]=Y.useState(!1),[i,o]=Y.useState(""),s="https://api.allorigins.win/get?url=",l=async()=>{var f,p,h,m,g,v,y,x;r(!0),o("");const a=[];for(const S of t.feedUrls||[])try{const w=await(await fetch(s+encodeURIComponent(S))).json(),E=w&&typeof w.contents=="string"?w.contents:"",j=new DOMParser().parseFromString(E,"text/xml"),O=((p=(f=j.querySelector("channel > title"))==null?void 0:f.textContent)==null?void 0:p.trim())||S;for(const N of Array.from(j.querySelectorAll("item")).slice(0,10))a.push({title:((m=(h=N.querySelector("title"))==null?void 0:h.textContent)==null?void 0:m.trim())||"",url:((v=(g=N.querySelector("link"))==null?void 0:g.textContent)==null?void 0:v.trim())||"",source:O,pubDate:((x=(y=N.querySelector("pubDate"))==null?void 0:y.textContent)==null?void 0:x.trim())||""})}catch{o(`Failed to fetch: ${S}`)}const c=new Set,d=a.filter(S=>!S.url||c.has(S.url)?!1:(c.add(S.url),!0));d.sort((S,k)=>(Date.parse(k.pubDate)||0)-(Date.parse(S.pubDate)||0)),e({items:d.slice(0,t.maxItems||15),lastFetched:new Date().toISOString()}),r(!1)};return u.jsxs(u.Fragment,{children:[u.jsx(T,{label:"Heading",children:u.jsx("input",{style:A,value:t.heading,onChange:a=>e({heading:a.target.value})})}),u.jsx(T,{label:"Max Items (320)",children:u.jsx("input",{style:A,type:"number",min:3,max:20,value:t.maxItems||8,onChange:a=>e({maxItems:Number(a.target.value)})})}),u.jsx(T,{label:"Scrolling",hint:"If off, the RSS box will expand to show all items (recommended for export).",children:u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,fontFamily:"var(--font-body)",fontSize:13,cursor:"pointer"},children:[u.jsx("input",{type:"checkbox",checked:!!t.enableScroll,onChange:a=>e({enableScroll:a.target.checked}),style:{accentColor:"var(--color-accent)"}}),"Enable internal scroll (fixed height)"]})}),u.jsx(T,{label:"Quick add from presets",hint:"Append a known-working feed URL.",children:u.jsxs("select",{style:A,defaultValue:"",onChange:a=>{const c=a.target.value;if(!c)return;const d=Pa.find(p=>p.id===c);if(!d)return;const f=(t.feedUrls||[]).map(p=>p.trim()).filter(Boolean);f.includes(d.url)||e({feedUrls:[...f,d.url]}),a.currentTarget.value=""},children:[u.jsx("option",{value:"",children:" Choose a feed "}),Pa.map(a=>u.jsx("option",{value:a.id,children:a.label},a.id))]})}),u.jsx(T,{label:`RSS Feed URLs (${(t.feedUrls||[]).length})`,hint:"One URL per line",children:u.jsx("textarea",{style:{...Z,minHeight:120,fontFamily:"var(--font-mono)",fontSize:11},value:(t.feedUrls||[]).join(`
`),onChange:a=>e({feedUrls:a.target.value.split(`
`).map(c=>c.trim()).filter(Boolean)})})}),u.jsx("button",{onClick:l,disabled:n,style:{width:"100%",padding:"9px 0",background:n?"var(--color-muted)":"var(--color-accent)",border:"none",borderRadius:8,color:"#fff",fontSize:13,fontFamily:"var(--font-body)",cursor:n?"not-allowed":"pointer",marginBottom:8},children:n?" Fetching":` Refresh Feed (${(t.items||[]).length} items loaded)`}),i&&u.jsx("div",{style:{fontFamily:"var(--font-body)",fontSize:11,color:"#C0392B",marginBottom:8},children:i}),t.lastFetched&&u.jsxs("div",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",textAlign:"center"},children:["Last fetched: ",new Date(t.lastFetched).toLocaleString()]})]})}function m2({block:t,upd:e}){const n=t.templates||[];return u.jsxs(u.Fragment,{children:[u.jsx(T,{label:"Heading",children:u.jsx("input",{style:A,value:t.heading,onChange:r=>e({heading:r.target.value})})}),u.jsx(T,{label:"Description",children:u.jsx("textarea",{style:{...Z,minHeight:60},value:t.description,onChange:r=>e({description:r.target.value})})}),u.jsxs("div",{style:{marginTop:12},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10},children:[u.jsxs("span",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",textTransform:"uppercase",letterSpacing:"0.12em"},children:[n.length," Templates"]}),u.jsxs("button",{onClick:()=>e({templates:[...n,{id:String(Date.now()),category:"General",title:"New Template",prompt:"Act as a [ROLE]. [TASK]. [CONSTRAINTS].",useCase:"Use case"}]}),style:{display:"flex",alignItems:"center",gap:4,padding:"5px 10px",background:"var(--color-accent)",border:"none",borderRadius:6,color:"#fff",fontSize:12,fontFamily:"var(--font-body)",cursor:"pointer"},children:[u.jsx(Lr,{size:11})," Add Template"]})]}),n.map((r,i)=>u.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:8,padding:12,marginBottom:12,background:"var(--color-background)"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[u.jsxs("span",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",textTransform:"uppercase"},children:["Template ",i+1]}),u.jsxs("button",{onClick:()=>e({templates:n.filter((o,s)=>s!==i)}),style:{background:"#FEF0EE",border:"1px solid #f5c6c0",borderRadius:5,color:"#7A1E12",cursor:"pointer",padding:"3px 8px",fontSize:11,display:"flex",alignItems:"center",gap:4},children:[u.jsx(So,{size:11})," Delete"]})]}),u.jsx(T,{label:"Category",children:u.jsx("input",{style:A,value:r.category,onChange:o=>{const s=[...n];s[i]={...r,category:o.target.value},e({templates:s})}})}),u.jsx(T,{label:"Title",children:u.jsx("input",{style:A,value:r.title,onChange:o=>{const s=[...n];s[i]={...r,title:o.target.value},e({templates:s})}})}),u.jsx(T,{label:"Use Case",children:u.jsx("input",{style:A,value:r.useCase,onChange:o=>{const s=[...n];s[i]={...r,useCase:o.target.value},e({templates:s})}})}),u.jsx(T,{label:"Prompt",hint:"Use [BRACKETS] for fill-in variables",children:u.jsx("textarea",{style:{...Z,minHeight:180,fontFamily:"var(--font-mono)",fontSize:11},value:r.prompt,onChange:o=>{const s=[...n];s[i]={...r,prompt:o.target.value},e({templates:s})}})})]},r.id))]})]})}const g2=[{id:"blocks",icon:u.jsx(lC,{size:16}),label:"Blocks"},{id:"settings",icon:u.jsx(bv,{size:16}),label:"Settings"},{id:"rss",icon:u.jsx(dC,{size:16}),label:"RSS"},{id:"theme",icon:u.jsx(aC,{size:16}),label:"Theme"},{id:"export",icon:u.jsx(Sv,{size:16}),label:"Versions"}],y2=[{label:"Structure",types:["header","ticker","section-divider","spacer","footer"]},{label:"Content",types:["article-grid","spotlight","ethics-split","quick-hits","text","image","html-embed"]},{label:"Clinical AI Skills",types:["prompt-masterclass","sbar-prompt","prompt-template","safety-reminders","clinical-prompt-templates","term-of-month","ai-case-file"]},{label:"Safety & Institutional",types:["ai-safety","northwell-spotlight","rss-sidebar","humor"]}];function x2(t){const{newsletter:e,editorState:n,rss:r,versions:i,onSetPanel:o}=t,{activePanel:s,selectedBlockId:l}=n,a=l?e.blocks[l]:null;return u.jsxs("div",{style:{width:320,flexShrink:0,display:"flex",flexDirection:"column",background:"var(--color-surface)",borderRight:"1px solid var(--color-border)",overflow:"hidden"},children:[u.jsx("div",{style:{display:"flex",borderBottom:"1px solid var(--color-border)",background:"var(--color-bg)"},children:g2.map(c=>u.jsxs("button",{onClick:()=>o(c.id),title:c.label,style:{flex:1,padding:"10px 4px",display:"flex",flexDirection:"column",alignItems:"center",gap:3,background:"none",border:"none",cursor:"pointer",color:s===c.id?"var(--color-accent)":"var(--color-muted)",borderBottom:s===c.id?"2px solid var(--color-accent)":"2px solid transparent",fontSize:10,fontFamily:"var(--font-body)",fontWeight:600,letterSpacing:"0.06em",textTransform:"uppercase",transition:"all 0.15s"},children:[c.icon,u.jsx("span",{children:c.label})]},c.id))}),u.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"0"},children:[s==="blocks"&&(a?u.jsx(KC,{block:a,newsletter:e,onClose:()=>t.onSelectBlock(null),onUpdateBlock:t.onUpdateBlock,onAddArticle:t.onAddArticle,onUpdateArticle:t.onUpdateArticle,onDeleteArticle:t.onDeleteArticle,onAddQuickHit:t.onAddQuickHit,onUpdateQuickHit:t.onUpdateQuickHit,onDeleteQuickHit:t.onDeleteQuickHit}):u.jsx(v2,{onAddBlock:t.onAddBlock})),s==="settings"&&u.jsx(S2,{newsletter:e,onUpdateMeta:()=>{}}),s==="rss"&&u.jsx(b2,{rss:r,onAddToNewsletter:c=>{const d=e.blockOrder.find(f=>{var p;return((p=e.blocks[f])==null?void 0:p.type)==="article-grid"});d&&t.onAddArticle(d)}}),s==="theme"&&u.jsx(k2,{current:e.theme,onUpdateTheme:t.onUpdateTheme}),s==="export"&&u.jsx(w2,{versions:i,onRestore:t.onRestoreVersion,onDelete:t.onDeleteVersion})]})]})}function v2({onAddBlock:t}){return u.jsxs("div",{style:{padding:16},children:[u.jsxs("div",{style:{marginBottom:12},children:[u.jsx("h3",{style:{fontFamily:"var(--font-display)",fontSize:18,color:"var(--color-text)",margin:"0 0 4px"},children:"Add Block"}),u.jsx("p",{style:{fontFamily:"var(--font-body)",fontSize:12,color:"var(--color-muted)",margin:0},children:"Click to add at the end. Select a block in the canvas to insert after it."})]}),y2.map(e=>u.jsxs("div",{style:{marginBottom:20},children:[u.jsx("div",{style:{fontFamily:"var(--font-mono)",fontSize:10,letterSpacing:"0.18em",textTransform:"uppercase",color:"var(--color-muted)",marginBottom:8,paddingBottom:6,borderBottom:"1px solid var(--color-border)"},children:e.label}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4},children:e.types.map(n=>u.jsxs("button",{onClick:()=>t(n),style:{display:"flex",alignItems:"center",gap:10,padding:"9px 12px",background:"none",border:"1px solid var(--color-border)",borderRadius:8,cursor:"pointer",textAlign:"left",fontFamily:"var(--font-body)",fontSize:13,color:"var(--color-text)",transition:"all 0.12s"},onMouseEnter:r=>{r.currentTarget.style.background="var(--color-bg)",r.currentTarget.style.borderColor="var(--color-accent)"},onMouseLeave:r=>{r.currentTarget.style.background="none",r.currentTarget.style.borderColor="var(--color-border)"},children:[u.jsx("span",{style:{fontSize:16},children:wf[n].split("  ")[0]}),u.jsx("span",{children:wf[n].split("  ").slice(1).join("").trim()}),u.jsx(Lr,{size:12,style:{marginLeft:"auto",color:"var(--color-muted)",flexShrink:0}})]},n))})]},e.label))]})}function S2({newsletter:t,onUpdateMeta:e}){return u.jsxs("div",{style:{padding:16},children:[u.jsx("h3",{style:{fontFamily:"var(--font-display)",fontSize:18,color:"var(--color-text)",margin:"0 0 16px"},children:"Issue Settings"}),u.jsx(T,{label:"Issue Title",children:u.jsx("input",{style:A,defaultValue:t.meta.title,onBlur:n=>e({title:n.target.value})})}),u.jsx(T,{label:"Issue Number",children:u.jsx("input",{style:A,defaultValue:t.meta.issueNumber,onBlur:n=>e({issueNumber:n.target.value})})})]})}function b2({rss:t,onAddToNewsletter:e}){const[n,r]=b.useState(""),[i,o]=b.useState("");return u.jsxs("div",{style:{padding:16},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12},children:[u.jsx("h3",{style:{fontFamily:"var(--font-display)",fontSize:18,color:"var(--color-text)",margin:0},children:"RSS Feeds"}),u.jsxs("button",{onClick:t.refresh,disabled:t.loading,style:{display:"flex",alignItems:"center",gap:6,padding:"6px 12px",background:"var(--color-accent)",border:"none",borderRadius:8,color:"#fff",fontSize:12,fontFamily:"var(--font-body)",cursor:"pointer",opacity:t.loading?.6:1},children:[u.jsx(cC,{size:12,style:{animation:t.loading?"spin 1s linear infinite":"none"}}),t.loading?"Refreshing":"Refresh"]})]}),u.jsx("div",{style:{marginBottom:16},children:t.feeds.map(s=>u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"6px 0",borderBottom:"1px solid var(--color-border)"},children:[u.jsx("input",{type:"checkbox",checked:s.enabled,onChange:()=>t.toggleFeed(s.url),style:{accentColor:"var(--color-accent)",flexShrink:0}}),u.jsx("span",{style:{flex:1,fontFamily:"var(--font-body)",fontSize:12,color:"var(--color-text)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:s.url,children:s.label}),u.jsx("button",{onClick:()=>t.removeFeed(s.url),style:{background:"none",border:"none",cursor:"pointer",color:"var(--color-muted)",padding:2,display:"flex",alignItems:"center"},children:u.jsx(kv,{size:12})})]},s.url))}),u.jsxs("div",{style:{background:"var(--color-bg)",borderRadius:8,padding:12,marginBottom:16},children:[u.jsx("div",{style:{fontFamily:"var(--font-mono)",fontSize:10,letterSpacing:"0.14em",textTransform:"uppercase",color:"var(--color-muted)",marginBottom:8},children:"Add Feed"}),u.jsx("input",{placeholder:"RSS URL",value:n,onChange:s=>r(s.target.value),style:{...A,marginBottom:6}}),u.jsx("input",{placeholder:"Label",value:i,onChange:s=>o(s.target.value),style:{...A,marginBottom:8}}),u.jsx("button",{onClick:()=>{n&&(t.addFeed(n,i||n),r(""),o(""))},style:{width:"100%",padding:"7px 0",background:"var(--color-primary)",border:"none",borderRadius:8,color:"#fff",fontSize:12,fontFamily:"var(--font-body)",cursor:"pointer"},children:"+ Add Feed"})]}),t.items.length>0&&u.jsxs(u.Fragment,{children:[u.jsx("input",{placeholder:"Filter articles",value:t.filter,onChange:s=>t.setFilter(s.target.value),style:{...A,marginBottom:12}}),t.errors.map((s,l)=>u.jsxs("div",{style:{background:"#FEF0EE",border:"1px solid #f5c6c0",borderRadius:8,padding:"8px 12px",marginBottom:8,fontFamily:"var(--font-body)",fontSize:12,color:"#7A1E12"},children:[" ",s]},l)),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:t.items.slice(0,30).map((s,l)=>u.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:8,padding:10,background:"var(--color-surface)"},children:[u.jsx("div",{style:{fontFamily:"var(--font-body)",fontSize:12,fontWeight:600,color:"var(--color-text)",marginBottom:4,lineHeight:1.35},children:s.title}),u.jsxs("div",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",marginBottom:6},children:[s.source,"  ",s.pubDate?new Date(s.pubDate).toLocaleDateString():""]}),u.jsxs("div",{style:{display:"flex",gap:6},children:[u.jsx("button",{onClick:()=>e(s),style:{flex:1,padding:"5px 0",background:"var(--color-accent)",border:"none",borderRadius:6,color:"#fff",fontSize:11,fontFamily:"var(--font-body)",cursor:"pointer"},children:"+ Add to Issue"}),s.link&&u.jsx("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",padding:"5px 8px",border:"1px solid var(--color-border)",borderRadius:6,color:"var(--color-muted)",fontSize:11},children:u.jsx(nC,{size:11})})]})]},l))})]}),t.items.length===0&&!t.loading&&u.jsx("div",{style:{textAlign:"center",padding:"32px 16px",color:"var(--color-muted)",fontFamily:"var(--font-body)",fontSize:13},children:"Press Refresh to load articles"})]})}function k2({current:t,onUpdateTheme:e}){return u.jsxs("div",{style:{padding:16},children:[u.jsx("h3",{style:{fontFamily:"var(--font-display)",fontSize:18,color:"var(--color-text)",margin:"0 0 16px"},children:"Theme"}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:vv.map(n=>u.jsxs("button",{onClick:()=>e(n),style:{display:"flex",alignItems:"center",gap:12,padding:12,background:t.id===n.id?"var(--color-bg)":"var(--color-surface)",border:`2px solid ${t.id===n.id?"var(--color-accent)":"var(--color-border)"}`,borderRadius:10,cursor:"pointer",textAlign:"left"},children:[u.jsx("div",{style:{display:"flex",gap:3,flexShrink:0},children:[n.primary,n.accent,n.background,n.surface].map((r,i)=>u.jsx("div",{style:{width:14,height:14,background:r,borderRadius:3,border:"1px solid rgba(0,0,0,0.1)"}},i))}),u.jsxs("div",{children:[u.jsx("div",{style:{fontFamily:"var(--font-body)",fontSize:13,fontWeight:600,color:"var(--color-text)",marginBottom:2},children:n.name}),u.jsxs("div",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",letterSpacing:"0.08em"},children:[n.primary,"  ",n.accent]})]}),t.id===n.id&&u.jsx("div",{style:{marginLeft:"auto",width:8,height:8,background:"var(--color-accent)",borderRadius:"50%"}})]},n.id))}),u.jsxs("div",{style:{marginTop:20},children:[u.jsx("div",{style:{fontFamily:"var(--font-mono)",fontSize:10,letterSpacing:"0.14em",textTransform:"uppercase",color:"var(--color-muted)",marginBottom:12},children:"Customize"}),[["Primary","primary"],["Accent","accent"],["Background","background"],["Surface","surface"]].map(([n,r])=>u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:10},children:[u.jsx("input",{type:"color",value:String(t[r]),onChange:i=>e({...t,[r]:i.target.value}),style:{width:32,height:32,borderRadius:6,border:"1px solid var(--color-border)",padding:2,cursor:"pointer"}}),u.jsx("span",{style:{flex:1,fontFamily:"var(--font-body)",fontSize:13,color:"var(--color-text)"},children:n}),u.jsx("span",{style:{fontFamily:"var(--font-mono)",fontSize:11,color:"var(--color-muted)"},children:String(t[r])})]},String(r)))]})]})}function w2({versions:t,onRestore:e,onDelete:n}){return u.jsxs("div",{style:{padding:16},children:[u.jsx("h3",{style:{fontFamily:"var(--font-display)",fontSize:18,color:"var(--color-text)",margin:"0 0 4px"},children:"Saved Versions"}),u.jsx("p",{style:{fontFamily:"var(--font-body)",fontSize:12,color:"var(--color-muted)",margin:"0 0 16px"},children:"Up to 20 versions stored in browser."}),t.length===0?u.jsx("div",{style:{textAlign:"center",padding:"32px 16px",color:"var(--color-muted)",fontFamily:"var(--font-body)",fontSize:13},children:"No saved versions yet. Use Save Version in the toolbar."}):u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:t.map(r=>u.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:8,padding:12},children:[u.jsx("div",{style:{fontFamily:"var(--font-body)",fontSize:13,fontWeight:600,color:"var(--color-text)",marginBottom:4},children:r.label}),u.jsx("div",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"var(--color-muted)",marginBottom:10},children:new Date(r.createdAt).toLocaleString()}),u.jsxs("div",{style:{display:"flex",gap:6},children:[u.jsxs("button",{onClick:()=>e(r),style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:6,padding:"6px 0",background:"var(--color-primary)",border:"none",borderRadius:6,color:"#fff",fontSize:12,fontFamily:"var(--font-body)",cursor:"pointer"},children:[u.jsx(uC,{size:11})," Restore"]}),u.jsx("button",{onClick:()=>{confirm("Delete this version?")&&n(r.id)},style:{padding:"6px 10px",background:"none",border:"1px solid var(--color-border)",borderRadius:6,color:"var(--color-muted)",cursor:"pointer",display:"flex",alignItems:"center"},children:u.jsx(So,{size:12})})]})]},r.id))})]})}function T({label:t,children:e,hint:n}){return u.jsxs("div",{style:{marginBottom:14},children:[u.jsx("label",{style:{display:"block",fontFamily:"var(--font-mono)",fontSize:10,letterSpacing:"0.14em",textTransform:"uppercase",color:"var(--color-muted)",marginBottom:6,fontWeight:500},children:t}),e,n&&u.jsx("div",{style:{fontFamily:"var(--font-body)",fontSize:11,color:"var(--color-muted)",marginTop:4},children:n})]})}const A={width:"100%",padding:"8px 10px",background:"var(--color-bg)",border:"1px solid var(--color-border)",borderRadius:8,fontFamily:"var(--font-body)",fontSize:13,color:"var(--color-text)",outline:"none",boxSizing:"border-box"},Z={...A,minHeight:80,resize:"vertical",fontFamily:"var(--font-body)",lineHeight:1.5};function C2(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return b.useMemo(()=>r=>{e.forEach(i=>i(r))},e)}const Jc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function bo(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function th(t){return"nodeType"in t}function kt(t){var e,n;return t?bo(t)?t:th(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function nh(t){const{Document:e}=kt(t);return t instanceof e}function sl(t){return bo(t)?!1:t instanceof kt(t).HTMLElement}function Cv(t){return t instanceof kt(t).SVGElement}function ko(t){return t?bo(t)?t.document:th(t)?nh(t)?t:sl(t)||Cv(t)?t.ownerDocument:document:document:document}const bn=Jc?b.useLayoutEffect:b.useEffect;function rh(t){const e=b.useRef(t);return bn(()=>{e.current=t}),b.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function E2(){const t=b.useRef(null),e=b.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=b.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Fs(t,e){e===void 0&&(e=[t]);const n=b.useRef(t);return bn(()=>{n.current!==t&&(n.current=t)},e),n}function ll(t,e){const n=b.useRef();return b.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function $a(t){const e=rh(t),n=b.useRef(null),r=b.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,r]}function Cf(t){const e=b.useRef();return b.useEffect(()=>{e.current=t},[t]),e.current}let Wu={};function al(t,e){return b.useMemo(()=>{if(e)return e;const n=Wu[t]==null?0:Wu[t]+1;return Wu[t]=n,t+"-"+n},[t,e])}function Ev(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((o,s)=>{const l=Object.entries(s);for(const[a,c]of l){const d=o[a];d!=null&&(o[a]=d+t*c)}return o},{...e})}}const eo=Ev(1),Fa=Ev(-1);function T2(t){return"clientX"in t&&"clientY"in t}function ih(t){if(!t)return!1;const{KeyboardEvent:e}=kt(t.target);return e&&t instanceof e}function M2(t){if(!t)return!1;const{TouchEvent:e}=kt(t.target);return e&&t instanceof e}function Ef(t){if(M2(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return T2(t)?{x:t.clientX,y:t.clientY}:null}const Bs=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Bs.Translate.toString(t),Bs.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),yg="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function j2(t){return t.matches(yg)?t:t.querySelector(yg)}const A2={display:"none"};function D2(t){let{id:e,value:n}=t;return Y.createElement("div",{id:e,style:A2},n)}function R2(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Y.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function I2(){const[t,e]=b.useState("");return{announce:b.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const Tv=b.createContext(null);function O2(t){const e=b.useContext(Tv);b.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function N2(){const[t]=b.useState(()=>new Set),e=b.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[b.useCallback(r=>{let{type:i,event:o}=r;t.forEach(s=>{var l;return(l=s[i])==null?void 0:l.call(s,o)})},[t]),e]}const z2={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},L2={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function P2(t){let{announcements:e=L2,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=z2}=t;const{announce:o,announcement:s}=I2(),l=al("DndLiveRegion"),[a,c]=b.useState(!1);if(b.useEffect(()=>{c(!0)},[]),O2(b.useMemo(()=>({onDragStart(f){let{active:p}=f;o(e.onDragStart({active:p}))},onDragMove(f){let{active:p,over:h}=f;e.onDragMove&&o(e.onDragMove({active:p,over:h}))},onDragOver(f){let{active:p,over:h}=f;o(e.onDragOver({active:p,over:h}))},onDragEnd(f){let{active:p,over:h}=f;o(e.onDragEnd({active:p,over:h}))},onDragCancel(f){let{active:p,over:h}=f;o(e.onDragCancel({active:p,over:h}))}}),[o,e])),!a)return null;const d=Y.createElement(Y.Fragment,null,Y.createElement(D2,{id:r,value:i.draggable}),Y.createElement(R2,{id:l,announcement:s}));return n?Gr.createPortal(d,n):d}var je;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(je||(je={}));function Ba(){}function xg(t,e){return b.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function $2(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return b.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const ln=Object.freeze({x:0,y:0});function F2(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function B2(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function _2(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function H2(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function vg(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const U2=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=vg(e,e.left,e.top),o=[];for(const s of r){const{id:l}=s,a=n.get(l);if(a){const c=F2(vg(a),i);o.push({id:l,data:{droppableContainer:s,value:c}})}}return o.sort(B2)};function V2(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),o=Math.min(e.top+e.height,t.top+t.height),s=i-r,l=o-n;if(r<i&&n<o){const a=e.width*e.height,c=t.width*t.height,d=s*l,f=d/(a+c-d);return Number(f.toFixed(4))}return 0}const W2=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const o of r){const{id:s}=o,l=n.get(s);if(l){const a=V2(l,e);a>0&&i.push({id:s,data:{droppableContainer:o,value:a}})}}return i.sort(_2)};function K2(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function Mv(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:ln}function q2(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.reduce((s,l)=>({...s,top:s.top+t*l.y,bottom:s.bottom+t*l.y,left:s.left+t*l.x,right:s.right+t*l.x}),{...n})}}const J2=q2(1);function G2(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function Q2(t,e,n){const r=G2(e);if(!r)return t;const{scaleX:i,scaleY:o,x:s,y:l}=r,a=t.left-s-(1-i)*parseFloat(n),c=t.top-l-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),d=i?t.width/i:t.width,f=o?t.height/o:t.height;return{width:d,height:f,top:c,right:a+d,bottom:c+f,left:a}}const Y2={ignoreTransform:!1};function wo(t,e){e===void 0&&(e=Y2);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:c,transformOrigin:d}=kt(t).getComputedStyle(t);c&&(n=Q2(n,c,d))}const{top:r,left:i,width:o,height:s,bottom:l,right:a}=n;return{top:r,left:i,width:o,height:s,bottom:l,right:a}}function Sg(t){return wo(t,{ignoreTransform:!0})}function X2(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function Z2(t,e){return e===void 0&&(e=kt(t).getComputedStyle(t)),e.position==="fixed"}function eE(t,e){e===void 0&&(e=kt(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const o=e[i];return typeof o=="string"?n.test(o):!1})}function oh(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(nh(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!sl(i)||Cv(i)||n.includes(i))return n;const o=kt(t).getComputedStyle(i);return i!==t&&eE(i,o)&&n.push(i),Z2(i,o)?n:r(i.parentNode)}return t?r(t):n}function jv(t){const[e]=oh(t,1);return e??null}function Ku(t){return!Jc||!t?null:bo(t)?t:th(t)?nh(t)||t===ko(t).scrollingElement?window:sl(t)?t:null:null}function Av(t){return bo(t)?t.scrollX:t.scrollLeft}function Dv(t){return bo(t)?t.scrollY:t.scrollTop}function Tf(t){return{x:Av(t),y:Dv(t)}}var Oe;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Oe||(Oe={}));function Rv(t){return!Jc||!t?!1:t===document.scrollingElement}function Iv(t){const e={x:0,y:0},n=Rv(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,o=t.scrollLeft<=e.x,s=t.scrollTop>=r.y,l=t.scrollLeft>=r.x;return{isTop:i,isLeft:o,isBottom:s,isRight:l,maxScroll:r,minScroll:e}}const tE={x:.2,y:.2};function nE(t,e,n,r,i){let{top:o,left:s,right:l,bottom:a}=n;r===void 0&&(r=10),i===void 0&&(i=tE);const{isTop:c,isBottom:d,isLeft:f,isRight:p}=Iv(t),h={x:0,y:0},m={x:0,y:0},g={height:e.height*i.y,width:e.width*i.x};return!c&&o<=e.top+g.height?(h.y=Oe.Backward,m.y=r*Math.abs((e.top+g.height-o)/g.height)):!d&&a>=e.bottom-g.height&&(h.y=Oe.Forward,m.y=r*Math.abs((e.bottom-g.height-a)/g.height)),!p&&l>=e.right-g.width?(h.x=Oe.Forward,m.x=r*Math.abs((e.right-g.width-l)/g.width)):!f&&s<=e.left+g.width&&(h.x=Oe.Backward,m.x=r*Math.abs((e.left+g.width-s)/g.width)),{direction:h,speed:m}}function rE(t){if(t===document.scrollingElement){const{innerWidth:o,innerHeight:s}=window;return{top:0,left:0,right:o,bottom:s,width:o,height:s}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function Ov(t){return t.reduce((e,n)=>eo(e,Tf(n)),ln)}function iE(t){return t.reduce((e,n)=>e+Av(n),0)}function oE(t){return t.reduce((e,n)=>e+Dv(n),0)}function sE(t,e){if(e===void 0&&(e=wo),!t)return;const{top:n,left:r,bottom:i,right:o}=e(t);jv(t)&&(i<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const lE=[["x",["left","right"],iE],["y",["top","bottom"],oE]];class sh{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=oh(n),i=Ov(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,s,l]of lE)for(const a of s)Object.defineProperty(this,a,{get:()=>{const c=l(r),d=i[o]-c;return this.rect[a]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class is{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function aE(t){const{EventTarget:e}=kt(t);return t instanceof e?t:ko(t)}function qu(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Ft;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Ft||(Ft={}));function bg(t){t.preventDefault()}function cE(t){t.stopPropagation()}var ee;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(ee||(ee={}));const Nv={start:[ee.Space,ee.Enter],cancel:[ee.Esc],end:[ee.Space,ee.Enter,ee.Tab]},uE=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case ee.Right:return{...n,x:n.x+25};case ee.Left:return{...n,x:n.x-25};case ee.Down:return{...n,y:n.y+25};case ee.Up:return{...n,y:n.y-25}}};class lh{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new is(ko(n)),this.windowListeners=new is(kt(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ft.Resize,this.handleCancel),this.windowListeners.add(Ft.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ft.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&sE(r),n(ln)}handleKeyDown(e){if(ih(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:o=Nv,coordinateGetter:s=uE,scrollBehavior:l="smooth"}=i,{code:a}=e;if(o.end.includes(a)){this.handleEnd(e);return}if(o.cancel.includes(a)){this.handleCancel(e);return}const{collisionRect:c}=r.current,d=c?{x:c.left,y:c.top}:ln;this.referenceCoordinates||(this.referenceCoordinates=d);const f=s(e,{active:n,context:r.current,currentCoordinates:d});if(f){const p=Fa(f,d),h={x:0,y:0},{scrollableAncestors:m}=r.current;for(const g of m){const v=e.code,{isTop:y,isRight:x,isLeft:S,isBottom:k,maxScroll:w,minScroll:E}=Iv(g),C=rE(g),j={x:Math.min(v===ee.Right?C.right-C.width/2:C.right,Math.max(v===ee.Right?C.left:C.left+C.width/2,f.x)),y:Math.min(v===ee.Down?C.bottom-C.height/2:C.bottom,Math.max(v===ee.Down?C.top:C.top+C.height/2,f.y))},O=v===ee.Right&&!x||v===ee.Left&&!S,N=v===ee.Down&&!k||v===ee.Up&&!y;if(O&&j.x!==f.x){const K=g.scrollLeft+p.x,de=v===ee.Right&&K<=w.x||v===ee.Left&&K>=E.x;if(de&&!p.y){g.scrollTo({left:K,behavior:l});return}de?h.x=g.scrollLeft-K:h.x=v===ee.Right?g.scrollLeft-w.x:g.scrollLeft-E.x,h.x&&g.scrollBy({left:-h.x,behavior:l});break}else if(N&&j.y!==f.y){const K=g.scrollTop+p.y,de=v===ee.Down&&K<=w.y||v===ee.Up&&K>=E.y;if(de&&!p.x){g.scrollTo({top:K,behavior:l});return}de?h.y=g.scrollTop-K:h.y=v===ee.Down?g.scrollTop-w.y:g.scrollTop-E.y,h.y&&g.scrollBy({top:-h.y,behavior:l});break}}this.handleMove(e,eo(Fa(f,this.referenceCoordinates),h))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}lh.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=Nv,onActivation:i}=e,{active:o}=n;const{code:s}=t.nativeEvent;if(r.start.includes(s)){const l=o.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function kg(t){return!!(t&&"distance"in t)}function wg(t){return!!(t&&"delay"in t)}class ah{constructor(e,n,r){var i;r===void 0&&(r=aE(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:o}=e,{target:s}=o;this.props=e,this.events=n,this.document=ko(s),this.documentListeners=new is(this.document),this.listeners=new is(r),this.windowListeners=new is(kt(s)),this.initialCoordinates=(i=Ef(o))!=null?i:ln,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Ft.Resize,this.handleCancel),this.windowListeners.add(Ft.DragStart,bg),this.windowListeners.add(Ft.VisibilityChange,this.handleCancel),this.windowListeners.add(Ft.ContextMenu,bg),this.documentListeners.add(Ft.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(wg(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(kg(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ft.Click,cE,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ft.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:o}=this,{onMove:s,options:{activationConstraint:l}}=o;if(!i)return;const a=(n=Ef(e))!=null?n:ln,c=Fa(i,a);if(!r&&l){if(kg(l)){if(l.tolerance!=null&&qu(c,l.tolerance))return this.handleCancel();if(qu(c,l.distance))return this.handleStart()}if(wg(l)&&qu(c,l.tolerance))return this.handleCancel();this.handlePending(l,c);return}e.cancelable&&e.preventDefault(),s(a)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===ee.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const dE={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class ch extends ah{constructor(e){const{event:n}=e,r=ko(n.target);super(e,dE,r)}}ch.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const fE={move:{name:"mousemove"},end:{name:"mouseup"}};var Mf;(function(t){t[t.RightClick=2]="RightClick"})(Mf||(Mf={}));class pE extends ah{constructor(e){super(e,fE,ko(e.event.target))}}pE.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Mf.RightClick?!1:(r==null||r({event:n}),!0)}}];const Ju={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class hE extends ah{constructor(e){super(e,Ju)}static setup(){return window.addEventListener(Ju.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Ju.move.name,e)};function e(){}}}hE.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var ss;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(ss||(ss={}));var _a;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(_a||(_a={}));function mE(t){let{acceleration:e,activator:n=ss.Pointer,canScroll:r,draggingRect:i,enabled:o,interval:s=5,order:l=_a.TreeOrder,pointerCoordinates:a,scrollableAncestors:c,scrollableAncestorRects:d,delta:f,threshold:p}=t;const h=yE({delta:f,disabled:!o}),[m,g]=E2(),v=b.useRef({x:0,y:0}),y=b.useRef({x:0,y:0}),x=b.useMemo(()=>{switch(n){case ss.Pointer:return a?{top:a.y,bottom:a.y,left:a.x,right:a.x}:null;case ss.DraggableRect:return i}},[n,i,a]),S=b.useRef(null),k=b.useCallback(()=>{const E=S.current;if(!E)return;const C=v.current.x*y.current.x,j=v.current.y*y.current.y;E.scrollBy(C,j)},[]),w=b.useMemo(()=>l===_a.TreeOrder?[...c].reverse():c,[l,c]);b.useEffect(()=>{if(!o||!c.length||!x){g();return}for(const E of w){if((r==null?void 0:r(E))===!1)continue;const C=c.indexOf(E),j=d[C];if(!j)continue;const{direction:O,speed:N}=nE(E,j,x,e,p);for(const K of["x","y"])h[K][O[K]]||(N[K]=0,O[K]=0);if(N.x>0||N.y>0){g(),S.current=E,m(k,s),v.current=N,y.current=O;return}}v.current={x:0,y:0},y.current={x:0,y:0},g()},[e,k,r,g,o,s,JSON.stringify(x),JSON.stringify(h),m,c,w,d,JSON.stringify(p)])}const gE={x:{[Oe.Backward]:!1,[Oe.Forward]:!1},y:{[Oe.Backward]:!1,[Oe.Forward]:!1}};function yE(t){let{delta:e,disabled:n}=t;const r=Cf(e);return ll(i=>{if(n||!r||!i)return gE;const o={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Oe.Backward]:i.x[Oe.Backward]||o.x===-1,[Oe.Forward]:i.x[Oe.Forward]||o.x===1},y:{[Oe.Backward]:i.y[Oe.Backward]||o.y===-1,[Oe.Forward]:i.y[Oe.Forward]||o.y===1}}},[n,e,r])}function xE(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return ll(i=>{var o;return e==null?null:(o=r??i)!=null?o:null},[r,e])}function vE(t,e){return b.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,o=i.activators.map(s=>({eventName:s.eventName,handler:e(s.handler,r)}));return[...n,...o]},[]),[t,e])}var _s;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(_s||(_s={}));var jf;(function(t){t.Optimized="optimized"})(jf||(jf={}));const Cg=new Map;function SE(t,e){let{dragging:n,dependencies:r,config:i}=e;const[o,s]=b.useState(null),{frequency:l,measure:a,strategy:c}=i,d=b.useRef(t),f=v(),p=Fs(f),h=b.useCallback(function(y){y===void 0&&(y=[]),!p.current&&s(x=>x===null?y:x.concat(y.filter(S=>!x.includes(S))))},[p]),m=b.useRef(null),g=ll(y=>{if(f&&!n)return Cg;if(!y||y===Cg||d.current!==t||o!=null){const x=new Map;for(let S of t){if(!S)continue;if(o&&o.length>0&&!o.includes(S.id)&&S.rect.current){x.set(S.id,S.rect.current);continue}const k=S.node.current,w=k?new sh(a(k),k):null;S.rect.current=w,w&&x.set(S.id,w)}return x}return y},[t,o,n,f,a]);return b.useEffect(()=>{d.current=t},[t]),b.useEffect(()=>{f||h()},[n,f]),b.useEffect(()=>{o&&o.length>0&&s(null)},[JSON.stringify(o)]),b.useEffect(()=>{f||typeof l!="number"||m.current!==null||(m.current=setTimeout(()=>{h(),m.current=null},l))},[l,f,h,...r]),{droppableRects:g,measureDroppableContainers:h,measuringScheduled:o!=null};function v(){switch(c){case _s.Always:return!1;case _s.BeforeDragging:return n;default:return!n}}}function zv(t,e){return ll(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function bE(t,e){return zv(t,e)}function kE(t){let{callback:e,disabled:n}=t;const r=rh(e),i=b.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return b.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Gc(t){let{callback:e,disabled:n}=t;const r=rh(e),i=b.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return b.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function wE(t){return new sh(wo(t),t)}function Eg(t,e,n){e===void 0&&(e=wE);const[r,i]=b.useState(null);function o(){i(a=>{if(!t)return null;if(t.isConnected===!1){var c;return(c=a??n)!=null?c:null}const d=e(t);return JSON.stringify(a)===JSON.stringify(d)?a:d})}const s=kE({callback(a){if(t)for(const c of a){const{type:d,target:f}=c;if(d==="childList"&&f instanceof HTMLElement&&f.contains(t)){o();break}}}}),l=Gc({callback:o});return bn(()=>{o(),t?(l==null||l.observe(t),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),s==null||s.disconnect())},[t]),r}function CE(t){const e=zv(t);return Mv(t,e)}const Tg=[];function EE(t){const e=b.useRef(t),n=ll(r=>t?r&&r!==Tg&&t&&e.current&&t.parentNode===e.current.parentNode?r:oh(t):Tg,[t]);return b.useEffect(()=>{e.current=t},[t]),n}function TE(t){const[e,n]=b.useState(null),r=b.useRef(t),i=b.useCallback(o=>{const s=Ku(o.target);s&&n(l=>l?(l.set(s,Tf(s)),new Map(l)):null)},[]);return b.useEffect(()=>{const o=r.current;if(t!==o){s(o);const l=t.map(a=>{const c=Ku(a);return c?(c.addEventListener("scroll",i,{passive:!0}),[c,Tf(c)]):null}).filter(a=>a!=null);n(l.length?new Map(l):null),r.current=t}return()=>{s(t),s(o)};function s(l){l.forEach(a=>{const c=Ku(a);c==null||c.removeEventListener("scroll",i)})}},[i,t]),b.useMemo(()=>t.length?e?Array.from(e.values()).reduce((o,s)=>eo(o,s),ln):Ov(t):ln,[t,e])}function Mg(t,e){e===void 0&&(e=[]);const n=b.useRef(null);return b.useEffect(()=>{n.current=null},e),b.useEffect(()=>{const r=t!==ln;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Fa(t,n.current):ln}function ME(t){b.useEffect(()=>{if(!Jc)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function jE(t,e){return b.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:o}=r;return n[i]=s=>{o(s,e)},n},{}),[t,e])}function Lv(t){return b.useMemo(()=>t?X2(t):null,[t])}const jg=[];function AE(t,e){e===void 0&&(e=wo);const[n]=t,r=Lv(n?kt(n):null),[i,o]=b.useState(jg);function s(){o(()=>t.length?t.map(a=>Rv(a)?r:new sh(e(a),a)):jg)}const l=Gc({callback:s});return bn(()=>{l==null||l.disconnect(),s(),t.forEach(a=>l==null?void 0:l.observe(a))},[t]),i}function DE(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return sl(e)?e:t}function RE(t){let{measure:e}=t;const[n,r]=b.useState(null),i=b.useCallback(c=>{for(const{target:d}of c)if(sl(d)){r(f=>{const p=e(d);return f?{...f,width:p.width,height:p.height}:p});break}},[e]),o=Gc({callback:i}),s=b.useCallback(c=>{const d=DE(c);o==null||o.disconnect(),d&&(o==null||o.observe(d)),r(d?e(d):null)},[e,o]),[l,a]=$a(s);return b.useMemo(()=>({nodeRef:l,rect:n,setRef:a}),[n,l,a])}const IE=[{sensor:ch,options:{}},{sensor:lh,options:{}}],OE={current:{}},ia={draggable:{measure:Sg},droppable:{measure:Sg,strategy:_s.WhileDragging,frequency:jf.Optimized},dragOverlay:{measure:wo}};class ls extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const NE={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ls,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Ba},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:ia,measureDroppableContainers:Ba,windowRect:null,measuringScheduled:!1},zE={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Ba,draggableNodes:new Map,over:null,measureDroppableContainers:Ba},Qc=b.createContext(zE),Pv=b.createContext(NE);function LE(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ls}}}function PE(t,e){switch(e.type){case je.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case je.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case je.DragEnd:case je.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case je.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new ls(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case je.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,o=t.droppable.containers.get(n);if(!o||r!==o.key)return t;const s=new ls(t.droppable.containers);return s.set(n,{...o,disabled:i}),{...t,droppable:{...t.droppable,containers:s}}}case je.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new ls(t.droppable.containers);return o.delete(n),{...t,droppable:{...t.droppable,containers:o}}}default:return t}}function $E(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=b.useContext(Qc),o=Cf(r),s=Cf(n==null?void 0:n.id);return b.useEffect(()=>{if(!e&&!r&&o&&s!=null){if(!ih(o)||document.activeElement===o.target)return;const l=i.get(s);if(!l)return;const{activatorNode:a,node:c}=l;if(!a.current&&!c.current)return;requestAnimationFrame(()=>{for(const d of[a.current,c.current]){if(!d)continue;const f=j2(d);if(f){f.focus();break}}})}},[r,e,i,s,o]),null}function FE(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,o)=>o({transform:i,...r}),n):n}function BE(t){return b.useMemo(()=>({draggable:{...ia.draggable,...t==null?void 0:t.draggable},droppable:{...ia.droppable,...t==null?void 0:t.droppable},dragOverlay:{...ia.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function _E(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const o=b.useRef(!1),{x:s,y:l}=typeof i=="boolean"?{x:i,y:i}:i;bn(()=>{if(!s&&!l||!e){o.current=!1;return}if(o.current||!r)return;const c=e==null?void 0:e.node.current;if(!c||c.isConnected===!1)return;const d=n(c),f=Mv(d,r);if(s||(f.x=0),l||(f.y=0),o.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=jv(c);p&&p.scrollBy({top:f.y,left:f.x})}},[e,s,l,r,n])}const $v=b.createContext({...ln,scaleX:1,scaleY:1});var or;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(or||(or={}));const HE=b.memo(function(e){var n,r,i,o;let{id:s,accessibility:l,autoScroll:a=!0,children:c,sensors:d=IE,collisionDetection:f=W2,measuring:p,modifiers:h,...m}=e;const g=b.useReducer(PE,void 0,LE),[v,y]=g,[x,S]=N2(),[k,w]=b.useState(or.Uninitialized),E=k===or.Initialized,{draggable:{active:C,nodes:j,translate:O},droppable:{containers:N}}=v,K=C!=null?j.get(C):null,de=b.useRef({initial:null,translated:null}),he=b.useMemo(()=>{var Ye;return C!=null?{id:C,data:(Ye=K==null?void 0:K.data)!=null?Ye:OE,rect:de}:null},[C,K]),oe=b.useRef(null),[pt,Fe]=b.useState(null),[le,z]=b.useState(null),_=Fs(m,Object.values(m)),V=al("DndDescribedBy",s),ne=b.useMemo(()=>N.getEnabled(),[N]),U=BE(p),{droppableRects:fe,measureDroppableContainers:ot,measuringScheduled:Cn}=SE(ne,{dragging:E,dependencies:[O.x,O.y],config:U.droppable}),Ce=xE(j,C),En=b.useMemo(()=>le?Ef(le):null,[le]),qn=XS(),Tn=bE(Ce,U.draggable.measure);_E({activeNode:C!=null?j.get(C):null,config:qn.layoutShiftCompensation,initialRect:Tn,measure:U.draggable.measure});const re=Eg(Ce,U.draggable.measure,Tn),Eo=Eg(Ce?Ce.parentElement:null),cn=b.useRef({activatorEvent:null,active:null,activeNode:Ce,collisionRect:null,collisions:null,droppableRects:fe,draggableNodes:j,draggingNode:null,draggingNodeRect:null,droppableContainers:N,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ki=N.getNodeFor((n=cn.current.over)==null?void 0:n.id),Mn=RE({measure:U.dragOverlay.measure}),wi=(r=Mn.nodeRef.current)!=null?r:Ce,Ci=E?(i=Mn.rect)!=null?i:re:null,Kh=!!(Mn.nodeRef.current&&Mn.rect),qh=CE(Kh?null:re),du=Lv(wi?kt(wi):null),Jn=EE(E?ki??Ce:null),fl=AE(Jn),pl=FE(h,{transform:{x:O.x-qh.x,y:O.y-qh.y,scaleX:1,scaleY:1},activatorEvent:le,active:he,activeNodeRect:re,containerNodeRect:Eo,draggingNodeRect:Ci,over:cn.current.over,overlayNodeRect:Mn.rect,scrollableAncestors:Jn,scrollableAncestorRects:fl,windowRect:du}),Jh=En?eo(En,O):null,Gh=TE(Jn),WS=Mg(Gh),KS=Mg(Gh,[re]),Ei=eo(pl,WS),Ti=Ci?J2(Ci,pl):null,To=he&&Ti?f({active:he,collisionRect:Ti,droppableRects:fe,droppableContainers:ne,pointerCoordinates:Jh}):null,Qh=H2(To,"id"),[Gn,Yh]=b.useState(null),qS=Kh?pl:eo(pl,KS),JS=K2(qS,(o=Gn==null?void 0:Gn.rect)!=null?o:null,re),fu=b.useRef(null),Xh=b.useCallback((Ye,wt)=>{let{sensor:Ct,options:Qn}=wt;if(oe.current==null)return;const Lt=j.get(oe.current);if(!Lt)return;const Et=Ye.nativeEvent,un=new Ct({active:oe.current,activeNode:Lt,event:Et,options:Qn,context:cn,onAbort(Be){if(!j.get(Be))return;const{onDragAbort:dn}=_.current,jn={id:Be};dn==null||dn(jn),x({type:"onDragAbort",event:jn})},onPending(Be,Yn,dn,jn){if(!j.get(Be))return;const{onDragPending:jo}=_.current,Xn={id:Be,constraint:Yn,initialCoordinates:dn,offset:jn};jo==null||jo(Xn),x({type:"onDragPending",event:Xn})},onStart(Be){const Yn=oe.current;if(Yn==null)return;const dn=j.get(Yn);if(!dn)return;const{onDragStart:jn}=_.current,Mo={activatorEvent:Et,active:{id:Yn,data:dn.data,rect:de}};Gr.unstable_batchedUpdates(()=>{jn==null||jn(Mo),w(or.Initializing),y({type:je.DragStart,initialCoordinates:Be,active:Yn}),x({type:"onDragStart",event:Mo}),Fe(fu.current),z(Et)})},onMove(Be){y({type:je.DragMove,coordinates:Be})},onEnd:Mi(je.DragEnd),onCancel:Mi(je.DragCancel)});fu.current=un;function Mi(Be){return async function(){const{active:dn,collisions:jn,over:Mo,scrollAdjustedTranslate:jo}=cn.current;let Xn=null;if(dn&&jo){const{cancelDrop:Ao}=_.current;Xn={activatorEvent:Et,active:dn,collisions:jn,delta:jo,over:Mo},Be===je.DragEnd&&typeof Ao=="function"&&await Promise.resolve(Ao(Xn))&&(Be=je.DragCancel)}oe.current=null,Gr.unstable_batchedUpdates(()=>{y({type:Be}),w(or.Uninitialized),Yh(null),Fe(null),z(null),fu.current=null;const Ao=Be===je.DragEnd?"onDragEnd":"onDragCancel";if(Xn){const pu=_.current[Ao];pu==null||pu(Xn),x({type:Ao,event:Xn})}})}}},[j]),GS=b.useCallback((Ye,wt)=>(Ct,Qn)=>{const Lt=Ct.nativeEvent,Et=j.get(Qn);if(oe.current!==null||!Et||Lt.dndKit||Lt.defaultPrevented)return;const un={active:Et};Ye(Ct,wt.options,un)===!0&&(Lt.dndKit={capturedBy:wt.sensor},oe.current=Qn,Xh(Ct,wt))},[j,Xh]),Zh=vE(d,GS);ME(d),bn(()=>{re&&k===or.Initializing&&w(or.Initialized)},[re,k]),b.useEffect(()=>{const{onDragMove:Ye}=_.current,{active:wt,activatorEvent:Ct,collisions:Qn,over:Lt}=cn.current;if(!wt||!Ct)return;const Et={active:wt,activatorEvent:Ct,collisions:Qn,delta:{x:Ei.x,y:Ei.y},over:Lt};Gr.unstable_batchedUpdates(()=>{Ye==null||Ye(Et),x({type:"onDragMove",event:Et})})},[Ei.x,Ei.y]),b.useEffect(()=>{const{active:Ye,activatorEvent:wt,collisions:Ct,droppableContainers:Qn,scrollAdjustedTranslate:Lt}=cn.current;if(!Ye||oe.current==null||!wt||!Lt)return;const{onDragOver:Et}=_.current,un=Qn.get(Qh),Mi=un&&un.rect.current?{id:un.id,rect:un.rect.current,data:un.data,disabled:un.disabled}:null,Be={active:Ye,activatorEvent:wt,collisions:Ct,delta:{x:Lt.x,y:Lt.y},over:Mi};Gr.unstable_batchedUpdates(()=>{Yh(Mi),Et==null||Et(Be),x({type:"onDragOver",event:Be})})},[Qh]),bn(()=>{cn.current={activatorEvent:le,active:he,activeNode:Ce,collisionRect:Ti,collisions:To,droppableRects:fe,draggableNodes:j,draggingNode:wi,draggingNodeRect:Ci,droppableContainers:N,over:Gn,scrollableAncestors:Jn,scrollAdjustedTranslate:Ei},de.current={initial:Ci,translated:Ti}},[he,Ce,To,Ti,j,wi,Ci,fe,N,Gn,Jn,Ei]),mE({...qn,delta:O,draggingRect:Ti,pointerCoordinates:Jh,scrollableAncestors:Jn,scrollableAncestorRects:fl});const QS=b.useMemo(()=>({active:he,activeNode:Ce,activeNodeRect:re,activatorEvent:le,collisions:To,containerNodeRect:Eo,dragOverlay:Mn,draggableNodes:j,droppableContainers:N,droppableRects:fe,over:Gn,measureDroppableContainers:ot,scrollableAncestors:Jn,scrollableAncestorRects:fl,measuringConfiguration:U,measuringScheduled:Cn,windowRect:du}),[he,Ce,re,le,To,Eo,Mn,j,N,fe,Gn,ot,Jn,fl,U,Cn,du]),YS=b.useMemo(()=>({activatorEvent:le,activators:Zh,active:he,activeNodeRect:re,ariaDescribedById:{draggable:V},dispatch:y,draggableNodes:j,over:Gn,measureDroppableContainers:ot}),[le,Zh,he,re,y,V,j,Gn,ot]);return Y.createElement(Tv.Provider,{value:S},Y.createElement(Qc.Provider,{value:YS},Y.createElement(Pv.Provider,{value:QS},Y.createElement($v.Provider,{value:JS},c)),Y.createElement($E,{disabled:(l==null?void 0:l.restoreFocus)===!1})),Y.createElement(P2,{...l,hiddenTextDescribedById:V}));function XS(){const Ye=(pt==null?void 0:pt.autoScrollEnabled)===!1,wt=typeof a=="object"?a.enabled===!1:a===!1,Ct=E&&!Ye&&!wt;return typeof a=="object"?{...a,enabled:Ct}:{enabled:Ct}}}),UE=b.createContext(null),Ag="button",VE="Draggable";function WE(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const o=al(VE),{activators:s,activatorEvent:l,active:a,activeNodeRect:c,ariaDescribedById:d,draggableNodes:f,over:p}=b.useContext(Qc),{role:h=Ag,roleDescription:m="draggable",tabIndex:g=0}=i??{},v=(a==null?void 0:a.id)===e,y=b.useContext(v?$v:UE),[x,S]=$a(),[k,w]=$a(),E=jE(s,e),C=Fs(n);bn(()=>(f.set(e,{id:e,key:o,node:x,activatorNode:k,data:C}),()=>{const O=f.get(e);O&&O.key===o&&f.delete(e)}),[f,e]);const j=b.useMemo(()=>({role:h,tabIndex:g,"aria-disabled":r,"aria-pressed":v&&h===Ag?!0:void 0,"aria-roledescription":m,"aria-describedby":d.draggable}),[r,h,g,v,m,d.draggable]);return{active:a,activatorEvent:l,activeNodeRect:c,attributes:j,isDragging:v,listeners:r?void 0:E,node:x,over:p,setNodeRef:S,setActivatorNodeRef:w,transform:y}}function KE(){return b.useContext(Pv)}const qE="Droppable",JE={timeout:25};function GE(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const o=al(qE),{active:s,dispatch:l,over:a,measureDroppableContainers:c}=b.useContext(Qc),d=b.useRef({disabled:n}),f=b.useRef(!1),p=b.useRef(null),h=b.useRef(null),{disabled:m,updateMeasurementsFor:g,timeout:v}={...JE,...i},y=Fs(g??r),x=b.useCallback(()=>{if(!f.current){f.current=!0;return}h.current!=null&&clearTimeout(h.current),h.current=setTimeout(()=>{c(Array.isArray(y.current)?y.current:[y.current]),h.current=null},v)},[v]),S=Gc({callback:x,disabled:m||!s}),k=b.useCallback((j,O)=>{S&&(O&&(S.unobserve(O),f.current=!1),j&&S.observe(j))},[S]),[w,E]=$a(k),C=Fs(e);return b.useEffect(()=>{!S||!w.current||(S.disconnect(),f.current=!1,S.observe(w.current))},[w,S]),b.useEffect(()=>(l({type:je.RegisterDroppable,element:{id:r,key:o,disabled:n,node:w,rect:p,data:C}}),()=>l({type:je.UnregisterDroppable,key:o,id:r})),[r]),b.useEffect(()=>{n!==d.current.disabled&&(l({type:je.SetDroppableDisabled,id:r,key:o,disabled:n}),d.current.disabled=n)},[r,o,n,l]),{active:s,rect:p,isOver:(a==null?void 0:a.id)===r,node:w,over:a,setNodeRef:E}}function Fv(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function QE(t,e){return t.reduce((n,r,i)=>{const o=e.get(r);return o&&(n[i]=o),n},Array(t.length))}function Ol(t){return t!==null&&t>=0}function YE(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function XE(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const Bv=t=>{let{rects:e,activeIndex:n,overIndex:r,index:i}=t;const o=Fv(e,r,n),s=e[i],l=o[i];return!l||!s?null:{x:l.left-s.left,y:l.top-s.top,scaleX:l.width/s.width,scaleY:l.height/s.height}},Nl={scaleX:1,scaleY:1},ZE=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:i,rects:o,overIndex:s}=t;const l=(e=o[n])!=null?e:r;if(!l)return null;if(i===n){const c=o[s];return c?{x:0,y:n<s?c.top+c.height-(l.top+l.height):c.top-l.top,...Nl}:null}const a=eT(o,i,n);return i>n&&i<=s?{x:0,y:-l.height-a,...Nl}:i<n&&i>=s?{x:0,y:l.height+a,...Nl}:{x:0,y:0,...Nl}};function eT(t,e,n){const r=t[e],i=t[e-1],o=t[e+1];return r?n<e?i?r.top-(i.top+i.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const _v="Sortable",Hv=Y.createContext({activeIndex:-1,containerId:_v,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Bv,disabled:{draggable:!1,droppable:!1}});function tT(t){let{children:e,id:n,items:r,strategy:i=Bv,disabled:o=!1}=t;const{active:s,dragOverlay:l,droppableRects:a,over:c,measureDroppableContainers:d}=KE(),f=al(_v,n),p=l.rect!==null,h=b.useMemo(()=>r.map(E=>typeof E=="object"&&"id"in E?E.id:E),[r]),m=s!=null,g=s?h.indexOf(s.id):-1,v=c?h.indexOf(c.id):-1,y=b.useRef(h),x=!YE(h,y.current),S=v!==-1&&g===-1||x,k=XE(o);bn(()=>{x&&m&&d(h)},[x,h,m,d]),b.useEffect(()=>{y.current=h},[h]);const w=b.useMemo(()=>({activeIndex:g,containerId:f,disabled:k,disableTransforms:S,items:h,overIndex:v,useDragOverlay:p,sortedRects:QE(h,a),strategy:i}),[g,f,k.draggable,k.droppable,S,h,v,a,p,i]);return Y.createElement(Hv.Provider,{value:w},e)}const nT=t=>{let{id:e,items:n,activeIndex:r,overIndex:i}=t;return Fv(n,r,i).indexOf(e)},rT=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:i,items:o,newIndex:s,previousItems:l,previousContainerId:a,transition:c}=t;return!c||!r||l!==o&&i===s?!1:n?!0:s!==i&&e===a},iT={duration:200,easing:"ease"},Uv="transform",oT=Bs.Transition.toString({property:Uv,duration:0,easing:"linear"}),sT={roleDescription:"sortable"};function lT(t){let{disabled:e,index:n,node:r,rect:i}=t;const[o,s]=b.useState(null),l=b.useRef(n);return bn(()=>{if(!e&&n!==l.current&&r.current){const a=i.current;if(a){const c=wo(r.current,{ignoreTransform:!0}),d={x:a.left-c.left,y:a.top-c.top,scaleX:a.width/c.width,scaleY:a.height/c.height};(d.x||d.y)&&s(d)}}n!==l.current&&(l.current=n)},[e,n,r,i]),b.useEffect(()=>{o&&s(null)},[o]),o}function aT(t){let{animateLayoutChanges:e=rT,attributes:n,disabled:r,data:i,getNewIndex:o=nT,id:s,strategy:l,resizeObserverConfig:a,transition:c=iT}=t;const{items:d,containerId:f,activeIndex:p,disabled:h,disableTransforms:m,sortedRects:g,overIndex:v,useDragOverlay:y,strategy:x}=b.useContext(Hv),S=cT(r,h),k=d.indexOf(s),w=b.useMemo(()=>({sortable:{containerId:f,index:k,items:d},...i}),[f,i,k,d]),E=b.useMemo(()=>d.slice(d.indexOf(s)),[d,s]),{rect:C,node:j,isOver:O,setNodeRef:N}=GE({id:s,data:w,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:E,...a}}),{active:K,activatorEvent:de,activeNodeRect:he,attributes:oe,setNodeRef:pt,listeners:Fe,isDragging:le,over:z,setActivatorNodeRef:_,transform:V}=WE({id:s,data:w,attributes:{...sT,...n},disabled:S.draggable}),ne=C2(N,pt),U=!!K,fe=U&&!m&&Ol(p)&&Ol(v),ot=!y&&le,Cn=ot&&fe?V:null,En=fe?Cn??(l??x)({rects:g,activeNodeRect:he,activeIndex:p,overIndex:v,index:k}):null,qn=Ol(p)&&Ol(v)?o({id:s,items:d,activeIndex:p,overIndex:v}):k,Tn=K==null?void 0:K.id,re=b.useRef({activeId:Tn,items:d,newIndex:qn,containerId:f}),Eo=d!==re.current.items,cn=e({active:K,containerId:f,isDragging:le,isSorting:U,id:s,index:k,items:d,newIndex:re.current.newIndex,previousItems:re.current.items,previousContainerId:re.current.containerId,transition:c,wasDragging:re.current.activeId!=null}),ki=lT({disabled:!cn,index:k,node:j,rect:C});return b.useEffect(()=>{U&&re.current.newIndex!==qn&&(re.current.newIndex=qn),f!==re.current.containerId&&(re.current.containerId=f),d!==re.current.items&&(re.current.items=d)},[U,qn,f,d]),b.useEffect(()=>{if(Tn===re.current.activeId)return;if(Tn&&!re.current.activeId){re.current.activeId=Tn;return}const wi=setTimeout(()=>{re.current.activeId=Tn},50);return()=>clearTimeout(wi)},[Tn]),{active:K,activeIndex:p,attributes:oe,data:w,rect:C,index:k,newIndex:qn,items:d,isOver:O,isSorting:U,isDragging:le,listeners:Fe,node:j,overIndex:v,over:z,setNodeRef:ne,setActivatorNodeRef:_,setDroppableNodeRef:N,setDraggableNodeRef:pt,transform:ki??En,transition:Mn()};function Mn(){if(ki||Eo&&re.current.newIndex===k)return oT;if(!(ot&&!ih(de)||!c)&&(U||cn))return Bs.Transition.toString({...c,property:Uv})}}function cT(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}ee.Down,ee.Right,ee.Up,ee.Left;function B({value:t,placeholder:e,multiline:n=!1,style:r,className:i,onCommit:o}){const s=b.useRef(null),l=b.useRef(t??""),[a,c]=b.useState(t??"");b.useEffect(()=>{l.current=t??"",c(t??""),s.current&&s.current.innerText!==(t??"")&&(s.current.innerText=t??"")},[t]);const d=()=>{const p=s.current?s.current.innerText:a;l.current=p,o(p)},f=()=>{const p=l.current??"";c(p),s.current&&(s.current.innerText=p)};return u.jsx("div",{ref:s,className:i,style:{outline:"none",cursor:"text",whiteSpace:n?"pre-wrap":"normal",wordBreak:"break-word",overflowWrap:"break-word",minWidth:0,...r||{}},contentEditable:!0,suppressContentEditableWarning:!0,"data-inline-editor":"true",onInput:p=>c(p.currentTarget.innerText),onBlur:d,onKeyDown:p=>{p.key==="Escape"&&(p.preventDefault(),f(),p.currentTarget.blur()),!n&&p.key==="Enter"&&(p.preventDefault(),d(),p.currentTarget.blur())},"data-placeholder":e||"",children:a})}function uT({html:t,placeholder:e,className:n,style:r,onCommit:i}){const o=b.useRef(null),s=b.useRef(t??""),[l,a]=b.useState(t??"");b.useEffect(()=>{s.current=t??"",a(t??""),o.current&&o.current.innerHTML!==(t??"")&&(o.current.innerHTML=t??"")},[t]);const c=()=>{const f=o.current?o.current.innerHTML:l;s.current=f,i(f)},d=()=>{const f=s.current??"";a(f),o.current&&(o.current.innerHTML=f)};return u.jsx("div",{ref:o,className:n,style:{outline:"none",cursor:"text",...r||{}},contentEditable:!0,suppressContentEditableWarning:!0,"data-inline-editor":"true","data-placeholder":e||"",onInput:f=>a(f.currentTarget.innerHTML),onBlur:c,onKeyDown:f=>{f.key==="Escape"&&(f.preventDefault(),d(),f.currentTarget.blur())},dangerouslySetInnerHTML:{__html:l||""}})}function Ue(t){this.content=t}Ue.prototype={constructor:Ue,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),o=r.content.slice();return i==-1?o.push(n||t,e):(o[i+1]=e,n&&(o[i]=n)),new Ue(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Ue(n)},addToStart:function(t,e){return new Ue([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Ue(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),o=r.find(t);return i.splice(o==-1?i.length:o,0,e,n),new Ue(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Ue.from(t),t.size?new Ue(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Ue.from(t),t.size?new Ue(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Ue.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Ue.from=function(t){if(t instanceof Ue)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Ue(e)};function Vv(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){let s=Vv(i.content,o.content,n+1);if(s!=null)return s}n+=i.nodeSize}}function Wv(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let s=t.child(--i),l=e.child(--o),a=s.nodeSize;if(s==l){n-=a,r-=a;continue}if(!s.sameMarkup(l))return{a:n,b:r};if(s.isText&&s.text!=l.text){let c=0,d=Math.min(s.text.length,l.text.length);for(;c<d&&s.text[s.text.length-c-1]==l.text[l.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(s.content.size||l.content.size){let c=Wv(s.content,l.content,n-1,r-1);if(c)return c}n-=a,r-=a}}class D{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let s=0,l=0;l<n;s++){let a=this.content[s],c=l+a.nodeSize;if(c>e&&r(a,i+l,o||null,s)!==!1&&a.content.size){let d=l+1;a.nodesBetween(Math.max(0,e-d),Math.min(a.content.size,n-d),r,i+d)}l=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",s=!0;return this.nodesBetween(e,n,(l,a)=>{let c=l.isText?l.text.slice(Math.max(e,a)-a,n-a):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&c||l.isTextblock)&&r&&(s?s=!1:o+=r),o+=c},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new D(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,s=0;s<n;o++){let l=this.content[o],a=s+l.nodeSize;a>e&&((s<e||a>n)&&(l.isText?l=l.cut(Math.max(0,e-s),Math.min(l.text.length,n-s)):l=l.cut(Math.max(0,e-s-1),Math.min(l.content.size,n-s-1))),r.push(l),i+=l.nodeSize),s=a}return new D(r,i)}cutByIndex(e,n){return e==n?D.empty:e==0&&n==this.content.length?this:new D(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new D(i,o)}addToStart(e){return new D([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new D(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return Vv(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return Wv(this,e,n,r)}findIndex(e){if(e==0)return zl(0,e);if(e==this.size)return zl(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),o=r+i.nodeSize;if(o>=e)return o==e?zl(n+1,o):zl(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return D.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new D(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return D.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new D(n||e,r)}static from(e){if(!e)return D.empty;if(e instanceof D)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new D([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}D.empty=new D([],0);const Gu={index:0,offset:0};function zl(t,e){return Gu.index=t,Gu.offset=e,Gu}function Ha(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Ha(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Ha(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let ie=class Af{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Ha(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Af.none;if(e instanceof Af)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};ie.none=[];class Ua extends Error{}class L{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=qv(this.content,e+this.openStart,n);return r&&new L(r,this.openStart,this.openEnd)}removeBetween(e,n){return new L(Kv(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return L.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new L(D.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new L(e,r,i)}}L.empty=new L(D.empty,0,0);function Kv(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:s,offset:l}=t.findIndex(n);if(i==e||o.isText){if(l!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(Kv(o.content,e-i-1,n-i-1)))}function qv(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),s=t.maybeChild(i);if(o==e||s.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let l=qv(s.content,e-o-1,n,s);return l&&t.replaceChild(i,s.copy(l))}function dT(t,e,n){if(n.openStart>t.depth)throw new Ua("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Ua("Inconsistent open depths");return Jv(t,e,n,0)}function Jv(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=Jv(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,l=s.content;return ri(s,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:s,end:l}=fT(n,t);return ri(o,Qv(t,s,l,e,r))}else return ri(o,Va(t,e,r))}function Gv(t,e){if(!e.type.compatibleContent(t.type))throw new Ua("Cannot join "+e.type.name+" onto "+t.type.name)}function Df(t,e,n){let r=t.node(n);return Gv(r,e.node(n)),r}function ni(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function as(t,e,n,r){let i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(ni(t.nodeAfter,r),o++));for(let l=o;l<s;l++)ni(i.child(l),r);e&&e.depth==n&&e.textOffset&&ni(e.nodeBefore,r)}function ri(t,e){return t.type.checkContent(e),t.copy(e)}function Qv(t,e,n,r,i){let o=t.depth>i&&Df(t,e,i+1),s=r.depth>i&&Df(n,r,i+1),l=[];return as(null,t,i,l),o&&s&&e.index(i)==n.index(i)?(Gv(o,s),ni(ri(o,Qv(t,e,n,r,i+1)),l)):(o&&ni(ri(o,Va(t,e,i+1)),l),as(e,n,i,l),s&&ni(ri(s,Va(n,r,i+1)),l)),as(r,null,i,l),new D(l)}function Va(t,e,n){let r=[];if(as(null,t,n,r),t.depth>n){let i=Df(t,e,n+1);ni(ri(i,Va(t,e,n+1)),r)}return as(e,null,n,r),new D(r)}function fT(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(D.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Hs{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return ie.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let l=r;r=i,i=l}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Wa(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let s=e;;){let{index:l,offset:a}=s.content.findIndex(o),c=o-a;if(r.push(s,l,i+a),!c||(s=s.child(l),s.isText))break;o=c-1,i+=a+1}return new Hs(n,r,o)}static resolveCached(e,n){let r=Dg.get(e);if(r)for(let o=0;o<r.elts.length;o++){let s=r.elts[o];if(s.pos==n)return s}else Dg.set(e,r=new pT);let i=r.elts[r.i]=Hs.resolve(e,n);return r.i=(r.i+1)%hT,i}}class pT{constructor(){this.elts=[],this.i=0}}const hT=12,Dg=new WeakMap;class Wa{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const mT=Object.create(null);let Tr=class Rf{constructor(e,n,r,i=ie.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||D.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Ha(this.attrs,n||e.defaultAttrs||mT)&&ie.sameSet(this.marks,r||ie.none)}copy(e=null){return e==this.content?this:new Rf(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Rf(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return L.empty;let i=this.resolve(e),o=this.resolve(n),s=r?0:i.sharedDepth(n),l=i.start(s),c=i.node(s).content.cut(i.pos-l,o.pos-l);return new L(c,i.depth-s,o.depth-s)}replace(e,n,r){return dT(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Hs.resolveCached(this,e)}resolveNoCache(e){return Hs.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Yv(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=D.empty,i=0,o=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,o),l=s&&s.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let a=i;a<o;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),s=o&&o.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=ie.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!ie.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=D.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};Tr.prototype.text=void 0;class Ka extends Tr{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Yv(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Ka(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Ka(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Yv(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class hi{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new gT(e,n);if(r.next==null)return hi.empty;let i=Xv(r);r.next&&r.err("Unexpected trailing text");let o=wT(kT(i));return CT(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(s,l){let a=s.matchFragment(e,r);if(a&&(!n||a.validEnd))return D.from(l.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:d,next:f}=s.next[c];if(!(d.isText||d.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let p=o(f,l.concat(d));if(p)return p}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let s=[];for(let l=i;l.type;l=l.via)s.push(l.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:l,next:a}=o.next[s];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return o}).join(`
`)}}hi.empty=new hi(!0);class gT{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Xv(t){let e=[];do e.push(yT(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function yT(t){let e=[];do e.push(xT(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function xT(t){let e=bT(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=vT(t,e);else break;return e}function Rg(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function vT(t,e){let n=Rg(t),r=n;return t.eat(",")&&(t.next!="}"?r=Rg(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function ST(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let s=n[o];s.isInGroup(e)&&i.push(s)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function bT(t){if(t.eat("(")){let e=Xv(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=ST(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function kT(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(s,l,a){let c={term:a,to:l};return e[s].push(c),c}function i(s,l){s.forEach(a=>a.to=l)}function o(s,l){if(s.type=="choice")return s.exprs.reduce((a,c)=>a.concat(o(c,l)),[]);if(s.type=="seq")for(let a=0;;a++){let c=o(s.exprs[a],l);if(a==s.exprs.length-1)return c;i(c,l=n())}else if(s.type=="star"){let a=n();return r(l,a),i(o(s.expr,a),a),[r(a)]}else if(s.type=="plus"){let a=n();return i(o(s.expr,l),a),i(o(s.expr,a),a),[r(a)]}else{if(s.type=="opt")return[r(l)].concat(o(s.expr,l));if(s.type=="range"){let a=l;for(let c=0;c<s.min;c++){let d=n();i(o(s.expr,a),d),a=d}if(s.max==-1)i(o(s.expr,a),a);else for(let c=s.min;c<s.max;c++){let d=n();r(a,d),i(o(s.expr,a),d),a=d}return[r(a)]}else{if(s.type=="name")return[r(l,void 0,s.value)];throw new Error("Unknown expr type")}}}}function Zv(t,e){return e-t}function Ig(t,e){let n=[];return r(e),n.sort(Zv);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let s=0;s<o.length;s++){let{term:l,to:a}=o[s];!l&&n.indexOf(a)==-1&&r(a)}}}function wT(t){let e=Object.create(null);return n(Ig(t,0));function n(r){let i=[];r.forEach(s=>{t[s].forEach(({term:l,to:a})=>{if(!l)return;let c;for(let d=0;d<i.length;d++)i[d][0]==l&&(c=i[d][1]);Ig(t,a).forEach(d=>{c||i.push([l,c=[]]),c.indexOf(d)==-1&&c.push(d)})})});let o=e[r.join(",")]=new hi(r.indexOf(t.length-1)>-1);for(let s=0;s<i.length;s++){let l=i[s][1].sort(Zv);o.next.push({type:i[s][0],next:e[l.join(",")]||n(l)})}return o}}function CT(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,s=[];for(let l=0;l<i.next.length;l++){let{type:a,next:c}=i.next[l];s.push(a.name),o&&!(a.isText||a.hasRequiredAttrs())&&(o=!1),r.indexOf(c)==-1&&r.push(c)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function e1(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function t1(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let o=t[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function n1(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let o=t[i];o.validate&&o.validate(e[i])}}function r1(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new TT(t,r,e[r]);return n}let Og=class i1{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=r1(e,r.attrs),this.defaultAttrs=e1(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==hi.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:t1(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Tr(this,this.computeAttrs(e),D.from(n),ie.setFrom(r))}createChecked(e=null,n,r){return n=D.from(n),this.checkContent(n),new Tr(this,this.computeAttrs(e),n,ie.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=D.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(D.empty,!0);return o?new Tr(this,e,n.append(o),ie.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){n1(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:ie.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,s)=>r[o]=new i1(o,n,s));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function ET(t,e,n){let r=n.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${o}`)}}class TT{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?ET(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Yc{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=r1(e,i.attrs),this.excluded=null;let o=e1(this.attrs);this.instance=o?new ie(this,o):null}create(e=null){return!e&&this.instance?this.instance:new ie(this,t1(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((o,s)=>r[o]=new Yc(o,i++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){n1(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class o1{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Ue.from(e.nodes),n.marks=Ue.from(e.marks||{}),this.nodes=Og.compile(this.spec.nodes,this),this.marks=Yc.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],s=o.spec.content||"",l=o.spec.marks;if(o.contentMatch=r[s]||(r[s]=hi.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=l=="_"?null:l?Ng(this,l.split(" ")):l==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:Ng(this,s.split(" "))}this.nodeFromJSON=i=>Tr.fromJSON(this,i),this.markFromJSON=i=>ie.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Og){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new Ka(r,r.defaultAttrs,e,ie.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function Ng(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(let l in t.marks){let a=t.marks[l];(i=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=a)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function MT(t){return t.tag!=null}function jT(t){return t.style!=null}let cs=class If{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(MT(i))this.tags.push(i);else if(jT(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new Lg(this,n,!1);return r.addAll(e,ie.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new Lg(this,n,!0);return r.addAll(e,ie.none,n.from,n.to),L.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(RT(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],l=s.style;if(!(l.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(s.getAttrs){let a=s.getAttrs(n);if(a===!1)continue;s.attrs=a||void 0}return s}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<n.length;s++){let l=n[s];if((l.priority==null?50:l.priority)<o)break}n.splice(s,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=Pg(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=Pg(s)),s.node||s.ignore||s.mark||(s.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new If(e,If.schemaRules(e)))}};const s1={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},AT={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},l1={ol:!0,ul:!0},Us=1,Of=2,us=4;function zg(t,e,n){return e!=null?(e?Us:0)|(e==="full"?Of:0):t&&t.whitespace=="pre"?Us|Of:n&~us}class Ll{constructor(e,n,r,i,o,s){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=ie.none,this.match=o||(s&us?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(D.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Us)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=D.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(D.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!s1.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Lg{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,o,s=zg(null,n.preserveWhitespace,0)|(r?us:0);i?o=new Ll(i.type,i.attrs,ie.none,!0,n.topMatch||i.type.contentMatch,s):r?o=new Ll(null,null,ie.none,!0,null,s):o=new Ll(e.schema.topNodeType,null,ie.none,!0,null,s),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,o=i.options&Of?"full":this.localPreserveWS||(i.options&Us)>0,{schema:s}=this.parser;if(o==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)if(o==="full")r=r.replace(/\r\n?/g,`
`);else if(s.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(s.linebreakReplacement.create())){let l=r.split(/\r?\n|\r/);for(let a=0;a<l.length;a++)a&&this.insertNode(s.linebreakReplacement.create(),n,!0),l[a]&&this.insertNode(s.text(l[a]),n,!/\S/.test(l[a]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let l=i.content[i.content.length-1],a=e.previousSibling;(!l||a&&a.nodeName=="BR"||l.isText&&/[ \t\r\n\u000c]$/.test(l.text))&&(r=r.slice(1))}r&&this.insertNode(s.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),l;l1.hasOwnProperty(s)&&this.parser.normalizeLists&&DT(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,r));e:if(a?a.ignore:AT.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,n);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let c,d=this.needsBlock;if(s1.hasOwnProperty(s))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),c=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let f=a&&a.skip?n:this.readStyles(e,n);f&&this.addAll(e,f),c&&this.sync(o),this.needsBlock=d}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,a,c,a.consuming===!1?l:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],s=r.getPropertyValue(o);if(s)for(let l=void 0;;){let a=this.parser.matchStyle(o,s,this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?n=n.filter(c=>!a.clearMark(c)):n=n.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)l=a;else break}}return n}addElementByRule(e,n,r,i){let o,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let a=this.enter(s,n.attrs||null,r,n.preserveWhitespace);a&&(o=!0,r=a)}else{let a=this.parser.schema.marks[n.mark];r=r.concat(a.create(n.attrs))}let l=this.top;if(s&&s.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,r,!1));else{let a=e;typeof n.contentElement=="string"?a=e.querySelector(n.contentElement):typeof n.contentElement=="function"?a=n.contentElement(e):n.contentElement&&(a=n.contentElement),this.findAround(e,a,!0),this.addAll(a,r),this.findAround(e,a,!1)}o&&this.sync(l)&&this.open--}addAll(e,n,r,i){let o=r||0;for(let s=r?e.childNodes[r]:e.firstChild,l=i==null?null:e.childNodes[i];s!=l;s=s.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(s,n);this.findAtPoint(e,o)}findPlace(e,n,r){let i,o;for(let s=this.open,l=0;s>=0;s--){let a=this.nodes[s],c=a.findWrapping(e);if(c&&(!i||i.length>c.length+l)&&(i=c,o=a,!c.length))break;if(a.solid){if(r)break;l+=2}}if(!i)return null;this.sync(o);for(let s=0;s<i.length;s++)n=this.enterInner(i[s],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let s=ie.none;for(let l of i.concat(e.marks))(o.type?o.type.allowsMarkType(l.type):$g(l.type,e.type))&&(s=l.addToSet(s));return o.content.push(e.mark(s)),!0}return!1}enter(e,n,r,i){let o=this.findPlace(e.create(n),r,!1);return o&&(o=this.enterInner(e,n,r,!0,i)),o}enterInner(e,n,r,i=!1,o){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let l=zg(e,o,s.options);s.options&us&&s.content.length==0&&(l|=us);let a=ie.none;return r=r.filter(c=>(s.type?s.type.allowsMarkType(c.type):$g(c.type,e))?(a=c.addToSet(a),!1):!0),this.nodes.push(new Ll(e,n,a,i,null,l)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Us)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(l,a)=>{for(;l>=0;l--){let c=n[l];if(c==""){if(l==n.length-1||l==0)continue;for(;a>=o;a--)if(s(l-1,a))return!0;return!1}else{let d=a>0||a==0&&i?this.nodes[a].type:r&&a>=o?r.node(a-o).type:null;if(!d||d.name!=c&&!d.isInGroup(c))return!1;a--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function DT(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&l1.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function RT(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Pg(t){let e={};for(let n in t)e[n]=t[n];return e}function $g(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],s=l=>{o.push(l);for(let a=0;a<l.edgeCount;a++){let{type:c,next:d}=l.edge(a);if(c==e||o.indexOf(d)<0&&s(d))return!0}};if(s(i.contentMatch))return!0}}class bi{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Qu(n).createDocumentFragment());let i=r,o=[];return e.forEach(s=>{if(o.length||s.marks.length){let l=0,a=0;for(;l<o.length&&a<s.marks.length;){let c=s.marks[a];if(!this.marks[c.type.name]){a++;continue}if(!c.eq(o[l][0])||c.type.spec.spanning===!1)break;l++,a++}for(;l<o.length;)i=o.pop()[1];for(;a<s.marks.length;){let c=s.marks[a++],d=this.serializeMark(c,s.isInline,n);d&&(o.push([c,i]),i.appendChild(d.dom),i=d.contentDOM||d.dom)}}i.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=oa(Qu(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&oa(Qu(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return oa(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new bi(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Fg(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Fg(e.marks)}}function Fg(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Qu(t){return t.document||window.document}const Bg=new WeakMap;function IT(t){let e=Bg.get(t);return e===void 0&&Bg.set(t,e=OT(t)),e}function OT(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function oa(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=IT(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=i.indexOf(" ");s>0&&(n=i.slice(0,s),i=i.slice(s+1));let l,a=n?t.createElementNS(n,i):t.createElement(i),c=e[1],d=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){d=2;for(let f in c)if(c[f]!=null){let p=f.indexOf(" ");p>0?a.setAttributeNS(f.slice(0,p),f.slice(p+1),c[f]):f=="style"&&a.style?a.style.cssText=c[f]:a.setAttribute(f,c[f])}}for(let f=d;f<e.length;f++){let p=e[f];if(p===0){if(f<e.length-1||f>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:h,contentDOM:m}=oa(t,p,n,r);if(a.appendChild(h),m){if(l)throw new RangeError("Multiple content holes");l=m}}}return{dom:a,contentDOM:l}}const a1=65535,c1=Math.pow(2,16);function NT(t,e){return t+e*c1}function _g(t){return t&a1}function zT(t){return(t-(t&a1))/c1}const u1=1,d1=2,sa=4,f1=8;class Nf{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&f1)>0}get deletedBefore(){return(this.delInfo&(u1|sa))>0}get deletedAfter(){return(this.delInfo&(d1|sa))>0}get deletedAcross(){return(this.delInfo&sa)>0}}class Mt{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Mt.empty)return Mt.empty}recover(e){let n=0,r=_g(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+zT(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let c=this.ranges[l+o],d=this.ranges[l+s],f=a+c;if(e<=f){let p=c?e==a?-1:e==f?1:n:n,h=a+i+(p<0?0:d);if(r)return h;let m=e==(n<0?a:f)?null:NT(l/3,e-a),g=e==a?d1:e==f?u1:sa;return(n<0?e!=a:e!=f)&&(g|=f1),new Nf(h,g,m)}i+=d-c}return r?e+i:new Nf(e+i,0,null)}touches(e,n){let r=0,i=_g(n),o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let c=this.ranges[l+o],d=a+c;if(e<=d&&l==i*3)return!0;r+=this.ranges[l+s]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],l=s-(this.inverted?o:0),a=s+(this.inverted?0:o),c=this.ranges[i+n],d=this.ranges[i+r];e(l,l+c,a,a+d),o+=d-c}}invert(){return new Mt(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Mt.empty:new Mt(e<0?[0,-e,0]:[0,0,e])}}Mt.empty=new Mt([]);class Vs{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Vs(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Vs;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this._maps[o],l=s.mapResult(e,n);if(l.recover!=null){let a=this.getMirror(o);if(a!=null&&a>o&&a<this.to){o=a,e=this._maps[a].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new Nf(e,i,null)}}const Yu=Object.create(null);class it{getMap(){return Mt.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Yu[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Yu)throw new RangeError("Duplicate use of step JSON ID "+e);return Yu[e]=n,n.prototype.jsonID=e,n}}class Te{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Te(e,null)}static fail(e){return new Te(null,e)}static fromReplace(e,n,r,i){try{return Te.ok(e.replace(n,r,i))}catch(o){if(o instanceof Ua)return Te.fail(o.message);throw o}}}function uh(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(uh(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return D.fromArray(r)}class mr extends it{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new L(uh(n.content,(s,l)=>!s.isAtom||!l.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),n.openStart,n.openEnd);return Te.fromReplace(e,this.from,this.to,o)}invert(){return new xn(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new mr(n.pos,r.pos,this.mark)}merge(e){return e instanceof mr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new mr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new mr(n.from,n.to,e.markFromJSON(n.mark))}}it.jsonID("addMark",mr);class xn extends it{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new L(uh(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Te.fromReplace(e,this.from,this.to,r)}invert(){return new mr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new xn(n.pos,r.pos,this.mark)}merge(e){return e instanceof xn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new xn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new xn(n.from,n.to,e.markFromJSON(n.mark))}}it.jsonID("removeMark",xn);class gr extends it{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Te.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Te.fromReplace(e,this.pos,this.pos+1,new L(D.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new gr(this.pos,n.marks[i]);return new gr(this.pos,this.mark)}}return new mi(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new gr(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new gr(n.pos,e.markFromJSON(n.mark))}}it.jsonID("addNodeMark",gr);class mi extends it{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Te.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Te.fromReplace(e,this.pos,this.pos+1,new L(D.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new gr(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new mi(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new mi(n.pos,e.markFromJSON(n.mark))}}it.jsonID("removeNodeMark",mi);class Ne extends it{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&zf(e,this.from,this.to)?Te.fail("Structure replace would overwrite content"):Te.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Mt([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ne(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Ne(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Ne)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?L.empty:new L(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ne(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?L.empty:new L(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ne(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ne(n.from,n.to,L.fromJSON(e,n.slice),!!n.structure)}}it.jsonID("replace",Ne);class Le extends it{constructor(e,n,r,i,o,s,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=l}apply(e){if(this.structure&&(zf(e,this.from,this.gapFrom)||zf(e,this.gapTo,this.to)))return Te.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Te.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Te.fromReplace(e,this.from,this.to,r):Te.fail("Content does not fit in gap")}getMap(){return new Mt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Le(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new Le(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Le(n.from,n.to,n.gapFrom,n.gapTo,L.fromJSON(e,n.slice),n.insert,!!n.structure)}}it.jsonID("replaceAround",Le);function zf(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function LT(t,e,n,r){let i=[],o=[],s,l;t.doc.nodesBetween(e,n,(a,c,d)=>{if(!a.isInline)return;let f=a.marks;if(!r.isInSet(f)&&d.type.allowsMarkType(r.type)){let p=Math.max(c,e),h=Math.min(c+a.nodeSize,n),m=r.addToSet(f);for(let g=0;g<f.length;g++)f[g].isInSet(m)||(s&&s.to==p&&s.mark.eq(f[g])?s.to=h:i.push(s=new xn(p,h,f[g])));l&&l.to==p?l.to=h:o.push(l=new mr(p,h,r))}}),i.forEach(a=>t.step(a)),o.forEach(a=>t.step(a))}function PT(t,e,n,r){let i=[],o=0;t.doc.nodesBetween(e,n,(s,l)=>{if(!s.isInline)return;o++;let a=null;if(r instanceof Yc){let c=s.marks,d;for(;d=r.isInSet(c);)(a||(a=[])).push(d),c=d.removeFromSet(c)}else r?r.isInSet(s.marks)&&(a=[r]):a=s.marks;if(a&&a.length){let c=Math.min(l+s.nodeSize,n);for(let d=0;d<a.length;d++){let f=a[d],p;for(let h=0;h<i.length;h++){let m=i[h];m.step==o-1&&f.eq(i[h].style)&&(p=m)}p?(p.to=c,p.step=o):i.push({style:f,from:Math.max(l,e),to:c,step:o})}}}),i.forEach(s=>t.step(new xn(s.from,s.to,s.style)))}function dh(t,e,n,r=n.contentMatch,i=!0){let o=t.doc.nodeAt(e),s=[],l=e+1;for(let a=0;a<o.childCount;a++){let c=o.child(a),d=l+c.nodeSize,f=r.matchType(c.type);if(!f)s.push(new Ne(l,d,L.empty));else{r=f;for(let p=0;p<c.marks.length;p++)n.allowsMarkType(c.marks[p].type)||t.step(new xn(l,d,c.marks[p]));if(i&&c.isText&&n.whitespace!="pre"){let p,h=/\r?\n|\r/g,m;for(;p=h.exec(c.text);)m||(m=new L(D.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),s.push(new Ne(l+p.index,l+p.index+p[0].length,m))}}l=d}if(!r.validEnd){let a=r.fillBefore(D.empty,!0);t.replace(l,l,new L(a,0,0))}for(let a=s.length-1;a>=0;a--)t.step(s[a])}function $T(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Co(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,i=0,o=0;;--r){let s=t.$from.node(r),l=t.$from.index(r)+i,a=t.$to.indexAfter(r)-o;if(r<t.depth&&s.canReplace(l,a,n))return r;if(r==0||s.type.spec.isolating||!$T(s,l,a))break;l&&(i=1),a<s.childCount&&(o=1)}return null}function FT(t,e,n){let{$from:r,$to:i,depth:o}=e,s=r.before(o+1),l=i.after(o+1),a=s,c=l,d=D.empty,f=0;for(let m=o,g=!1;m>n;m--)g||r.index(m)>0?(g=!0,d=D.from(r.node(m).copy(d)),f++):a--;let p=D.empty,h=0;for(let m=o,g=!1;m>n;m--)g||i.after(m+1)<i.end(m)?(g=!0,p=D.from(i.node(m).copy(p)),h++):c++;t.step(new Le(a,c,s,l,new L(d.append(p),f,h),d.size-f,!0))}function fh(t,e,n=null,r=t){let i=BT(t,e),o=i&&_T(r,e);return o?i.map(Hg).concat({type:e,attrs:n}).concat(o.map(Hg)):null}function Hg(t){return{type:t,attrs:null}}function BT(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}function _T(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let a=(s.length?s[s.length-1]:e).contentMatch;for(let c=r;a&&c<i;c++)a=a.matchType(n.child(c).type);return!a||!a.validEnd?null:s}function HT(t,e,n){let r=D.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let l=n[s].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=D.from(n[s].type.create(n[s].attrs,r))}let i=e.start,o=e.end;t.step(new Le(i,o,i,o,new L(r,0,0),n.length,!0))}function UT(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(s,l)=>{let a=typeof i=="function"?i(s):i;if(s.isTextblock&&!s.hasMarkup(r,a)&&VT(t.doc,t.mapping.slice(o).map(l),r)){let c=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",m=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!m?c=!1:!h&&m&&(c=!0)}c===!1&&h1(t,s,l,o),dh(t,t.mapping.slice(o).map(l,1),r,void 0,c===null);let d=t.mapping.slice(o),f=d.map(l,1),p=d.map(l+s.nodeSize,1);return t.step(new Le(f,p,f+1,p-1,new L(D.from(r.create(a,null,s.marks)),0,0),1,!0)),c===!0&&p1(t,s,l,o),!1}})}function p1(t,e,n,r){e.forEach((i,o)=>{if(i.isText){let s,l=/\r?\n|\r/g;for(;s=l.exec(i.text);){let a=t.mapping.slice(r).map(n+1+o+s.index);t.replaceWith(a,a+1,e.type.schema.linebreakReplacement.create())}}})}function h1(t,e,n,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let s=t.mapping.slice(r).map(n+1+o);t.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function VT(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function WT(t,e,n,r,i){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let s=n.create(r,null,i||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,s);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Le(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new L(D.from(s),0,0),1,!0))}function Bn(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,d=n-2;c>o;c--,d--){let f=i.node(c),p=i.index(c);if(f.type.spec.isolating)return!1;let h=f.content.cutByIndex(p,f.childCount),m=r&&r[d+1];m&&(h=h.replaceChild(0,m.type.create(m.attrs)));let g=r&&r[d]||f;if(!f.canReplace(p+1,f.childCount)||!g.type.validContent(h))return!1}let l=i.indexAfter(o),a=r&&r[0];return i.node(o).canReplaceWith(l,l,a?a.type:i.node(o+1).type)}function KT(t,e,n=1,r){let i=t.doc.resolve(e),o=D.empty,s=D.empty;for(let l=i.depth,a=i.depth-n,c=n-1;l>a;l--,c--){o=D.from(i.node(l).copy(o));let d=r&&r[c];s=D.from(d?d.type.create(d.attrs,s):i.node(l).copy(s))}t.step(new Ne(e,e,new L(o.append(s),n,n),!0))}function Pr(t,e){let n=t.resolve(e),r=n.index();return m1(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function qT(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let o=e.child(i),s=o.type==r?t.type.schema.nodes.text:o.type;if(n=n.matchType(s),!n||!t.type.allowsMarks(o.marks))return!1}return n.validEnd}function m1(t,e){return!!(t&&e&&!t.isLeaf&&qT(t,e))}function Xc(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let o,s,l=r.index(i);if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):n>0?(o=r.node(i+1),l++,s=r.node(i).maybeChild(l)):(o=r.node(i).maybeChild(l-1),s=r.node(i+1)),o&&!o.isTextblock&&m1(o,s)&&r.node(i).canReplace(l,l+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function JT(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,o=t.doc.resolve(e-n),s=o.node().type;if(i&&s.inlineContent){let d=s.whitespace=="pre",f=!!s.contentMatch.matchType(i);d&&!f?r=!1:!d&&f&&(r=!0)}let l=t.steps.length;if(r===!1){let d=t.doc.resolve(e+n);h1(t,d.node(),d.before(),l)}s.inlineContent&&dh(t,e+n-1,s,o.node().contentMatchAt(o.index()),r==null);let a=t.mapping.slice(l),c=a.map(e-n);if(t.step(new Ne(c,a.map(e+n,-1),L.empty,!0)),r===!0){let d=t.doc.resolve(c);p1(t,d.node(),d.before(),t.steps.length)}return t}function GT(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function g1(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let s=r.depth;s>=0;s--){let l=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,a=r.index(s)+(l>0?1:0),c=r.node(s),d=!1;if(o==1)d=c.canReplace(a,a,i);else{let f=c.contentMatchAt(a).findWrapping(i.firstChild.type);d=f&&c.canReplaceWith(a,a,f[0])}if(d)return l==0?r.pos:l<0?r.before(s+1):r.after(s+1)}return null}function Zc(t,e,n=e,r=L.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return y1(i,o,r)?new Ne(e,n,r):new QT(i,o,r).fit()}function y1(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class QT{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=D.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=D.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,l=i.depth;for(;s&&l&&o.childCount==1;)o=o.firstChild.content,s--,l--;let a=new L(o,s,l);return e>-1?new Le(r.pos,e,this.$to.pos,this.$to.end(),a,n):a.size||r.pos!=this.$to.pos?new Ne(r.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=Xu(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:c}=this.frontier[l],d,f=null;if(n==1&&(s?c.matchType(s.type)||(f=c.fillBefore(D.from(s),!1)):o&&a.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:l,parent:o,inject:f};if(n==2&&s&&(d=c.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:l,parent:o,wrap:d};if(o&&c.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Xu(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new L(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Xu(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new L(Wo(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new L(Wo(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let g=0;g<o.length;g++)this.openFrontierNode(o[g]);let s=this.unplaced,l=r?r.content:s.content,a=s.openStart-e,c=0,d=[],{match:f,type:p}=this.frontier[n];if(i){for(let g=0;g<i.childCount;g++)d.push(i.child(g));f=f.matchFragment(i)}let h=l.size+e-(s.content.size-s.openEnd);for(;c<l.childCount;){let g=l.child(c),v=f.matchType(g.type);if(!v)break;c++,(c>1||a==0||g.content.size)&&(f=v,d.push(x1(g.mark(p.allowedMarks(g.marks)),c==1?a:0,c==l.childCount?h:-1)))}let m=c==l.childCount;m||(h=-1),this.placed=Ko(this.placed,n,D.from(d)),this.frontier[n].match=f,m&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,v=l;g<h;g++){let y=v.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),v=y.content}this.unplaced=m?e==0?L.empty:new L(Wo(s.content,e-1,1),e-1,h<0?s.openEnd:e-1):new L(Wo(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Zu(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=Zu(e,n,i,r,o);if(s){for(let l=n-1;l>=0;l--){let{match:a,type:c}=this.frontier[l],d=Zu(e,l,c,a,!0);if(!d||d.childCount)continue e}return{depth:n,fit:s,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Ko(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Ko(this.placed,this.depth,D.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(D.empty,!0);n.childCount&&(this.placed=Ko(this.placed,this.frontier.length,n))}}function Wo(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Wo(t.firstChild.content,e-1,n)))}function Ko(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Ko(t.lastChild.content,e-1,n)))}function Xu(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function x1(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,x1(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(D.empty,!0)))),t.copy(r)}function Zu(t,e,n,r,i){let o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let l=r.fillBefore(o.content,!0,s);return l&&!YT(n,o.content,s)?l:null}function YT(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function XT(t){return t.spec.defining||t.spec.definingForContent}function ZT(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),o=t.doc.resolve(n);if(y1(i,o,r))return t.step(new Ne(e,n,r));let s=S1(i,o);s[s.length-1]==0&&s.pop();let l=-(i.depth+1);s.unshift(l);for(let p=i.depth,h=i.pos-1;p>0;p--,h--){let m=i.node(p).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;s.indexOf(p)>-1?l=p:i.before(p)==h&&s.splice(1,0,-p)}let a=s.indexOf(l),c=[],d=r.openStart;for(let p=r.content,h=0;;h++){let m=p.firstChild;if(c.push(m),h==r.openStart)break;p=m.content}for(let p=d-1;p>=0;p--){let h=c[p],m=XT(h.type);if(m&&!h.sameMarkup(i.node(Math.abs(l)-1)))d=p;else if(m||!h.type.isTextblock)break}for(let p=r.openStart;p>=0;p--){let h=(p+d+1)%(r.openStart+1),m=c[h];if(m)for(let g=0;g<s.length;g++){let v=s[(g+a)%s.length],y=!0;v<0&&(y=!1,v=-v);let x=i.node(v-1),S=i.index(v-1);if(x.canReplaceWith(S,S,m.type,m.marks))return t.replace(i.before(v),y?o.after(v):n,new L(v1(r.content,0,r.openStart,h),h,r.openEnd))}}let f=t.steps.length;for(let p=s.length-1;p>=0&&(t.replace(e,n,r),!(t.steps.length>f));p--){let h=s[p];h<0||(e=i.before(h),n=o.after(h))}}function v1(t,e,n,r,i){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(v1(o.content,e+1,n,r,o)))}if(e>r){let o=i.contentMatchAt(0),s=o.fillBefore(t).append(t);t=s.append(o.matchFragment(s).fillBefore(D.empty,!0))}return t}function eM(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=GT(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new L(D.from(r),0,0))}function tM(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=S1(r,i);for(let s=0;s<o.length;s++){let l=o[s],a=s==o.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),i.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return t.delete(r.before(l),i.after(l))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s&&r.start(s-1)==i.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),i.index(s-1)))return t.delete(r.before(s),n);t.delete(e,n)}function S1(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}class to extends it{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Te.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Te.fromReplace(e,this.pos,this.pos+1,new L(D.from(i),0,n.isLeaf?0:1))}getMap(){return Mt.empty}invert(e){return new to(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new to(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new to(n.pos,n.attr,n.value)}}it.jsonID("attr",to);class Ws extends it{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Te.ok(r)}getMap(){return Mt.empty}invert(e){return new Ws(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Ws(n.attr,n.value)}}it.jsonID("docAttr",Ws);let fo=class extends Error{};fo=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};fo.prototype=Object.create(Error.prototype);fo.prototype.constructor=fo;fo.prototype.name="TransformError";class b1{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Vs}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new fo(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}changedRange(){let e=1e9,n=-1e9;for(let r=0;r<this.mapping.maps.length;r++){let i=this.mapping.maps[r];r&&(e=i.map(e,1),n=i.map(n,-1)),i.forEach((o,s,l,a)=>{e=Math.min(e,l),n=Math.max(n,a)})}return e==1e9?null:{from:e,to:n}}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=L.empty){let i=Zc(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new L(D.from(r),0,0))}delete(e,n){return this.replace(e,n,L.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return ZT(this,e,n,r),this}replaceRangeWith(e,n,r){return eM(this,e,n,r),this}deleteRange(e,n){return tM(this,e,n),this}lift(e,n){return FT(this,e,n),this}join(e,n=1){return JT(this,e,n),this}wrap(e,n){return HT(this,e,n),this}setBlockType(e,n=e,r,i=null){return UT(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return WT(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new to(e,n,r)),this}setDocAttribute(e,n){return this.step(new Ws(e,n)),this}addNodeMark(e,n){return this.step(new gr(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof ie)n.isInSet(r.marks)&&this.step(new mi(e,n));else{let i=r.marks,o,s=[];for(;o=n.isInSet(i);)s.push(new mi(e,o)),i=o.removeFromSet(i);for(let l=s.length-1;l>=0;l--)this.step(s[l])}return this}split(e,n=1,r){return KT(this,e,n,r),this}addMark(e,n,r){return LT(this,e,n,r),this}removeMark(e,n,r){return PT(this,e,n,r),this}clearIncompatible(e,n,r){return dh(this,e,n,r),this}}const ed=Object.create(null);class J{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new nM(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=L.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let o=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){let{$from:a,$to:c}=s[l],d=e.mapping.slice(o);e.replaceRange(d.map(a.pos),d.map(c.pos),l?L.empty:n),l==0&&Wg(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:l}=i[o],a=e.mapping.slice(r),c=a.map(s.pos),d=a.map(l.pos);o?e.deleteRange(c,d):(e.replaceRangeWith(c,d,n),Wg(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new W(e):Ri(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let s=n<0?Ri(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):Ri(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Dt(e.node(0))}static atStart(e){return Ri(e,e,0,0,1)||new Dt(e)}static atEnd(e){return Ri(e,e,e.content.size,e.childCount,-1)||new Dt(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=ed[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in ed)throw new RangeError("Duplicate use of selection JSON ID "+e);return ed[e]=n,n.prototype.jsonID=e,n}getBookmark(){return W.between(this.$anchor,this.$head).getBookmark()}}J.prototype.visible=!0;class nM{constructor(e,n){this.$from=e,this.$to=n}}let Ug=!1;function Vg(t){!Ug&&!t.parent.inlineContent&&(Ug=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class W extends J{constructor(e,n=e){Vg(e),Vg(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return J.near(r);let i=e.resolve(n.map(this.anchor));return new W(i.parent.inlineContent?i:r,r)}replace(e,n=L.empty){if(super.replace(e,n),n==L.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof W&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new eu(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new W(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=J.findFrom(n,r,!0)||J.findFrom(n,-r,!0);if(o)n=o.$head;else return J.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(J.findFrom(e,-r,!0)||J.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new W(e,n)}}J.jsonID("text",W);class eu{constructor(e,n){this.anchor=e,this.head=n}map(e){return new eu(e.map(this.anchor),e.map(this.head))}resolve(e){return W.between(e.resolve(this.anchor),e.resolve(this.head))}}class H extends J{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?J.near(o):new H(o)}content(){return new L(D.from(this.node),0,0)}eq(e){return e instanceof H&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new ph(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new H(e.resolve(n.anchor))}static create(e,n){return new H(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}H.prototype.visible=!1;J.jsonID("node",H);class ph{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new eu(r,r):new ph(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&H.isSelectable(r)?new H(n):J.near(n)}}class Dt extends J{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=L.empty){if(n==L.empty){e.delete(0,e.doc.content.size);let r=J.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Dt(e)}map(e){return new Dt(e)}eq(e){return e instanceof Dt}getBookmark(){return rM}}J.jsonID("all",Dt);const rM={map(){return this},resolve(t){return new Dt(t)}};function Ri(t,e,n,r,i,o=!1){if(e.inlineContent)return W.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let l=e.child(s);if(l.isAtom){if(!o&&H.isSelectable(l))return H.create(t,n-(i<0?l.nodeSize:0))}else{let a=Ri(t,l,n+i,i<0?l.childCount:0,i,o);if(a)return a}n+=l.nodeSize*i}return null}function Wg(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Ne||i instanceof Le))return;let o=t.mapping.maps[r],s;o.forEach((l,a,c,d)=>{s==null&&(s=d)}),t.setSelection(J.near(t.doc.resolve(s),n))}const Kg=1,Pl=2,qg=4;class iM extends b1{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Kg)&~Pl,this.storedMarks=null,this}get selectionSet(){return(this.updated&Kg)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Pl,this}ensureMarks(e){return ie.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Pl)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Pl,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ie.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let s=this.doc.resolve(n);o=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,o)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(J.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=qg,this}get scrolledIntoView(){return(this.updated&qg)>0}}function Jg(t,e){return!e||!t?t:t.bind(e)}class qo{constructor(e,n,r){this.name=e,this.init=Jg(n.init,r),this.apply=Jg(n.apply,r)}}const oM=[new qo("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new qo("selection",{init(t,e){return t.selection||J.atStart(e.doc)},apply(t){return t.selection}}),new qo("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new qo("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class td{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=oM.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new qo(r.key,r.spec.state,r))})}}class Ki{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let l=this.config.plugins[s];if(l.spec.appendTransaction){let a=i?i[s].n:0,c=i?i[s].state:this,d=a<n.length&&l.spec.appendTransaction.call(l,a?n.slice(a):n,c,r);if(d&&r.filterTransaction(d,s)){if(d.setMeta("appendedTransaction",e),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<s?{state:r,n:n.length}:{state:this,n:0})}n.push(d),r=r.applyInner(d),o=!0}i&&(i[s]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Ki(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new iM(this)}static create(e){let n=new td(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Ki(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new td(this.schema,e.plugins),r=n.fields,i=new Ki(n);for(let o=0;o<r.length;o++){let s=r[o].name;i[s]=this.hasOwnProperty(s)?this[s]:r[o].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new td(e.schema,e.plugins),o=new Ki(i);return i.fields.forEach(s=>{if(s.name=="doc")o.doc=Tr.fromJSON(e.schema,n.doc);else if(s.name=="selection")o.selection=J.fromJSON(o.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],c=a.spec.state;if(a.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){o[s.name]=c.fromJSON.call(a,e,n[l],o);return}}o[s.name]=s.init(e,o)}}),o}}function k1(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=k1(i,e,{})),n[r]=i}return n}class Qe{constructor(e){this.spec=e,this.props={},e.props&&k1(e.props,this,this.props),this.key=e.key?e.key.key:w1("plugin")}getState(e){return e[this.key]}}const nd=Object.create(null);function w1(t){return t in nd?t+"$"+ ++nd[t]:(nd[t]=0,t+"$")}class zt{constructor(e="key"){this.key=w1(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Ve=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},po=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Lf=null;const Nn=function(t,e,n){let r=Lf||(Lf=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},sM=function(){Lf=null},gi=function(t,e,n,r){return n&&(Gg(t,e,n,r,-1)||Gg(t,e,n,r,1))},lM=/^(img|br|input|textarea|hr)$/i;function Gg(t,e,n,r,i){for(var o;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Ut(t))){let s=t.parentNode;if(!s||s.nodeType!=1||cl(t)||lM.test(t.nodeName)||t.contentEditable=="false")return!1;e=Ve(t)+(i<0?0:1),t=s}else if(t.nodeType==1){let s=t.childNodes[e+(i<0?-1:0)];if(s.nodeType==1&&s.contentEditable=="false")if(!((o=s.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=i;else return!1;else t=s,e=i<0?Ut(t):0}else return!1}}function Ut(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function aM(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Ut(t)}else if(t.parentNode&&!cl(t))e=Ve(t),t=t.parentNode;else return null}}function cM(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!cl(t))e=Ve(t)+1,t=t.parentNode;else return null}}function uM(t,e,n){for(let r=e==0,i=e==Ut(t);r||i;){if(t==n)return!0;let o=Ve(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,i=i&&o==Ut(t)}}function cl(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const tu=function(t){return t.focusNode&&gi(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Vr(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function dM(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function fM(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Ut(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Ut(r.startContainer),r.startOffset)}}}const kn=typeof navigator<"u"?navigator:null,Qg=typeof document<"u"?document:null,$r=kn&&kn.userAgent||"",Pf=/Edge\/(\d+)/.exec($r),C1=/MSIE \d/.exec($r),$f=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec($r),St=!!(C1||$f||Pf),Mr=C1?document.documentMode:$f?+$f[1]:Pf?+Pf[1]:0,qt=!St&&/gecko\/(\d+)/i.test($r);qt&&+(/Firefox\/(\d+)/.exec($r)||[0,0])[1];const Ff=!St&&/Chrome\/(\d+)/.exec($r),Ke=!!Ff,E1=Ff?+Ff[1]:0,rt=!St&&!!kn&&/Apple Computer/.test(kn.vendor),ho=rt&&(/Mobile\/\w+/.test($r)||!!kn&&kn.maxTouchPoints>2),Bt=ho||(kn?/Mac/.test(kn.platform):!1),T1=kn?/Win/.test(kn.platform):!1,$n=/Android \d/.test($r),ul=!!Qg&&"webkitFontSmoothing"in Qg.documentElement.style,pM=ul?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function hM(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function An(t,e){return typeof t=="number"?t:t[e]}function mM(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function Yg(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let s=n||t.dom;s;){if(s.nodeType!=1){s=po(s);continue}let l=s,a=l==o.body,c=a?hM(o):mM(l),d=0,f=0;if(e.top<c.top+An(r,"top")?f=-(c.top-e.top+An(i,"top")):e.bottom>c.bottom-An(r,"bottom")&&(f=e.bottom-e.top>c.bottom-c.top?e.top+An(i,"top")-c.top:e.bottom-c.bottom+An(i,"bottom")),e.left<c.left+An(r,"left")?d=-(c.left-e.left+An(i,"left")):e.right>c.right-An(r,"right")&&(d=e.right-c.right+An(i,"right")),d||f)if(a)o.defaultView.scrollBy(d,f);else{let h=l.scrollLeft,m=l.scrollTop;f&&(l.scrollTop+=f),d&&(l.scrollLeft+=d);let g=l.scrollLeft-h,v=l.scrollTop-m;e={left:e.left-g,top:e.top-v,right:e.right-g,bottom:e.bottom-v}}let p=a?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(p))break;s=p=="absolute"?s.offsetParent:po(s)}}function gM(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let l=t.root.elementFromPoint(o,s);if(!l||l==t.dom||!t.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=n-20){r=l,i=a.top;break}}return{refDOM:r,refTop:i,stack:M1(t.dom)}}function M1(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=po(r));return e}function yM({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;j1(n,r==0?0:r-e)}function j1(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:o}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let Ai=null;function xM(t){if(t.setActive)return t.setActive();if(Ai)return t.focus(Ai);let e=M1(t);t.focus(Ai==null?{get preventScroll(){return Ai={preventScroll:!0},!0}}:void 0),Ai||(Ai=!1,j1(e,0))}function A1(t,e){let n,r=2e8,i,o=0,s=e.top,l=e.top,a,c;for(let d=t.firstChild,f=0;d;d=d.nextSibling,f++){let p;if(d.nodeType==1)p=d.getClientRects();else if(d.nodeType==3)p=Nn(d).getClientRects();else continue;for(let h=0;h<p.length;h++){let m=p[h];if(m.top<=s&&m.bottom>=l){s=Math.max(m.bottom,s),l=Math.min(m.top,l);let g=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(g<r){n=d,r=g,i=g&&n.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,d.nodeType==1&&g&&(o=f+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!a&&m.left<=e.left&&m.right>=e.left&&(a=d,c={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!n&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(o=f+1)}}return!n&&a&&(n=a,i=c,r=0),n&&n.nodeType==3?vM(n,i):!n||r&&n.nodeType==1?{node:t,offset:o}:A1(n,i)}function vM(t,e){let n=t.nodeValue.length,r=document.createRange(),i;for(let o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);let s=nr(r,1);if(s.top!=s.bottom&&hh(e,s)){i={node:t,offset:o+(e.left>=(s.left+s.right)/2?1:0)};break}}return r.detach(),i||{node:t,offset:0}}function hh(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function SM(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function bM(t,e,n){let{node:r,offset:i}=A1(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();o=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,i,o)}function kM(t,e,n,r){let i=-1;for(let o=e,s=!1;o!=t.dom;){let l=t.docView.nearestDesc(o,!0),a;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((a=l.dom.getBoundingClientRect()).width||a.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!s&&a.left>r.left||a.top>r.top?i=l.posBefore:(!s&&a.right<r.left||a.bottom<r.top)&&(i=l.posAfter),s=!0),!l.contentDOM&&i<0&&!l.node.isText))return(l.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?l.posBefore:l.posAfter;o=l.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function D1(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let s=t.childNodes[o];if(s.nodeType==1){let l=s.getClientRects();for(let a=0;a<l.length;a++){let c=l[a];if(hh(e,c))return D1(s,e,c)}}if((o=(o+1)%r)==i)break}return t}function wM(t,e){let n=t.dom.ownerDocument,r,i=0,o=fM(n,e.left,e.top);o&&({node:r,offset:i}=o);let s=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!s||!t.dom.contains(s.nodeType!=1?s.parentNode:s)){let c=t.dom.getBoundingClientRect();if(!hh(e,c)||(s=D1(t.dom,e,c),!s))return null}if(rt)for(let c=s;r&&c;c=po(c))c.draggable&&(r=void 0);if(s=SM(s,e),r){if(qt&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let d=r.childNodes[i],f;d.nodeName=="IMG"&&(f=d.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&i++}let c;ul&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=kM(t,r,i,e))}l==null&&(l=bM(t,s,e));let a=t.docView.nearestDesc(s,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function Xg(t){return t.top<t.bottom||t.left<t.right}function nr(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(Xg(r))return r}return Array.prototype.find.call(n,Xg)||t.getBoundingClientRect()}const CM=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function R1(t,e,n){let{node:r,offset:i,atom:o}=t.docView.domFromPos(e,n<0?-1:1),s=ul||qt;if(r.nodeType==3)if(s&&(CM.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let a=nr(Nn(r,i,i),n);if(qt&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=nr(Nn(r,i-1,i-1),-1);if(c.top==a.top){let d=nr(Nn(r,i,i+1),-1);if(d.top!=a.top)return $o(d,d.left<c.left)}}return a}else{let a=i,c=i,d=n<0?1:-1;return n<0&&!i?(c++,d=-1):n>=0&&i==r.nodeValue.length?(a--,d=1):n<0?a--:c++,$o(nr(Nn(r,a,c),d),d<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(n<0||i==Ut(r))){let a=r.childNodes[i-1];if(a.nodeType==1)return rd(a.getBoundingClientRect(),!1)}if(o==null&&i<Ut(r)){let a=r.childNodes[i];if(a.nodeType==1)return rd(a.getBoundingClientRect(),!0)}return rd(r.getBoundingClientRect(),n>=0)}if(o==null&&i&&(n<0||i==Ut(r))){let a=r.childNodes[i-1],c=a.nodeType==3?Nn(a,Ut(a)-(s?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(c)return $o(nr(c,1),!1)}if(o==null&&i<Ut(r)){let a=r.childNodes[i];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let c=a?a.nodeType==3?Nn(a,0,s?0:1):a.nodeType==1?a:null:null;if(c)return $o(nr(c,-1),!0)}return $o(nr(r.nodeType==3?Nn(r):r,-n),n>=0)}function $o(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function rd(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function I1(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function EM(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return I1(t,e,()=>{let{node:o}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(o,!0);if(!l)break;if(l.node.isBlock){o=l.contentDOM||l.dom;break}o=l.dom.parentNode}let s=R1(t,i.pos,1);for(let l=o.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=Nn(l,0,l.nodeValue.length).getClientRects();else continue;for(let c=0;c<a.length;c++){let d=a[c];if(d.bottom>d.top+1&&(n=="up"?s.top-d.top>(d.bottom-s.top)*2:d.bottom-s.bottom>(s.bottom-d.top)*2))return!1}}return!0})}const TM=/[\u0590-\u08ac]/;function MM(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,l=t.domSelection();return l?!TM.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?o:s:I1(t,e,()=>{let{focusNode:a,focusOffset:c,anchorNode:d,anchorOffset:f}=t.domSelectionRange(),p=l.caretBidiLevel;l.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:m,focusOffset:g}=t.domSelectionRange(),v=m&&!h.contains(m.nodeType==1?m:m.parentNode)||a==m&&c==g;try{l.collapse(d,f),a&&(a!=d||c!=f)&&l.extend&&l.extend(a,c)}catch{}return p!=null&&(l.caretBidiLevel=p),v}):r.pos==r.start()||r.pos==r.end()}let Zg=null,ey=null,ty=!1;function jM(t,e,n){return Zg==e&&ey==n?ty:(Zg=e,ey=n,ty=n=="up"||n=="down"?EM(t,e,n):MM(t,e,n))}const Jt=0,ny=1,Qr=2,wn=3;class dl{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Jt,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,s;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Ve(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),s;if(o&&(!n||o.node))if(r&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)for(let s=0;s<i.children.length;s++){let l=i.children[s];if(l.size){i=l;break}}return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let s=this.children[r],l=o+s.size;if(l>e||s instanceof N1){i=e-o;break}o=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof O1&&o.side>=0;r--);if(n<=0){let o,s=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,s=!1);return o&&n&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?Ve(o.dom)+1:0}}else{let o,s=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?Ve(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let s=r,l=0;;l++){let a=this.children[l],c=s+a.size;if(i==-1&&e<=c){let d=s+a.border;if(e>=d&&n<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,n,d);e=s;for(let f=l;f>0;f--){let p=this.children[f-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){i=Ve(p.dom)+1;break}e-=p.size}i==-1&&(i=0)}if(i>-1&&(c>n||l==this.children.length-1)){n=c;for(let d=l+1;d<this.children.length;d++){let f=this.children[d];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=Ve(f.dom);break}n+=f.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let o=Math.min(e,n),s=Math.max(e,n);for(let h=0,m=0;h<this.children.length;h++){let g=this.children[h],v=m+g.size;if(o>m&&s<v)return g.setSelection(e-m-g.border,n-m-g.border,r,i);m=v}let l=this.domFromPos(e,e?-1:1),a=n==e?l:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),d=r.domSelectionRange(),f=!1;if((qt||rt)&&e==n){let{node:h,offset:m}=l;if(h.nodeType==3){if(f=!!(m&&h.nodeValue[m-1]==`
`),f&&m==h.nodeValue.length)for(let g=h,v;g;g=g.parentNode){if(v=g.nextSibling){v.nodeName=="BR"&&(l=a={node:v.parentNode,offset:Ve(v)+1});break}let y=g.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let g=h.childNodes[m-1];f=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(qt&&d.focusNode&&d.focusNode!=a.node&&d.focusNode.nodeType==1){let h=d.focusNode.childNodes[d.focusOffset];h&&h.contentEditable=="false"&&(i=!0)}if(!(i||f&&rt)&&gi(l.node,l.offset,d.anchorNode,d.anchorOffset)&&gi(a.node,a.offset,d.focusNode,d.focusOffset))return;let p=!1;if((c.extend||e==n)&&!(f&&qt)){c.collapse(l.node,l.offset);try{e!=n&&c.extend(a.node,a.offset),p=!0}catch{}}if(!p){if(e>n){let m=l;l=a,a=m}let h=document.createRange();h.setEnd(a.node,a.offset),h.setStart(l.node,l.offset),c.removeAllRanges(),c.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],s=r+o.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let l=r+o.border,a=s-o.border;if(e>=l&&n<=a){this.dirty=e==r||n==s?Qr:ny,e==l&&n==a&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=wn:o.markDirty(e-l,n-l);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Qr:wn}r=s}this.dirty=Qr}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Qr:ny;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class O1 extends dl{constructor(e,n,r,i){let o,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(s.nodeType!=1){let l=document.createElement("span");l.appendChild(s),s=l}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==Jt&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class AM extends dl{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class yi extends dl{constructor(e,n,r,i,o){super(e,[],r,i),this.mark=n,this.spec=o}static create(e,n,r,i){let o=i.nodeViews[n.type.name],s=o&&o(n,i,r);return(!s||!s.dom)&&(s=bi.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new yi(e,n,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&wn||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=wn&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Jt){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Jt}}slice(e,n,r){let i=yi.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;n<s&&(o=_f(o,n,s,r)),e>0&&(o=_f(o,0,e,r));for(let l=0;l<o.length;l++)o[l].parent=i;return i.children=o,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class jr extends dl{constructor(e,n,r,i,o,s,l,a,c){super(e,[],o,s),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(e,n,r,i,o,s){let l=o.nodeViews[n.type.name],a,c=l&&l(n,o,()=>{if(!a)return s;if(a.parent)return a.parent.posBeforeChild(a)},r,i),d=c&&c.dom,f=c&&c.contentDOM;if(n.isText){if(!d)d=document.createTextNode(n.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:f}=bi.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!f&&!n.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),n.type.spec.draggable&&(d.draggable=!0));let p=d;return d=P1(d,r,n),c?a=new DM(e,n,r,i,d,f||null,p,c,o,s+1):n.isText?new nu(e,n,r,i,d,p,o):new jr(e,n,r,i,d,f||null,p,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>D.empty)}return e}matchesNode(e,n,r){return this.dirty==Jt&&e.eq(this.node)&&qa(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,o=e.composing?this.localCompositionInfo(e,n):null,s=o&&o.pos>-1?o:null,l=o&&o.pos<0,a=new IM(this,s&&s.node,e);zM(this.node,this.innerDeco,(c,d,f)=>{c.spec.marks?a.syncToMarks(c.spec.marks,r,e,d):c.type.side>=0&&!f&&a.syncToMarks(d==this.node.childCount?ie.none:this.node.child(d).marks,r,e,d),a.placeWidget(c,e,i)},(c,d,f,p)=>{a.syncToMarks(c.marks,r,e,p);let h;a.findNodeMatch(c,d,f,p)||l&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(h=a.findIndexWithChild(o.node))>-1&&a.updateNodeAt(c,d,f,h,e)||a.updateNextNode(c,d,f,e,p,i)||a.addNode(c,d,f,e,i),i+=c.nodeSize}),a.syncToMarks([],r,e,0),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==Qr)&&(s&&this.protectLocalComposition(e,s),z1(this.contentDOM,this.children,e),ho&&LM(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof W)||r<n||i>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let s=o.nodeValue,l=PM(this.node.content,s,r-n,i-n);return l<0?null:{node:o,pos:l,text:s}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new AM(this,o,n,i);e.input.compositionNodes.push(s),this.children=_f(this.children,r,r+i.length,e,s)}update(e,n,r,i){return this.dirty==wn||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Jt}updateOuterDeco(e){if(qa(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=L1(this.dom,this.nodeDOM,Bf(this.outerDeco,this.node,n),Bf(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function ry(t,e,n,r,i){P1(r,e,t);let o=new jr(void 0,t,e,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class nu extends jr{constructor(e,n,r,i,o,s,l){super(e,n,r,i,o,null,s,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==wn||this.dirty!=Jt&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Jt||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Jt,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),o=document.createTextNode(i.text);return new nu(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=wn)}get domAtom(){return!1}isText(e){return this.node.text==e}}class N1 extends dl{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Jt&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class DM extends jr{constructor(e,n,r,i,o,s,l,a,c,d){super(e,n,r,i,o,s,l,c,d),this.spec=a}update(e,n,r,i){if(this.dirty==wn)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function z1(t,e,n){let r=t.firstChild,i=!1;for(let o=0;o<e.length;o++){let s=e[o],l=s.dom;if(l.parentNode==t){for(;l!=r;)r=iy(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(l,r);if(s instanceof yi){let a=r?r.previousSibling:t.lastChild;z1(s.contentDOM,s.children,n),r=a?a.nextSibling:t.firstChild}}for(;r;)r=iy(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const ds=function(t){t&&(this.nodeName=t)};ds.prototype=Object.create(null);const Yr=[new ds];function Bf(t,e,n){if(t.length==0)return Yr;let r=n?Yr[0]:new ds,i=[r];for(let o=0;o<t.length;o++){let s=t[o].type.attrs;if(s){s.nodeName&&i.push(r=new ds(s.nodeName));for(let l in s){let a=s[l];a!=null&&(n&&i.length==1&&i.push(r=new ds(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a))}}}return i}function L1(t,e,n,r){if(n==Yr&&r==Yr)return e;let i=e;for(let o=0;o<r.length;o++){let s=r[o],l=n[o];if(o){let a;l&&l.nodeName==s.nodeName&&i!=t&&(a=i.parentNode)&&a.nodeName.toLowerCase()==s.nodeName||(a=document.createElement(s.nodeName),a.pmIsDeco=!0,a.appendChild(i),l=Yr[0]),i=a}RM(i,l||Yr[0],s)}return i}function RM(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&t.classList.add(i[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function P1(t,e,n){return L1(t,t,Yr,Bf(e,n,t.nodeType!=1))}function qa(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function iy(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class IM{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=OM(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r,i){let o=0,s=this.stack.length>>1,l=Math.min(s,e.length);for(;o<l&&(o==s-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<s;)this.destroyRest(),this.top.dirty=Jt,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1,c=this.top.children.length;i<this.preMatch.index&&(c=Math.min(this.index+3,c));for(let d=this.index;d<c;d++){let f=this.top.children[d];if(f.matchesMark(e[s])&&!this.isLocked(f.dom)){a=d;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let d=yi.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,d),this.top=d,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let o=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))o=this.top.children.indexOf(s,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let c=this.top.children[l];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){o=l;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,i,o){let s=this.top.children[i];return s.dirty==wn&&s.dom==s.contentDOM&&(s.dirty=Qr),s.update(e,n,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,o,s){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof jr){let c=this.preMatch.matched.get(a);if(c!=null&&c!=o)return!1;let d=a.dom,f,p=this.isLocked(d)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=wn&&qa(n,a.outerDeco));if(!p&&a.update(e,n,r,i))return this.destroyBetween(this.index,l),a.dom!=d&&(this.changed=!0),this.index++,!0;if(!p&&(f=this.recreateWrapper(a,e,n,r,i,s)))return this.destroyBetween(this.index,l),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=Qr,f.updateChildren(i,s+1),f.dirty=Jt),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,o,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!qa(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let l=jr.create(this.top,n,r,i,o,s);if(l.contentDOM){l.children=e.children,e.children=[];for(let a of l.children)a.parent=l}return e.destroy(),l}addNode(e,n,r,i,o){let s=jr.create(this.top,e,n,r,i,o);s.contentDOM&&s.updateChildren(i,o+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new O1(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof yi;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof nu)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((rt||Ke)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new N1(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function OM(t,e){let n=e,r=n.children.length,i=t.childCount,o=new Map,s=[];e:for(;i>0;){let l;for(;;)if(r){let c=n.children[r-1];if(c instanceof yi)n=c,r=c.children.length;else{l=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let a=l.node;if(a){if(a!=t.child(i-1))break;--i,o.set(l,i),s.push(l)}}return{index:i,matched:o,matches:s.reverse()}}function NM(t,e){return t.type.side-e.type.side}function zM(t,e,n,r){let i=e.locals(t),o=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let d=t.child(c);r(d,i,e.forChild(o,d),c),o+=d.nodeSize}return}let s=0,l=[],a=null;for(let c=0;;){let d,f;for(;s<i.length&&i[s].to==o;){let v=i[s++];v.widget&&(d?(f||(f=[d])).push(v):d=v)}if(d)if(f){f.sort(NM);for(let v=0;v<f.length;v++)n(f[v],c,!!a)}else n(d,c,!!a);let p,h;if(a)h=-1,p=a,a=null;else if(c<t.childCount)h=c,p=t.child(c++);else break;for(let v=0;v<l.length;v++)l[v].to<=o&&l.splice(v--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)l.push(i[s++]);let m=o+p.nodeSize;if(p.isText){let v=m;s<i.length&&i[s].from<v&&(v=i[s].from);for(let y=0;y<l.length;y++)l[y].to<v&&(v=l[y].to);v<m&&(a=p.cut(v-o),p=p.cut(0,v-o),m=v,h=-1)}else for(;s<i.length&&i[s].to<m;)s++;let g=p.isInline&&!p.isLeaf?l.filter(v=>!v.inline):l.slice();r(p,g,e.forChild(o,p),h),o=m}}function LM(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function PM(t,e,n,r){for(let i=0,o=0;i<t.childCount&&o<=r;){let s=t.child(i++),l=o;if(o+=s.nodeSize,!s.isText)continue;let a=s.text;for(;i<t.childCount;){let c=t.child(i++);if(o+=c.nodeSize,!c.isText)break;a+=c.text}if(o>=n){if(o>=r&&a.slice(r-e.length-l,r-l)==e)return r-e.length;let c=l<r?a.lastIndexOf(e,r-l-1):-1;if(c>=0&&c+e.length+l>=n)return l+c;if(n==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return-1}function _f(t,e,n,r,i){let o=[];for(let s=0,l=0;s<t.length;s++){let a=t[s],c=l,d=l+=a.size;c>=n||d<=e?o.push(a):(c<e&&o.push(a.slice(0,e-c,r)),i&&(o.push(i),i=void 0),d>n&&o.push(a.slice(n-c,a.size,r)))}return o}function mh(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),o=i&&i.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let l=r.resolve(s),a,c;if(tu(n)){for(a=s;i&&!i.node;)i=i.parent;let f=i.node;if(i&&f.isAtom&&H.isSelectable(f)&&i.parent&&!(f.isInline&&uM(n.focusNode,n.focusOffset,i.dom))){let p=i.posBefore;c=new H(s==p?l:r.resolve(p))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let f=s,p=s;for(let h=0;h<n.rangeCount;h++){let m=n.getRangeAt(h);f=Math.min(f,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),p=Math.max(p,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(f<0)return null;[a,s]=p==t.state.selection.anchor?[p,f]:[f,p],l=r.resolve(s)}else a=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(a<0)return null}let d=r.resolve(a);if(!c){let f=e=="pointer"||t.state.selection.head<l.pos&&!o?1:-1;c=gh(t,d,l,f)}return c}function $1(t){return t.editable?t.hasFocus():B1(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function _n(t,e=!1){let n=t.state.selection;if(F1(t,n),!!$1(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Ke){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&gi(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)FM(t);else{let{anchor:r,head:i}=n,o,s;oy&&!(n instanceof W)&&(n.$from.parent.inlineContent||(o=sy(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=sy(t,n.to))),t.docView.setSelection(r,i,t,e),oy&&(o&&ly(o),s&&ly(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&$M(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const oy=rt||Ke&&E1<63;function sy(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(rt&&i&&i.contentEditable=="false")return id(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return id(i);if(o)return id(o)}}function id(t){return t.contentEditable="true",rt&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function ly(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function $M(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!$1(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function FM(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,Ve(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&St&&Mr<=11&&(n.disabled=!0,n.disabled=!1)}function F1(t,e){if(e instanceof H){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(ay(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else ay(t)}function ay(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function gh(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||W.between(e,n,r)}function cy(t){return t.editable&&!t.hasFocus()?!1:B1(t)}function B1(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function BM(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return gi(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Hf(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return o&&J.findFrom(o,e)}function sr(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function uy(t,e,n){let r=t.state.selection;if(r instanceof W)if(n.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let s=t.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return sr(t,new W(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=Hf(t.state,e);return i&&i instanceof H?sr(t,i):!1}else if(!(Bt&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let l=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=t.docView.descAt(l))&&!s.contentDOM?H.isSelectable(o)?sr(t,new H(e<0?t.state.doc.resolve(i.pos-o.nodeSize):i)):ul?sr(t,new W(t.state.doc.resolve(e<0?l:l+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof H&&r.node.isInline)return sr(t,new W(e>0?r.$to:r.$from));{let i=Hf(t.state,e);return i?sr(t,i):!1}}}function Ja(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function fs(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Di(t,e){return e<0?_M(t):HM(t)}function _M(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,s=!1;for(qt&&n.nodeType==1&&r<Ja(n)&&fs(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(fs(l,-1))i=n,o=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(_1(n))break;{let l=n.previousSibling;for(;l&&fs(l,-1);)i=n.parentNode,o=Ve(l),l=l.previousSibling;if(l)n=l,r=Ja(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?Uf(t,n,r):i&&Uf(t,i,o)}function HM(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Ja(n),o,s;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(fs(l,1))o=n,s=++r;else break}else{if(_1(n))break;{let l=n.nextSibling;for(;l&&fs(l,1);)o=l.parentNode,s=Ve(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=Ja(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}o&&Uf(t,o,s)}function _1(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function UM(t,e){for(;t&&e==t.childNodes.length&&!cl(t);)e=Ve(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function VM(t,e){for(;t&&!e&&!cl(t);)e=Ve(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Uf(t,e,n){if(e.nodeType!=3){let o,s;(s=UM(e,n))?(e=s,n=0):(o=VM(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(!r)return;if(tu(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&_n(t)},50)}function dy(t,e){let n=t.state.doc.resolve(e);if(!(Ke||T1)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function fy(t,e,n){let r=t.state.selection;if(r instanceof W&&!r.empty||n.indexOf("s")>-1||Bt&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=Hf(t.state,e);if(s&&s instanceof H)return sr(t,s)}if(!i.parent.inlineContent){let s=e<0?i:o,l=r instanceof Dt?J.near(s,e):J.findFrom(s,e);return l?sr(t,l):!1}return!1}function py(t,e){if(!(t.state.selection instanceof W))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let s=t.state.tr;return e<0?s.delete(n.pos-o.nodeSize,n.pos):s.delete(n.pos,n.pos+o.nodeSize),t.dispatch(s),!0}return!1}function hy(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function WM(t){if(!rt||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;hy(t,r,"true"),setTimeout(()=>hy(t,r,"false"),20)}return!1}function KM(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function qM(t,e){let n=e.keyCode,r=KM(e);if(n==8||Bt&&n==72&&r=="c")return py(t,-1)||Di(t,-1);if(n==46&&!e.shiftKey||Bt&&n==68&&r=="c")return py(t,1)||Di(t,1);if(n==13||n==27)return!0;if(n==37||Bt&&n==66&&r=="c"){let i=n==37?dy(t,t.state.selection.from)=="ltr"?-1:1:-1;return uy(t,i,r)||Di(t,i)}else if(n==39||Bt&&n==70&&r=="c"){let i=n==39?dy(t,t.state.selection.from)=="ltr"?1:-1:1;return uy(t,i,r)||Di(t,i)}else{if(n==38||Bt&&n==80&&r=="c")return fy(t,-1,r)||Di(t,-1);if(n==40||Bt&&n==78&&r=="c")return WM(t)||fy(t,1,r)||Di(t,1);if(r==(Bt?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function yh(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let s=t.someProp("clipboardSerializer")||bi.fromSchema(t.state.schema),l=q1(),a=l.createElement("div");a.appendChild(s.serializeFragment(r,{document:l}));let c=a.firstChild,d,f=0;for(;c&&c.nodeType==1&&(d=K1[c.nodeName.toLowerCase()]);){for(let h=d.length-1;h>=0;h--){let m=l.createElement(d[h]);for(;a.firstChild;)m.appendChild(a.firstChild);a.appendChild(m),f++}c=a.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${o}${f?` -${f}`:""} ${JSON.stringify(n)}`);let p=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:p,slice:e}}function H1(t,e,n,r,i){let o=i.parent.type.spec.code,s,l;if(!n&&!e)return null;let a=!!e&&(r||o||!n);if(a){if(t.someProp("transformPastedText",p=>{e=p(e,o||r,t)}),o)return l=new L(D.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",p=>{l=p(l,t,!0)}),l;let f=t.someProp("clipboardTextParser",p=>p(e,i,r,t));if(f)l=f;else{let p=i.marks(),{schema:h}=t.state,m=bi.fromSchema(h);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let v=s.appendChild(document.createElement("p"));g&&v.appendChild(m.serializeNode(h.text(g,p)))})}}else t.someProp("transformPastedHTML",f=>{n=f(n,t)}),s=YM(n),ul&&XM(s);let c=s&&s.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let f=+d[3];f>0;f--){let p=s.firstChild;for(;p&&p.nodeType!=1;)p=p.nextSibling;if(!p)break;s=p}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||cs.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(a||d),context:i,ruleFromNode(p){return p.nodeName=="BR"&&!p.nextSibling&&p.parentNode&&!JM.test(p.parentNode.nodeName)?{ignore:!0}:null}})),d)l=ZM(my(l,+d[1],+d[2]),d[4]);else if(l=L.maxOpen(GM(l.content,i),!0),l.openStart||l.openEnd){let f=0,p=0;for(let h=l.content.firstChild;f<l.openStart&&!h.type.spec.isolating;f++,h=h.firstChild);for(let h=l.content.lastChild;p<l.openEnd&&!h.type.spec.isolating;p++,h=h.lastChild);l=my(l,f,p)}return t.someProp("transformPasted",f=>{l=f(l,t,a)}),l}const JM=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function GM(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),o,s=[];if(t.forEach(l=>{if(!s)return;let a=i.findWrapping(l.type),c;if(!a)return s=null;if(c=s.length&&o.length&&V1(a,o,l,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=W1(s[s.length-1],o.length));let d=U1(l,a);s.push(d),i=i.matchType(d.type),o=a}}),s)return D.from(s)}return t}function U1(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,D.from(t));return t}function V1(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let o=V1(t,e,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(D.from(U1(n,t,i+1))))}}function W1(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,W1(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(D.empty,!0);return t.copy(n.append(r))}function Vf(t,e,n,r,i,o){let s=e<0?t.firstChild:t.lastChild,l=s.content;return t.childCount>1&&(o=0),i<r-1&&(l=Vf(l,e,n,r,i+1,o)),i>=n&&(l=e<0?s.contentMatchAt(0).fillBefore(l,o<=i).append(l):l.append(s.contentMatchAt(s.childCount).fillBefore(D.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(l))}function my(t,e,n){return e<t.openStart&&(t=new L(Vf(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new L(Vf(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const K1={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let gy=null;function q1(){return gy||(gy=document.implementation.createHTMLDocument("title"))}let od=null;function QM(t){let e=window.trustedTypes;return e?(od||(od=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),od.createHTML(t)):t}function YM(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=q1().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&K1[r[1].toLowerCase()])&&(t=i.map(o=>"<"+o+">").join("")+t+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=QM(t),i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function XM(t){let e=t.querySelectorAll(Ke?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function ZM(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:o,openEnd:s}=t;for(let l=r.length-2;l>=0;l-=2){let a=n.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;i=D.from(a.create(r[l+1],i)),o++,s++}return new L(i,o,s)}const at={},ct={},ej={touchstart:!0,touchmove:!0};class tj{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function nj(t){for(let e in at){let n=at[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{ij(t,r)&&!xh(t,r)&&(t.editable||!(r.type in ct))&&n(t,r)},ej[e]?{passive:!0}:void 0)}rt&&t.dom.addEventListener("input",()=>null),Wf(t)}function yr(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function rj(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Wf(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>xh(t,r))})}function xh(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function ij(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function oj(t,e){!xh(t,e)&&at[e.type]&&(t.editable||!(e.type in ct))&&at[e.type](t,e)}ct.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!G1(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!($n&&Ke&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),ho&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Vr(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||qM(t,n)?n.preventDefault():yr(t,"key")};ct.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};ct.keypress=(t,e)=>{let n=e;if(G1(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Bt&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof W)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),o=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,i,o))&&t.dispatch(o()),n.preventDefault()}};function ru(t){return{left:t.clientX,top:t.clientY}}function sj(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function vh(t,e,n,r,i){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(t.someProp(e,l=>s>o.depth?l(t,n,o.nodeAfter,o.before(s),i,!0):l(t,n,o.node(s),o.before(s),i,!1)))return!0;return!1}function no(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function lj(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&H.isSelectable(r)?(no(t,new H(n)),!0):!1}function aj(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof H&&(r=n.node);let o=t.state.doc.resolve(e);for(let s=o.depth+1;s>0;s--){let l=s>o.depth?o.nodeAfter:o.node(s);if(H.isSelectable(l)){r&&n.$from.depth>0&&s>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(s);break}}return i!=null?(no(t,H.create(t.state.doc,i)),!0):!1}function cj(t,e,n,r,i){return vh(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(i?aj(t,n):lj(t,n))}function uj(t,e,n,r){return vh(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function dj(t,e,n,r){return vh(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||fj(t,n,r)}function fj(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(no(t,W.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),l=i.before(o);if(s.inlineContent)no(t,W.create(r,l+1,l+1+s.content.size));else if(H.isSelectable(s))no(t,H.create(r,l));else continue;return!0}}function Sh(t){return Ga(t)}const J1=Bt?"metaKey":"ctrlKey";at.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Sh(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&sj(n,t.input.lastClick)&&!n[J1]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o,button:n.button};let s=t.posAtCoords(ru(n));s&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new pj(t,s,n,!!r)):(o=="doubleClick"?uj:dj)(t,s.pos,s.inside,n)?n.preventDefault():yr(t,"pointer"))};class pj{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[J1],this.allowDefault=r.shiftKey;let o,s;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),s=n.inside;else{let d=e.state.doc.resolve(n.pos);o=d.parent,s=d.depth?d.before():0}const l=i?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a&&a.nodeDOM.nodeType==1?a.nodeDOM:null;let{selection:c}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||c instanceof H&&c.from<=s&&c.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&qt&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),yr(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>_n(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(ru(e))),this.updateAllowDefault(e),this.allowDefault||!n?yr(this.view,"pointer"):cj(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||rt&&this.mightDrag&&!this.mightDrag.node.isAtom||Ke&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(no(this.view,J.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):yr(this.view,"pointer")}move(e){this.updateAllowDefault(e),yr(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}at.touchstart=t=>{t.input.lastTouch=Date.now(),Sh(t),yr(t,"pointer")};at.touchmove=t=>{t.input.lastTouch=Date.now(),yr(t,"pointer")};at.contextmenu=t=>Sh(t);function G1(t,e){return t.composing?!0:rt&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const hj=$n?5e3:-1;ct.compositionstart=ct.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof W&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||Ke&&T1&&mj(t)))t.markCursor=t.state.storedMarks||n.marks(),Ga(t,!0),t.markCursor=null;else if(Ga(t,!e.selection.empty),qt&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){let l=t.domSelection();l&&l.collapse(s,s.nodeValue.length);break}else i=s,o=-1}}t.input.composing=!0}Q1(t,hj)};function mj(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}ct.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.badSafariComposition?t.domObserver.forceFlush():t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,Q1(t,20))};function Q1(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Ga(t),e))}function Y1(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=yj());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function gj(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=aM(e.focusNode,e.focusOffset),r=cM(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,o=t.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function yj(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Ga(t,e=!1){if(!($n&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),Y1(t),e||t.docView&&t.docView.dirty){let n=mh(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function xj(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Ks=St&&Mr<15||ho&&pM<604;at.copy=ct.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let o=Ks?null:n.clipboardData,s=r.content(),{dom:l,text:a}=yh(t,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",l.innerHTML),o.setData("text/plain",a)):xj(t,l),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function vj(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function Sj(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?qs(t,r.value,null,i,e):qs(t,r.textContent,r.innerHTML,i,e)},50)}function qs(t,e,n,r,i){let o=H1(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",a=>a(t,i,o||L.empty)))return!0;if(!o)return!1;let s=vj(o),l=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(o);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function X1(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}ct.paste=(t,e)=>{let n=e;if(t.composing&&!$n)return;let r=Ks?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&qs(t,X1(r),r.getData("text/html"),i,n)?n.preventDefault():Sj(t,n)};class Z1{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const bj=Bt?"altKey":"ctrlKey";function eS(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[bj]}at.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,o=i.empty?null:t.posAtCoords(ru(n)),s;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof H?i.to-1:i.to))){if(r&&r.mightDrag)s=H.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=t.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=t.docView&&(s=H.create(t.state.doc,f.posBefore))}}let l=(s||t.state.selection).content(),{dom:a,text:c,slice:d}=yh(t,l);(!n.dataTransfer.files.length||!Ke||E1>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Ks?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",Ks||n.dataTransfer.setData("text/plain",c),t.dragging=new Z1(d,eS(t,n),s)};at.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};ct.dragover=ct.dragenter=(t,e)=>e.preventDefault();ct.drop=(t,e)=>{try{kj(t,e,t.dragging)}finally{t.dragging=null}};function kj(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(ru(e));if(!r)return;let i=t.state.doc.resolve(r.pos),o=n&&n.slice;o?t.someProp("transformPasted",h=>{o=h(o,t,!1)}):o=H1(t,X1(e.dataTransfer),Ks?null:e.dataTransfer.getData("text/html"),!1,i);let s=!!(n&&eS(t,e));if(t.someProp("handleDrop",h=>h(t,e,o||L.empty,s))){e.preventDefault();return}if(!o)return;e.preventDefault();let l=o?g1(t.state.doc,i.pos,o):i.pos;l==null&&(l=i.pos);let a=t.state.tr;if(s){let{node:h}=n;h?h.replace(a):a.deleteSelection()}let c=a.mapping.map(l),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,f=a.doc;if(d?a.replaceRangeWith(c,c,o.content.firstChild):a.replaceRange(c,c,o),a.doc.eq(f))return;let p=a.doc.resolve(c);if(d&&H.isSelectable(o.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(o.content.firstChild))a.setSelection(new H(p));else{let h=a.mapping.map(l);a.mapping.maps[a.mapping.maps.length-1].forEach((m,g,v,y)=>h=y),a.setSelection(gh(t,p,a.doc.resolve(h)))}t.focus(),t.dispatch(a.setMeta("uiEvent","drop"))}at.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&_n(t)},20))};at.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};at.beforeinput=(t,e)=>{if(Ke&&$n&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,Vr(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in ct)at[t]=ct[t];function Js(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Qa{constructor(e,n){this.toDOM=e,this.spec=n||ii,this.side=this.spec.side||0}map(e,n,r,i){let{pos:o,deleted:s}=e.mapResult(n.from+i,this.side<0?-1:1);return s?null:new Wt(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Qa&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Js(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Ar{constructor(e,n){this.attrs=e,this.spec=n||ii}map(e,n,r,i){let o=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new Wt(o,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Ar&&Js(this.attrs,e.attrs)&&Js(this.spec,e.spec)}static is(e){return e.type instanceof Ar}destroy(){}}class bh{constructor(e,n){this.attrs=e,this.spec=n||ii}map(e,n,r,i){let o=e.mapResult(n.from+i,1);if(o.deleted)return null;let s=e.mapResult(n.to+i,-1);return s.deleted||s.pos<=o.pos?null:new Wt(o.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),o;return i==n.from&&!(o=e.child(r)).isText&&i+o.nodeSize==n.to}eq(e){return this==e||e instanceof bh&&Js(this.attrs,e.attrs)&&Js(this.spec,e.spec)}destroy(){}}class Wt{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Wt(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Wt(e,e,new Qa(n,r))}static inline(e,n,r,i){return new Wt(e,n,new Ar(r,i))}static node(e,n,r,i){return new Wt(e,n,new bh(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ar}get widget(){return this.type instanceof Qa}}const Ii=[],ii={};class Ae{constructor(e,n){this.local=e.length?e:Ii,this.children=n.length?n:Ii}static create(e,n){return n.length?Ya(n,e,0,ii):et}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,o){for(let s=0;s<this.local.length;s++){let l=this.local[s];l.from<=n&&l.to>=e&&(!o||o(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let l=this.children[s]+1;this.children[s+2].findInner(e-l,n-l,r,i+l,o)}}map(e,n,r){return this==et||e.maps.length==0?this:this.mapInner(e,n,0,0,r||ii)}mapInner(e,n,r,i,o){let s;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,i);a&&a.type.valid(n,a)?(s||(s=[])).push(a):o.onRemove&&o.onRemove(this.local[l].spec)}return this.children.length?wj(this.children,s||[],e,n,r,i,o):s?new Ae(s.sort(oi),Ii):et}add(e,n){return n.length?this==et?Ae.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,o=0;e.forEach((l,a)=>{let c=a+r,d;if(d=nS(n,l,c)){for(i||(i=this.children.slice());o<i.length&&i[o]<a;)o+=3;i[o]==a?i[o+2]=i[o+2].addInner(l,d,c+1):i.splice(o,0,a,a+l.nodeSize,Ya(d,l,c+1,ii)),o+=3}});let s=tS(o?rS(n):n,-r);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||s.splice(l--,1);return new Ae(s.length?this.local.concat(s).sort(oi):this.local,i||this.children)}remove(e){return e.length==0||this==et?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let s,l=r[o]+n,a=r[o+1]+n;for(let d=0,f;d<e.length;d++)(f=e[d])&&f.from>l&&f.to<a&&(e[d]=null,(s||(s=[])).push(f));if(!s)continue;r==this.children&&(r=this.children.slice());let c=r[o+2].removeInner(s,l+1);c!=et?r[o+2]=c:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<e.length;o++)if(s=e[o])for(let l=0;l<i.length;l++)i[l].eq(s,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Ae(i,r):et}forChild(e,n){if(this==et)return this;if(n.isLeaf)return Ae.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let o=e+1,s=o+n.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<s&&a.to>o&&a.type instanceof Ar){let c=Math.max(o,a.from)-o,d=Math.min(s,a.to)-o;c<d&&(i||(i=[])).push(a.copy(c,d))}}if(i){let l=new Ae(i.sort(oi),Ii);return r?new dr([l,r]):l}return r||et}eq(e){if(this==e)return!0;if(!(e instanceof Ae)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return kh(this.localsInner(e))}localsInner(e){if(this==et)return Ii;if(e.inlineContent||!this.local.some(Ar.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Ar||n.push(this.local[r]);return n}forEachSet(e){e(this)}}Ae.empty=new Ae([],[]);Ae.removeOverlap=kh;const et=Ae.empty;class dr{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,ii));return dr.from(r)}forChild(e,n){if(n.isLeaf)return Ae.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,n);o!=et&&(o instanceof dr?r=r.concat(o.members):r.push(o))}return dr.from(r)}eq(e){if(!(e instanceof dr)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let s=0;s<o.length;s++)n.push(o[s])}}return n?kh(r?n:n.sort(oi)):Ii}static from(e){switch(e.length){case 0:return et;case 1:return e[0];default:return new dr(e.every(n=>n instanceof Ae)?e:e.reduce((n,r)=>n.concat(r instanceof Ae?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function wj(t,e,n,r,i,o,s){let l=t.slice();for(let c=0,d=o;c<n.maps.length;c++){let f=0;n.maps[c].forEach((p,h,m,g)=>{let v=g-m-(h-p);for(let y=0;y<l.length;y+=3){let x=l[y+1];if(x<0||p>x+d-f)continue;let S=l[y]+d-f;h>=S?l[y+1]=p<=S?-2:-1:p>=d&&v&&(l[y]+=v,l[y+1]+=v)}f+=v}),d=n.maps[c].map(d,-1)}let a=!1;for(let c=0;c<l.length;c+=3)if(l[c+1]<0){if(l[c+1]==-2){a=!0,l[c+1]=-1;continue}let d=n.map(t[c]+o),f=d-i;if(f<0||f>=r.content.size){a=!0;continue}let p=n.map(t[c+1]+o,-1),h=p-i,{index:m,offset:g}=r.content.findIndex(f),v=r.maybeChild(m);if(v&&g==f&&g+v.nodeSize==h){let y=l[c+2].mapInner(n,v,d+1,t[c]+o+1,s);y!=et?(l[c]=f,l[c+1]=h,l[c+2]=y):(l[c+1]=-2,a=!0)}else a=!0}if(a){let c=Cj(l,t,e,n,i,o,s),d=Ya(c,r,0,s);e=d.local;for(let f=0;f<l.length;f+=3)l[f+1]<0&&(l.splice(f,3),f-=3);for(let f=0,p=0;f<d.children.length;f+=3){let h=d.children[f];for(;p<l.length&&l[p]<h;)p+=3;l.splice(p,0,d.children[f],d.children[f+1],d.children[f+2])}}return new Ae(e.sort(oi),l)}function tS(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new Wt(i.from+e,i.to+e,i.type))}return n}function Cj(t,e,n,r,i,o,s){function l(a,c){for(let d=0;d<a.local.length;d++){let f=a.local[d].map(r,i,c);f?n.push(f):s.onRemove&&s.onRemove(a.local[d].spec)}for(let d=0;d<a.children.length;d+=3)l(a.children[d+2],a.children[d]+c+1)}for(let a=0;a<t.length;a+=3)t[a+1]==-1&&l(t[a+2],e[a]+o+1);return n}function nS(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o=0,s;o<t.length;o++)(s=t[o])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),t[o]=null);return i}function rS(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Ya(t,e,n,r){let i=[],o=!1;e.forEach((l,a)=>{let c=nS(t,l,a+n);if(c){o=!0;let d=Ya(c,l,n+a+1,r);d!=et&&i.push(a,a+l.nodeSize,d)}});let s=tS(o?rS(t):t,-n).sort(oi);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||(r.onRemove&&r.onRemove(s[l].spec),s.splice(l--,1));return s.length||i.length?new Ae(s,i):et}function oi(t,e){return t.from-e.from||t.to-e.to}function kh(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),yy(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),yy(e,i,r.copy(o.from,r.to)));break}}}return e}function yy(t,e,n){for(;e<t.length&&oi(n,t[e])>0;)e++;t.splice(e,0,n)}function sd(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=et&&e.push(r)}),t.cursorWrapper&&e.push(Ae.create(t.state.doc,[t.cursorWrapper.deco])),dr.from(e)}const Ej={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Tj=St&&Mr<=11;class Mj{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class jj{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Mj,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);St&&Mr<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():rt&&e.composing&&r.some(i=>i.type=="childList"&&i.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),Tj&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Ej)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(cy(this.view)){if(this.suppressingSelectionUpdates)return _n(this.view);if(St&&Mr<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&gi(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let o=e.focusNode;o;o=po(o))n.add(o);for(let o=e.anchorNode;o;o=po(o))if(n.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&cy(e)&&!this.ignoreSelectionChange(r),o=-1,s=-1,l=!1,a=[];if(e.editable)for(let d=0;d<n.length;d++){let f=this.registerMutation(n[d],a);f&&(o=o<0?f.from:Math.min(f.from,o),s=s<0?f.to:Math.max(f.to,s),f.typeOver&&(l=!0))}if(a.some(d=>d.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let d of a)if(d.nodeName=="BR"&&d.parentNode){let f=d.nextSibling;f&&f.nodeType==1&&f.contentEditable=="false"&&d.parentNode.removeChild(d)}}else if(qt&&a.length){let d=a.filter(f=>f.nodeName=="BR");if(d.length==2){let[f,p]=d;f.parentNode&&f.parentNode.parentNode==p.parentNode?p.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let p of d){let h=p.parentNode;h&&h.nodeName=="LI"&&(!f||Rj(e,f)!=h)&&p.remove()}}}let c=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&tu(r)&&(c=mh(e))&&c.eq(J.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,_n(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,s),Aj(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,Ij(e,a)),this.handleDOMChange(o,s,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||_n(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let f=e.addedNodes[d];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(St&&Mr<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:f,nextSibling:p}=e.addedNodes[d];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f),(!p||Array.prototype.indexOf.call(e.addedNodes,p)<0)&&(o=p)}let s=i&&i.parentNode==e.target?Ve(i)+1:0,l=r.localPosFromDOM(e.target,s,-1),a=o&&o.parentNode==e.target?Ve(o):e.target.childNodes.length,c=r.localPosFromDOM(e.target,a,1);return{from:l,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let xy=new WeakMap,vy=!1;function Aj(t){if(!xy.has(t)&&(xy.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=qt,vy)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),vy=!0}}function Sy(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,s=t.domAtPos(t.state.selection.anchor);return gi(s.node,s.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function Dj(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return Sy(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?Sy(t,n):null}function Rj(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function Ij(t,e){var n;let{focusNode:r,focusOffset:i}=t.domSelectionRange();for(let o of e)if(((n=o.parentNode)===null||n===void 0?void 0:n.nodeName)=="TR"){let s=o.nextSibling;for(;s&&s.nodeName!="TD"&&s.nodeName!="TH";)s=s.nextSibling;if(s){let l=s;for(;;){let a=l.firstChild;if(!a||a.nodeType!=1||a.contentEditable=="false"||/^(BR|IMG)$/.test(a.nodeName))break;l=a}l.insertBefore(o,l.firstChild),r==o&&t.domSelection().collapse(o,i)}else o.parentNode.removeChild(o)}}function Oj(t,e,n){let{node:r,fromOffset:i,toOffset:o,from:s,to:l}=t.docView.parseRange(e,n),a=t.domSelectionRange(),c,d=a.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(c=[{node:d,offset:a.anchorOffset}],tu(a)||c.push({node:a.focusNode,offset:a.focusOffset})),Ke&&t.input.lastKeyCode===8)for(let v=o;v>i;v--){let y=r.childNodes[v-1],x=y.pmViewDesc;if(y.nodeName=="BR"&&!x){o=v;break}if(!x||x.size)break}let f=t.state.doc,p=t.someProp("domParser")||cs.fromSchema(t.state.schema),h=f.resolve(s),m=null,g=p.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:o,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:Nj,context:h});if(c&&c[0].pos!=null){let v=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=v),m={anchor:v+s,head:y+s}}return{doc:g,sel:m,from:s,to:l}}function Nj(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(rt&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||rt&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const zj=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Lj(t,e,n,r,i){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let C=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,j=mh(t,C);if(j&&!t.state.selection.eq(j)){if(Ke&&$n&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",N=>N(t,Vr(13,"Enter"))))return;let O=t.state.tr.setSelection(j);C=="pointer"?O.setMeta("pointer",!0):C=="key"&&O.scrollIntoView(),o&&O.setMeta("composition",o),t.dispatch(O)}return}let s=t.state.doc.resolve(e),l=s.sharedDepth(n);e=s.before(l+1),n=t.state.doc.resolve(n).after(l+1);let a=t.state.selection,c=Oj(t,e,n),d=t.state.doc,f=d.slice(c.from,c.to),p,h;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(p=t.state.selection.to,h="end"):(p=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let m=Fj(f.content,c.doc.content,c.from,p,h);if(m&&t.input.domChangeCount++,(ho&&t.input.lastIOSEnter>Date.now()-225||$n)&&i.some(C=>C.nodeType==1&&!zj.test(C.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",C=>C(t,Vr(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(r&&a instanceof W&&!a.empty&&a.$head.sameParent(a.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))m={start:a.from,endA:a.to,endB:a.to};else{if(c.sel){let C=by(t,t.state.doc,c.sel);if(C&&!C.eq(t.state.selection)){let j=t.state.tr.setSelection(C);o&&j.setMeta("composition",o),t.dispatch(j)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof W&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),St&&Mr<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>c.from&&c.doc.textBetween(m.start-c.from-1,m.start-c.from+1)==" "&&(m.start--,m.endA--,m.endB--);let g=c.doc.resolveNoCache(m.start-c.from),v=c.doc.resolveNoCache(m.endB-c.from),y=d.resolve(m.start),x=g.sameParent(v)&&g.parent.inlineContent&&y.end()>=m.endA;if((ho&&t.input.lastIOSEnter>Date.now()-225&&(!x||i.some(C=>C.nodeName=="DIV"||C.nodeName=="P"))||!x&&g.pos<c.doc.content.size&&(!g.sameParent(v)||!g.parent.inlineContent)&&g.pos<v.pos&&!/\S/.test(c.doc.textBetween(g.pos,v.pos,"","")))&&t.someProp("handleKeyDown",C=>C(t,Vr(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&$j(d,m.start,m.endA,g,v)&&t.someProp("handleKeyDown",C=>C(t,Vr(8,"Backspace")))){$n&&Ke&&t.domObserver.suppressSelectionUpdates();return}Ke&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),$n&&!x&&g.start()!=v.start()&&v.parentOffset==0&&g.depth==v.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==m.endA&&(m.endB-=2,v=c.doc.resolveNoCache(m.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(C){return C(t,Vr(13,"Enter"))})},20));let S=m.start,k=m.endA,w=C=>{let j=C||t.state.tr.replace(S,k,c.doc.slice(m.start-c.from,m.endB-c.from));if(c.sel){let O=by(t,j.doc,c.sel);O&&!(Ke&&t.composing&&O.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(O.head==S||O.head==j.mapping.map(k)-1)||St&&O.empty&&O.head==S)&&j.setSelection(O)}return o&&j.setMeta("composition",o),j.scrollIntoView()},E;if(x)if(g.pos==v.pos){St&&Mr<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>_n(t),20));let C=w(t.state.tr.delete(S,k)),j=d.resolve(m.start).marksAcross(d.resolve(m.endA));j&&C.ensureMarks(j),t.dispatch(C)}else if(m.endA==m.endB&&(E=Pj(g.parent.content.cut(g.parentOffset,v.parentOffset),y.parent.content.cut(y.parentOffset,m.endA-y.start())))){let C=w(t.state.tr);E.type=="add"?C.addMark(S,k,E.mark):C.removeMark(S,k,E.mark),t.dispatch(C)}else if(g.parent.child(g.index()).isText&&g.index()==v.index()-(v.textOffset?0:1)){let C=g.parent.textBetween(g.parentOffset,v.parentOffset),j=()=>w(t.state.tr.insertText(C,S,k));t.someProp("handleTextInput",O=>O(t,S,k,C,j))||t.dispatch(j())}else t.dispatch(w());else t.dispatch(w())}function by(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:gh(t,e.resolve(n.anchor),e.resolve(n.head))}function Pj(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,o=r,s,l,a;for(let d=0;d<r.length;d++)i=r[d].removeFromSet(i);for(let d=0;d<n.length;d++)o=n[d].removeFromSet(o);if(i.length==1&&o.length==0)l=i[0],s="add",a=d=>d.mark(l.addToSet(d.marks));else if(i.length==0&&o.length==1)l=o[0],s="remove",a=d=>d.mark(l.removeFromSet(d.marks));else return null;let c=[];for(let d=0;d<e.childCount;d++)c.push(a(e.child(d)));if(D.from(c).eq(t))return{mark:l,type:s}}function $j(t,e,n,r,i){if(n-e<=i.pos-r.pos||ld(r,!0,!1)<i.pos)return!1;let o=t.resolve(e);if(!r.parent.isTextblock){let l=o.nodeAfter;return l!=null&&n==e+l.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=t.resolve(ld(o,!0,!0));return!s.parent.isTextblock||s.pos>n||ld(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function ld(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function Fj(t,e,n,r,i){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:s,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let a=Math.max(0,o-Math.min(s,l));r-=s+a-o}if(s<o&&t.size<e.size){let a=r<=o&&r>=s?o-r:0;o-=a,o&&o<e.size&&ky(e.textBetween(o-1,o+1))&&(o+=a?1:-1),l=o+(l-s),s=o}else if(l<o){let a=r<=o&&r>=l?o-r:0;o-=a,o&&o<t.size&&ky(t.textBetween(o-1,o+1))&&(o+=a?1:-1),s=o+(s-l),l=o}return{start:o,endA:s,endB:l}}function ky(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class iS{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new tj,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(My),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Ey(this),Cy(this),this.nodeViews=Ty(this),this.docView=ry(this.state.doc,wy(this),sd(this),this.dom,this),this.domObserver=new jj(this,(r,i,o,s)=>Lj(this,r,i,o,s)),this.domObserver.start(),nj(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Wf(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(My),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,o=!1,s=!1;e.storedMarks&&this.composing&&(Y1(this),s=!0),this.state=e;let l=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=Ty(this);_j(h,this.nodeViews)&&(this.nodeViews=h,o=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&Wf(this),this.editable=Ey(this),Cy(this);let a=sd(this),c=wy(this),d=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=o||!this.docView.matchesNode(e.doc,c,a);(f||!e.selection.eq(i.selection))&&(s=!0);let p=d=="preserve"&&s&&this.dom.style.overflowAnchor==null&&gM(this);if(s){this.domObserver.stop();let h=f&&(St||Ke)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&Bj(i.selection,e.selection);if(f){let m=Ke?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=gj(this)),(o||!this.docView.update(e.doc,c,a,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=ry(e.doc,c,a,this.dom,this)),m&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&BM(this))?_n(this,h):(F1(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():p&&yM(p)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof H){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&Yg(this,n.getBoundingClientRect(),e)}else Yg(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new Z1(e.slice,e.move,i<0?void 0:H.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let l=this.directPlugins[s].props[e];if(l!=null&&(i=n?n(l):l))return i}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let l=o[s].props[e];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(St){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&xM(this.dom),_n(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return wM(this,e)}coordsAtPos(e,n=1){return R1(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return jM(this,n||this.state,e)}pasteHTML(e,n){return qs(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return qs(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return yh(this,e)}destroy(){this.docView&&(rj(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],sd(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,sM())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return oj(this,e)}domSelectionRange(){let e=this.domSelection();return e?rt&&this.root.nodeType===11&&dM(this.dom.ownerDocument)==this.dom&&Dj(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}iS.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function wy(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Wt.node(0,t.state.doc.content.size,e)]}function Cy(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Wt.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Ey(t){return!t.someProp("editable",e=>e(t.state)===!1)}function Bj(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Ty(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function _j(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function My(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Ir={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Xa={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Hj=typeof navigator<"u"&&/Mac/.test(navigator.platform),Uj=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var We=0;We<10;We++)Ir[48+We]=Ir[96+We]=String(We);for(var We=1;We<=24;We++)Ir[We+111]="F"+We;for(var We=65;We<=90;We++)Ir[We]=String.fromCharCode(We+32),Xa[We]=String.fromCharCode(We);for(var ad in Ir)Xa.hasOwnProperty(ad)||(Xa[ad]=Ir[ad]);function Vj(t){var e=Hj&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Uj&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Xa:Ir)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const Wj=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Kj=typeof navigator<"u"&&/Win/.test(navigator.platform);function qj(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,o,s;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))Wj?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),s&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function Jj(t){let e=Object.create(null);for(let n in t)e[qj(n)]=t[n];return e}function cd(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function Gj(t){return new Qe({props:{handleKeyDown:oS(t)}})}function oS(t){let e=Jj(t);return function(n,r){let i=Vj(r),o,s=e[cd(i,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[cd(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(Kj&&r.ctrlKey&&r.altKey)&&(o=Ir[r.keyCode])&&o!=i){let l=e[cd(o,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const wh=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function sS(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const lS=(t,e,n)=>{let r=sS(t,n);if(!r)return!1;let i=Ch(r);if(!i){let s=r.blockRange(),l=s&&Co(s);return l==null?!1:(e&&e(t.tr.lift(s,l).scrollIntoView()),!0)}let o=i.nodeBefore;if(gS(t,i,e,-1))return!0;if(r.parent.content.size==0&&(mo(o,"end")||H.isSelectable(o)))for(let s=r.depth;;s--){let l=Zc(t.doc,r.before(s),r.after(s),L.empty);if(l&&l.slice.size<l.to-l.from){if(e){let a=t.tr.step(l);a.setSelection(mo(o,"end")?J.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):H.create(a.doc,i.pos-o.nodeSize)),e(a.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},Qj=(t,e,n)=>{let r=sS(t,n);if(!r)return!1;let i=Ch(r);return i?aS(t,i,e):!1},Yj=(t,e,n)=>{let r=uS(t,n);if(!r)return!1;let i=Eh(r);return i?aS(t,i,e):!1};function aS(t,e,n){let r=e.nodeBefore,i=r,o=e.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let d=i.lastChild;if(!d)return!1;i=d}let s=e.nodeAfter,l=s,a=e.pos+1;for(;!l.isTextblock;a++){if(l.type.spec.isolating)return!1;let d=l.firstChild;if(!d)return!1;l=d}let c=Zc(t.doc,o,a,L.empty);if(!c||c.from!=o||c instanceof Ne&&c.slice.size>=a-o)return!1;if(n){let d=t.tr.step(c);d.setSelection(W.create(d.doc,o)),n(d.scrollIntoView())}return!0}function mo(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const cS=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=Ch(r)}let s=o&&o.nodeBefore;return!s||!H.isSelectable(s)?!1:(e&&e(t.tr.setSelection(H.create(t.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function Ch(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function uS(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const dS=(t,e,n)=>{let r=uS(t,n);if(!r)return!1;let i=Eh(r);if(!i)return!1;let o=i.nodeAfter;if(gS(t,i,e,1))return!0;if(r.parent.content.size==0&&(mo(o,"start")||H.isSelectable(o))){let s=Zc(t.doc,r.before(),r.after(),L.empty);if(s&&s.slice.size<s.to-s.from){if(e){let l=t.tr.step(s);l.setSelection(mo(o,"start")?J.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):H.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},fS=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=Eh(r)}let s=o&&o.nodeAfter;return!s||!H.isSelectable(s)?!1:(e&&e(t.tr.setSelection(H.create(t.doc,o.pos)).scrollIntoView()),!0)};function Eh(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const Xj=(t,e)=>{let n=t.selection,r=n instanceof H,i;if(r){if(n.node.isTextblock||!Pr(t.doc,n.from))return!1;i=n.from}else if(i=Xc(t.doc,n.from,-1),i==null)return!1;if(e){let o=t.tr.join(i);r&&o.setSelection(H.create(o.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},Zj=(t,e)=>{let n=t.selection,r;if(n instanceof H){if(n.node.isTextblock||!Pr(t.doc,n.to))return!1;r=n.to}else if(r=Xc(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},eA=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&Co(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},pS=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Th(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const tA=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=Th(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(e){let l=n.after(),a=t.tr.replaceWith(l,l,s.createAndFill());a.setSelection(J.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},hS=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Dt||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=Th(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=t.tr.insert(s,o.createAndFill());l.setSelection(W.create(l.doc,s+1)),e(l.scrollIntoView())}return!0},mS=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(Bn(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Co(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function nA(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof H&&e.selection.node.isBlock)return!r.parentOffset||!Bn(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],s,l,a=!1,c=!1;for(let h=r.depth;;h--)if(r.node(h).isBlock){a=r.end(h)==r.pos+(r.depth-h),c=r.start(h)==r.pos-(r.depth-h),l=Th(r.node(h-1).contentMatchAt(r.indexAfter(h-1))),o.unshift(a&&l?{type:l}:null),s=h;break}else{if(h==1)return!1;o.unshift(null)}let d=e.tr;(e.selection instanceof W||e.selection instanceof Dt)&&d.deleteSelection();let f=d.mapping.map(r.pos),p=Bn(d.doc,f,o.length,o);if(p||(o[0]=l?{type:l}:null,p=Bn(d.doc,f,o.length,o)),!p)return!1;if(d.split(f,o.length,o),!a&&c&&r.node(s).type!=l){let h=d.mapping.map(r.before(s)),m=d.doc.resolve(h);l&&r.node(s-1).canReplaceWith(m.index(),m.index()+1,l)&&d.setNodeMarkup(d.mapping.map(r.before(s)),l)}return n&&n(d.scrollIntoView()),!0}}const rA=nA(),iA=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection(H.create(t.doc,i))),!0)};function oA(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||Pr(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function gS(t,e,n,r){let i=e.nodeBefore,o=e.nodeAfter,s,l,a=i.type.spec.isolating||o.type.spec.isolating;if(!a&&oA(t,e,n))return!0;let c=!a&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(s=(l=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&l.matchType(s[0]||o.type).validEnd){if(n){let h=e.pos+o.nodeSize,m=D.empty;for(let y=s.length-1;y>=0;y--)m=D.from(s[y].create(null,m));m=D.from(i.copy(m));let g=t.tr.step(new Le(e.pos-1,h,e.pos,h,new L(m,1,0),s.length,!0)),v=g.doc.resolve(h+2*s.length);v.nodeAfter&&v.nodeAfter.type==i.type&&Pr(g.doc,v.pos)&&g.join(v.pos),n(g.scrollIntoView())}return!0}let d=o.type.spec.isolating||r>0&&a?null:J.findFrom(e,1),f=d&&d.$from.blockRange(d.$to),p=f&&Co(f);if(p!=null&&p>=e.depth)return n&&n(t.tr.lift(f,p).scrollIntoView()),!0;if(c&&mo(o,"start",!0)&&mo(i,"end")){let h=i,m=[];for(;m.push(h),!h.isTextblock;)h=h.lastChild;let g=o,v=1;for(;!g.isTextblock;g=g.firstChild)v++;if(h.canReplace(h.childCount,h.childCount,g.content)){if(n){let y=D.empty;for(let S=m.length-1;S>=0;S--)y=D.from(m[S].copy(y));let x=t.tr.step(new Le(e.pos-m.length,e.pos+o.nodeSize,e.pos+v,e.pos+o.nodeSize-v,new L(y,m.length,0),0,!0));n(x.scrollIntoView())}return!0}}return!1}function yS(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection(W.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}const sA=yS(-1),lA=yS(1);function aA(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),l=s&&fh(s,t,e);return l?(r&&r(n.tr.wrap(s,l).scrollIntoView()),!0):!1}}function jy(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:s},$to:{pos:l}}=n.selection.ranges[o];n.doc.nodesBetween(s,l,(a,c)=>{if(i)return!1;if(!(!a.isTextblock||a.hasMarkup(t,e)))if(a.type==t)i=!0;else{let d=n.doc.resolve(c),f=d.index();i=d.parent.canReplaceWith(f,f+1,t)}})}if(!i)return!1;if(r){let o=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:l},$to:{pos:a}}=n.selection.ranges[s];o.setBlockType(l,a,t,e)}r(o.scrollIntoView())}return!0}}function Mh(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}Mh(wh,lS,cS);Mh(wh,dS,fS);Mh(pS,hS,mS,rA);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function cA(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o);if(!s)return!1;let l=r?n.tr:null;return uA(l,s,t,e)?(r&&r(l.scrollIntoView()),!0):!1}}function uA(t,e,n,r=null){let i=!1,o=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let a=s.resolve(e.start-2);o=new Wa(a,a,e.depth),e.endIndex<e.parent.childCount&&(e=new Wa(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let l=fh(o,n,r,e);return l?(t&&dA(t,e,l,i,n),!0):!1}function dA(t,e,n,r,i){let o=D.empty;for(let d=n.length-1;d>=0;d--)o=D.from(n[d].type.create(n[d].attrs,o));t.step(new Le(e.start-(r?2:0),e.end,e.start,e.end,new L(o,0,0),n.length,!0));let s=0;for(let d=0;d<n.length;d++)n[d].type==i&&(s=d+1);let l=n.length-s,a=e.start+n.length-(r?2:0),c=e.parent;for(let d=e.startIndex,f=e.endIndex,p=!0;d<f;d++,p=!1)!p&&Bn(t.doc,a,l)&&(t.split(a,l),a+=2*l),a+=c.child(d).nodeSize;return t}function fA(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?pA(e,n,t,o):hA(e,n,o):!0:!1}}function pA(t,e,n,r){let i=t.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new Le(o-1,s,o,s,new L(D.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Wa(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const l=Co(r);if(l==null)return!1;i.lift(r,l);let a=i.doc.resolve(i.mapping.map(o,-1)-1);return Pr(i.doc,a.pos)&&a.nodeBefore.type==a.nodeAfter.type&&i.join(a.pos),e(i.scrollIntoView()),!0}function hA(t,e,n){let r=t.tr,i=n.parent;for(let h=n.end,m=n.endIndex-1,g=n.startIndex;m>g;m--)h-=i.child(m).nodeSize,r.delete(h-1,h+1);let o=r.doc.resolve(n.start),s=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,a=n.endIndex==i.childCount,c=o.node(-1),d=o.index(-1);if(!c.canReplace(d+(l?0:1),d+1,s.content.append(a?D.empty:D.from(i))))return!1;let f=o.pos,p=f+s.nodeSize;return r.step(new Le(f-(l?1:0),p+(a?1:0),f+1,p-1,new L((l?D.empty:D.from(i.copy(D.empty))).append(a?D.empty:D.from(i.copy(D.empty))),l?0:1,a?0:1),l?0:1)),e(r.scrollIntoView()),!0}function mA(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let l=o.parent,a=l.child(s-1);if(a.type!=t)return!1;if(n){let c=a.lastChild&&a.lastChild.type==l.type,d=D.from(c?t.create():null),f=new L(D.from(t.create(null,D.from(l.type.create(null,d)))),c?3:1,0),p=o.start,h=o.end;n(e.tr.step(new Le(p-(c?3:1),h,p,h,f,1,!0)).scrollIntoView())}return!0}}function iu(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}class ou{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:o}=r,s=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...d)=>{const f=a(...d)(s);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(o),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,l=[],a=!!e,c=e||o.tr,d=()=>(!a&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),l.every(p=>p===!0)),f={...Object.fromEntries(Object.entries(r).map(([p,h])=>[p,(...g)=>{const v=this.buildProps(c,n),y=h(...g)(v);return l.push(y),f}])),run:d};return f}createCan(e){const{rawCommands:n,state:r}=this,i=!1,o=e||r.tr,s=this.buildProps(o,i);return{...Object.fromEntries(Object.entries(n).map(([a,c])=>[a,(...d)=>c(...d)({...s,dispatch:void 0})])),chain:()=>this.createChain(o,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,l={tr:e,editor:i,view:s,state:iu({state:o,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([a,c])=>[a,(...d)=>c(...d)(l)]))}};return l}}class gA{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}once(e,n){const r=(...i)=>{this.off(e,r),n.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function $(t,e,n){return t.config[e]===void 0&&t.parent?$(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?$(t.parent,e,n):null}):t.config[e]}function su(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function xS(t){const e=[],{nodeExtensions:n,markExtensions:r}=su(t),i=[...n,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage,extensions:i},a=$(s,"addGlobalAttributes",l);if(!a)return;a().forEach(d=>{d.types.forEach(f=>{Object.entries(d.attributes).forEach(([p,h])=>{e.push({type:f,name:p,attribute:{...o,...h}})})})})}),i.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage},a=$(s,"addAttributes",l);if(!a)return;const c=a();Object.entries(c).forEach(([d,f])=>{const p={...o,...f};typeof(p==null?void 0:p.default)=="function"&&(p.default=p.default()),p!=null&&p.isRequired&&(p==null?void 0:p.default)===void 0&&delete p.default,e.push({type:s.name,name:d,attribute:p})})}),e}function $e(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Re(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const l=o?String(o).split(" "):[],a=r[i]?r[i].split(" "):[],c=l.filter(d=>!a.includes(d));r[i]=[...a,...c].join(" ")}else if(i==="style"){const l=o?o.split(";").map(d=>d.trim()).filter(Boolean):[],a=r[i]?r[i].split(";").map(d=>d.trim()).filter(Boolean):[],c=new Map;a.forEach(d=>{const[f,p]=d.split(":").map(h=>h.trim());c.set(f,p)}),l.forEach(d=>{const[f,p]=d.split(":").map(h=>h.trim());c.set(f,p)}),r[i]=Array.from(c.entries()).map(([d,f])=>`${d}: ${f}`).join("; ")}else r[i]=o}),r},{})}function Kf(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Re(n,r),{})}function vS(t){return typeof t=="function"}function G(t,e=void 0,...n){return vS(t)?e?t.bind(e)(...n):t(...n):t}function yA(t={}){return Object.keys(t).length===0&&t.constructor===Object}function xA(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function Ay(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((o,s)=>{const l=s.attribute.parseHTML?s.attribute.parseHTML(n):xA(n.getAttribute(s.name));return l==null?o:{...o,[s.name]:l}},{});return{...r,...i}}}}function Dy(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&yA(n)?!1:n!=null))}function vA(t,e){var n;const r=xS(t),{nodeExtensions:i,markExtensions:o}=su(t),s=(n=i.find(c=>$(c,"topNode")))===null||n===void 0?void 0:n.name,l=Object.fromEntries(i.map(c=>{const d=r.filter(y=>y.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:e},p=t.reduce((y,x)=>{const S=$(x,"extendNodeSchema",f);return{...y,...S?S(c):{}}},{}),h=Dy({...p,content:G($(c,"content",f)),marks:G($(c,"marks",f)),group:G($(c,"group",f)),inline:G($(c,"inline",f)),atom:G($(c,"atom",f)),selectable:G($(c,"selectable",f)),draggable:G($(c,"draggable",f)),code:G($(c,"code",f)),whitespace:G($(c,"whitespace",f)),linebreakReplacement:G($(c,"linebreakReplacement",f)),defining:G($(c,"defining",f)),isolating:G($(c,"isolating",f)),attrs:Object.fromEntries(d.map(y=>{var x;return[y.name,{default:(x=y==null?void 0:y.attribute)===null||x===void 0?void 0:x.default}]}))}),m=G($(c,"parseHTML",f));m&&(h.parseDOM=m.map(y=>Ay(y,d)));const g=$(c,"renderHTML",f);g&&(h.toDOM=y=>g({node:y,HTMLAttributes:Kf(y,d)}));const v=$(c,"renderText",f);return v&&(h.toText=v),[c.name,h]})),a=Object.fromEntries(o.map(c=>{const d=r.filter(v=>v.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:e},p=t.reduce((v,y)=>{const x=$(y,"extendMarkSchema",f);return{...v,...x?x(c):{}}},{}),h=Dy({...p,inclusive:G($(c,"inclusive",f)),excludes:G($(c,"excludes",f)),group:G($(c,"group",f)),spanning:G($(c,"spanning",f)),code:G($(c,"code",f)),attrs:Object.fromEntries(d.map(v=>{var y;return[v.name,{default:(y=v==null?void 0:v.attribute)===null||y===void 0?void 0:y.default}]}))}),m=G($(c,"parseHTML",f));m&&(h.parseDOM=m.map(v=>Ay(v,d)));const g=$(c,"renderHTML",f);return g&&(h.toDOM=v=>g({mark:v,HTMLAttributes:Kf(v,d)})),[c.name,h]}));return new o1({topNode:s,nodes:l,marks:a})}function ud(t,e){return e.nodes[t]||e.marks[t]||null}function Ry(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function jh(t,e){const n=bi.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}const SA=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,o,s,l)=>{var a,c;const d=((c=(a=i.type.spec).toText)===null||c===void 0?void 0:c.call(a,{node:i,pos:o,parent:s,index:l}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?d:d.slice(0,Math.max(0,r-o))}),n};function Ah(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class lu{constructor(e){this.find=e.find,this.handler=e.handler}}const bA=(t,e)=>{if(Ah(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function $l(t){var e;const{editor:n,from:r,to:i,text:o,rules:s,plugin:l}=t,{view:a}=n;if(a.composing)return!1;const c=a.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(p=>p.type.spec.code))return!1;let d=!1;const f=SA(c)+o;return s.forEach(p=>{if(d)return;const h=bA(f,p.find);if(!h)return;const m=a.state.tr,g=iu({state:a.state,transaction:m}),v={from:r-(h[0].length-o.length),to:i},{commands:y,chain:x,can:S}=new ou({editor:n,state:g});p.handler({state:g,range:v,match:h,commands:y,chain:x,can:S})===null||!m.steps.length||(m.setMeta(l,{transform:m,from:r,to:i,text:o}),a.dispatch(m),d=!0)}),d}function kA(t){const{editor:e,rules:n}=t,r=new Qe({state:{init(){return null},apply(i,o,s){const l=i.getMeta(r);if(l)return l;const a=i.getMeta("applyInputRules");return!!a&&setTimeout(()=>{let{text:d}=a;typeof d=="string"?d=d:d=jh(D.from(d),s.schema);const{from:f}=a,p=f+d.length;$l({editor:e,from:f,to:p,text:d,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:o}},props:{handleTextInput(i,o,s,l){return $l({editor:e,from:o,to:s,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&$l({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:s}=i.state.selection;return s?$l({editor:e,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function wA(t){return Object.prototype.toString.call(t).slice(8,-1)}function Fl(t){return wA(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function au(t,e){const n={...t};return Fl(t)&&Fl(e)&&Object.keys(e).forEach(r=>{Fl(e[r])&&Fl(t[r])?n[r]=au(t[r],e[r]):n[r]=e[r]}),n}class an{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=G($(this,"addOptions",{name:this.name}))),this.storage=G($(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new an(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>au(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new an(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=G($(n,"addOptions",{name:n.name})),n.storage=G($(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const s=i.marks();if(!!!s.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const a=s.find(c=>(c==null?void 0:c.type.name)===n.name);return a&&r.removeStoredMark(a),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function CA(t){return typeof t=="number"}class EA{constructor(e){this.find=e.find,this.handler=e.handler}}const TA=(t,e,n)=>{if(Ah(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const o=[i.text];return o.index=i.index,o.input=t,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function MA(t){const{editor:e,state:n,from:r,to:i,rule:o,pasteEvent:s,dropEvent:l}=t,{commands:a,chain:c,can:d}=new ou({editor:e,state:n}),f=[];return n.doc.nodesBetween(r,i,(h,m)=>{if(!h.isTextblock||h.type.spec.code)return;const g=Math.max(r,m),v=Math.min(i,m+h.content.size),y=h.textBetween(g-m,v-m,void 0,"");TA(y,o.find,s).forEach(S=>{if(S.index===void 0)return;const k=g+S.index+1,w=k+S[0].length,E={from:n.tr.mapping.map(k),to:n.tr.mapping.map(w)},C=o.handler({state:n,range:E,match:S,commands:a,chain:c,can:d,pasteEvent:s,dropEvent:l});f.push(C)})}),f.every(h=>h!==null)}let Bl=null;const jA=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function AA(t){const{editor:e,rules:n}=t;let r=null,i=!1,o=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const a=({state:d,from:f,to:p,rule:h,pasteEvt:m})=>{const g=d.tr,v=iu({state:d,transaction:g});if(!(!MA({editor:e,state:v,from:Math.max(f-1,0),to:p.b-1,rule:h,pasteEvent:m,dropEvent:l})||!g.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return n.map(d=>new Qe({view(f){const p=m=>{var g;r=!((g=f.dom.parentElement)===null||g===void 0)&&g.contains(m.target)?f.dom.parentElement:null,r&&(Bl=e)},h=()=>{Bl&&(Bl=null)};return window.addEventListener("dragstart",p),window.addEventListener("dragend",h),{destroy(){window.removeEventListener("dragstart",p),window.removeEventListener("dragend",h)}}},props:{handleDOMEvents:{drop:(f,p)=>{if(o=r===f.dom.parentElement,l=p,!o){const h=Bl;h!=null&&h.isEditable&&setTimeout(()=>{const m=h.state.selection;m&&h.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(f,p)=>{var h;const m=(h=p.clipboardData)===null||h===void 0?void 0:h.getData("text/html");return s=p,i=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(f,p,h)=>{const m=f[0],g=m.getMeta("uiEvent")==="paste"&&!i,v=m.getMeta("uiEvent")==="drop"&&!o,y=m.getMeta("applyPasteRules"),x=!!y;if(!g&&!v&&!x)return;if(x){let{text:w}=y;typeof w=="string"?w=w:w=jh(D.from(w),h.schema);const{from:E}=y,C=E+w.length,j=jA(w);return a({rule:d,state:h,from:E,to:{b:C},pasteEvt:j})}const S=p.doc.content.findDiffStart(h.doc.content),k=p.doc.content.findDiffEnd(h.doc.content);if(!(!CA(S)||!k||S===k.b))return a({rule:d,state:h,from:S,to:k,pasteEvt:s})}}))}function DA(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class qi{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=qi.resolve(e),this.schema=vA(this.extensions,n),this.setupExtensions()}static resolve(e){const n=qi.sort(qi.flatten(e)),r=DA(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=$(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const o=$(r,"priority")||100,s=$(i,"priority")||100;return o>s?-1:o<s?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:ud(n.name,this.schema)},i=$(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=qi.sort([...this.extensions].reverse()),r=[],i=[],o=n.map(s=>{const l={name:s.name,options:s.options,storage:s.storage,editor:e,type:ud(s.name,this.schema)},a=[],c=$(s,"addKeyboardShortcuts",l);let d={};if(s.type==="mark"&&$(s,"exitable",l)&&(d.ArrowRight=()=>an.handleExit({editor:e,mark:s})),c){const g=Object.fromEntries(Object.entries(c()).map(([v,y])=>[v,()=>y({editor:e})]));d={...d,...g}}const f=Gj(d);a.push(f);const p=$(s,"addInputRules",l);Ry(s,e.options.enableInputRules)&&p&&r.push(...p());const h=$(s,"addPasteRules",l);Ry(s,e.options.enablePasteRules)&&h&&i.push(...h());const m=$(s,"addProseMirrorPlugins",l);if(m){const g=m();a.push(...g)}return a}).flat();return[kA({editor:e,rules:r}),...AA({editor:e,rules:i}),...o]}get attributes(){return xS(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=su(this.extensions);return Object.fromEntries(n.filter(r=>!!$(r,"addNodeView")).map(r=>{const i=this.attributes.filter(a=>a.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:e,type:$e(r.name,this.schema)},s=$(r,"addNodeView",o);if(!s)return[];const l=(a,c,d,f,p)=>{const h=Kf(a,i);return s()({node:a,view:c,getPos:d,decorations:f,innerDecorations:p,editor:e,extension:r,HTMLAttributes:h})};return[r.name,l]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:ud(e.name,this.schema)};e.type==="mark"&&(!((n=G($(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const i=$(e,"onBeforeCreate",r),o=$(e,"onCreate",r),s=$(e,"onUpdate",r),l=$(e,"onSelectionUpdate",r),a=$(e,"onTransaction",r),c=$(e,"onFocus",r),d=$(e,"onBlur",r),f=$(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),s&&this.editor.on("update",s),l&&this.editor.on("selectionUpdate",l),a&&this.editor.on("transaction",a),c&&this.editor.on("focus",c),d&&this.editor.on("blur",d),f&&this.editor.on("destroy",f)})}}class Ge{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=G($(this,"addOptions",{name:this.name}))),this.storage=G($(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ge(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>au(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Ge({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=G($(n,"addOptions",{name:n.name})),n.storage=G($(n,"addStorage",{name:n.name,options:n.options})),n}}function SS(t,e,n){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:s={}}=n||{};let l="";return t.nodesBetween(r,i,(a,c,d,f)=>{var p;a.isBlock&&c>r&&(l+=o);const h=s==null?void 0:s[a.type.name];if(h)return d&&(l+=h({node:a,pos:c,parent:d,index:f,range:e})),!1;a.isText&&(l+=(p=a==null?void 0:a.text)===null||p===void 0?void 0:p.slice(Math.max(r,c)-c,i-c))}),l}function bS(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const RA=Ge.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Qe({key:new zt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,s=Math.min(...o.map(d=>d.$from.pos)),l=Math.max(...o.map(d=>d.$to.pos)),a=bS(n);return SS(r,{from:s,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:a})}}})]}}),IA=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),OA=(t=!1)=>({commands:e})=>e.setContent("",t),NA=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:s})=>{t.doc.nodesBetween(o.pos,s.pos,(l,a)=>{if(l.type.isText)return;const{doc:c,mapping:d}=e,f=c.resolve(d.map(a)),p=c.resolve(d.map(a+l.nodeSize)),h=f.blockRange(p);if(!h)return;const m=Co(h);if(l.type.isTextblock){const{defaultType:g}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(h.start,g)}(m||m===0)&&e.lift(h,m)})}),!0},zA=t=>e=>t(e),LA=()=>({state:t,dispatch:e})=>hS(t,e),PA=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,o=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,o.content),r.setSelection(new W(r.doc.resolve(Math.max(s-1,0)))),!0},$A=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const l=i.before(o),a=i.after(o);t.delete(l,a).scrollIntoView()}return!0}return!1},FA=t=>({tr:e,state:n,dispatch:r})=>{const i=$e(t,n.schema),o=e.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===i){if(r){const a=o.before(s),c=o.after(s);e.delete(a,c).scrollIntoView()}return!0}return!1},BA=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},_A=()=>({state:t,dispatch:e})=>wh(t,e),HA=()=>({commands:t})=>t.keyboardShortcut("Enter"),UA=()=>({state:t,dispatch:e})=>tA(t,e);function Za(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:Ah(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function kS(t,e,n={}){return t.find(r=>r.type===e&&Za(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function Iy(t,e,n={}){return!!kS(t,e,n)}function Dh(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(d=>d.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(d=>d.type===e)||(n=n||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!kS([...i.node.marks],e,n)))return;let s=i.index,l=t.start()+i.offset,a=s+1,c=l+i.node.nodeSize;for(;s>0&&Iy([...t.parent.child(s-1).marks],e,n);)s-=1,l-=t.parent.child(s).nodeSize;for(;a<t.parent.childCount&&Iy([...t.parent.child(a).marks],e,n);)c+=t.parent.child(a).nodeSize,a+=1;return{from:l,to:c}}function Fr(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const VA=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const o=Fr(t,r.schema),{doc:s,selection:l}=n,{$from:a,from:c,to:d}=l;if(i){const f=Dh(a,o,e);if(f&&f.from<=c&&f.to>=d){const p=W.create(s,f.from,f.to);n.setSelection(p)}}return!0},WA=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function wS(t){return t instanceof W}function Xr(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function CS(t,e=null){if(!e)return null;const n=J.atStart(t),r=J.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,o=r.to;return e==="all"?W.create(t,Xr(0,i,o),Xr(t.content.size,i,o)):W.create(t,Xr(e,i,o),Xr(e,i,o))}function Oy(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function ec(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function KA(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}const qA=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const s=()=>{(ec()||Oy())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),KA()&&!ec()&&!Oy()&&r.dom.focus({preventScroll:!0}))})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!wS(n.state.selection))return s(),!0;const l=CS(i.doc,t)||n.state.selection,a=n.state.selection.eq(l);return o&&(a||i.setSelection(l),a&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},JA=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),GA=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),ES=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&ES(r)}return t};function _l(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return ES(n)}function Gs(t,e,n){if(t instanceof Tr||t instanceof D)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return D.fromArray(t.map(l=>e.nodeFromJSON(l)));const s=e.nodeFromJSON(t);return n.errorOnInvalidContent&&s.check(),s}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),Gs("",e,n)}if(i){if(n.errorOnInvalidContent){let s=!1,l="";const a=new o1({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(s=!0,l=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?cs.fromSchema(a).parseSlice(_l(t),n.parseOptions):cs.fromSchema(a).parse(_l(t),n.parseOptions),n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const o=cs.fromSchema(e);return n.slice?o.parseSlice(_l(t),n.parseOptions).content:o.parse(_l(t),n.parseOptions)}return Gs("",e,n)}function QA(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Ne||i instanceof Le))return;const o=t.mapping.maps[r];let s=0;o.forEach((l,a,c,d)=>{s===0&&(s=d)}),t.setSelection(J.near(t.doc.resolve(s),n))}const YA=t=>!("type"in t),XA=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{var s;if(i){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;const a=v=>{o.emit("contentError",{editor:o,error:v,disableCollaboration:()=>{o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{Gs(e,o.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(v){a(v)}try{l=Gs(e,o.schema,{parseOptions:c,errorOnInvalidContent:(s=n.errorOnInvalidContent)!==null&&s!==void 0?s:o.options.enableContentCheck})}catch(v){return a(v),!1}let{from:d,to:f}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},p=!0,h=!0;if((YA(l)?l:[l]).forEach(v=>{v.check(),p=p?v.isText&&v.marks.length===0:!1,h=h?v.isBlock:!1}),d===f&&h){const{parent:v}=r.doc.resolve(d);v.isTextblock&&!v.type.spec.code&&!v.childCount&&(d-=1,f+=1)}let g;if(p){if(Array.isArray(e))g=e.map(v=>v.text||"").join("");else if(e instanceof D){let v="";e.forEach(y=>{y.text&&(v+=y.text)}),g=v}else typeof e=="object"&&e&&e.text?g=e.text:g=e;r.insertText(g,d,f)}else g=l,r.replaceWith(d,f,g);n.updateSelection&&QA(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:d,text:g}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:d,text:g})}return!0},ZA=()=>({state:t,dispatch:e})=>Xj(t,e),eD=()=>({state:t,dispatch:e})=>Zj(t,e),tD=()=>({state:t,dispatch:e})=>lS(t,e),nD=()=>({state:t,dispatch:e})=>dS(t,e),rD=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Xc(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},iD=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Xc(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},oD=()=>({state:t,dispatch:e})=>Qj(t,e),sD=()=>({state:t,dispatch:e})=>Yj(t,e);function TS(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function lD(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,o,s;for(let l=0;l<e.length-1;l+=1){const a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))ec()||TS()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}const aD=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=lD(t).split(/-(?!$)/),s=o.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),l=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,l))});return a==null||a.steps.forEach(c=>{const d=c.map(r.mapping);d&&i&&r.maybeStep(d)}),!0};function Qs(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,s=e?$e(e,t.schema):null,l=[];t.doc.nodesBetween(r,i,(f,p)=>{if(f.isText)return;const h=Math.max(r,p),m=Math.min(i,p+f.nodeSize);l.push({node:f,from:h,to:m})});const a=i-r,c=l.filter(f=>s?s.name===f.node.type.name:!0).filter(f=>Za(f.node.attrs,n,{strict:!1}));return o?!!c.length:c.reduce((f,p)=>f+p.to-p.from,0)>=a}const cD=(t,e={})=>({state:n,dispatch:r})=>{const i=$e(t,n.schema);return Qs(n,i,e)?eA(n,r):!1},uD=()=>({state:t,dispatch:e})=>mS(t,e),dD=t=>({state:e,dispatch:n})=>{const r=$e(t,e.schema);return fA(r)(e,n)},fD=()=>({state:t,dispatch:e})=>pS(t,e);function cu(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Ny(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const pD=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const l=cu(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(o=$e(t,r.schema)),l==="mark"&&(s=Fr(t,r.schema)),i&&n.selection.ranges.forEach(a=>{r.doc.nodesBetween(a.$from.pos,a.$to.pos,(c,d)=>{o&&o===c.type&&n.setNodeMarkup(d,void 0,Ny(c.attrs,e)),s&&c.marks.length&&c.marks.forEach(f=>{s===f.type&&n.addMark(d,d+c.nodeSize,s.create(Ny(f.attrs,e)))})})}),!0):!1},hD=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),mD=()=>({tr:t,dispatch:e})=>{if(e){const n=new Dt(t.doc);t.setSelection(n)}return!0},gD=()=>({state:t,dispatch:e})=>cS(t,e),yD=()=>({state:t,dispatch:e})=>fS(t,e),xD=()=>({state:t,dispatch:e})=>iA(t,e),vD=()=>({state:t,dispatch:e})=>lA(t,e),SD=()=>({state:t,dispatch:e})=>sA(t,e);function qf(t,e,n={},r={}){return Gs(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const bD=(t,e=!1,n={},r={})=>({editor:i,tr:o,dispatch:s,commands:l})=>{var a,c;const{doc:d}=o;if(n.preserveWhitespace!=="full"){const f=qf(t,i.schema,n,{errorOnInvalidContent:(a=r.errorOnInvalidContent)!==null&&a!==void 0?a:i.options.enableContentCheck});return s&&o.replaceWith(0,d.content.size,f).setMeta("preventUpdate",!e),!0}return s&&o.setMeta("preventUpdate",!e),l.insertContentAt({from:0,to:d.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:i.options.enableContentCheck})};function MS(t,e){const n=Fr(e,t.schema),{from:r,to:i,empty:o}=t.selection,s=[];o?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,a=>{s.push(...a.marks)});const l=s.find(a=>a.type.name===n.name);return l?{...l.attrs}:{}}function kD(t,e){const n=new b1(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function wD(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function CD(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,o)=>{n(i)&&r.push({node:i,pos:o})}),r}function ED(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Rh(t){return e=>ED(e.$from,t)}function TD(t,e){const n={from:0,to:t.content.size};return SS(t,n,e)}function MD(t,e){const n=$e(e,t.schema),{from:r,to:i}=t.selection,o=[];t.doc.nodesBetween(r,i,l=>{o.push(l)});const s=o.reverse().find(l=>l.type.name===n.name);return s?{...s.attrs}:{}}function jS(t,e){const n=cu(typeof e=="string"?e:e.name,t.schema);return n==="node"?MD(t,e):n==="mark"?MS(t,e):{}}function jD(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function AD(t){const e=jD(t);return e.length===1?e:e.filter((n,r)=>!e.filter((o,s)=>s!==r).some(o=>n.oldRange.from>=o.oldRange.from&&n.oldRange.to<=o.oldRange.to&&n.newRange.from>=o.newRange.from&&n.newRange.to<=o.newRange.to))}function DD(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,o)=>{const s=[];if(i.ranges.length)i.forEach((l,a)=>{s.push({from:l,to:a})});else{const{from:l,to:a}=n[o];if(l===void 0||a===void 0)return;s.push({from:l,to:a})}s.forEach(({from:l,to:a})=>{const c=e.slice(o).map(l,-1),d=e.slice(o).map(a),f=e.invert().map(c,-1),p=e.invert().map(d);r.push({oldRange:{from:f,to:p},newRange:{from:c,to:d}})})}),AD(r)}function Ih(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const o=n.resolve(t),s=Dh(o,i.type);s&&r.push({mark:i,...s})}):n.nodesBetween(t,e,(i,o)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(s=>({from:o,to:o+i.nodeSize,mark:s})))}),r}function la(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}function Jf(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?Fr(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(f=>o?o.name===f.type.name:!0).find(f=>Za(f.attrs,n,{strict:!1}));let s=0;const l=[];if(i.forEach(({$from:f,$to:p})=>{const h=f.pos,m=p.pos;t.doc.nodesBetween(h,m,(g,v)=>{if(!g.isText&&!g.marks.length)return;const y=Math.max(h,v),x=Math.min(m,v+g.nodeSize),S=x-y;s+=S,l.push(...g.marks.map(k=>({mark:k,from:y,to:x})))})}),s===0)return!1;const a=l.filter(f=>o?o.name===f.mark.type.name:!0).filter(f=>Za(f.mark.attrs,n,{strict:!1})).reduce((f,p)=>f+p.to-p.from,0),c=l.filter(f=>o?f.mark.type!==o&&f.mark.type.excludes(o):!0).reduce((f,p)=>f+p.to-p.from,0);return(a>0?a+c:a)>=s}function RD(t,e,n={}){if(!e)return Qs(t,null,n)||Jf(t,null,n);const r=cu(e,t.schema);return r==="node"?Qs(t,e,n):r==="mark"?Jf(t,e,n):!1}function zy(t,e){const{nodeExtensions:n}=su(e),r=n.find(s=>s.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=G($(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function Oh(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(o=>{i!==!1&&(Oh(o,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function ID(t){return t instanceof H}function OD(t,e,n){var r;const{selection:i}=e;let o=null;if(wS(i)&&(o=i.$cursor),o){const l=(r=t.storedMarks)!==null&&r!==void 0?r:o.marks();return!!n.isInSet(l)||!l.some(a=>a.type.excludes(n))}const{ranges:s}=i;return s.some(({$from:l,$to:a})=>{let c=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(l.pos,a.pos,(d,f,p)=>{if(c)return!1;if(d.isInline){const h=!p||p.type.allowsMarkType(n),m=!!n.isInSet(d.marks)||!d.marks.some(g=>g.type.excludes(n));c=h&&m}return!c}),c})}const ND=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:s,ranges:l}=o,a=Fr(t,r.schema);if(i)if(s){const c=MS(r,a);n.addStoredMark(a.create({...c,...e}))}else l.forEach(c=>{const d=c.$from.pos,f=c.$to.pos;r.doc.nodesBetween(d,f,(p,h)=>{const m=Math.max(h,d),g=Math.min(h+p.nodeSize,f);p.marks.find(y=>y.type===a)?p.marks.forEach(y=>{a===y.type&&n.addMark(m,g,a.create({...y.attrs,...e}))}):n.addMark(m,g,a.create(e))})});return OD(r,n,a)},zD=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),LD=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=$e(t,n.schema);let s;return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:l})=>jy(o,{...s,...e})(n)?!0:l.clearNodes()).command(({state:l})=>jy(o,{...s,...e})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},PD=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Xr(t,0,r.content.size),o=H.create(r,i);e.setSelection(o)}return!0},$D=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,s=W.atStart(r).from,l=W.atEnd(r).to,a=Xr(i,s,l),c=Xr(o,s,l),d=W.create(r,a,c);e.setSelection(d)}return!0},FD=t=>({state:e,dispatch:n})=>{const r=$e(t,e.schema);return mA(r)(e,n)};function Ly(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const BD=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:o,doc:s}=e,{$from:l,$to:a}=o,c=i.extensionManager.attributes,d=la(c,l.node().type.name,l.node().attrs);if(o instanceof H&&o.node.isBlock)return!l.parentOffset||!Bn(s,l.pos)?!1:(r&&(t&&Ly(n,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const f=a.parentOffset===a.parent.content.size,p=l.depth===0?void 0:wD(l.node(-1).contentMatchAt(l.indexAfter(-1)));let h=f&&p?[{type:p,attrs:d}]:void 0,m=Bn(e.doc,e.mapping.map(l.pos),1,h);if(!h&&!m&&Bn(e.doc,e.mapping.map(l.pos),1,p?[{type:p}]:void 0)&&(m=!0,h=p?[{type:p,attrs:d}]:void 0),r){if(m&&(o instanceof W&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,h),p&&!f&&!l.parentOffset&&l.parent.type!==p)){const g=e.mapping.map(l.before()),v=e.doc.resolve(g);l.node(-1).canReplaceWith(v.index(),v.index()+1,p)&&e.setNodeMarkup(e.mapping.map(l.before()),p)}t&&Ly(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return m},_D=(t,e={})=>({tr:n,state:r,dispatch:i,editor:o})=>{var s;const l=$e(t,r.schema),{$from:a,$to:c}=r.selection,d=r.selection.node;if(d&&d.isBlock||a.depth<2||!a.sameParent(c))return!1;const f=a.node(-1);if(f.type!==l)return!1;const p=o.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==l||a.index(-2)!==a.node(-2).childCount-1)return!1;if(i){let y=D.empty;const x=a.index(-1)?1:a.index(-2)?2:3;for(let j=a.depth-x;j>=a.depth-3;j-=1)y=D.from(a.node(j).copy(y));const S=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,k={...la(p,a.node().type.name,a.node().attrs),...e},w=((s=l.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(k))||void 0;y=y.append(D.from(l.createAndFill(null,w)||void 0));const E=a.before(a.depth-(x-1));n.replace(E,a.after(-S),new L(y,4-x,0));let C=-1;n.doc.nodesBetween(E,n.doc.content.size,(j,O)=>{if(C>-1)return!1;j.isTextblock&&j.content.size===0&&(C=O+1)}),C>-1&&n.setSelection(W.near(n.doc.resolve(C))),n.scrollIntoView()}return!0}const h=c.pos===a.end()?f.contentMatchAt(0).defaultType:null,m={...la(p,f.type.name,f.attrs),...e},g={...la(p,a.node().type.name,a.node().attrs),...e};n.delete(a.pos,c.pos);const v=h?[{type:l,attrs:m},{type:h,attrs:g}]:[{type:l,attrs:m}];if(!Bn(n.doc,a.pos,2))return!1;if(i){const{selection:y,storedMarks:x}=r,{splittableMarks:S}=o.extensionManager,k=x||y.$to.parentOffset&&y.$from.marks();if(n.split(a.pos,2,v).scrollIntoView(),!k||!i)return!0;const w=k.filter(E=>S.includes(E.type.name));n.ensureMarks(w)}return!0},dd=(t,e)=>{const n=Rh(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Pr(t.doc,n.pos)&&t.join(n.pos),!0},fd=(t,e)=>{const n=Rh(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Pr(t.doc,r)&&t.join(r),!0},HD=(t,e,n,r={})=>({editor:i,tr:o,state:s,dispatch:l,chain:a,commands:c,can:d})=>{const{extensions:f,splittableMarks:p}=i.extensionManager,h=$e(t,s.schema),m=$e(e,s.schema),{selection:g,storedMarks:v}=s,{$from:y,$to:x}=g,S=y.blockRange(x),k=v||g.$to.parentOffset&&g.$from.marks();if(!S)return!1;const w=Rh(E=>zy(E.type.name,f))(g);if(S.depth>=1&&w&&S.depth-w.depth<=1){if(w.node.type===h)return c.liftListItem(m);if(zy(w.node.type.name,f)&&h.validContent(w.node.content)&&l)return a().command(()=>(o.setNodeMarkup(w.pos,h),!0)).command(()=>dd(o,h)).command(()=>fd(o,h)).run()}return!n||!k||!l?a().command(()=>d().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>dd(o,h)).command(()=>fd(o,h)).run():a().command(()=>{const E=d().wrapInList(h,r),C=k.filter(j=>p.includes(j.type.name));return o.ensureMarks(C),E?!0:c.clearNodes()}).wrapInList(h,r).command(()=>dd(o,h)).command(()=>fd(o,h)).run()},UD=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,s=Fr(t,r.schema);return Jf(r,s,e)?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,e)},VD=(t,e,n={})=>({state:r,commands:i})=>{const o=$e(t,r.schema),s=$e(e,r.schema),l=Qs(r,o,n);let a;return r.selection.$anchor.sameParent(r.selection.$head)&&(a=r.selection.$anchor.parent.attrs),l?i.setNode(s,a):i.setNode(o,{...a,...n})},WD=(t,e={})=>({state:n,commands:r})=>{const i=$e(t,n.schema);return Qs(n,i,e)?r.lift(i):r.wrapIn(i,e)},KD=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const s=t.tr,l=o.transform;for(let a=l.steps.length-1;a>=0;a-=1)s.step(l.steps[a].invert(l.docs[a]));if(o.text){const a=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,t.schema.text(o.text,a))}else s.delete(o.from,o.to)}return!0}}return!1},qD=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},JD=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:s=!1}=e,{selection:l}=n,a=Fr(t,r.schema),{$from:c,empty:d,ranges:f}=l;if(!i)return!0;if(d&&s){let{from:p,to:h}=l;const m=(o=c.marks().find(v=>v.type===a))===null||o===void 0?void 0:o.attrs,g=Dh(c,a,m);g&&(p=g.from,h=g.to),n.removeMark(p,h,a)}else f.forEach(p=>{n.removeMark(p.$from.pos,p.$to.pos,a)});return n.removeStoredMark(a),!0},GD=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const l=cu(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(o=$e(t,r.schema)),l==="mark"&&(s=Fr(t,r.schema)),i&&n.selection.ranges.forEach(a=>{const c=a.$from.pos,d=a.$to.pos;let f,p,h,m;n.selection.empty?r.doc.nodesBetween(c,d,(g,v)=>{o&&o===g.type&&(h=Math.max(v,c),m=Math.min(v+g.nodeSize,d),f=v,p=g)}):r.doc.nodesBetween(c,d,(g,v)=>{v<c&&o&&o===g.type&&(h=Math.max(v,c),m=Math.min(v+g.nodeSize,d),f=v,p=g),v>=c&&v<=d&&(o&&o===g.type&&n.setNodeMarkup(v,void 0,{...g.attrs,...e}),s&&g.marks.length&&g.marks.forEach(y=>{if(s===y.type){const x=Math.max(v,c),S=Math.min(v+g.nodeSize,d);n.addMark(x,S,s.create({...y.attrs,...e}))}}))}),p&&(f!==void 0&&n.setNodeMarkup(f,void 0,{...p.attrs,...e}),s&&p.marks.length&&p.marks.forEach(g=>{s===g.type&&n.addMark(h,m,s.create({...g.attrs,...e}))}))}),!0):!1},QD=(t,e={})=>({state:n,dispatch:r})=>{const i=$e(t,n.schema);return aA(i,e)(n,r)},YD=(t,e={})=>({state:n,dispatch:r})=>{const i=$e(t,n.schema);return cA(i,e)(n,r)};var XD=Object.freeze({__proto__:null,blur:IA,clearContent:OA,clearNodes:NA,command:zA,createParagraphNear:LA,cut:PA,deleteCurrentNode:$A,deleteNode:FA,deleteRange:BA,deleteSelection:_A,enter:HA,exitCode:UA,extendMarkRange:VA,first:WA,focus:qA,forEach:JA,insertContent:GA,insertContentAt:XA,joinBackward:tD,joinDown:eD,joinForward:nD,joinItemBackward:rD,joinItemForward:iD,joinTextblockBackward:oD,joinTextblockForward:sD,joinUp:ZA,keyboardShortcut:aD,lift:cD,liftEmptyBlock:uD,liftListItem:dD,newlineInCode:fD,resetAttributes:pD,scrollIntoView:hD,selectAll:mD,selectNodeBackward:gD,selectNodeForward:yD,selectParentNode:xD,selectTextblockEnd:vD,selectTextblockStart:SD,setContent:bD,setMark:ND,setMeta:zD,setNode:LD,setNodeSelection:PD,setTextSelection:$D,sinkListItem:FD,splitBlock:BD,splitListItem:_D,toggleList:HD,toggleMark:UD,toggleNode:VD,toggleWrap:WD,undoInputRule:KD,unsetAllMarks:qD,unsetMark:JD,updateAttributes:GD,wrapIn:QD,wrapInList:YD});const ZD=Ge.create({name:"commands",addCommands(){return{...XD}}}),eR=Ge.create({name:"drop",addProseMirrorPlugins(){return[new Qe({key:new zt("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),tR=Ge.create({name:"editable",addProseMirrorPlugins(){return[new Qe({key:new zt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),nR=new zt("focusEvents"),rR=Ge.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Qe({key:nR,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),iR=Ge.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:l})=>{const{selection:a,doc:c}=l,{empty:d,$anchor:f}=a,{pos:p,parent:h}=f,m=f.parent.isTextblock&&p>0?l.doc.resolve(p-1):f,g=m.parent.type.spec.isolating,v=f.pos-f.parentOffset,y=g&&m.parent.childCount===1?v===f.pos:J.atStart(c).from===p;return!d||!h.type.isTextblock||h.textContent.length||!y||y&&f.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return ec()||TS()?o:i},addProseMirrorPlugins(){return[new Qe({key:new zt("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(g=>g.getMeta("composition")))return;const r=t.some(g=>g.docChanged)&&!e.doc.eq(n.doc),i=t.some(g=>g.getMeta("preventClearDocument"));if(!r||i)return;const{empty:o,from:s,to:l}=e.selection,a=J.atStart(e.doc).from,c=J.atEnd(e.doc).to;if(o||!(s===a&&l===c)||!Oh(n.doc))return;const p=n.tr,h=iu({state:n,transaction:p}),{commands:m}=new ou({editor:this.editor,state:h});if(m.clearNodes(),!!p.steps.length)return p}})]}}),oR=Ge.create({name:"paste",addProseMirrorPlugins(){return[new Qe({key:new zt("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),sR=Ge.create({name:"tabindex",addProseMirrorPlugins(){return[new Qe({key:new zt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Wr{get name(){return this.node.type.name}constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Wr(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Wr(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Wr(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,s=this.pos+r+(o?0:1);if(s<0||s>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(s);if(!i&&l.depth<=this.depth)return;const a=new Wr(l,this.editor,i,i?n:null);i&&(a.actualDepth=this.depth+1),e.push(new Wr(l,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const o=i.node.attrs,s=Object.keys(n);for(let l=0;l<s.length;l+=1){const a=s[l];if(o[a]!==n[a])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const o=Object.keys(n);return this.children.forEach(s=>{r&&i.length>0||(s.node.type.name===e&&o.every(a=>n[a]===s.node.attrs[a])&&i.push(s),!(r&&i.length>0)&&(i=i.concat(s.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const lR=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function aR(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}class cR extends gA{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:i})=>this.options.onDrop(n,r,i)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=aR(lR,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=vS(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(o=>{const s=typeof o=="string"?`${o}$`:o.key;r=r.filter(l=>!l.key.startsWith(s))}),n.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[tR,RA.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),ZD,rR,iR,sR,eR,oR].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o==null?void 0:o.type));this.extensionManager=new qi(i,this)}createCommandManager(){this.commandManager=new ou({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=qf(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(l=>l.name!=="collaboration"),this.createExtensionManager()}}),n=qf(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=CS(n,this.options.autofocus);this.view=new iS(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Ki.create({doc:n,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var l;return(l=this.capturedTransaction)===null||l===void 0?void 0:l.step(s)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),o=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return jS(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return RD(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return jh(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return TD(this.state.doc,{blockSeparator:n,textSerializers:{...bS(this.schema),...r}})}get isEmpty(){return Oh(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new Wr(n,this)}get $doc(){return this.$pos(0)}}function go(t){return new lu({find:t.find,handler:({state:e,range:n,match:r})=>{const i=G(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,s=r[r.length-1],l=r[0];if(s){const a=l.search(/\S/),c=n.from+l.indexOf(s),d=c+s.length;if(Ih(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(g=>g===t.type&&g!==h.mark.type)).filter(h=>h.to>c).length)return null;d<n.to&&o.delete(d,n.to),c>n.from&&o.delete(n.from+a,c);const p=n.from+a+s.length;o.addMark(n.from+a,p,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}function uR(t){return new lu({find:t.find,handler:({state:e,range:n,match:r})=>{const i=G(t.getAttributes,void 0,r)||{},{tr:o}=e,s=n.from;let l=n.to;const a=t.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let d=s+c;d>l?d=l:l=d+r[1].length;const f=r[0][r[0].length-1];o.insertText(f,s+r[0].length-1),o.replaceWith(d,l,a)}else if(r[0]){const c=t.type.isInline?s:s-1;o.insert(c,t.type.create(i)).delete(o.mapping.map(s),o.mapping.map(l))}o.scrollIntoView()}})}function Gf(t){return new lu({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),o=G(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)}})}function Ys(t){return new lu({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const o=G(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),a=s.doc.resolve(n.from).blockRange(),c=a&&fh(a,t.type,o);if(!c)return null;if(s.wrap(a,c),t.keepMarks&&t.editor){const{selection:f,storedMarks:p}=e,{splittableMarks:h}=t.editor.extensionManager,m=p||f.$to.parentOffset&&f.$from.marks();if(m){const g=m.filter(v=>h.includes(v.type.name));s.ensureMarks(g)}}if(t.keepAttributes){const f=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(f,o).run()}const d=s.doc.resolve(n.from-1).nodeBefore;d&&d.type===t.type&&Pr(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,d))&&s.join(n.from-1)}})}class bt{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=G($(this,"addOptions",{name:this.name}))),this.storage=G($(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new bt(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>au(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new bt(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=G($(n,"addOptions",{name:n.name})),n.storage=G($(n,"addStorage",{name:n.name,options:n.options})),n}}function xi(t){return new EA({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const o=G(t.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:s}=e,l=r[r.length-1],a=r[0];let c=n.to;if(l){const d=a.search(/\S/),f=n.from+a.indexOf(l),p=f+l.length;if(Ih(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(v=>v===t.type&&v!==m.mark.type)).filter(m=>m.to>f).length)return null;p<n.to&&s.delete(p,n.to),f>n.from&&s.delete(n.from+d,f),c=n.from+d+l.length,s.addMark(n.from+d,c,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}function dR(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof H){const o=r.index();return r.parent.canReplaceWith(o,o+1,e)}let i=r.depth;for(;i>=0;){const o=r.index(i);if(r.node(i).contentMatchAt(o).matchType(e))return!0;i-=1}return!1}function fR(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var AS={exports:{}},pd={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Py;function pR(){if(Py)return pd;Py=1;var t=Y;function e(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,o=t.useLayoutEffect,s=t.useDebugValue;function l(f,p){var h=p(),m=r({inst:{value:h,getSnapshot:p}}),g=m[0].inst,v=m[1];return o(function(){g.value=h,g.getSnapshot=p,a(g)&&v({inst:g})},[f,h,p]),i(function(){return a(g)&&v({inst:g}),f(function(){a(g)&&v({inst:g})})},[f]),s(h),h}function a(f){var p=f.getSnapshot;f=f.value;try{var h=p();return!n(f,h)}catch{return!0}}function c(f,p){return p()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:l;return pd.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,pd}AS.exports=pR();var Nh=AS.exports;const hR=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},mR=({contentComponent:t})=>{const e=Nh.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return Y.createElement(Y.Fragment,null,Object.values(e))};function gR(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:Cw.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}class yR extends Y.Component{constructor(e){var n;super(e),this.editorContentRef=Y.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=gR(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return Y.createElement(Y.Fragment,null,Y.createElement("div",{ref:hR(n,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&Y.createElement(mR,{contentComponent:e.contentComponent}))}}const xR=b.forwardRef((t,e)=>{const n=Y.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Y.createElement(yR,{key:n,innerRef:e,...t})}),vR=Y.memo(xR);var SR=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var s=o[i];if(!(s==="_owner"&&e.$$typeof)&&!t(e[s],n[s]))return!1}return!0}return e!==e&&n!==n},bR=fR(SR),DS={exports:{}},hd={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $y;function kR(){if($y)return hd;$y=1;var t=Y,e=Nh;function n(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,o=t.useRef,s=t.useEffect,l=t.useMemo,a=t.useDebugValue;return hd.useSyncExternalStoreWithSelector=function(c,d,f,p,h){var m=o(null);if(m.current===null){var g={hasValue:!1,value:null};m.current=g}else g=m.current;m=l(function(){function y(E){if(!x){if(x=!0,S=E,E=p(E),h!==void 0&&g.hasValue){var C=g.value;if(h(C,E))return k=C}return k=E}if(C=k,r(S,E))return C;var j=p(E);return h!==void 0&&h(C,j)?C:(S=E,k=j)}var x=!1,S,k,w=f===void 0?null:f;return[function(){return y(d())},w===null?void 0:function(){return y(w())}]},[d,f,p,h]);var v=i(c,m[0],m[1]);return s(function(){g.hasValue=!0,g.value=v},[v]),a(v),v},hd}DS.exports=kR();var wR=DS.exports;const CR=typeof window<"u"?b.useLayoutEffect:b.useEffect;class ER{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const n=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},r=this.editor;return r.on("transaction",n),()=>{r.off("transaction",n)}}}}function TR(t){var e;const[n]=b.useState(()=>new ER(t.editor)),r=wR.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!==null&&e!==void 0?e:bR);return CR(()=>n.watch(t.editor),[t.editor,n]),b.useDebugValue(r),r}const MR=!1,Qf=typeof window>"u",jR=Qf||!!(typeof window<"u"&&window.next);class zh{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Qf||jR?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onBeforeCreate)===null||o===void 0?void 0:o.call(i,...r)},onBlur:(...r)=>{var i,o;return(o=(i=this.options.current).onBlur)===null||o===void 0?void 0:o.call(i,...r)},onCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onCreate)===null||o===void 0?void 0:o.call(i,...r)},onDestroy:(...r)=>{var i,o;return(o=(i=this.options.current).onDestroy)===null||o===void 0?void 0:o.call(i,...r)},onFocus:(...r)=>{var i,o;return(o=(i=this.options.current).onFocus)===null||o===void 0?void 0:o.call(i,...r)},onSelectionUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onSelectionUpdate)===null||o===void 0?void 0:o.call(i,...r)},onTransaction:(...r)=>{var i,o;return(o=(i=this.options.current).onTransaction)===null||o===void 0?void 0:o.call(i,...r)},onUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onUpdate)===null||o===void 0?void 0:o.call(i,...r)},onContentError:(...r)=>{var i,o;return(o=(i=this.options.current).onContentError)===null||o===void 0?void 0:o.call(i,...r)},onDrop:(...r)=>{var i,o;return(o=(i=this.options.current).onDrop)===null||o===void 0?void 0:o.call(i,...r)},onPaste:(...r)=>{var i,o;return(o=(i=this.options.current).onPaste)===null||o===void 0?void 0:o.call(i,...r)}};return new cR(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,o)=>{var s;return i===((s=n.extensions)===null||s===void 0?void 0:s[o])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?zh.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function AR(t={},e=[]){const n=b.useRef(t);n.current=t;const[r]=b.useState(()=>new zh(n)),i=Nh.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return b.useDebugValue(i),b.useEffect(r.onRender(e)),TR({editor:i,selector:({transactionNumber:o})=>t.shouldRerenderOnTransaction===!1?null:t.immediatelyRender&&o===0?0:o+1}),i}const DR=b.createContext({editor:null});DR.Consumer;const RR=b.createContext({onDragStart:void 0}),IR=()=>b.useContext(RR);Y.forwardRef((t,e)=>{const{onDragStart:n}=IR(),r=t.as||"div";return Y.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});const OR=/^\s*>\s$/,NR=bt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",Re(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Ys({find:OR,type:this.type})]}}),zR=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,LR=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,PR=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,$R=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,FR=an.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Re(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[go({find:zR,type:this.type}),go({find:PR,type:this.type})]},addPasteRules(){return[xi({find:LR,type:this.type}),xi({find:$R,type:this.type})]}}),BR="listItem",Fy="textStyle",By=/^\s*([-+*])\s$/,_R=bt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Re(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(BR,this.editor.getAttributes(Fy)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Ys({find:By,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Ys({find:By,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Fy),editor:this.editor})),[t]}}),HR=/(^|[^`])`([^`]+)`(?!`)/,UR=/(^|[^`])`([^`]+)`(?!`)/g,VR=an.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Re(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[go({find:HR,type:this.type})]},addPasteRules(){return[xi({find:UR,type:this.type})]}}),WR=/^```([a-z]+)?[\s\n]$/,KR=/^~~~([a-z]+)?[\s\n]$/,qR=bt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,o=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(s=>s.startsWith(n)).map(s=>s.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Re(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!o||!s?!1:t.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:r.nodeAt(l)?t.commands.command(({tr:c})=>(c.setSelection(J.near(r.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[Gf({find:WR,type:this.type,getAttributes:t=>({language:t[1]})}),Gf({find:KR,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Qe({key:new zt("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i==null?void 0:i.mode;if(!n||!o)return!1;const{tr:s,schema:l}=t.state,a=l.text(n.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:o},a)),s.selection.$from.parent.type!==this.type&&s.setSelection(W.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),JR=bt.create({name:"doc",topNode:!0,content:"block+"});function GR(t={}){return new Qe({view(e){return new QR(e,t)}})}class QR{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=s=>{this[i](s)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,o=i.getBoundingClientRect(),s=o.width/i.offsetWidth,l=o.height/i.offsetHeight;if(n){let f=e.nodeBefore,p=e.nodeAfter;if(f||p){let h=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(h){let m=h.getBoundingClientRect(),g=f?m.bottom:m.top;f&&p&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let v=this.width/2*l;r={left:m.left,right:m.right,top:g-v,bottom:g+v}}}}if(!r){let f=this.editorView.coordsAtPos(this.cursorPos),p=this.width/2*s;r={left:f.left-p,right:f.left+p,top:f.top,bottom:f.bottom}}let a=this.editorView.dom.offsetParent;this.element||(this.element=a.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,d;if(!a||a==document.body&&getComputedStyle(a).position=="static")c=-pageXOffset,d=-pageYOffset;else{let f=a.getBoundingClientRect(),p=f.width/a.offsetWidth,h=f.height/a.offsetHeight;c=f.left-a.scrollLeft*p,d=f.top-a.scrollTop*h}this.element.style.left=(r.left-c)/s+"px",this.element.style.top=(r.top-d)/l+"px",this.element.style.width=(r.right-r.left)/s+"px",this.element.style.height=(r.bottom-r.top)/l+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!o){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=g1(this.editorView.state.doc,s,this.editorView.dragging.slice);l!=null&&(s=l)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const YR=Ge.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[GR(this.options)]}});class Se extends J{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Se.valid(r)?new Se(r):J.near(r)}content(){return L.empty}eq(e){return e instanceof Se&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Se(e.resolve(n.pos))}getBookmark(){return new Lh(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!XR(e)||!ZR(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Se.valid(e))return e;let i=e.pos,o=null;for(let s=e.depth;;s--){let l=e.node(s);if(n>0?e.indexAfter(s)<l.childCount:e.index(s)>0){o=l.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;i+=n;let a=e.doc.resolve(i);if(Se.valid(a))return a}for(;;){let s=n>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!H.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*n),r=!1;continue e}break}o=s,i+=n;let l=e.doc.resolve(i);if(Se.valid(l))return l}return null}}}Se.prototype.visible=!1;Se.findFrom=Se.findGapCursorFrom;J.jsonID("gapcursor",Se);class Lh{constructor(e){this.pos=e}map(e){return new Lh(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Se.valid(n)?new Se(n):J.near(n)}}function RS(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function XR(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||RS(i.type))return!0;if(i.inlineContent)return!1}}return!0}function ZR(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||RS(i.type))return!0;if(i.inlineContent)return!1}}return!0}function eI(){return new Qe({props:{decorations:iI,createSelectionBetween(t,e,n){return e.pos==n.pos&&Se.valid(n)?new Se(n):null},handleClick:nI,handleKeyDown:tI,handleDOMEvents:{beforeinput:rI}}})}const tI=oS({ArrowLeft:Hl("horiz",-1),ArrowRight:Hl("horiz",1),ArrowUp:Hl("vert",-1),ArrowDown:Hl("vert",1)});function Hl(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let s=r.selection,l=e>0?s.$to:s.$from,a=s.empty;if(s instanceof W){if(!o.endOfTextblock(n)||l.depth==0)return!1;a=!1,l=r.doc.resolve(e>0?l.after():l.before())}let c=Se.findGapCursorFrom(l,e,a);return c?(i&&i(r.tr.setSelection(new Se(c))),!0):!1}}function nI(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Se.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&H.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Se(r))),!0)}function rI(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Se))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=D.empty;for(let s=r.length-1;s>=0;s--)i=D.from(r[s].createAndFill(null,i));let o=t.state.tr.replace(n.pos,n.pos,new L(i,0,0));return o.setSelection(W.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function iI(t){if(!(t.selection instanceof Se))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ae.create(t.doc,[Wt.widget(t.selection.head,e,{key:"gapcursor"})])}const oI=Ge.create({name:"gapCursor",addProseMirrorPlugins(){return[eI()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=G($(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),sI=bt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Re(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:o}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:l}=r.extensionManager,a=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:d})=>{if(d&&a&&s){const f=a.filter(p=>l.includes(p.type.name));c.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),lI=bt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Re(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Gf({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var tc=200,Pe=function(){};Pe.prototype.append=function(e){return e.length?(e=Pe.from(e),!this.length&&e||e.length<tc&&this.leafAppend(e)||this.length<tc&&e.leafPrepend(this)||this.appendInner(e)):this};Pe.prototype.prepend=function(e){return e.length?Pe.from(e).append(this):this};Pe.prototype.appendInner=function(e){return new aI(this,e)};Pe.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Pe.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Pe.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Pe.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Pe.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,s){return i.push(e(o,s))},n,r),i};Pe.from=function(e){return e instanceof Pe?e:e&&e.length?new IS(e):Pe.empty};var IS=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,s,l){for(var a=o;a<s;a++)if(i(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,s,l){for(var a=o-1;a>=s;a--)if(i(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=tc)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=tc)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Pe);Pe.empty=new IS([]);var aI=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,s){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(o,l),s)===!1||o>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,o)-l,s+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,s){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(o,l)-l,s+l)===!1||o<l&&this.left.forEachInvertedInner(r,Math.min(i,l),o,s)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Pe);const cI=500;class nn{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;n&&(i=this.remapping(r,this.items.length),o=i.maps.length);let s=e.tr,l,a,c=[],d=[];return this.items.forEach((f,p)=>{if(!f.step){i||(i=this.remapping(r,p+1),o=i.maps.length),o--,d.push(f);return}if(i){d.push(new hn(f.map));let h=f.step.map(i.slice(o)),m;h&&s.maybeStep(h).doc&&(m=s.mapping.maps[s.mapping.maps.length-1],c.push(new hn(m,void 0,void 0,c.length+d.length))),o--,m&&i.appendMap(m,o)}else s.maybeStep(f.step);if(f.selection)return l=i?f.selection.map(i.slice(o)):f.selection,a=new nn(this.items.slice(0,r).append(d.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:s,selection:l}}addTransform(e,n,r,i){let o=[],s=this.eventCount,l=this.items,a=!i&&l.length?l.get(l.length-1):null;for(let d=0;d<e.steps.length;d++){let f=e.steps[d].invert(e.docs[d]),p=new hn(e.mapping.maps[d],f,n),h;(h=a&&a.merge(p))&&(p=h,d?o.pop():l=l.slice(0,l.length-1)),o.push(p),n&&(s++,n=void 0),i||(a=p)}let c=s-r.depth;return c>dI&&(l=uI(l,c),s-=c),new nn(l.append(o),s)}remapping(e,n){let r=new Vs;return this.items.forEach((i,o)=>{let s=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new nn(this.items.append(e.map(n=>new hn(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),o=e.mapping,s=e.steps.length,l=this.eventCount;this.items.forEach(p=>{p.selection&&l--},i);let a=n;this.items.forEach(p=>{let h=o.getMirror(--a);if(h==null)return;s=Math.min(s,h);let m=o.maps[h];if(p.step){let g=e.steps[h].invert(e.docs[h]),v=p.selection&&p.selection.map(o.slice(a+1,h));v&&l++,r.push(new hn(m,g,v))}else r.push(new hn(m))},i);let c=[];for(let p=n;p<s;p++)c.push(new hn(o.maps[p]));let d=this.items.slice(0,i).append(c).append(r),f=new nn(d,l);return f.emptyItemCount()>cI&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],o=0;return this.items.forEach((s,l)=>{if(l>=e)i.push(s),s.selection&&o++;else if(s.step){let a=s.step.map(n.slice(r)),c=a&&a.getMap();if(r--,c&&n.appendMap(c,r),a){let d=s.selection&&s.selection.map(n.slice(r));d&&o++;let f=new hn(c.invert(),a,d),p,h=i.length-1;(p=i.length&&i[h].merge(f))?i[h]=p:i.push(f)}}else s.map&&r--},this.items.length,0),new nn(Pe.from(i.reverse()),o)}}nn.empty=new nn(Pe.empty,0);function uI(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class hn{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new hn(n.getMap().invert(),n,this.selection)}}}class lr{constructor(e,n,r,i,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const dI=20;function fI(t,e,n,r){let i=n.getMeta(si),o;if(i)return i.historyState;n.getMeta(mI)&&(t=new lr(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(si))return s.getMeta(si).redo?new lr(t.done.addTransform(n,void 0,r,aa(e)),t.undone,_y(n.mapping.maps),t.prevTime,t.prevComposition):new lr(t.done,t.undone.addTransform(n,void 0,r,aa(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),a=t.prevTime==0||!s&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!pI(n,t.prevRanges)),c=s?md(t.prevRanges,n.mapping):_y(n.mapping.maps);return new lr(t.done.addTransform(n,a?e.selection.getBookmark():void 0,r,aa(e)),nn.empty,c,n.time,l??t.prevComposition)}else return(o=n.getMeta("rebased"))?new lr(t.done.rebased(n,o),t.undone.rebased(n,o),md(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new lr(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),md(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function pI(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(n=!0)}),n}function _y(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,o,s)=>e.push(o,s));return e}function md(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function hI(t,e,n){let r=aa(e),i=si.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let s=o.selection.resolve(o.transform.doc),l=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),a=new lr(n?l:o.remaining,n?o.remaining:l,null,0,-1);return o.transform.setSelection(s).setMeta(si,{redo:n,historyState:a})}let gd=!1,Hy=null;function aa(t){let e=t.plugins;if(Hy!=e){gd=!1,Hy=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){gd=!0;break}}return gd}const si=new zt("history"),mI=new zt("closeHistory");function gI(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Qe({key:si,state:{init(){return new lr(nn.empty,nn.empty,null,0,-1)},apply(e,n,r){return fI(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?NS:r=="historyRedo"?zS:null;return!i||!e.editable?!1:(n.preventDefault(),i(e.state,e.dispatch))}}}})}function OS(t,e){return(n,r)=>{let i=si.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let o=hI(i,n,t);o&&r(e?o.scrollIntoView():o)}return!0}}const NS=OS(!1,!0),zS=OS(!0,!0),yI=Ge.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>NS(t,e),redo:()=>({state:t,dispatch:e})=>zS(t,e)}},addProseMirrorPlugins(){return[gI(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),xI=bt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Re(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!dR(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$from:r,$to:i}=n,o=t();return r.parentOffset===0?o.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):ID(n)?o.insertContentAt(i.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({tr:s,dispatch:l})=>{var a;if(l){const{$to:c}=s.selection,d=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?s.setSelection(W.create(s.doc,c.pos+1)):c.nodeAfter.isBlock?s.setSelection(H.create(s.doc,c.pos)):s.setSelection(W.create(s.doc,c.pos));else{const f=(a=c.parent.type.contentMatch.defaultType)===null||a===void 0?void 0:a.create();f&&(s.insert(d,f),s.setSelection(W.create(s.doc,d+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[uR({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),vI=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,SI=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,bI=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,kI=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,wI=an.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Re(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[go({find:vI,type:this.type}),go({find:bI,type:this.type})]},addPasteRules(){return[xi({find:SI,type:this.type}),xi({find:kI,type:this.type})]}}),CI=bt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Re(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),EI="listItem",Uy="textStyle",Vy=/^(\d+)\.\s$/,TI=bt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Re(this.options.HTMLAttributes,n),0]:["ol",Re(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(EI,this.editor.getAttributes(Uy)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Ys({find:Vy,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Ys({find:Vy,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Uy)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),MI=bt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Re(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),jI=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,AI=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,DI=an.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Re(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[go({find:jI,type:this.type})]},addPasteRules(){return[xi({find:AI,type:this.type})]}}),RI=bt.create({name:"text",group:"inline"}),II=Ge.create({name:"starterKit",addExtensions(){const t=[];return this.options.bold!==!1&&t.push(FR.configure(this.options.bold)),this.options.blockquote!==!1&&t.push(NR.configure(this.options.blockquote)),this.options.bulletList!==!1&&t.push(_R.configure(this.options.bulletList)),this.options.code!==!1&&t.push(VR.configure(this.options.code)),this.options.codeBlock!==!1&&t.push(qR.configure(this.options.codeBlock)),this.options.document!==!1&&t.push(JR.configure(this.options.document)),this.options.dropcursor!==!1&&t.push(YR.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&t.push(oI.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&t.push(sI.configure(this.options.hardBreak)),this.options.heading!==!1&&t.push(lI.configure(this.options.heading)),this.options.history!==!1&&t.push(yI.configure(this.options.history)),this.options.horizontalRule!==!1&&t.push(xI.configure(this.options.horizontalRule)),this.options.italic!==!1&&t.push(wI.configure(this.options.italic)),this.options.listItem!==!1&&t.push(CI.configure(this.options.listItem)),this.options.orderedList!==!1&&t.push(TI.configure(this.options.orderedList)),this.options.paragraph!==!1&&t.push(MI.configure(this.options.paragraph)),this.options.strike!==!1&&t.push(DI.configure(this.options.strike)),this.options.text!==!1&&t.push(RI.configure(this.options.text)),t}}),OI=an.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Re(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),NI="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",zI="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Yf="numeric",Xf="ascii",Zf="alpha",ps="asciinumeric",Jo="alphanumeric",ep="domain",LS="emoji",LI="scheme",PI="slashscheme",yd="whitespace";function $I(t,e){return t in e||(e[t]=[]),e[t]}function Zr(t,e,n){e[Yf]&&(e[ps]=!0,e[Jo]=!0),e[Xf]&&(e[ps]=!0,e[Zf]=!0),e[ps]&&(e[Jo]=!0),e[Zf]&&(e[Jo]=!0),e[Jo]&&(e[ep]=!0),e[LS]&&(e[ep]=!0);for(const r in e){const i=$I(r,n);i.indexOf(t)<0&&i.push(t)}}function FI(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function mt(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}mt.groups={};mt.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],o=e.jr[r][1];if(o&&i.test(t))return o}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||mt.groups;let i;return e&&e.j?i=e:(i=new mt(e),n&&r&&Zr(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const o=t.length;if(!o)return i;for(let s=0;s<o-1;s++)i=i.tt(t[s]);return i.tt(t[o-1],e,n,r)},tt(t,e,n,r){r=r||mt.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const o=e;let s,l=i.go(t);if(l?(s=new mt,Object.assign(s.j,l.j),s.jr.push.apply(s.jr,l.jr),s.jd=l.jd,s.t=l.t):s=new mt,o){if(r)if(s.t&&typeof s.t=="string"){const a=Object.assign(FI(s.t,r),n);Zr(o,a,r)}else n&&Zr(o,n,r);s.t=o}return i.j[t]=s,s}};const q=(t,e,n,r,i)=>t.ta(e,n,r,i),xe=(t,e,n,r,i)=>t.tr(e,n,r,i),Wy=(t,e,n,r,i)=>t.ts(e,n,r,i),R=(t,e,n,r,i)=>t.tt(e,n,r,i),In="WORD",tp="UWORD",PS="ASCIINUMERICAL",$S="ALPHANUMERICAL",Xs="LOCALHOST",np="TLD",rp="UTLD",ca="SCHEME",Oi="SLASH_SCHEME",Ph="NUM",ip="WS",$h="NL",hs="OPENBRACE",ms="CLOSEBRACE",nc="OPENBRACKET",rc="CLOSEBRACKET",ic="OPENPAREN",oc="CLOSEPAREN",sc="OPENANGLEBRACKET",lc="CLOSEANGLEBRACKET",ac="FULLWIDTHLEFTPAREN",cc="FULLWIDTHRIGHTPAREN",uc="LEFTCORNERBRACKET",dc="RIGHTCORNERBRACKET",fc="LEFTWHITECORNERBRACKET",pc="RIGHTWHITECORNERBRACKET",hc="FULLWIDTHLESSTHAN",mc="FULLWIDTHGREATERTHAN",gc="AMPERSAND",yc="APOSTROPHE",xc="ASTERISK",ar="AT",vc="BACKSLASH",Sc="BACKTICK",bc="CARET",fr="COLON",Fh="COMMA",kc="DOLLAR",mn="DOT",wc="EQUALS",Bh="EXCLAMATION",$t="HYPHEN",gs="PERCENT",Cc="PIPE",Ec="PLUS",Tc="POUND",ys="QUERY",_h="QUOTE",FS="FULLWIDTHMIDDLEDOT",Hh="SEMI",gn="SLASH",xs="TILDE",Mc="UNDERSCORE",BS="EMOJI",jc="SYM";var _S=Object.freeze({__proto__:null,ALPHANUMERICAL:$S,AMPERSAND:gc,APOSTROPHE:yc,ASCIINUMERICAL:PS,ASTERISK:xc,AT:ar,BACKSLASH:vc,BACKTICK:Sc,CARET:bc,CLOSEANGLEBRACKET:lc,CLOSEBRACE:ms,CLOSEBRACKET:rc,CLOSEPAREN:oc,COLON:fr,COMMA:Fh,DOLLAR:kc,DOT:mn,EMOJI:BS,EQUALS:wc,EXCLAMATION:Bh,FULLWIDTHGREATERTHAN:mc,FULLWIDTHLEFTPAREN:ac,FULLWIDTHLESSTHAN:hc,FULLWIDTHMIDDLEDOT:FS,FULLWIDTHRIGHTPAREN:cc,HYPHEN:$t,LEFTCORNERBRACKET:uc,LEFTWHITECORNERBRACKET:fc,LOCALHOST:Xs,NL:$h,NUM:Ph,OPENANGLEBRACKET:sc,OPENBRACE:hs,OPENBRACKET:nc,OPENPAREN:ic,PERCENT:gs,PIPE:Cc,PLUS:Ec,POUND:Tc,QUERY:ys,QUOTE:_h,RIGHTCORNERBRACKET:dc,RIGHTWHITECORNERBRACKET:pc,SCHEME:ca,SEMI:Hh,SLASH:gn,SLASH_SCHEME:Oi,SYM:jc,TILDE:xs,TLD:np,UNDERSCORE:Mc,UTLD:rp,UWORD:tp,WORD:In,WS:ip});const Dn=/[a-z]/,Fo=new RegExp("\\p{L}","u"),xd=new RegExp("\\p{Emoji}","u"),Rn=/\d/,vd=/\s/,Ky="\r",Sd=`
`,BI="",_I="",bd="";let Ul=null,Vl=null;function HI(t=[]){const e={};mt.groups=e;const n=new mt;Ul==null&&(Ul=qy(NI)),Vl==null&&(Vl=qy(zI)),R(n,"'",yc),R(n,"{",hs),R(n,"}",ms),R(n,"[",nc),R(n,"]",rc),R(n,"(",ic),R(n,")",oc),R(n,"<",sc),R(n,">",lc),R(n,"",ac),R(n,"",cc),R(n,"",uc),R(n,"",dc),R(n,"",fc),R(n,"",pc),R(n,"",hc),R(n,"",mc),R(n,"&",gc),R(n,"*",xc),R(n,"@",ar),R(n,"`",Sc),R(n,"^",bc),R(n,":",fr),R(n,",",Fh),R(n,"$",kc),R(n,".",mn),R(n,"=",wc),R(n,"!",Bh),R(n,"-",$t),R(n,"%",gs),R(n,"|",Cc),R(n,"+",Ec),R(n,"#",Tc),R(n,"?",ys),R(n,'"',_h),R(n,"/",gn),R(n,";",Hh),R(n,"~",xs),R(n,"_",Mc),R(n,"\\",vc),R(n,"",FS);const r=xe(n,Rn,Ph,{[Yf]:!0});xe(r,Rn,r);const i=xe(r,Dn,PS,{[ps]:!0}),o=xe(r,Fo,$S,{[Jo]:!0}),s=xe(n,Dn,In,{[Xf]:!0});xe(s,Rn,i),xe(s,Dn,s),xe(i,Rn,i),xe(i,Dn,i);const l=xe(n,Fo,tp,{[Zf]:!0});xe(l,Dn),xe(l,Rn,o),xe(l,Fo,l),xe(o,Rn,o),xe(o,Dn),xe(o,Fo,o);const a=R(n,Sd,$h,{[yd]:!0}),c=R(n,Ky,ip,{[yd]:!0}),d=xe(n,vd,ip,{[yd]:!0});R(n,bd,d),R(c,Sd,a),R(c,bd,d),xe(c,vd,d),R(d,Ky),R(d,Sd),xe(d,vd,d),R(d,bd,d);const f=xe(n,xd,BS,{[LS]:!0});R(f,"#"),xe(f,xd,f),R(f,BI,f);const p=R(f,_I);R(p,"#"),xe(p,xd,f);const h=[[Dn,s],[Rn,i]],m=[[Dn,null],[Fo,l],[Rn,o]];for(let g=0;g<Ul.length;g++)tr(n,Ul[g],np,In,h);for(let g=0;g<Vl.length;g++)tr(n,Vl[g],rp,tp,m);Zr(np,{tld:!0,ascii:!0},e),Zr(rp,{utld:!0,alpha:!0},e),tr(n,"file",ca,In,h),tr(n,"mailto",ca,In,h),tr(n,"http",Oi,In,h),tr(n,"https",Oi,In,h),tr(n,"ftp",Oi,In,h),tr(n,"ftps",Oi,In,h),Zr(ca,{scheme:!0,ascii:!0},e),Zr(Oi,{slashscheme:!0,ascii:!0},e),t=t.sort((g,v)=>g[0]>v[0]?1:-1);for(let g=0;g<t.length;g++){const v=t[g][0],x=t[g][1]?{[LI]:!0}:{[PI]:!0};v.indexOf("-")>=0?x[ep]=!0:Dn.test(v)?Rn.test(v)?x[ps]=!0:x[Xf]=!0:x[Yf]=!0,Wy(n,v,v,x)}return Wy(n,"localhost",Xs,{ascii:!0}),n.jd=new mt(jc),{start:n,tokens:Object.assign({groups:e},_S)}}function HS(t,e){const n=UI(e.replace(/[A-Z]/g,l=>l.toLowerCase())),r=n.length,i=[];let o=0,s=0;for(;s<r;){let l=t,a=null,c=0,d=null,f=-1,p=-1;for(;s<r&&(a=l.go(n[s]));)l=a,l.accepts()?(f=0,p=0,d=l):f>=0&&(f+=n[s].length,p++),c+=n[s].length,o+=n[s].length,s++;o-=f,s-=p,c-=f,i.push({t:d.t,v:e.slice(o-c,o),s:o-c,e:o})}return i}function UI(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),o,s=i<55296||i>56319||r+1===n||(o=t.charCodeAt(r+1))<56320||o>57343?t[r]:t.slice(r,r+2);e.push(s),r+=s.length}return e}function tr(t,e,n,r,i){let o;const s=e.length;for(let l=0;l<s-1;l++){const a=e[l];t.j[a]?o=t.j[a]:(o=new mt(r),o.jr=i.slice(),t.j[a]=o),t=o}return o=new mt(n),o.jr=i.slice(),t.j[e[s-1]]=o,o}function qy(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let o=0;for(;i.indexOf(t[r+o])>=0;)o++;if(o>0){e.push(n.join(""));for(let s=parseInt(t.substring(r,r+o),10);s>0;s--)n.pop();r+=o}else n.push(t[r]),r++}return e}const Zs={defaultProtocol:"http",events:null,format:Jy,formatHref:Jy,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Uh(t,e=null){let n=Object.assign({},Zs);t&&(n=Object.assign(n,t instanceof Uh?t.o:t));const r=n.ignoreTags,i=[];for(let o=0;o<r.length;o++)i.push(r[o].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}Uh.prototype={o:Zs,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:Zs[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function Jy(t){return t}function US(t,e){this.t="token",this.v=t,this.tk=e}US.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Zs.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),o=this.toFormattedString(t),s={},l=t.get("className",n,e),a=t.get("target",n,e),c=t.get("rel",n,e),d=t.getObj("attributes",n,e),f=t.getObj("events",n,e);return s.href=r,l&&(s.class=l),a&&(s.target=a),c&&(s.rel=c),d&&Object.assign(s,d),{tagName:i,attributes:s,content:o,eventListeners:f}}};function uu(t,e){class n extends US{constructor(i,o){super(i,o),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const Gy=uu("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Qy=uu("text"),VI=uu("nl"),Wl=uu("url",{isLink:!0,toHref(t=Zs.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Xs&&t[1].t===fr}}),Pt=t=>new mt(t);function WI({groups:t}){const e=t.domain.concat([gc,xc,ar,vc,Sc,bc,kc,wc,$t,Ph,gs,Cc,Ec,Tc,gn,jc,xs,Mc]),n=[yc,fr,Fh,mn,Bh,gs,ys,_h,Hh,sc,lc,hs,ms,rc,nc,ic,oc,ac,cc,uc,dc,fc,pc,hc,mc],r=[gc,yc,xc,vc,Sc,bc,kc,wc,$t,hs,ms,gs,Cc,Ec,Tc,ys,gn,jc,xs,Mc],i=Pt(),o=R(i,xs);q(o,r,o),q(o,t.domain,o);const s=Pt(),l=Pt(),a=Pt();q(i,t.domain,s),q(i,t.scheme,l),q(i,t.slashscheme,a),q(s,r,o),q(s,t.domain,s);const c=R(s,ar);R(o,ar,c),R(l,ar,c),R(a,ar,c);const d=R(o,mn);q(d,r,o),q(d,t.domain,o);const f=Pt();q(c,t.domain,f),q(f,t.domain,f);const p=R(f,mn);q(p,t.domain,f);const h=Pt(Gy);q(p,t.tld,h),q(p,t.utld,h),R(c,Xs,h);const m=R(f,$t);R(m,$t,m),q(m,t.domain,f),q(h,t.domain,f),R(h,mn,p),R(h,$t,m);const g=R(h,fr);q(g,t.numeric,Gy);const v=R(s,$t),y=R(s,mn);R(v,$t,v),q(v,t.domain,s),q(y,r,o),q(y,t.domain,s);const x=Pt(Wl);q(y,t.tld,x),q(y,t.utld,x),q(x,t.domain,s),q(x,r,o),R(x,mn,y),R(x,$t,v),R(x,ar,c);const S=R(x,fr),k=Pt(Wl);q(S,t.numeric,k);const w=Pt(Wl),E=Pt();q(w,e,w),q(w,n,E),q(E,e,w),q(E,n,E),R(x,gn,w),R(k,gn,w);const C=R(l,fr),j=R(a,fr),O=R(j,gn),N=R(O,gn);q(l,t.domain,s),R(l,mn,y),R(l,$t,v),q(a,t.domain,s),R(a,mn,y),R(a,$t,v),q(C,t.domain,w),R(C,gn,w),R(C,ys,w),q(N,t.domain,w),q(N,e,w),R(N,gn,w);const K=[[hs,ms],[nc,rc],[ic,oc],[sc,lc],[ac,cc],[uc,dc],[fc,pc],[hc,mc]];for(let de=0;de<K.length;de++){const[he,oe]=K[de],pt=R(w,he);R(E,he,pt),R(pt,oe,w);const Fe=Pt(Wl);q(pt,e,Fe);const le=Pt();q(pt,n),q(Fe,e,Fe),q(Fe,n,le),q(le,e,Fe),q(le,n,le),R(Fe,oe,w),R(le,oe,w)}return R(i,Xs,x),R(i,$h,VI),{start:i,tokens:_S}}function KI(t,e,n){let r=n.length,i=0,o=[],s=[];for(;i<r;){let l=t,a=null,c=null,d=0,f=null,p=-1;for(;i<r&&!(a=l.go(n[i].t));)s.push(n[i++]);for(;i<r&&(c=a||l.go(n[i].t));)a=null,l=c,l.accepts()?(p=0,f=l):p>=0&&p++,i++,d++;if(p<0)i-=d,i<r&&(s.push(n[i]),i++);else{s.length>0&&(o.push(kd(Qy,e,s)),s=[]),i-=p,d-=p;const h=f.t,m=n.slice(i-d,i);o.push(kd(h,e,m))}}return s.length>0&&o.push(kd(Qy,e,s)),o}function kd(t,e,n){const r=n[0].s,i=n[n.length-1].e,o=e.slice(r,i);return new t(o,n)}const qI=typeof console<"u"&&console&&console.warn||(()=>{}),JI="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",ce={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function GI(){return mt.groups={},ce.scanner=null,ce.parser=null,ce.tokenQueue=[],ce.pluginQueue=[],ce.customSchemes=[],ce.initialized=!1,ce}function Yy(t,e=!1){if(ce.initialized&&qI(`linkifyjs: already initialized - will not register custom scheme "${t}" ${JI}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);ce.customSchemes.push([t,e])}function QI(){ce.scanner=HI(ce.customSchemes);for(let t=0;t<ce.tokenQueue.length;t++)ce.tokenQueue[t][1]({scanner:ce.scanner});ce.parser=WI(ce.scanner.tokens);for(let t=0;t<ce.pluginQueue.length;t++)ce.pluginQueue[t][1]({scanner:ce.scanner,parser:ce.parser});return ce.initialized=!0,ce}function Vh(t){return ce.initialized||QI(),KI(ce.parser.start,t,HS(ce.scanner.start,t))}Vh.scan=HS;function VS(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new Uh(n),i=Vh(t),o=[];for(let s=0;s<i.length;s++){const l=i[s];l.isLink&&(!e||l.t===e)&&r.check(l)&&o.push(l.toFormattedObject(r))}return o}const Wh="[\0- -\u2029]",YI=new RegExp(Wh),XI=new RegExp(`${Wh}$`),ZI=new RegExp(Wh,"g");function eO(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function tO(t){return new Qe({key:new zt("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(c=>c.docChanged)&&!n.doc.eq(r.doc),o=e.some(c=>c.getMeta("preventAutolink"));if(!i||o)return;const{tr:s}=r,l=kD(n.doc,[...e]);if(DD(l).forEach(({newRange:c})=>{const d=CD(r.doc,c,h=>h.isTextblock);let f,p;if(d.length>1)f=d[0],p=r.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ");else if(d.length){const h=r.doc.textBetween(c.from,c.to," "," ");if(!XI.test(h))return;f=d[0],p=r.doc.textBetween(f.pos,c.to,void 0," ")}if(f&&p){const h=p.split(YI).filter(Boolean);if(h.length<=0)return!1;const m=h[h.length-1],g=f.pos+p.lastIndexOf(m);if(!m)return!1;const v=Vh(m).map(y=>y.toObject(t.defaultProtocol));if(!eO(v))return!1;v.filter(y=>y.isLink).map(y=>({...y,from:g+y.start+1,to:g+y.end+1})).filter(y=>r.schema.marks.code?!r.doc.rangeHasMark(y.from,y.to,r.schema.marks.code):!0).filter(y=>t.validate(y.value)).filter(y=>t.shouldAutoLink(y.value)).forEach(y=>{Ih(y.from,y.to,r.doc).some(x=>x.mark.type===t.type)||s.addMark(y.from,y.to,t.type.create({href:y.href}))})}}),!!s.steps.length)return s}})}function nO(t){return new Qe({key:new zt("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,o;if(r.button!==0||!e.editable)return!1;let s=r.target;const l=[];for(;s.nodeName!=="DIV";)l.push(s),s=s.parentNode;if(!l.find(p=>p.nodeName==="A"))return!1;const a=jS(e.state,t.type.name),c=r.target,d=(i=c==null?void 0:c.href)!==null&&i!==void 0?i:a.href,f=(o=c==null?void 0:c.target)!==null&&o!==void 0?o:a.target;return c&&d?(window.open(d,f),!0):!1}}})}function rO(t){return new Qe({key:new zt("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:i}=e,{selection:o}=i,{empty:s}=o;if(s)return!1;let l="";r.content.forEach(c=>{l+=c.textContent});const a=VS(l,{defaultProtocol:t.defaultProtocol}).find(c=>c.isLink&&c.value===l);return!l||!a?!1:t.editor.commands.setMark(t.type,{href:a.href})}}})}function Br(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!t||t.replace(ZI,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const iO=an.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){Yy(t);return}Yy(t.scheme,t.optionalSlashes)})},onDestroy(){GI()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Br(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!Br(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Br(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Re(this.options.HTMLAttributes,t),0]:["a",Re(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Br(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Br(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[xi({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,i=VS(t).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:s=>!!Br(s,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(o=>e.push({text:o.value,data:{href:o.href},index:o.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(tO({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!Br(i,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(nO({type:this.type})),this.options.linkOnPaste&&t.push(rO({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),oO=t=>{if(!t.children.length)return;const e=t.querySelectorAll("span");e&&e.forEach(n=>{var r,i;const o=n.getAttribute("style"),s=(i=(r=n.parentElement)===null||r===void 0?void 0:r.closest("span"))===null||i===void 0?void 0:i.getAttribute("style");n.setAttribute("style",`${s};${o}`)})},sO=an.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!1}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&oO(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",Re(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;return t.doc.nodesBetween(e.from,e.to,(n,r)=>{if(n.isTextblock)return!0;n.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(o=>!!o))||t.removeMark(r,r+n.nodeSize,this.type)}),!0}}}}),lO=Ge.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var e;return(e=t.style.color)===null||e===void 0?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),aO=Ge.create({name:"fontSize",addGlobalAttributes(){return[{types:["textStyle"],attributes:{fontSize:{default:null,parseHTML:t=>t.style.fontSize||null,renderHTML:t=>t.fontSize?{style:`font-size: ${t.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:t=>({chain:e})=>e().setMark("textStyle",{fontSize:t}).run(),unsetFontSize:()=>({chain:t})=>t().setMark("textStyle",{fontSize:null}).run()}}});function cO({html:t,placeholder:e,onChangeHtml:n,contentStyle:r}){const i=b.useMemo(()=>[II.configure({heading:{levels:[1,2,3]}}),OI,iO.configure({openOnClick:!1,autolink:!1,linkOnPaste:!0}),sO,lO,aO],[]),o=AR({extensions:i,content:t||"",editorProps:{attributes:{"data-rich-editor":"1",style:"outline:none; min-height: 24px; "}},onUpdate:({editor:d})=>{n(d.getHTML())}});if(b.useEffect(()=>{if(!o)return;const d=o.getHTML(),f=t||"";d!==f&&o.commands.setContent(f,!1)},[o,t]),!o)return null;const s={border:"1px solid var(--color-border)",background:"var(--color-surface)",borderRadius:8,padding:"6px 10px",fontFamily:"var(--font-body)",fontSize:12,cursor:"pointer"},l={display:"flex",alignItems:"center",gap:6,flexWrap:"wrap"},a=d=>d?{background:"rgba(0,156,222,0.12)",borderColor:"rgba(0,156,222,0.35)"}:{},c=()=>{const d=o.getAttributes("link").href,f=window.prompt("Link URL",d||"")||"";if(!f){o.chain().focus().extendMarkRange("link").unsetLink().run();return}o.chain().focus().extendMarkRange("link").setLink({href:f}).run()};return u.jsxs("div",{style:{display:"grid",gap:10},children:[u.jsxs("div",{style:l,children:[u.jsx("button",{type:"button",style:{...s,...a(o.isActive("bold"))},onClick:()=>o.chain().focus().toggleBold().run(),children:u.jsx("b",{children:"B"})}),u.jsx("button",{type:"button",style:{...s,...a(o.isActive("italic"))},onClick:()=>o.chain().focus().toggleItalic().run(),children:u.jsx("i",{children:"I"})}),u.jsx("button",{type:"button",style:{...s,...a(o.isActive("underline"))},onClick:()=>o.chain().focus().toggleUnderline().run(),children:u.jsx("u",{children:"U"})}),u.jsx("button",{type:"button",style:{...s,...a(o.isActive("bulletList"))},onClick:()=>o.chain().focus().toggleBulletList().run(),children:" List"}),u.jsx("button",{type:"button",style:{...s,...a(o.isActive("orderedList"))},onClick:()=>o.chain().focus().toggleOrderedList().run(),children:"1. List"}),u.jsx("button",{type:"button",style:{...s,...a(o.isActive("blockquote"))},onClick:()=>o.chain().focus().toggleBlockquote().run(),children:"Quote"}),u.jsx("button",{type:"button",style:{...s,...a(o.isActive("link"))},onClick:c,children:"Link"}),u.jsx("span",{style:{width:1,height:22,background:"var(--color-border)",margin:"0 2px"}}),u.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:6,fontFamily:"var(--font-body)",fontSize:12,color:"var(--color-muted)"},children:["Color",u.jsx("input",{type:"color",value:o.getAttributes("textStyle").color||"#1A2B4A",onChange:d=>o.chain().focus().setColor(d.target.value).run(),style:{width:28,height:20,padding:0,border:"1px solid var(--color-border)",borderRadius:6,background:"transparent"}})]}),u.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:6,fontFamily:"var(--font-body)",fontSize:12,color:"var(--color-muted)"},children:["Size",u.jsxs("select",{value:o.getAttributes("textStyle").fontSize||"",onChange:d=>{const f=d.target.value;f?o.commands.setFontSize(f):o.commands.unsetFontSize()},style:{height:28,borderRadius:8,border:"1px solid var(--color-border)",background:"var(--color-surface)",padding:"0 8px",fontFamily:"var(--font-body)",fontSize:12},children:[u.jsx("option",{value:"",children:"Default"}),u.jsx("option",{value:"12px",children:"12"}),u.jsx("option",{value:"14px",children:"14"}),u.jsx("option",{value:"16px",children:"16"}),u.jsx("option",{value:"18px",children:"18"}),u.jsx("option",{value:"20px",children:"20"}),u.jsx("option",{value:"24px",children:"24"})]})]}),u.jsx("button",{type:"button",style:s,onClick:()=>o.chain().focus().undo().run(),children:"Undo"}),u.jsx("button",{type:"button",style:s,onClick:()=>o.chain().focus().redo().run(),children:"Redo"})]}),u.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:12,padding:12,background:"var(--color-surface)",minHeight:60,...r||{}},children:[e&&!o.getText().trim()?u.jsx("div",{style:{position:"absolute",opacity:0,pointerEvents:"none"},children:e}):null,u.jsx(vR,{editor:o})]})]})}const ut=(t=32,e=40)=>({padding:`${t}px ${e}px`});function uO({block:t,theme:e,editable:n,onUpdateBlock:r}){const i=t.backgroundStyle==="solid"?e.primary:`linear-gradient(135deg, ${e.primary} 0%, ${e.secondary} 60%, ${e.accent}44 100%)`;return u.jsxs("div",{className:"nap-white-section",style:{background:i,padding:"48px 40px",textAlign:"center",position:"relative",overflow:"hidden",color:"#fff"},children:[u.jsx("svg",{style:{position:"absolute",bottom:0,left:0,right:0,opacity:.08},viewBox:"0 0 800 60",fill:"none",preserveAspectRatio:"none",height:60,children:u.jsx("path",{d:"M0 40 Q200 0 400 30 Q600 60 800 20 L800 60 L0 60Z",fill:"white"})}),(t.logoDataUrl||t.logoUrl)&&u.jsx("div",{style:{marginBottom:20},children:u.jsx("img",{src:t.logoDataUrl||t.logoUrl,alt:"Logo",style:{maxHeight:60,maxWidth:240,borderRadius:8}})}),u.jsxs("div",{style:{fontFamily:e.fontMono,fontSize:11,letterSpacing:"0.22em",textTransform:"uppercase",color:"rgba(255,255,255,0.65)",marginBottom:12},children:[t.issueNumber,"  ",t.issueDate]}),u.jsx("h1",{style:{fontFamily:e.fontDisplay,fontSize:46,fontWeight:400,color:"#fff",margin:"0 0 10px",letterSpacing:"-0.02em",lineHeight:1.1},children:n?u.jsx(B,{value:t.title,placeholder:"Newsletter title",onCommit:o=>r({title:o}),style:{display:"block",width:"100%"}}):t.title}),u.jsx("p",{style:{fontFamily:e.fontDisplay,fontSize:20,fontStyle:"italic",color:"rgba(255,255,255,0.85)",margin:"0 0 18px",lineHeight:1.3},children:n?u.jsx(B,{value:t.subtitle,placeholder:"Subtitle",onCommit:o=>r({subtitle:o}),style:{display:"block",width:"100%"}}):t.subtitle}),u.jsx("div",{style:{height:1,background:"rgba(255,255,255,0.2)",maxWidth:280,margin:"0 auto 18px"}}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:13,color:"rgba(255,255,255,0.65)",margin:0,letterSpacing:"0.02em"},children:n?u.jsx(B,{value:t.tagline,placeholder:"Tagline",onCommit:o=>r({tagline:o}),style:{display:"block",width:"100%"}}):t.tagline})]})}function dO({block:t,theme:e}){const r={slow:60,medium:36,fast:20}[t.speed]||36,i="https://api.allorigins.win/get?url=",[o,s]=b.useState([]),l=b.useCallback(p=>{try{const m=new DOMParser().parseFromString(p,"text/xml");if(m.querySelector("parsererror"))return[];const g=Array.from(m.querySelectorAll("item"));return g.length?g.map(y=>{var x,S,k,w;return{text:((S=(x=y.querySelector("title"))==null?void 0:x.textContent)==null?void 0:S.trim())||"",url:((w=(k=y.querySelector("link"))==null?void 0:k.textContent)==null?void 0:w.trim())||""}}).filter(y=>!!y.text):Array.from(m.querySelectorAll("entry")).map(y=>{var x,S,k,w,E;return{text:((S=(x=y.querySelector("title"))==null?void 0:x.textContent)==null?void 0:S.trim())||"",url:((k=y.querySelector("link"))==null?void 0:k.getAttribute("href"))||((E=(w=y.querySelector("link"))==null?void 0:w.textContent)==null?void 0:E.trim())||""}}).filter(y=>!!y.text)}catch{return[]}},[]);b.useEffect(()=>{let p=!1;async function h(){if(t.sourceMode!=="rss"){s([]);return}const m=(t.rssUrls||[]).filter(Boolean);if(!m.length){s([]);return}const g=[];for(const S of m)try{const k=await fetch(i+encodeURIComponent(S),{cache:"no-store"});if(!k.ok)continue;const w=await k.json(),E=w&&typeof w.contents=="string"?w.contents:"";g.push(...l(E))}catch{}const v=new Set,x=g.filter(S=>{const k=S.url||S.text;return!k||v.has(k)?!1:(v.add(k),!0)}).slice(0,Math.max(1,t.rssMaxItems||20));p||s(x)}return h(),()=>{p=!0}},[t.sourceMode,(t.rssUrls||[]).join("|"),t.rssMaxItems,l]);const a=t.sourceMode==="rss"&&o.length>0,c=!a&&t.useLinks&&(t.links||[]).length>0,d=a?[...o,...o]:c?[...t.links||[],...t.links||[]]:[],f=a||c?[]:[...t.items||[],...t.items||[]];return u.jsxs("div",{className:"nap-ticker",style:{background:t.backgroundColor||e.primary,overflow:"hidden",height:40,display:"flex",alignItems:"center",color:t.textColor||"#fff"},children:[u.jsx("style",{children:"@keyframes ticker{from{transform:translateX(0)}to{transform:translateX(-50%)}}"}),u.jsx("div",{style:{display:"flex",gap:0,whiteSpace:"nowrap",animation:`ticker ${r}s linear infinite`,willChange:"transform"},children:d.length?d.map((p,h)=>u.jsxs("a",{href:p.url,target:"_blank",rel:"noopener noreferrer",style:{fontFamily:e.fontMono,fontSize:12,color:t.textColor||"#fff",padding:"0 32px",letterSpacing:"0.04em",display:"inline-flex",alignItems:"center",gap:10,textDecoration:"none",cursor:"pointer"},children:[u.jsx("span",{style:{width:5,height:5,borderRadius:"50%",background:e.accent,display:"inline-block",flexShrink:0}}),p.text,u.jsx("span",{style:{fontSize:10,opacity:.6},children:""})]},h)):f.map((p,h)=>u.jsxs("span",{style:{fontFamily:e.fontMono,fontSize:12,color:t.textColor||"#fff",padding:"0 32px",letterSpacing:"0.04em",display:"inline-flex",alignItems:"center",gap:10},children:[u.jsx("span",{style:{width:5,height:5,borderRadius:"50%",background:e.accent,display:"inline-block",flexShrink:0}}),p]},h))})]})}function fO({block:t,theme:e,editable:n,onUpdateBlock:r}){return t.style==="bold"?u.jsxs("div",{className:"nap-white-section",style:{background:e.primary,padding:"18px 40px",display:"flex",alignItems:"center",gap:16,color:"#fff"},children:[t.number>0&&u.jsx("span",{style:{fontFamily:e.fontMono,fontSize:32,fontWeight:300,color:"rgba(255,255,255,0.25)",lineHeight:1},children:String(t.number).padStart(2,"0")}),u.jsxs("div",{children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.22em",textTransform:"uppercase",color:"rgba(255,255,255,0.5)",marginBottom:2},children:"Section"}),u.jsx("div",{style:{fontFamily:e.fontDisplay,fontSize:22,color:"#fff",lineHeight:1.15},children:n?u.jsx(B,{value:t.label,placeholder:"Section title",onCommit:i=>r({label:i}),style:{display:"block",width:"100%"}}):t.label})]})]}):u.jsxs("div",{style:{padding:"32px 40px 16px"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:14,marginBottom:t.description?10:0},children:[u.jsxs("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.22em",textTransform:"uppercase",color:e.muted,whiteSpace:"nowrap"},children:[u.jsx("span",{children:t.number>0?`0${t.number}  `:" "}),n?u.jsx(B,{value:t.label,placeholder:"Section title",onCommit:i=>r({label:i}),style:{display:"block",width:"100%",color:e.muted}}):u.jsx("span",{children:t.label}),u.jsx("span",{children:" "})]}),u.jsx("div",{style:{flex:1,height:1,background:`linear-gradient(90deg, ${e.border}, transparent)`}})]}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:14,color:e.muted,margin:0,lineHeight:1.6},children:n?u.jsx(B,{value:t.description||"",placeholder:"Section description",multiline:!0,onCommit:i=>r({description:i}),style:{minHeight:18}}):t.description})]})}function pO({block:t,theme:e,editable:n,onUpdateBlock:r,onUpdateArticle:i}){return u.jsxs("div",{style:ut(24,40),children:[t.sectionTitle!==void 0&&u.jsx("h2",{style:{fontFamily:e.fontDisplay,fontSize:26,color:e.text,margin:"0 0 20px",fontWeight:400},children:n?u.jsx(B,{value:t.sectionTitle||"",placeholder:"Section title",onCommit:o=>r({sectionTitle:o}),style:{display:"block",width:"100%"}}):t.sectionTitle}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${t.columns}, 1fr)`,gap:20},children:(t.articles||[]).map(o=>u.jsx(hO,{article:o,theme:e,layout:t.layout,editable:n,onUpdate:s=>i(o.id,s)},o.id))})]})}function hO({article:t,theme:e,layout:n,editable:r,onUpdate:i}){const o={High:"#00A651",Moderate:"#F47920",Low:"#C0392B","Expert Opinion":"#7B2D8B"};return u.jsxs("div",{style:{border:`1px solid ${e.border}`,borderRadius:12,overflow:"hidden",background:e.surface,display:"flex",flexDirection:"column"},children:[t.imageUrl&&u.jsx("div",{style:{height:160,overflow:"hidden",flexShrink:0},children:u.jsx("img",{src:t.imageUrl,alt:t.title,style:{width:"100%",height:"100%",objectFit:"cover"}})}),u.jsxs("div",{style:{padding:n==="compact"?"10px 14px":"16px",flex:1,display:"flex",flexDirection:"column",minWidth:0},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8,flexWrap:"wrap",gap:6},children:[u.jsx("span",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.14em",textTransform:"uppercase",color:e.muted},children:r?u.jsx(B,{value:t.source||"",placeholder:"Source",onCommit:s=>i({source:s}),style:{display:"block",width:"100%",color:e.muted}}):t.source}),t.evidenceLevel&&u.jsx("span",{style:{background:o[t.evidenceLevel]+"22",color:o[t.evidenceLevel],border:`1px solid ${o[t.evidenceLevel]}44`,borderRadius:999,padding:"2px 8px",fontFamily:e.fontMono,fontSize:10,fontWeight:600},children:t.evidenceLevel})]}),u.jsx("h3",{style:{fontFamily:e.fontDisplay,fontSize:n==="compact"?16:20,color:e.text,margin:"0 0 10px",lineHeight:1.25,fontWeight:400},children:r?u.jsx(B,{value:t.title||"",placeholder:"Article title",multiline:!1,onCommit:s=>i({title:s}),style:{display:"block",width:"100%"}}):t.url?u.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",style:{color:e.text,textDecoration:"none"},onMouseEnter:s=>s.currentTarget.style.color=e.accent,onMouseLeave:s=>s.currentTarget.style.color=e.text,children:t.title}):t.title}),!n.includes("compact")&&u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:13,color:e.muted,margin:"0 0 12px",lineHeight:1.6,flex:1},children:r?u.jsx(B,{value:t.summary||"",placeholder:"Summary",multiline:!0,onCommit:s=>i({summary:s}),style:{minHeight:18,color:e.muted}}):t.summary}),u.jsxs("div",{style:{background:e.background,borderRadius:8,padding:"10px 12px",marginBottom:10},children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.12em",textTransform:"uppercase",color:e.muted,marginBottom:4},children:"Clinical Context"}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:13,color:e.text,margin:0,lineHeight:1.55},children:r?u.jsx(B,{value:t.clinicalContext||"",placeholder:"Clinical context",multiline:!0,onCommit:s=>i({clinicalContext:s}),style:{minHeight:18}}):t.clinicalContext})]}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:13,color:e.secondary,fontStyle:"italic",margin:"0 0 12px",borderLeft:`3px solid ${e.accent}`,paddingLeft:10,lineHeight:1.5},children:r?u.jsx(B,{value:t.myTake||"",placeholder:"My take",multiline:!0,onCommit:s=>i({myTake:s}),style:{minHeight:18,color:e.secondary}}):t.myTake}),t.url&&u.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",style:{marginTop:"auto",display:"inline-flex",alignItems:"center",gap:5,fontFamily:e.fontBody,fontSize:12,color:e.accent,fontWeight:600,textDecoration:"none"},children:["Read full paper ",u.jsx("span",{style:{fontSize:14},children:""})]})]})]})}function mO({block:t,theme:e,editable:n,onUpdateArticle:r}){const i=t.article,o=t.layout==="left-image",s=t.layout==="top-image",l=!!i.imageUrl;return s&&l?u.jsx("div",{style:ut(24,40),children:u.jsxs("div",{style:{border:`1px solid ${e.border}`,borderRadius:14,overflow:"hidden",background:e.surface},children:[u.jsx("img",{src:i.imageUrl,alt:i.title,style:{width:"100%",height:280,objectFit:"cover"}}),u.jsx("div",{style:{padding:24},children:u.jsx(Xy,{art:i,theme:e,accentColor:t.accentColor,editable:n,onUpdate:a=>r(i.id,a)})})]})}):u.jsx("div",{style:ut(24,40),children:u.jsxs("div",{style:{border:`1px solid ${e.border}`,borderRadius:14,overflow:"hidden",background:e.surface,display:"flex",flexDirection:l?o?"row":"row-reverse":"column"},children:[l&&u.jsx("div",{style:{width:"40%",flexShrink:0},children:u.jsx("img",{src:i.imageUrl,alt:i.title,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}})}),u.jsxs("div",{style:{flex:1,padding:28,borderLeft:l&&o?`4px solid ${t.accentColor||e.accent}`:void 0,minWidth:0},children:[u.jsxs("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.18em",textTransform:"uppercase",color:e.muted,marginBottom:12},children:[" Spotlight  ",i.source]}),u.jsx(Xy,{art:i,theme:e,accentColor:t.accentColor,editable:n,onUpdate:a=>r(i.id,a)})]})]})})}function Xy({art:t,theme:e,accentColor:n,editable:r,onUpdate:i}){return u.jsxs(u.Fragment,{children:[u.jsx("h2",{style:{fontFamily:e.fontDisplay,fontSize:28,color:e.text,margin:"0 0 12px",fontWeight:400,lineHeight:1.2},children:r?u.jsx(B,{value:t.title||"",placeholder:"Spotlight title",onCommit:o=>i({title:o}),style:{display:"block",width:"100%"}}):t.url?u.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",style:{color:e.text,textDecoration:"none"},children:t.title}):t.title}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:15,color:e.muted,margin:"0 0 16px",lineHeight:1.65},children:r?u.jsx(B,{value:t.summary||"",placeholder:"Summary",multiline:!0,onCommit:o=>i({summary:o}),style:{minHeight:22,color:e.muted}}):t.summary}),u.jsxs("div",{style:{background:e.background,borderRadius:10,padding:"14px 16px",marginBottom:14},children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.12em",textTransform:"uppercase",color:e.muted,marginBottom:6},children:"Clinical Context"}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:14,color:e.text,margin:0,lineHeight:1.6},children:r?u.jsx(B,{value:t.clinicalContext||"",placeholder:"Clinical context",multiline:!0,onCommit:o=>i({clinicalContext:o}),style:{minHeight:22}}):t.clinicalContext})]}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:14,fontStyle:"italic",color:e.secondary,margin:"0 0 16px",borderLeft:`3px solid ${n}`,paddingLeft:12,lineHeight:1.6},children:r?u.jsx(B,{value:t.myTake||"",placeholder:"My take",multiline:!0,onCommit:o=>i({myTake:o}),style:{minHeight:22,color:e.secondary}}):t.myTake}),t.url&&u.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",alignItems:"center",gap:8,padding:"9px 18px",background:n||e.accent,color:"#fff",borderRadius:8,fontFamily:e.fontBody,fontSize:13,fontWeight:600,textDecoration:"none"},children:"Read the paper "})]})}function gO({block:t,theme:e,editable:n,onUpdateBlock:r}){return u.jsxs("div",{style:ut(28,40),children:[u.jsxs("div",{style:{marginBottom:20},children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.18em",textTransform:"uppercase",color:e.accent,marginBottom:6},children:" AI Ethics & Governance"}),u.jsx("h2",{style:{fontFamily:e.fontDisplay,fontSize:26,color:e.text,margin:"0 0 6px",fontWeight:400},children:n?u.jsx(B,{value:t.heading||"",placeholder:"Heading",onCommit:i=>r({heading:i}),style:{display:"block",width:"100%"}}):t.heading}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:14,color:e.muted,margin:0},children:n?u.jsx(B,{value:t.subheading||"",placeholder:"Subheading",multiline:!0,onCommit:i=>r({subheading:i}),style:{minHeight:18,color:e.muted}}):t.subheading}),t.source!==void 0&&u.jsxs("div",{style:{fontFamily:e.fontMono,fontSize:11,color:e.muted,marginTop:6},children:["Source:"," ",n?u.jsx(B,{value:t.source||"",placeholder:"Source",onCommit:i=>r({source:i}),style:{display:"block",width:"100%",color:e.muted}}):t.url?u.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",style:{color:e.accent},children:t.source}):t.source]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:20},children:[u.jsxs("div",{style:{border:`1px solid ${e.border}`,borderRadius:12,padding:20,background:e.background},children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.14em",textTransform:"uppercase",color:"#C0392B",fontWeight:700,marginBottom:10},children:n?u.jsx(B,{value:t.leftTitle||"",placeholder:"Left title",onCommit:i=>r({leftTitle:i}),style:{display:"block",width:"100%",color:"#C0392B"}}):t.leftTitle}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:14,color:e.text,margin:0,lineHeight:1.65},children:n?u.jsx(B,{value:t.leftContent||"",placeholder:"Left content",multiline:!0,onCommit:i=>r({leftContent:i}),style:{minHeight:18}}):t.leftContent})]}),u.jsxs("div",{style:{border:`1px solid ${e.accent}44`,borderRadius:12,padding:20,background:e.accent+"0A"},children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.14em",textTransform:"uppercase",color:e.accent,fontWeight:700,marginBottom:10},children:n?u.jsx(B,{value:t.rightTitle||"",placeholder:"Right title",onCommit:i=>r({rightTitle:i}),style:{display:"block",width:"100%",color:e.accent}}):t.rightTitle}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:14,color:e.text,margin:0,lineHeight:1.65},children:n?u.jsx(B,{value:t.rightContent||"",placeholder:"Right content",multiline:!0,onCommit:i=>r({rightContent:i}),style:{minHeight:18}}):t.rightContent})]})]}),u.jsxs("div",{style:{marginTop:16,padding:"14px 18px",border:`1px solid ${e.border}`,borderRadius:12,borderLeft:`4px solid ${e.accent}`},children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.14em",textTransform:"uppercase",color:e.muted,marginBottom:6},children:"Clinical Perspective"}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:14,color:e.text,margin:0,lineHeight:1.65},children:n?u.jsx(B,{value:t.clinicalPerspective||"",placeholder:"Clinical perspective",multiline:!0,onCommit:i=>r({clinicalPerspective:i}),style:{minHeight:18}}):t.clinicalPerspective})]})]})}function yO({block:t,theme:e}){const n=t.dataUrl||t.url,i={full:"100%",wide:"80%",medium:"60%",small:"40%"}[t.width]||"100%";return n?u.jsxs("div",{style:{padding:"16px 40px",textAlign:t.alignment},children:[t.linkUrl?u.jsx("a",{href:t.linkUrl,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",maxWidth:i},children:u.jsx("img",{src:n,alt:t.alt,style:{width:"100%",borderRadius:t.borderRadius,display:"block"}})}):u.jsx("img",{src:n,alt:t.alt,style:{maxWidth:i,width:"100%",borderRadius:t.borderRadius,display:"inline-block"}}),t.caption&&u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:12,color:e.muted,margin:"8px 0 0",textAlign:"center"},children:t.caption})]}):u.jsx("div",{style:{padding:"24px 40px",textAlign:t.alignment},children:u.jsx("div",{style:{display:"inline-block",border:`2px dashed ${e.border}`,borderRadius:12,padding:"40px 60px",color:e.muted,fontFamily:e.fontBody,fontSize:13},children:" No image  configure in Block Settings"})})}function xO({block:t,theme:e,editable:n,onUpdateBlock:r}){const i={full:"100%",reading:"720px",narrow:"560px"};return u.jsx("div",{style:{padding:"16px 40px"},children:u.jsx("div",{style:{fontFamily:e.fontBody,color:e.text,lineHeight:1.7,maxWidth:i[t.maxWidth]||"100%",margin:"0 auto",textAlign:t.alignment,fontSize:15},children:n?u.jsx(cO,{html:t.html||"",placeholder:"Type here",onChangeHtml:o=>r({html:o})}):u.jsx("div",{dangerouslySetInnerHTML:{__html:t.html}})})})}function vO({block:t,theme:e,editable:n,onUpdateBlock:r}){return u.jsxs("div",{style:{padding:"16px 40px"},children:[u.jsxs("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.12em",textTransform:"uppercase",color:e.muted,marginBottom:8},children:[""," ",n?u.jsx(B,{value:t.label||"",placeholder:"Embed label",onCommit:i=>r({label:i}),style:{display:"block",width:"100%",color:e.muted}}):t.label]}),n?u.jsx(uT,{html:t.html||"",placeholder:"Paste HTML here",onCommit:i=>r({html:i}),style:{border:`1px dashed ${e.border}`,borderRadius:10,padding:12,minHeight:60,background:e.background}}):u.jsx("div",{dangerouslySetInnerHTML:{__html:t.html}})]})}function SO({block:t,theme:e,editable:n,onUpdateBlock:r}){return u.jsxs("div",{style:ut(28,40),children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.18em",textTransform:"uppercase",color:e.accent,marginBottom:8},children:" Prompt Like a Rockstar"}),u.jsx("h2",{style:{fontFamily:e.fontDisplay,fontSize:26,color:e.text,margin:"0 0 6px",fontWeight:400},children:n?u.jsx(B,{value:t.heading||"",placeholder:"Heading",onCommit:i=>r({heading:i}),style:{display:"block",width:"100%"}}):t.heading}),u.jsx("div",{style:{fontFamily:e.fontBody,fontSize:14,color:e.muted,marginBottom:20},children:n?u.jsxs(u.Fragment,{children:[u.jsx(B,{value:t.step||"",placeholder:"Step",onCommit:i=>r({step:i}),style:{display:"block",width:"100%",color:e.muted}}),"  Framework: ",u.jsx("strong",{children:u.jsx(B,{value:t.framework||"",placeholder:"Framework",onCommit:i=>r({framework:i}),style:{display:"block",width:"100%"}})})]}):u.jsxs(u.Fragment,{children:[t.step,"  Framework: ",u.jsx("strong",{children:t.framework})]})}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[u.jsxs("div",{style:{border:"1px solid #f5c6c0",borderRadius:12,padding:16,background:"#FEF0EE"},children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.14em",textTransform:"uppercase",color:"#C0392B",marginBottom:8},children:" Bad Prompt"}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:14,fontStyle:"italic",color:"#7A1E12",margin:0,lineHeight:1.55},children:n?u.jsx(B,{value:t.badPrompt||"",placeholder:"Bad prompt",multiline:!0,onCommit:i=>r({badPrompt:i}),style:{minHeight:18,color:"#7A1E12"}}):t.badPrompt})]}),u.jsxs("div",{style:{border:`1px solid ${e.accent}44`,borderRadius:12,padding:16,background:e.accent+"0D"},children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.14em",textTransform:"uppercase",color:e.accent,marginBottom:8},children:" Good Prompt"}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:14,color:e.text,margin:0,lineHeight:1.55},children:n?u.jsx(B,{value:t.goodPrompt||"",placeholder:"Good prompt",multiline:!0,onCommit:i=>r({goodPrompt:i}),style:{minHeight:18}}):t.goodPrompt})]})]}),u.jsx("div",{style:{marginTop:14,padding:"12px 16px",background:e.background,borderRadius:10,borderLeft:`3px solid ${e.accent}`},children:u.jsxs("p",{style:{fontFamily:e.fontBody,fontSize:13,color:e.muted,margin:0,lineHeight:1.6},children:[u.jsx("strong",{children:"Why this matters:"})," ",n?u.jsx(B,{value:t.explanation||"",placeholder:"Explanation",multiline:!0,onCommit:i=>r({explanation:i}),style:{minHeight:18,color:e.muted}}):t.explanation]})})]})}function bO({block:t,theme:e,editable:n,onUpdateBlock:r}){const i=[e.primary,e.secondary,e.accent,"#7B2D8B","#00A651"],o=(s,l)=>{const a=(t.steps||[]).map((c,d)=>d===s?{...c,...l}:c);r({steps:a})};return u.jsxs("div",{style:ut(28,40),children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.18em",textTransform:"uppercase",color:e.accent,marginBottom:8},children:" SBAR-P Framework"}),u.jsx("h2",{style:{fontFamily:e.fontDisplay,fontSize:26,color:e.text,margin:"0 0 20px",fontWeight:400},children:n?u.jsx(B,{value:t.heading||"",placeholder:"Heading",onCommit:s=>r({heading:s}),style:{display:"block",width:"100%"}}):t.heading}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:12,marginBottom:20},children:(t.steps||[]).map((s,l)=>u.jsxs("div",{style:{border:`1px solid ${e.border}`,borderRadius:10,padding:14,background:e.surface},children:[u.jsx("div",{style:{fontFamily:e.fontDisplay,fontSize:64,fontWeight:400,color:i[l]||e.primary,lineHeight:1,marginBottom:6,fontStyle:"italic"},children:s.letter}),u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:9,letterSpacing:"0.14em",textTransform:"uppercase",color:e.muted,marginBottom:8,paddingBottom:8,borderBottom:`2px solid ${i[l]||e.primary}`},children:n?u.jsx(B,{value:s.name||"",placeholder:"Step name",onCommit:a=>o(l,{name:a}),style:{display:"block",width:"100%",color:e.muted}}):s.name}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:12,color:e.text,margin:"0 0 10px",lineHeight:1.5},children:n?u.jsx(B,{value:s.description||"",placeholder:"Description",multiline:!0,onCommit:a=>o(l,{description:a}),style:{minHeight:18}}):s.description}),u.jsx("div",{style:{background:e.background,borderRadius:6,padding:"8px 10px",borderLeft:`3px solid ${i[l]||e.primary}`},children:u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:11,color:e.muted,margin:0,fontStyle:"italic",lineHeight:1.45},children:n?u.jsx(B,{value:s.example||"",placeholder:"Example",multiline:!0,onCommit:a=>o(l,{example:a}),style:{minHeight:18,color:e.muted}}):s.example})})]},s.letter))})]})}function kO({block:t,theme:e,editable:n,onUpdateBlock:r}){const[i,o]=b.useState(!1),s=()=>{navigator.clipboard.writeText(t.prompt||"").then(()=>{o(!0),setTimeout(()=>o(!1),1600)})};return u.jsx("div",{style:ut(28,40),children:u.jsxs("details",{style:{border:`1px solid ${e.border}`,borderRadius:12,overflow:"hidden",background:e.surface},children:[u.jsxs("summary",{style:{listStyle:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",gap:12,padding:"12px 14px",userSelect:"none"},children:[u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:2},children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.18em",textTransform:"uppercase",color:e.accent},children:" Template Prompt"}),u.jsx("div",{style:{fontFamily:e.fontDisplay,fontSize:18,color:e.text,fontWeight:500},children:n?u.jsx(B,{value:t.heading||"",placeholder:"Heading",onCommit:l=>r({heading:l})}):t.heading})]}),u.jsx("button",{type:"button",onClick:l=>{l.preventDefault(),l.stopPropagation(),s()},style:{padding:"7px 12px",background:i?e.accent:e.primary,border:"none",borderRadius:8,fontFamily:e.fontBody,fontSize:12,color:"#fff",cursor:"pointer",whiteSpace:"nowrap"},children:i?" Copied":" Copy"})]}),u.jsx("div",{style:{padding:"12px 14px",background:e.background,borderTop:`1px solid ${e.border}`},children:u.jsx("pre",{style:{fontFamily:e.fontMono,fontSize:12,color:e.text,margin:0,whiteSpace:"pre-wrap",lineHeight:1.6},children:n?u.jsx(B,{value:t.prompt||"",placeholder:"Template prompt",multiline:!0,onCommit:l=>r({prompt:l}),style:{minHeight:140,fontFamily:e.fontMono,fontSize:12}}):t.prompt})})]})})}function wO({block:t,theme:e}){const n=(t.items||[]).filter(Boolean);return u.jsx("div",{style:ut(18,40),children:u.jsxs("div",{style:{border:"1px solid #F4D38B",background:"#FFF7E6",borderRadius:12,padding:14},children:[u.jsx("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:10},children:u.jsxs("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.14em",textTransform:"uppercase",color:"#8A5A00"},children:[" ",t.heading||"Safety Reminders"]})}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:n.length<=2?"1fr":"1fr 1fr",gap:10},children:n.map((r,i)=>u.jsxs("div",{style:{background:"rgba(255,255,255,0.65)",border:`1px solid ${e.border}`,borderRadius:10,padding:12,display:"flex",gap:10},children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:11,color:"#8A5A00",marginTop:1},children:""}),u.jsx("div",{style:{fontFamily:e.fontBody,fontSize:13,color:e.text,lineHeight:1.6},children:r})]},i))})]})})}function CO({block:t,theme:e}){const[n,r]=b.useState(null),[i,o]=b.useState(null),s=a=>{navigator.clipboard.writeText(a.prompt).then(()=>{r(a.id),setTimeout(()=>r(null),2e3)})},l={"Differential Diagnosis":e.primary,"Discharge Summary":e.secondary,"Literature Review":e.accent,"Patient Education":"#00A651","EEG / EMG Report":"#7B2D8B",Research:"#F47920"};return u.jsxs("div",{style:ut(28,40),children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.18em",textTransform:"uppercase",color:e.accent,marginBottom:8},children:" Ready-to-Use Prompts"}),u.jsx("h2",{style:{fontFamily:e.fontDisplay,fontSize:26,color:e.text,margin:"0 0 6px",fontWeight:400},children:t.heading}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:14,color:e.muted,margin:"0 0 20px"},children:t.description}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12},children:(t.templates||[]).map(a=>{const c=i===a.id,d=n===a.id,f=l[a.category]||e.primary;return u.jsxs("div",{style:{border:`1px solid ${e.border}`,borderRadius:10,overflow:"hidden",background:e.surface,transition:"box-shadow 0.15s"},children:[u.jsx("div",{style:{padding:"12px 14px",borderBottom:c?`1px solid ${e.border}`:"none"},children:u.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:8},children:[u.jsxs("div",{style:{flex:1,minWidth:0},children:[u.jsx("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:4},children:u.jsx("span",{style:{fontFamily:e.fontMono,fontSize:9,letterSpacing:"0.12em",textTransform:"uppercase",color:"#fff",padding:"2px 7px",background:f,borderRadius:999},children:a.category})}),u.jsx("div",{style:{fontFamily:e.fontBody,fontSize:13,fontWeight:600,color:e.text,marginBottom:3},children:a.title}),u.jsx("div",{style:{fontFamily:e.fontBody,fontSize:11,color:e.muted},children:a.useCase})]}),u.jsxs("div",{style:{display:"flex",gap:4,flexShrink:0},children:[u.jsx("button",{onClick:()=>o(c?null:a.id),style:{padding:"5px 8px",background:"none",border:`1px solid ${e.border}`,borderRadius:6,fontFamily:e.fontBody,fontSize:11,color:e.muted,cursor:"pointer"},children:c?"Collapse":"Preview"}),u.jsx("button",{onClick:()=>s(a),style:{padding:"5px 10px",background:d?e.accent:e.primary,border:"none",borderRadius:6,fontFamily:e.fontBody,fontSize:11,color:"#fff",cursor:"pointer",transition:"background 0.2s",whiteSpace:"nowrap"},children:d?" Copied!":" Copy"})]})]})}),c&&u.jsx("div",{style:{padding:"10px 14px",background:e.background},children:u.jsx("pre",{style:{fontFamily:e.fontMono,fontSize:11,color:e.text,margin:0,whiteSpace:"pre-wrap",lineHeight:1.6},children:a.prompt})})]},a.id)})})]})}function EO({block:t,theme:e,editable:n,onUpdateBlock:r}){return u.jsxs("div",{style:ut(28,40),children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.18em",textTransform:"uppercase",color:e.accent,marginBottom:8},children:" AI Term of the Month"}),u.jsx("h2",{style:{fontFamily:e.fontDisplay,fontSize:34,color:e.text,margin:"0 0 20px",fontWeight:400},children:n?u.jsx(B,{value:t.term||"",placeholder:"Term",onCommit:i=>r({term:i}),style:{display:"block",width:"100%"}}):t.term}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:16},children:[{title:"Definition",key:"definition",content:t.definition},{title:"Relevance to Medicine",key:"relevance",content:t.relevance},{title:"Neurology Application",key:"neurologyApplication",content:t.neurologyApplication}].map(({title:i,key:o,content:s})=>u.jsxs("div",{style:{border:`1px solid ${e.border}`,borderRadius:10,padding:16,background:e.surface},children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.12em",textTransform:"uppercase",color:e.muted,marginBottom:8},children:i}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:13,color:e.text,margin:0,lineHeight:1.6},children:n?u.jsx(B,{value:s||"",placeholder:i,multiline:!0,onCommit:l=>r({[o]:l}),style:{minHeight:18}}):s})]},i))}),(t.relatedTerms||[]).length>0&&u.jsxs("div",{style:{marginTop:14,display:"flex",flexWrap:"wrap",gap:6},children:[u.jsx("span",{style:{fontFamily:e.fontMono,fontSize:10,color:e.muted,textTransform:"uppercase",letterSpacing:"0.1em",alignSelf:"center"},children:"Related:"}),t.relatedTerms.map(i=>u.jsx("span",{style:{fontFamily:e.fontBody,fontSize:12,padding:"3px 10px",background:e.background,border:`1px solid ${e.border}`,borderRadius:999,color:e.muted},children:i},i))]})]})}function TO({block:t,theme:e,editable:n,onUpdateBlock:r}){const i=t.imageDataUrl||t.imageUrl;return u.jsx("div",{style:ut(28,40),children:u.jsxs("div",{style:{display:"flex",gap:24,alignItems:"flex-start"},children:[u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:10,flexShrink:0},children:[u.jsxs("div",{style:{background:e.primary,borderRadius:10,padding:"14px 18px",textAlign:"center"},children:[u.jsx("div",{style:{fontFamily:e.fontDisplay,fontSize:28,color:"#fff",lineHeight:1,textShadow:"0 1px 0 rgba(0,0,0,0.18)"},children:n?u.jsx(B,{value:t.year||"",placeholder:"Year",onCommit:o=>r({year:o}),style:{display:"block",width:"100%",color:"#fff"}}):t.year}),u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,color:"rgba(255,255,255,0.85)",letterSpacing:"0.12em",textTransform:"uppercase",marginTop:4},children:"AI Case File"})]}),i&&u.jsx("div",{style:{width:100,height:80,borderRadius:8,overflow:"hidden",border:`1px solid ${e.border}`},children:u.jsx("img",{src:i,alt:t.title,style:{width:"100%",height:"100%",objectFit:"cover"}})})]}),u.jsxs("div",{style:{flex:1,minWidth:0},children:[u.jsx("h3",{style:{fontFamily:e.fontDisplay,fontSize:22,color:e.text,margin:"0 0 10px",fontWeight:400},children:n?u.jsx(B,{value:t.title||"",placeholder:"Title",onCommit:o=>r({title:o}),style:{display:"block",width:"100%"}}):t.title}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:14,color:e.muted,margin:"0 0 12px",lineHeight:1.65},children:n?u.jsx(B,{value:t.content||"",placeholder:"Content",multiline:!0,onCommit:o=>r({content:o}),style:{minHeight:18,color:e.muted}}):t.content}),t.significance&&u.jsx("div",{style:{background:e.background,borderRadius:8,padding:"10px 14px",borderLeft:`3px solid ${e.accent}`,marginBottom:12},children:u.jsxs("p",{style:{fontFamily:e.fontBody,fontSize:13,color:e.muted,margin:0,lineHeight:1.55},children:[u.jsx("strong",{children:"Significance:"})," ",t.significance]})}),(t.sourceUrl||t.sourceLabel)&&u.jsxs("div",{style:{fontFamily:e.fontMono,fontSize:11,color:e.muted},children:["Source: ",t.sourceUrl?u.jsx("a",{href:t.sourceUrl,target:"_blank",rel:"noopener noreferrer",style:{color:e.accent},children:t.sourceLabel||t.sourceUrl}):t.sourceLabel]})]})]})})}function MO({block:t,theme:e,editable:n,onUpdateBlock:r}){const i=(o,s)=>{const l=(t.hits||[]).map(a=>a.id===o?{...a,...s}:a);r({hits:l})};return u.jsxs("div",{style:ut(24,40),children:[u.jsxs("h2",{style:{fontFamily:e.fontDisplay,fontSize:26,color:e.text,margin:"0 0 16px",fontWeight:400},children:[""," ",n?u.jsx(B,{value:t.heading||"",placeholder:"Heading",onCommit:o=>r({heading:o}),style:{display:"block",width:"100%"}}):t.heading]}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:(t.hits||[]).map((o,s)=>u.jsxs("div",{style:{display:"flex",gap:14,alignItems:"flex-start",padding:"12px 14px",border:`1px solid ${e.border}`,borderRadius:10,background:e.surface},children:[u.jsx("span",{style:{fontFamily:e.fontMono,fontSize:18,color:e.accent,lineHeight:1,flexShrink:0,minWidth:28},children:String(s+1).padStart(2,"0")}),u.jsxs("div",{style:{flex:1,minWidth:0},children:[u.jsx("div",{style:{fontFamily:e.fontBody,fontSize:14,fontWeight:600,color:e.text,marginBottom:4,lineHeight:1.3},children:n?u.jsx(B,{value:o.title||"",placeholder:"Title",onCommit:l=>i(o.id,{title:l}),style:{display:"block",width:"100%"}}):o.url?u.jsx("a",{href:o.url,target:"_blank",rel:"noopener noreferrer",style:{color:e.text,textDecoration:"none"},children:o.title}):o.title}),u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,color:e.muted,letterSpacing:"0.1em",textTransform:"uppercase",marginBottom:4},children:n?u.jsx(B,{value:o.source||"",placeholder:"Source",onCommit:l=>i(o.id,{source:l}),style:{display:"block",width:"100%",color:e.muted}}):o.source}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:13,color:e.muted,margin:0,lineHeight:1.5},children:n?u.jsx(B,{value:o.summary||"",placeholder:"Summary",multiline:!0,onCommit:l=>i(o.id,{summary:l}),style:{minHeight:18,color:e.muted}}):o.summary})]}),o.url&&u.jsx("a",{href:o.url,target:"_blank",rel:"noopener noreferrer",style:{flexShrink:0,fontFamily:e.fontBody,fontSize:11,color:e.accent,fontWeight:600,textDecoration:"none"},children:"Read "})]},o.id))})]})}function jO({block:t,theme:e,editable:n,onUpdateBlock:r}){const i=t.imageDataUrl||t.imageUrl,o=t.imageFit||"contain",s=t.imageHeight;return u.jsx("div",{style:ut(28,40),children:u.jsxs("div",{style:{background:`linear-gradient(135deg, ${e.background}, ${e.surface})`,border:`1px solid ${e.border}`,borderRadius:16,overflow:"hidden"},children:[u.jsxs("div",{style:{padding:"16px 18px",borderBottom:`1px solid ${e.border}`,display:"flex",alignItems:"center",gap:10},children:[u.jsx("span",{style:{fontSize:18},children:""}),u.jsx("div",{style:{fontFamily:e.fontDisplay,fontSize:20,color:e.text,fontWeight:400},children:n?u.jsx(B,{value:t.heading||"Humor",placeholder:"Humor",onCommit:l=>r({heading:l}),style:{display:"block",width:"100%"}}):t.heading||"Humor"})]}),i&&u.jsxs("div",{style:{position:"relative"},children:[u.jsx("img",{src:i,alt:"Humor block",style:{width:"100%",display:"block",height:s?`${s}px`:"auto",objectFit:s?o:void 0}}),n&&u.jsxs("div",{style:{position:"absolute",bottom:8,right:8,display:"flex",gap:6,alignItems:"center",background:"rgba(0,0,0,0.55)",borderRadius:8,padding:"5px 10px"},children:[u.jsx("span",{style:{fontFamily:e.fontMono,fontSize:10,color:"#fff",whiteSpace:"nowrap"},children:s?`${s}px`:"Auto"}),u.jsx("input",{type:"range",min:80,max:600,step:20,value:s||300,onChange:l=>r({imageHeight:Number(l.target.value)}),style:{width:80,accentColor:e.accent,cursor:"pointer"},title:"Drag to set image height"}),u.jsxs("select",{value:o,onChange:l=>r({imageFit:l.target.value}),style:{fontFamily:e.fontMono,fontSize:10,background:"rgba(255,255,255,0.15)",color:"#fff",border:"none",borderRadius:4,padding:"2px 4px",cursor:"pointer"},title:"Image fit mode",children:[u.jsx("option",{value:"contain",children:"Fit (show all)"}),u.jsx("option",{value:"cover",children:"Fill (crop edges)"}),u.jsx("option",{value:"fill",children:"Stretch"})]}),s&&u.jsx("button",{onClick:()=>r({imageHeight:void 0}),style:{fontFamily:e.fontMono,fontSize:10,background:"rgba(255,255,255,0.2)",color:"#fff",border:"none",borderRadius:4,padding:"2px 6px",cursor:"pointer"},title:"Reset to auto height (show full image)",children:"Auto "})]})]}),u.jsxs("div",{style:{padding:"18px 22px",textAlign:"center"},children:[!i&&u.jsx("div",{style:{fontSize:44,marginBottom:10},children:t.emojiDecor||""}),u.jsx("div",{style:{fontFamily:e.fontBody,fontSize:14,color:e.muted,marginBottom:10},children:n?u.jsx(B,{value:t.attribution||"",placeholder:"Short caption (optional)",onCommit:l=>r({attribution:l}),style:{display:"block",width:"100%",color:e.muted}}):t.attribution}),u.jsx("div",{style:{fontFamily:e.fontBody,fontSize:16,color:e.text,fontStyle:"italic",lineHeight:1.65,maxWidth:760,margin:"0 auto"},children:n?u.jsx(B,{value:t.content||"",placeholder:"Punchline",multiline:!0,onCommit:l=>r({content:l}),style:{minHeight:18}}):t.content}),t.sourceUrl&&u.jsx("div",{style:{marginTop:10},children:u.jsx("a",{href:t.sourceUrl,target:"_blank",rel:"noopener noreferrer",style:{fontFamily:e.fontBody,fontSize:12,color:e.accent,textDecoration:"none"},children:"Source "})})]})]})})}function AO({block:t,theme:e}){return u.jsx("div",{style:{height:t.height,borderTop:t.showLine?`1px ${t.lineStyle} ${e.border}`:"none",margin:t.showLine?"0 40px":0}})}function DO({block:t,theme:e,editable:n,onUpdateBlock:r}){const i=(s,l)=>{const a=(t.updates||[]).map(c=>c.id===s?{...c,...l}:c);r({updates:a})},o={critical:{color:"#C0392B",bg:"#FEF0EE",border:"#f5c6c0",label:"CRITICAL",icon:""},high:{color:"#C06500",bg:"#FFF4E6",border:"#F6D860",label:"HIGH",icon:""},medium:{color:"#0057A8",bg:"#EEF4FF",border:"#C8D9EE",label:"MEDIUM",icon:""},informational:{color:"#005F6B",bg:"#F0FAFA",border:"#B2E0E4",label:"INFO",icon:""}};return u.jsxs("div",{style:ut(28,40),children:[u.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:20,flexWrap:"wrap",gap:10},children:[u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:6},children:[u.jsx("span",{style:{fontSize:18},children:""}),u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.18em",textTransform:"uppercase",color:"#C0392B"},children:"AI Safety Monitor"})]}),u.jsx("h2",{style:{fontFamily:e.fontDisplay,fontSize:26,color:e.text,margin:"0 0 4px",fontWeight:400},children:n?u.jsx(B,{value:t.heading||"",placeholder:"Heading",onCommit:s=>r({heading:s}),style:{display:"block",width:"100%"}}):t.heading}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:14,color:e.muted,margin:0},children:n?u.jsx(B,{value:t.subheading||"",placeholder:"Subheading",multiline:!0,onCommit:s=>r({subheading:s}),style:{minHeight:18,color:e.muted}}):t.subheading})]}),t.showLastUpdated&&u.jsxs("div",{style:{fontFamily:e.fontMono,fontSize:10,color:e.muted,textAlign:"right",lineHeight:1.4},children:["Last updated",u.jsx("br",{}),new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:(t.updates||[]).map(s=>{const l=o[s.severity]||o.informational;return u.jsx("div",{style:{border:`1px solid ${l.border}`,borderRadius:10,background:l.bg,overflow:"hidden"},children:u.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:12,padding:"14px 16px"},children:[u.jsxs("div",{style:{flexShrink:0,display:"flex",flexDirection:"column",alignItems:"center",gap:4,paddingTop:2},children:[u.jsx("span",{style:{fontSize:14},children:l.icon}),u.jsx("span",{style:{fontFamily:e.fontMono,fontSize:8,letterSpacing:"0.1em",textTransform:"uppercase",color:l.color,fontWeight:700},children:l.label})]}),u.jsxs("div",{style:{flex:1,minWidth:0},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4,flexWrap:"wrap"},children:[u.jsx("span",{style:{fontFamily:e.fontMono,fontSize:9,letterSpacing:"0.1em",textTransform:"uppercase",color:l.color,padding:"2px 7px",background:l.color+"18",borderRadius:999},children:n?u.jsx(B,{value:s.category||"",placeholder:"Category",onCommit:a=>i(s.id,{category:["FDA","Policy","Incident","Guideline","Alert","Research"].includes(a)?a:void 0}),style:{display:"block",width:"100%",color:l.color}}):s.category}),u.jsx("span",{style:{fontFamily:e.fontMono,fontSize:10,color:e.muted},children:n?u.jsx(B,{value:s.date||"",placeholder:"Date",onCommit:a=>i(s.id,{date:a}),style:{display:"block",width:"100%",color:e.muted}}):s.date})]}),u.jsx("div",{style:{fontFamily:e.fontBody,fontSize:14,fontWeight:600,color:e.text,marginBottom:4},children:n?u.jsx(B,{value:s.title||"",placeholder:"Title",onCommit:a=>i(s.id,{title:a}),style:{display:"block",width:"100%"}}):s.url?u.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",style:{color:e.text,textDecoration:"none"},children:s.title}):s.title}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:13,color:e.muted,margin:0,lineHeight:1.55},children:n?u.jsx(B,{value:s.summary||"",placeholder:"Summary",multiline:!0,onCommit:a=>i(s.id,{summary:a}),style:{minHeight:18,color:e.muted}}):s.summary}),s.url&&u.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",marginTop:8,fontFamily:e.fontBody,fontSize:11,color:l.color,fontWeight:600},children:"View full guidance "})]})]})},s.id)})})]})}function RO({block:t,theme:e}){return u.jsxs("div",{style:ut(28,40),children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:6},children:[u.jsx("div",{style:{width:28,height:28,background:e.primary,borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:u.jsx("span",{style:{fontSize:14},children:""})}),u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.18em",textTransform:"uppercase",color:e.primary},children:"Northwell Health"})]}),u.jsx("h2",{style:{fontFamily:e.fontDisplay,fontSize:26,color:e.text,margin:"0 0 4px",fontWeight:400},children:t.heading}),t.subheading&&u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:14,color:e.muted,margin:"0 0 20px"},children:t.subheading}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:14},children:(t.items||[]).slice(0,t.maxItems||6).map(n=>u.jsxs("div",{style:{border:`1px solid ${e.border}`,borderRadius:10,overflow:"hidden",background:e.surface,display:"flex",flexDirection:"column"},children:[n.imageUrl&&u.jsx("div",{style:{height:120,overflow:"hidden"},children:u.jsx("img",{src:n.imageUrl,alt:n.title,style:{width:"100%",height:"100%",objectFit:"cover"}})}),u.jsxs("div",{style:{padding:14,flex:1,display:"flex",flexDirection:"column"},children:[n.category&&u.jsx("span",{style:{fontFamily:e.fontMono,fontSize:9,letterSpacing:"0.12em",textTransform:"uppercase",color:e.accent,marginBottom:6,display:"block"},children:n.category}),u.jsx("div",{style:{fontFamily:e.fontBody,fontSize:13,fontWeight:600,color:e.text,marginBottom:6,lineHeight:1.35,flex:1,minWidth:0},children:n.url?u.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",style:{color:e.text,textDecoration:"none"},children:n.title}):n.title}),n.summary&&u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:12,color:e.muted,margin:"0 0 8px",lineHeight:1.5},children:n.summary}),n.pubDate&&u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,color:e.muted},children:new Date(n.pubDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),n.url&&u.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",style:{marginTop:8,fontFamily:e.fontBody,fontSize:11,color:e.accent,fontWeight:600,textDecoration:"none"},children:"Read more "})]})]},n.id))})]})}function IO({block:t,theme:e}){return u.jsx("div",{style:{padding:"24px 40px"},children:u.jsxs("div",{style:{border:`1px solid ${e.border}`,borderRadius:12,overflow:"hidden",background:e.surface},children:[u.jsxs("div",{style:{background:e.primary,padding:"12px 18px",display:"flex",alignItems:"center",gap:8},children:[u.jsx("span",{style:{fontSize:14},children:""}),u.jsx("span",{style:{fontFamily:e.fontMono,fontSize:11,letterSpacing:"0.14em",textTransform:"uppercase",color:"rgba(255,255,255,0.9)"},children:t.heading}),t.lastFetched&&u.jsxs("span",{style:{marginLeft:"auto",fontFamily:e.fontMono,fontSize:9,color:"rgba(255,255,255,0.5)"},children:["Updated ",new Date(t.lastFetched).toLocaleDateString()]})]}),u.jsx("div",{className:"nap-rss-scroll",style:{maxHeight:t.enableScroll?420:"none",overflowY:t.enableScroll?"auto":"visible"},children:(t.items||[]).length===0?u.jsx("div",{style:{padding:"24px 18px",textAlign:"center",color:e.muted,fontFamily:e.fontBody,fontSize:13},children:"No feed items yet  configure feeds in Block Settings and refresh."}):(t.items||[]).slice(0,t.maxItems||8).map((n,r)=>u.jsxs("div",{style:{padding:"11px 18px",borderBottom:`1px solid ${e.border}`,display:"flex",gap:10,alignItems:"flex-start"},children:[u.jsx("span",{style:{fontFamily:e.fontMono,fontSize:12,color:e.accent,flexShrink:0,minWidth:20,marginTop:1},children:String(r+1).padStart(2,"0")}),u.jsxs("div",{style:{flex:1,minWidth:0},children:[u.jsx("div",{style:{fontFamily:e.fontBody,fontSize:13,fontWeight:600,color:e.text,lineHeight:1.3,marginBottom:3},children:n.url?u.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",style:{color:e.text,textDecoration:"none"},onMouseEnter:i=>i.currentTarget.style.color=e.accent,onMouseLeave:i=>i.currentTarget.style.color=e.text,children:n.title}):n.title}),u.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[n.source&&u.jsx("span",{style:{fontFamily:e.fontMono,fontSize:9,color:e.muted,textTransform:"uppercase",letterSpacing:"0.08em"},children:n.source}),n.pubDate&&u.jsx("span",{style:{fontFamily:e.fontMono,fontSize:9,color:e.muted},children:new Date(n.pubDate).toLocaleDateString()})]})]}),n.url&&u.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",style:{flexShrink:0,fontFamily:e.fontBody,fontSize:11,color:e.accent,fontWeight:600,textDecoration:"none",paddingTop:1},children:""})]},r))})]})})}function OO({block:t,theme:e}){const n=`mailto:yelsherif@northwell.edu?subject=${encodeURIComponent("Neurology AI Pulse Newsletter Suggestions/Comments")}`;return u.jsxs("div",{className:"nap-white-section",style:{background:e.primary,padding:"44px 40px 36px",textAlign:"center",color:"#fff"},children:[(t.nextIssueDate||t.nextIssueTeaser)&&u.jsxs("div",{style:{background:"rgba(255,255,255,0.12)",borderRadius:10,padding:"14px 20px",marginBottom:28,display:"inline-block"},children:[u.jsx("div",{style:{fontFamily:e.fontMono,fontSize:10,letterSpacing:"0.14em",textTransform:"uppercase",color:"rgba(255,255,255,0.75)",marginBottom:4},children:"Next Issue"}),u.jsxs("div",{style:{fontFamily:e.fontBody,fontSize:14,color:"#fff"},children:[t.nextIssueDate,t.nextIssueTeaser?`  ${t.nextIssueTeaser}`:""]})]}),u.jsx("div",{style:{fontFamily:e.fontDisplay,fontSize:22,color:"#fff",marginBottom:4,fontWeight:400},children:t.institution}),u.jsx("div",{style:{fontFamily:e.fontBody,fontSize:14,color:"rgba(255,255,255,0.85)",marginBottom:4},children:t.department}),t.editors&&u.jsx("div",{style:{fontFamily:e.fontBody,fontSize:13,color:"rgba(255,255,255,0.75)",marginBottom:22},children:t.editors}),u.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:22},children:u.jsxs("a",{href:n,style:{display:"inline-flex",alignItems:"center",gap:10,fontFamily:e.fontBody,fontSize:13,fontWeight:700,color:"#fff",textDecoration:"none",padding:"10px 16px",borderRadius:12,border:"1px solid rgba(255,255,255,0.35)",background:"rgba(255,255,255,0.10)"},children:["Contact Us",u.jsx("span",{style:{opacity:.8},children:""})]})}),u.jsx("div",{style:{height:1,background:"rgba(255,255,255,0.18)",maxWidth:240,margin:"0 auto 18px"}}),u.jsx("p",{style:{fontFamily:e.fontBody,fontSize:11,color:"rgba(255,255,255,0.75)",margin:"0 0 8px",maxWidth:580,marginLeft:"auto",marginRight:"auto",lineHeight:1.6},children:t.disclaimer}),u.jsxs("p",{style:{fontFamily:e.fontMono,fontSize:10,color:"rgba(255,255,255,0.65)",margin:0,letterSpacing:"0.1em"},children:[" ",t.copyrightYear," ",t.institution]})]})}function Zy({block:t,theme:e,newsletter:n,editable:r,onUpdateBlock:i,onUpdateArticle:o,onDeleteArticle:s,onMoveArticle:l,onAddArticle:a}){const c={theme:e,newsletter:n,editable:r,onUpdateBlock:i},d={onUpdateArticle:(f,p)=>o(t.id,f,p),onDeleteArticle:f=>s(t.id,f),onMoveArticle:(f,p)=>l(t.id,f,p),onAddArticle:()=>a(t.id)};switch(t.type){case"header":return u.jsx(uO,{block:t,...c});case"ticker":return u.jsx(dO,{block:t,...c});case"section-divider":return u.jsx(fO,{block:t,...c});case"article-grid":return u.jsx(pO,{block:t,...c,...d});case"spotlight":return u.jsx(mO,{block:t,...c,...d});case"ethics-split":return u.jsx(gO,{block:t,...c});case"image":return u.jsx(yO,{block:t,...c});case"text":return u.jsx(xO,{block:t,...c});case"html-embed":return u.jsx(vO,{block:t,...c});case"prompt-masterclass":return u.jsx(SO,{block:t,...c});case"sbar-prompt":return u.jsx(bO,{block:t,...c});case"prompt-template":return u.jsx(kO,{block:t,...c});case"safety-reminders":return u.jsx(wO,{block:t,...c});case"clinical-prompt-templates":return u.jsx(CO,{block:t,...c});case"term-of-month":return u.jsx(EO,{block:t,...c});case"ai-case-file":return u.jsx(TO,{block:t,...c});case"quick-hits":return u.jsx(MO,{block:t,...c});case"humor":return u.jsx(jO,{block:t,...c});case"spacer":return u.jsx(AO,{block:t,...c});case"footer":return u.jsx(OO,{block:t,...c});case"ai-safety":return u.jsx(DO,{block:t,...c});case"northwell-spotlight":return u.jsx(RO,{block:t,...c});case"rss-sidebar":return u.jsx(IO,{block:t,...c});default:return u.jsxs("div",{style:{padding:16,fontFamily:"monospace",fontSize:12,color:"#999"},children:["Unknown block: ",t.type]})}}function NO({newsletter:t,editorState:e,onSelectBlock:n,onMoveBlock:r,onDeleteBlock:i,onDuplicateBlock:o,onAddBlock:s,onUpdateBlock:l,onUpdateArticle:a,onDeleteArticle:c,onMoveArticle:d,onAddArticle:f}){const{blockOrder:p,blocks:h,theme:m}=t,{selectedBlockId:g,previewMode:v,zoom:y}=e,x=$2(xg(ch,{activationConstraint:{distance:6}}),xg(lh)),S=b.useCallback(E=>{const{active:C,over:j}=E;if(!j||C.id===j.id)return;const O=p.indexOf(String(C.id)),N=p.indexOf(String(j.id));O!==-1&&N!==-1&&r(O,N)},[p,r]),k=800,w=y/100;return u.jsx("div",{style:{flex:1,overflow:"auto",background:"var(--color-bg)",display:"flex",flexDirection:"column",alignItems:"center",padding:v?"32px 0":"24px 0 80px"},children:u.jsx("div",{style:{width:k*w,transformOrigin:"top center",transform:`scale(${w})`,marginBottom:w<1?`calc((${w} - 1) * 100%)`:0},children:u.jsxs("div",{id:"nap-paper",style:{width:k,background:m.surface,boxShadow:v?"none":"0 0 0 1px rgba(0,0,0,0.05), 0 8px 40px rgba(0,0,0,0.12)",borderRadius:v?0:12,overflow:"hidden",minHeight:400},children:[u.jsx(HE,{sensors:x,collisionDetection:U2,onDragEnd:S,children:u.jsx(tT,{items:p,strategy:ZE,children:p.map((E,C)=>{const j=h[E];return j?u.jsx(zO,{id:E,block:j,idx:C,total:p.length,selected:g===E,previewMode:v,theme:t.theme,newsletter:t,onSelect:()=>n(g===E?null:E),onDelete:()=>i(E),onDuplicate:()=>o(E),onMoveUp:()=>r(C,C-1),onMoveDown:()=>r(C,C+1),onAddAfter:O=>s(O,E),onUpdateBlock:O=>l(E,O),onUpdateArticle:a,onDeleteArticle:c,onMoveArticle:d,onAddArticle:f},E):null})})}),p.length===0&&u.jsxs("div",{style:{padding:80,textAlign:"center",color:"var(--color-muted)",fontFamily:"var(--font-body)"},children:[u.jsx("div",{style:{fontSize:48,marginBottom:16},children:""}),u.jsx("div",{style:{fontSize:18,fontFamily:"var(--font-display)",marginBottom:8},children:"Empty newsletter"}),u.jsx("div",{style:{fontSize:14},children:"Use the Blocks panel to add your first block."})]})]})})})}function zO({id:t,block:e,idx:n,total:r,selected:i,previewMode:o,theme:s,newsletter:l,onSelect:a,onDelete:c,onDuplicate:d,onMoveUp:f,onMoveDown:p,onAddAfter:h,onUpdateBlock:m,onUpdateArticle:g,onDeleteArticle:v,onMoveArticle:y,onAddArticle:x}){const{attributes:S,listeners:k,setNodeRef:w,transform:E,transition:C,isDragging:j}=aT({id:t}),O={transform:Bs.Transform.toString(E),transition:C,opacity:j?.4:1,position:"relative"};return o?u.jsx("div",{ref:w,style:O,children:u.jsx(Zy,{block:e,theme:s,newsletter:l,editable:!1,onUpdateBlock:m,onUpdateArticle:g,onDeleteArticle:v,onMoveArticle:y,onAddArticle:x})}):u.jsxs("div",{ref:w,style:O,children:[u.jsxs("div",{onClick:a,style:{position:"relative",cursor:"pointer",outline:i?"2px solid var(--color-accent)":"2px solid transparent",outlineOffset:-2,transition:"outline 0.1s"},children:[u.jsx(Zy,{block:e,theme:s,newsletter:l,editable:i,onUpdateBlock:m,onUpdateArticle:g,onDeleteArticle:v,onMoveArticle:y,onAddArticle:x}),i&&u.jsxs("div",{onClick:N=>N.stopPropagation(),style:{position:"absolute",top:6,right:6,display:"flex",alignItems:"center",gap:4,background:"var(--color-primary)",borderRadius:8,padding:"4px 6px",boxShadow:"0 4px 16px rgba(0,0,0,0.2)",zIndex:10},children:[u.jsx(LO,{block:e}),u.jsx("div",{style:{width:1,height:16,background:"rgba(255,255,255,0.2)",margin:"0 2px"}}),u.jsx(Bo,{icon:u.jsx(eC,{size:12}),onClick:f,disabled:n===0,title:"Move up"}),u.jsx(Bo,{icon:u.jsx(Zw,{size:12}),onClick:p,disabled:n===r-1,title:"Move down"}),u.jsx(Bo,{icon:u.jsx(tC,{size:12}),onClick:d,title:"Duplicate"}),u.jsx(Bo,{icon:u.jsx(bv,{size:12}),onClick:a,title:"Settings",highlight:!0}),u.jsx(Bo,{icon:u.jsx(So,{size:12}),onClick:()=>{confirm("Delete this block?")&&c()},title:"Delete",danger:!0})]}),i&&u.jsx("div",{...S,...k,onClick:N=>N.stopPropagation(),style:{position:"absolute",top:6,left:6,background:"var(--color-primary)",borderRadius:6,padding:"4px 6px",cursor:"grab",color:"rgba(255,255,255,0.7)",display:"flex",alignItems:"center",zIndex:10},title:"Drag to reorder",children:u.jsx(sC,{size:14})})]}),i&&u.jsx(PO,{onAdd:h})]})}function LO({block:t}){const e=wf[t.type]||t.type,n=e.split("  ")[0],r=e.split("  ").slice(1).join("").trim();return u.jsxs("span",{style:{fontFamily:"var(--font-mono)",fontSize:10,color:"rgba(255,255,255,0.7)",letterSpacing:"0.1em",textTransform:"uppercase"},children:[n," ",r]})}function Bo({icon:t,onClick:e,disabled:n,title:r,highlight:i,danger:o}){return u.jsx("button",{onClick:e,disabled:n,title:r,style:{display:"flex",alignItems:"center",justifyContent:"center",width:26,height:26,background:o?"rgba(192,57,43,0.4)":i?"rgba(0,156,222,0.5)":"rgba(255,255,255,0.12)",border:"none",borderRadius:6,color:"#fff",cursor:n?"not-allowed":"pointer",opacity:n?.4:1,transition:"background 0.12s"},onMouseEnter:s=>{n||(s.currentTarget.style.background=o?"rgba(192,57,43,0.65)":"rgba(255,255,255,0.25)")},onMouseLeave:s=>{s.currentTarget.style.background=o?"rgba(192,57,43,0.4)":i?"rgba(0,156,222,0.5)":"rgba(255,255,255,0.12)"},children:t})}function PO({onAdd:t}){const[e,n]=Y.useState(!1),r=[{type:"article-grid",label:" Article Grid"},{type:"spotlight",label:" Spotlight"},{type:"text",label:" Text"},{type:"image",label:" Image"},{type:"section-divider",label:" Divider"},{type:"spacer",label:" Spacer"},{type:"quick-hits",label:" Quick Hits"},{type:"ai-safety",label:" AI Safety"},{type:"northwell-spotlight",label:" Northwell"},{type:"rss-sidebar",label:" RSS Feed"},{type:"prompt-template",label:" Template Prompt"},{type:"safety-reminders",label:" Safety Reminders"},{type:"clinical-prompt-templates",label:" Prompts"},{type:"html-embed",label:" HTML"}];return u.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",height:32,zIndex:5},children:[u.jsx("div",{style:{position:"absolute",left:0,right:0,top:"50%",height:1,background:"var(--color-accent)",opacity:.3}}),u.jsxs("button",{onClick:i=>{i.stopPropagation(),n(o=>!o)},style:{position:"relative",display:"flex",alignItems:"center",gap:5,padding:"4px 12px",background:"var(--color-accent)",border:"none",borderRadius:999,color:"#fff",fontSize:11,fontFamily:"var(--font-body)",cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.15)"},children:[u.jsx(Lr,{size:11})," Add block here"]}),e&&u.jsx("div",{style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",marginTop:4,background:"var(--color-surface)",border:"1px solid var(--color-border)",borderRadius:10,boxShadow:"0 8px 32px rgba(0,0,0,0.15)",zIndex:100,padding:8,display:"flex",flexWrap:"wrap",gap:4,width:340},onClick:i=>i.stopPropagation(),children:r.map(({type:i,label:o})=>u.jsx("button",{onClick:()=>{t(i),n(!1)},style:{padding:"6px 10px",background:"var(--color-bg)",border:"1px solid var(--color-border)",borderRadius:6,fontFamily:"var(--font-body)",fontSize:12,color:"var(--color-text)",cursor:"pointer"},onMouseEnter:s=>{s.currentTarget.style.borderColor="var(--color-accent)"},onMouseLeave:s=>{s.currentTarget.style.borderColor="var(--color-border)"},children:o},i))})]})}function $O(){const{newsletter:t,load:e,addBlock:n,deleteBlock:r,updateBlock:i,moveBlock:o,duplicateBlock:s,updateTheme:l,updateMeta:a,addArticle:c,updateArticle:d,deleteArticle:f,moveArticle:p,addQuickHit:h,updateQuickHit:m,deleteQuickHit:g}=Vw(),{autosave:v,loadAutosave:y,saveVersion:x,deleteVersion:S,versions:k,exportJSON:w,importJSON:E}=Ww(),C=Qw(),[j,O]=b.useState({selectedBlockId:null,activePanel:"blocks",previewMode:!1,zoom:100}),[N,K]=b.useState(""),[de,he]=b.useState("");b.useEffect(()=>{_w(t.theme)},[t.theme]),b.useEffect(()=>{const U=y();U&&(e(U),K("Loaded autosave"))},[]),Kw(t,v);const oe=b.useCallback(U=>{he(U),setTimeout(()=>he(""),3e3)},[]),pt=b.useCallback(()=>{v(t),K(new Date().toLocaleTimeString()),oe("Saved ")},[t,v,oe]),Fe=b.useCallback(()=>{const U=prompt("Version name (optional):")||void 0;x(t,U),oe("Version saved")},[t,x,oe]),le=b.useCallback(async U=>{try{const fe=await E(U);e(fe),oe("Imported ")}catch(fe){oe(`Import failed: ${fe.message}`)}},[E,e,oe]),z=b.useCallback(U=>O(fe=>({...fe,activePanel:U})),[]),_=b.useCallback(U=>O(fe=>({...fe,selectedBlockId:U})),[]),V=b.useCallback(()=>O(U=>({...U,previewMode:!U.previewMode,selectedBlockId:null})),[]),ne=b.useCallback(U=>O(fe=>({...fe,zoom:U})),[]);return u.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh",background:"var(--color-bg)",fontFamily:"var(--font-body)",overflow:"hidden"},children:[u.jsx(WC,{newsletter:t,editorState:j,lastSaved:N,onSave:pt,onSaveVersion:Fe,onExportJson:()=>w(t),onImport:le,onTogglePreview:V,onZoomChange:ne,onUpdateMeta:a}),u.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[!j.previewMode&&u.jsx(x2,{newsletter:t,editorState:j,rss:C,versions:k,onSetPanel:z,onAddBlock:n,onSelectBlock:_,onUpdateBlock:i,onUpdateTheme:l,onRestoreVersion:U=>{e(U.newsletter),oe("Version restored")},onDeleteVersion:S,onAddArticle:c,onUpdateArticle:d,onDeleteArticle:f,onAddQuickHit:h,onUpdateQuickHit:m,onDeleteQuickHit:g}),u.jsx(NO,{newsletter:t,editorState:j,onSelectBlock:_,onMoveBlock:o,onDeleteBlock:r,onDuplicateBlock:s,onAddBlock:n,onUpdateBlock:i,onUpdateArticle:d,onDeleteArticle:f,onMoveArticle:p,onAddArticle:c})]}),de&&u.jsx("div",{style:{position:"fixed",bottom:24,right:24,zIndex:9999,background:"var(--color-primary)",color:"#fff",padding:"12px 20px",borderRadius:12,fontFamily:"var(--font-body)",fontSize:14,boxShadow:"0 8px 32px rgba(0,0,0,0.25)",animation:"fadeInUp 0.2s ease"},children:de})]})}wd.createRoot(document.getElementById("root")).render(u.jsx(Y.StrictMode,{children:u.jsx($O,{})}));
